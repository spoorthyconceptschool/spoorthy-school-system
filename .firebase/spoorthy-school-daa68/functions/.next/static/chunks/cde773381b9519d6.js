(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let l=t.forwardRef(({className:e,type:t,...l},r)=>(0,a.jsx)("input",{type:t,className:(0,s.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",e),ref:r,...l}));l.displayName="Input",e.s(["Input",()=>l])},76639,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(26999),l=e.i(37727),r=e.i(75157);let i=s.Root,d=s.Trigger,o=s.Portal;s.Close;let n=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)(s.Overlay,{ref:l,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));n.displayName=s.Overlay.displayName;let c=t.forwardRef(({className:e,children:t,...i},d)=>(0,a.jsxs)(o,{children:[(0,a.jsx)(n,{}),(0,a.jsxs)(s.Content,{ref:d,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...i,children:[t,(0,a.jsxs)(s.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=s.Content.displayName;let m=({className:e,...t})=>(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let x=({className:e,...t})=>(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="DialogFooter";let p=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)(s.Title,{ref:l,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));p.displayName=s.Title.displayName;let u=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)(s.Description,{ref:l,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));u.displayName=s.Description.displayName,e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>u,"DialogFooter",()=>x,"DialogHeader",()=>m,"DialogTitle",()=>p,"DialogTrigger",()=>d])},84774,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let l=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:l,className:(0,s.cn)("w-full caption-bottom text-sm",e),...t})}));l.displayName="Table";let r=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("thead",{ref:l,className:(0,s.cn)("[&_tr]:border-b",e),...t}));r.displayName="TableHeader";let i=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("tbody",{ref:l,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...t}));i.displayName="TableBody",t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("tfoot",{ref:l,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("tr",{ref:l,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let o=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("th",{ref:l,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));o.displayName="TableHead";let n=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("td",{ref:l,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));n.displayName="TableCell",t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("caption",{ref:l,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption",e.s(["Table",()=>l,"TableBody",()=>i,"TableCell",()=>n,"TableHead",()=>o,"TableHeader",()=>r,"TableRow",()=>d])},69049,41071,e=>{"use strict";var a=e.i(43476),t=e.i(84774),s=e.i(75157),l=e.i(19455);let r=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>r],41071);var i=e.i(55146);function d({data:e,columns:d,isLoading:o,onRowClick:n,actions:c}){return o?(0,a.jsx)("div",{className:"w-full h-48 flex items-center justify-center bg-white/5 rounded-xl animate-pulse",children:(0,a.jsx)("div",{className:"h-4 w-4 bg-accent/50 rounded-full animate-ping"})}):(0,a.jsxs)("div",{className:"w-full space-y-3",children:[(0,a.jsx)("div",{className:"overflow-x-auto rounded-xl md:rounded-2xl border border-white/10 bg-black/20 backdrop-blur-md custom-scrollbar",children:(0,a.jsxs)(t.Table,{className:"w-full",children:[(0,a.jsx)(t.TableHeader,{className:"bg-white/5",children:(0,a.jsxs)(t.TableRow,{className:"border-white/10 hover:bg-transparent",children:[d.map(e=>(0,a.jsx)(t.TableHead,{className:(0,s.cn)("text-muted-foreground font-black uppercase text-[7px] md:text-[10px] tracking-widest h-8 md:h-12 whitespace-nowrap px-2 md:px-6 italic",e.headerClassName),children:e.header},e.key)),c&&(0,a.jsx)(t.TableHead,{className:"w-[30px] md:w-[50px] whitespace-nowrap px-2 md:px-6"})]})}),(0,a.jsx)(t.TableBody,{children:0===e.length?(0,a.jsx)(t.TableRow,{children:(0,a.jsx)(t.TableCell,{colSpan:d.length+ +!!c,className:"h-24 md:h-32 text-center text-muted-foreground border-white/10 whitespace-nowrap text-[10px] md:text-sm italic",children:"No results found."})}):e.map((e,o)=>(0,a.jsxs)(t.TableRow,{className:(0,s.cn)("border-white/5 transition-all duration-300 hover:bg-[#64FFDA]/5 group cursor-default",n&&"cursor-pointer"),onClick:()=>n?.(e),children:[d.map(l=>(0,a.jsx)(t.TableCell,{className:(0,s.cn)("py-2 md:py-4 px-2 md:px-6 font-medium whitespace-nowrap text-[10px] md:text-sm",l.cellClassName),children:(0,a.jsx)("div",{className:"flex flex-col",children:l.render?l.render(e,o):(0,a.jsx)("span",{className:"text-white group-hover:text-accent transition-colors",children:e[l.key]})})},`${e.id}-${l.key}`)),c&&(0,a.jsx)(t.TableCell,{className:"px-2 md:px-6",children:(0,a.jsxs)(i.DropdownMenu,{children:[(0,a.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(l.Button,{variant:"ghost",className:"h-7 w-7 md:h-8 md:w-8 p-0 hover:bg-white/10 text-muted-foreground hover:text-white",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,a.jsx)(r,{className:"h-3 w-3 md:h-4 md:w-4"})]})}),(0,a.jsxs)(i.DropdownMenuContent,{align:"end",className:"bg-[#0A192F] border-white/10 backdrop-blur-xl rounded-xl",children:[(0,a.jsx)(i.DropdownMenuLabel,{className:"text-[10px] uppercase font-black tracking-widest text-muted-foreground/60 p-3 italic",children:"Operations"}),(0,a.jsx)(i.DropdownMenuSeparator,{className:"bg-white/5"}),(0,a.jsx)("div",{className:"p-1",children:c(e)})]})]})})]},e.id||o))})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 md:py-4 px-3 md:px-6 bg-white/5 border border-white/10 rounded-xl md:rounded-2xl",children:[(0,a.jsxs)("div",{className:"text-[8px] md:text-xs font-black uppercase tracking-widest text-muted-foreground italic",children:["Scope: ",(0,a.jsxs)("span",{className:"text-white ml-1",children:[e.length," items"]})]}),(0,a.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Prev"}),(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Next"})]})]})]})}e.s(["DataTable",()=>d],69049)},22915,e=>{"use strict";let a=(0,e.i(75254).default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);e.s(["Archive",()=>a],22915)},92930,e=>{"use strict";let a=(0,e.i(75254).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>a],92930)},92818,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(19455),l=e.i(93479),r=e.i(76639),i=e.i(69049),d=e.i(7233),o=e.i(92930),n=e.i(22915),c=e.i(31278),m=e.i(72498),x=e.i(59141);e.i(1465);var p=e.i(34991);function u(){let{villages:e,loading:u}=(0,m.useMasterData)(),h=Object.values(e||{}),[f,g]=(0,t.useState)(!0);(0,t.useEffect)(()=>{if(u){let e=setTimeout(()=>g(!1),3e3);return()=>clearTimeout(e)}g(!1)},[u]);let[b,j]=(0,t.useState)(!1),[w,N]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),[T,k]=(0,t.useState)({name:"",code:""}),C=async e=>{e.preventDefault(),N(!0);try{let e=new Promise((e,a)=>setTimeout(()=>a(Error("Database operation timed out. Please check your internet connection or Firebase configuration.")),5e3));if(v){let a=(0,p.ref)(x.rtdb,`master/villages/${v}`);await Promise.race([(0,p.update)(a,{name:T.name,code:T.code.toUpperCase()}),e])}else{let a=(0,p.push)((0,p.ref)(x.rtdb,"master/villages"));await Promise.race([(0,p.set)(a,{id:a.key,name:T.name,code:T.code.toUpperCase(),active:!0,studentCount:0}),e])}j(!1),k({name:"",code:""}),y(null)}catch(e){console.error(e),alert(`Failed to save village: ${e.message}`)}finally{N(!1)}},D=async e=>{try{await (0,p.update)((0,p.ref)(x.rtdb,`master/villages/${e.id}`),{active:!e.active})}catch(e){console.error(e)}},R=[{key:"name",header:"Village Name",render:e=>(0,a.jsx)("span",{className:"font-bold",children:e.name})},{key:"code",header:"Code",render:e=>(0,a.jsx)("span",{className:"font-mono text-xs",children:e.code})},{key:"active",header:"Status",render:e=>(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${e.active?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:e.active?"Active":"Inactive"})}];return(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0",children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold",children:"Villages"}),(0,a.jsxs)(r.Dialog,{open:b,onOpenChange:e=>{j(e),e||(y(null),k({name:"",code:""}))},children:[(0,a.jsx)(r.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{className:"w-full sm:w-auto bg-accent text-accent-foreground",children:[(0,a.jsx)(d.Plus,{size:16,className:"mr-2"})," Add Village"]})}),(0,a.jsxs)(r.DialogContent,{children:[(0,a.jsx)(r.DialogHeader,{children:(0,a.jsx)(r.DialogTitle,{children:v?"Edit Village":"Add Village"})}),(0,a.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Name"}),(0,a.jsx)(l.Input,{required:!0,value:T.name,onChange:e=>k({...T,name:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Code (Short)"}),(0,a.jsx)(l.Input,{required:!0,value:T.code,onChange:e=>k({...T,code:e.target.value}),maxLength:4})]}),(0,a.jsx)(s.Button,{type:"submit",disabled:w,className:"w-full",children:w?(0,a.jsx)(c.Loader2,{className:"animate-spin"}):"Save"})]})]})]})]}),(0,a.jsx)(i.DataTable,{data:h,columns:R,isLoading:f,actions:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.Button,{size:"sm",variant:"ghost",onClick:()=>{k({name:e.name,code:e.code}),y(e.id),j(!0)},children:[(0,a.jsx)(o.Edit2,{size:14,className:"mr-2"})," Rename"]}),(0,a.jsxs)(s.Button,{size:"sm",variant:"ghost",className:"text-red-500",onClick:()=>D(e),children:[(0,a.jsx)(n.Archive,{size:14,className:"mr-2"})," ",e.active?"Deactivate":"Activate"]})]})})]})}e.s(["default",()=>u])}]);