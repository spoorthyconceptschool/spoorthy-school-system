(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(75157);let a=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...r}));a.displayName="Card";let i=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let l=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("h3",{ref:a,className:(0,s.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...r}));l.displayName="CardTitle";let d=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-white/60 font-medium",e),...r}));d.displayName="CardDescription";let n=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",e),...r}));n.displayName="CardContent",r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>i,"CardTitle",()=>l])},85468,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(32341),a=e.i(15288);e.i(36180);var i=e.i(98925),l=e.i(59141);function d(){let{user:e}=(0,s.useAuth)(),[d,n]=(0,r.useState)([]),[o,c]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{e?.uid&&(async()=>{try{let t=(0,i.collection)(l.db,"students"),r=(0,i.query)(t,(0,i.where)("uid","==",e.uid)),s=await (0,i.getDocs)(r);s.empty||c(s.docs[0].data().classId||"NONE")}catch(e){console.error("Error fetching student profile:",e)}})()},[e]),(0,r.useEffect)(()=>{if(!e?.uid||null===o)return;let t=!0,r=x?(0,i.query)((0,i.collection)(l.db,"notices"),(0,i.where)("target","in",["ALL","STUDENTS",o])):(0,i.query)((0,i.collection)(l.db,"notices"),(0,i.where)("target","in",["ALL","STUDENTS",o]),(0,i.orderBy)("createdAt","desc")),s=(0,i.onSnapshot)(r,e=>{if(!t)return;let r=Date.now(),s=e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>!e.expiresAt||1e3*e.expiresAt.seconds>r);x&&(s=s.sort((e,t)=>(t.createdAt?.seconds||0)-(e.createdAt?.seconds||0))),n(s)},e=>{t&&(e.message.includes("index")&&!x?(console.warn("[Notices] Index missing, switching to fallback query."),u(!0)):e.message.includes("index")||console.error("Notice listener error:",e))});return()=>{t=!1,s()}},[e,o,x]),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6 animate-in fade-in",children:[(0,t.jsx)("h1",{className:"text-3xl font-display font-bold",children:"Inbox"}),(0,t.jsx)("div",{className:"space-y-4",children:0===d.length?(0,t.jsx)("p",{className:"text-muted-foreground",children:"No active notices."}):d.map(e=>(0,t.jsx)(a.Card,{className:"bg-black/20 border-white/10",children:(0,t.jsxs)(a.CardContent,{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-bold text-lg",children:e.title}),"HOLIDAY"===e.type&&(0,t.jsx)("span",{className:"text-[10px] bg-yellow-500/20 text-yellow-500 px-2 py-0.5 rounded-full font-bold",children:"HOLIDAY"})]})}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:(e=>{if(!e)return"";let t=new Date(1e3*e.seconds),r=Date.now()-t.getTime();if(r<6e4)return"Just now";if(r<36e5){let e=Math.floor(r/6e4);return`${e} min ago`}if(r<864e5){let e=Math.floor(r/36e5);return`${e} hour${e>1?"s":""} ago`}return t.toLocaleDateString()})(e.createdAt)})]}),(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:e.content}),(0,t.jsxs)("div",{className:"mt-3 text-xs text-muted-foreground",children:["From: ",e.senderName," (",e.senderRole,")"]})]})},e.id))})]})}e.s(["default",()=>d])}]);