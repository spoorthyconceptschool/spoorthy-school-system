(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3281,e=>{"use strict";let t=(0,e.i(75254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],3281)},93479,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let l=a.forwardRef(({className:e,type:a,...l},r)=>(0,t.jsx)("input",{type:a,className:(0,s.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",e),ref:r,...l}));l.displayName="Input",e.s(["Input",()=>l])},10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let l=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("label",{ref:l,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...a}));l.displayName="Label",e.s(["Label",()=>l])},76639,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(26999),l=e.i(37727),r=e.i(75157);let i=s.Root,d=s.Trigger,o=s.Portal;s.Close;let n=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)(s.Overlay,{ref:l,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));n.displayName=s.Overlay.displayName;let c=a.forwardRef(({className:e,children:a,...i},d)=>(0,t.jsxs)(o,{children:[(0,t.jsx)(n,{}),(0,t.jsxs)(s.Content,{ref:d,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...i,children:[a,(0,t.jsxs)(s.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(l.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=s.Content.displayName;let m=({className:e,...a})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});m.displayName="DialogHeader";let x=({className:e,...a})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});x.displayName="DialogFooter";let h=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)(s.Title,{ref:l,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));h.displayName=s.Title.displayName;let p=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)(s.Description,{ref:l,className:(0,r.cn)("text-sm text-muted-foreground",e),...a}));p.displayName=s.Description.displayName,e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>p,"DialogFooter",()=>x,"DialogHeader",()=>m,"DialogTitle",()=>h,"DialogTrigger",()=>d])},84774,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let l=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:l,className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})}));l.displayName="Table";let r=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("thead",{ref:l,className:(0,s.cn)("[&_tr]:border-b",e),...a}));r.displayName="TableHeader";let i=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("tbody",{ref:l,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a}));i.displayName="TableBody",a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("tfoot",{ref:l,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let d=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("tr",{ref:l,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));d.displayName="TableRow";let o=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("th",{ref:l,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));o.displayName="TableHead";let n=a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("td",{ref:l,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));n.displayName="TableCell",a.forwardRef(({className:e,...a},l)=>(0,t.jsx)("caption",{ref:l,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption",e.s(["Table",()=>l,"TableBody",()=>i,"TableCell",()=>n,"TableHead",()=>o,"TableHeader",()=>r,"TableRow",()=>d])},69049,41071,e=>{"use strict";var t=e.i(43476),a=e.i(84774),s=e.i(75157),l=e.i(19455);let r=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>r],41071);var i=e.i(55146);function d({data:e,columns:d,isLoading:o,onRowClick:n,actions:c}){return o?(0,t.jsx)("div",{className:"w-full h-48 flex items-center justify-center bg-white/5 rounded-xl animate-pulse",children:(0,t.jsx)("div",{className:"h-4 w-4 bg-accent/50 rounded-full animate-ping"})}):(0,t.jsxs)("div",{className:"w-full space-y-3",children:[(0,t.jsx)("div",{className:"overflow-x-auto rounded-xl md:rounded-2xl border border-white/10 bg-black/20 backdrop-blur-md custom-scrollbar",children:(0,t.jsxs)(a.Table,{className:"w-full",children:[(0,t.jsx)(a.TableHeader,{className:"bg-white/5",children:(0,t.jsxs)(a.TableRow,{className:"border-white/10 hover:bg-transparent",children:[d.map(e=>(0,t.jsx)(a.TableHead,{className:(0,s.cn)("text-muted-foreground font-black uppercase text-[7px] md:text-[10px] tracking-widest h-8 md:h-12 whitespace-nowrap px-2 md:px-6 italic",e.headerClassName),children:e.header},e.key)),c&&(0,t.jsx)(a.TableHead,{className:"w-[30px] md:w-[50px] whitespace-nowrap px-2 md:px-6"})]})}),(0,t.jsx)(a.TableBody,{children:0===e.length?(0,t.jsx)(a.TableRow,{children:(0,t.jsx)(a.TableCell,{colSpan:d.length+ +!!c,className:"h-24 md:h-32 text-center text-muted-foreground border-white/10 whitespace-nowrap text-[10px] md:text-sm italic",children:"No results found."})}):e.map((e,o)=>(0,t.jsxs)(a.TableRow,{className:(0,s.cn)("border-white/5 transition-all duration-300 hover:bg-[#64FFDA]/5 group cursor-default",n&&"cursor-pointer"),onClick:()=>n?.(e),children:[d.map(l=>(0,t.jsx)(a.TableCell,{className:(0,s.cn)("py-2 md:py-4 px-2 md:px-6 font-medium whitespace-nowrap text-[10px] md:text-sm",l.cellClassName),children:(0,t.jsx)("div",{className:"flex flex-col",children:l.render?l.render(e,o):(0,t.jsx)("span",{className:"text-white group-hover:text-accent transition-colors",children:e[l.key]})})},`${e.id}-${l.key}`)),c&&(0,t.jsx)(a.TableCell,{className:"px-2 md:px-6",children:(0,t.jsxs)(i.DropdownMenu,{children:[(0,t.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(l.Button,{variant:"ghost",className:"h-7 w-7 md:h-8 md:w-8 p-0 hover:bg-white/10 text-muted-foreground hover:text-white",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(r,{className:"h-3 w-3 md:h-4 md:w-4"})]})}),(0,t.jsxs)(i.DropdownMenuContent,{align:"end",className:"bg-[#0A192F] border-white/10 backdrop-blur-xl rounded-xl",children:[(0,t.jsx)(i.DropdownMenuLabel,{className:"text-[10px] uppercase font-black tracking-widest text-muted-foreground/60 p-3 italic",children:"Operations"}),(0,t.jsx)(i.DropdownMenuSeparator,{className:"bg-white/5"}),(0,t.jsx)("div",{className:"p-1",children:c(e)})]})]})})]},e.id||o))})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-2 md:py-4 px-3 md:px-6 bg-white/5 border border-white/10 rounded-xl md:rounded-2xl",children:[(0,t.jsxs)("div",{className:"text-[8px] md:text-xs font-black uppercase tracking-widest text-muted-foreground italic",children:["Scope: ",(0,t.jsxs)("span",{className:"text-white ml-1",children:[e.length," items"]})]}),(0,t.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Prev"}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Next"})]})]})]})}e.s(["DataTable",()=>d],69049)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},57428,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(20783),l=e.i(30030),r=e.i(81140),i=e.i(69340),d=e.i(99682),o=e.i(35804),n=e.i(96626),c=e.i(48425),m="Checkbox",[x,h]=(0,l.createContextScope)(m),[p,u]=x(m);function b(e){let{__scopeCheckbox:s,checked:l,children:r,defaultChecked:d,disabled:o,form:n,name:c,onCheckedChange:x,required:h,value:u="on",internal_do_not_use_render:b}=e,[f,g]=(0,i.useControllableState)({prop:l,defaultProp:d??!1,onChange:x,caller:m}),[w,N]=a.useState(null),[j,v]=a.useState(null),y=a.useRef(!1),C=!w||!!n||!!w.closest("form"),S={checked:f,disabled:o,setChecked:g,control:w,setControl:N,name:c,form:n,value:u,hasConsumerStoppedPropagationRef:y,required:h,defaultChecked:!k(d)&&d,isFormControl:C,bubbleInput:j,setBubbleInput:v};return(0,t.jsx)(p,{scope:s,...S,children:"function"==typeof b?b(S):r})}var f="CheckboxTrigger",g=a.forwardRef(({__scopeCheckbox:e,onKeyDown:l,onClick:i,...d},o)=>{let{control:n,value:m,disabled:x,checked:h,required:p,setControl:b,setChecked:g,hasConsumerStoppedPropagationRef:w,isFormControl:N,bubbleInput:j}=u(f,e),v=(0,s.useComposedRefs)(o,b),y=a.useRef(h);return a.useEffect(()=>{let e=n?.form;if(e){let t=()=>g(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[n,g]),(0,t.jsx)(c.Primitive.button,{type:"button",role:"checkbox","aria-checked":k(h)?"mixed":h,"aria-required":p,"data-state":C(h),"data-disabled":x?"":void 0,disabled:x,value:m,...d,ref:v,onKeyDown:(0,r.composeEventHandlers)(l,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,r.composeEventHandlers)(i,e=>{g(e=>!!k(e)||!e),j&&N&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})})});g.displayName=f;var w=a.forwardRef((e,a)=>{let{__scopeCheckbox:s,name:l,checked:r,defaultChecked:i,required:d,disabled:o,value:n,onCheckedChange:c,form:m,...x}=e;return(0,t.jsx)(b,{__scopeCheckbox:s,checked:r,defaultChecked:i,disabled:o,required:d,onCheckedChange:c,name:l,form:m,value:n,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{...x,ref:a,__scopeCheckbox:s}),e&&(0,t.jsx)(y,{__scopeCheckbox:s})]})})});w.displayName=m;var N="CheckboxIndicator",j=a.forwardRef((e,a)=>{let{__scopeCheckbox:s,forceMount:l,...r}=e,i=u(N,s);return(0,t.jsx)(n.Presence,{present:l||k(i.checked)||!0===i.checked,children:(0,t.jsx)(c.Primitive.span,{"data-state":C(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{pointerEvents:"none",...e.style}})})});j.displayName=N;var v="CheckboxBubbleInput",y=a.forwardRef(({__scopeCheckbox:e,...l},r)=>{let{control:i,hasConsumerStoppedPropagationRef:n,checked:m,defaultChecked:x,required:h,disabled:p,name:b,value:f,form:g,bubbleInput:w,setBubbleInput:N}=u(v,e),j=(0,s.useComposedRefs)(r,N),y=(0,d.usePrevious)(m),C=(0,o.useSize)(i);a.useEffect(()=>{if(!w)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!n.current;if(y!==m&&e){let a=new Event("click",{bubbles:t});w.indeterminate=k(m),e.call(w,!k(m)&&m),w.dispatchEvent(a)}},[w,y,m,n]);let S=a.useRef(!k(m)&&m);return(0,t.jsx)(c.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:x??S.current,required:h,disabled:p,name:b,value:f,form:g,...l,tabIndex:-1,ref:j,style:{...l.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function k(e){return"indeterminate"===e}function C(e){return k(e)?"indeterminate":e?"checked":"unchecked"}y.displayName=v;var S=e.i(43531),T=e.i(75157);let L=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(w,{ref:s,className:(0,T.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...a,children:(0,t.jsx)(j,{className:(0,T.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(S.Check,{className:"h-4 w-4"})})}));L.displayName=w.displayName,e.s(["Checkbox",()=>L],57428)},33377,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(36180);var s=e.i(98925),l=e.i(59141),r=e.i(40160),i=e.i(3281),d=e.i(55436),o=e.i(84614),n=e.i(46897),c=e.i(19455),m=e.i(93479),x=e.i(87486),h=e.i(72498),p=e.i(67489),u=e.i(69049),b=e.i(76639),f=e.i(57428),g=e.i(10204),w=e.i(75157),N=e.i(18566);function j(){let[e,j]=(0,a.useState)([]),[v,y]=(0,a.useState)(!0),[k,C]=(0,a.useState)(""),[S,T]=(0,a.useState)("all"),[L,D]=(0,a.useState)("all"),R=(0,N.useRouter)(),[F,P]=(0,a.useState)(!1),[I,$]=(0,a.useState)("csv"),[z,E]=(0,a.useState)([]),[M,B]=(0,a.useState)([]),{classes:A,villages:H,branding:V}=(0,h.useMasterData)(),O=Object.values(A||{}).map(e=>({id:e.id,name:e.name,order:e.order||99})).sort((e,t)=>e.order-t.order),_=Object.values(H||{}).map(e=>({id:e.id,name:e.name})).sort((e,t)=>e.name.localeCompare(t.name)),U=async()=>{try{let e=(0,s.query)((0,s.collection)(l.db,"student_fee_ledgers"),(0,s.orderBy)("className","asc")),t=await (0,s.getDocs)(e);j(t.docs.map(e=>({id:e.id,...e.data()})))}catch(e){console.error(e)}finally{y(!1)}};(0,a.useEffect)(()=>{U()},[]);let K=e.filter(e=>{let t=!k||e.studentId?.toLowerCase().includes(k.toLowerCase())||e.studentName?.toLowerCase().includes(k.toLowerCase())||e.parentName?.toLowerCase().includes(k.toLowerCase())||e.parentMobile?.toLowerCase().includes(k.toLowerCase())||e.villageName?.toLowerCase().includes(k.toLowerCase())||e.className?.toLowerCase().includes(k.toLowerCase()),a="all"===S||e.classId===S||e.className===S,s="all"===L||e.villageId===L||e.villageName===L;return t&&a&&s}),q=K.reduce((e,t)=>e+(t.totalFee||0),0),X=K.reduce((e,t)=>e+(t.totalPaid||0),0),G=q-X;return(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500 max-w-none p-0 pb-20",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between pt-4 gap-6 px-2 md:px-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl md:text-5xl font-display font-bold bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent italic leading-tight",children:"Fee Structures"}),(0,t.jsxs)("p",{className:"text-muted-foreground text-sm md:text-lg tracking-tight",children:["Master record of all ",(0,t.jsx)("span",{className:"text-white font-bold",children:"student fee allocations"})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3",children:[(0,t.jsxs)(c.Button,{variant:"outline",onClick:()=>{$("print"),P(!0)},className:"h-11 gap-2 border-white/10 bg-white/5 backdrop-blur-sm rounded-xl hover:bg-white/10",children:[(0,t.jsx)(i.Printer,{size:16})," ",(0,t.jsx)("span",{className:"hidden sm:inline",children:"Print Report"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Print"})]}),(0,t.jsxs)(c.Button,{variant:"outline",onClick:()=>{$("csv"),P(!0)},className:"h-11 gap-2 border-white/10 bg-white/5 backdrop-blur-sm rounded-xl hover:bg-white/10",children:[(0,t.jsx)(r.Download,{size:16})," ",(0,t.jsx)("span",{className:"hidden sm:inline",children:"Export CSV"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Export"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 px-2 md:px-0",children:[(0,t.jsxs)("div",{className:"bg-emerald-500/5 border border-emerald-500/10 p-5 rounded-2xl backdrop-blur-sm shadow-xl",children:[(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-400 mb-2 italic",children:"Total Allocation"}),(0,t.jsxs)("div",{className:"text-3xl font-mono font-black text-white",children:["₹",q.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"bg-blue-500/5 border border-blue-500/10 p-5 rounded-2xl backdrop-blur-sm shadow-xl",children:[(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-blue-400 mb-2 italic",children:"Collected Fees"}),(0,t.jsxs)("div",{className:"text-3xl font-mono font-black text-white",children:["₹",X.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"bg-orange-500/5 border border-orange-500/10 p-5 rounded-2xl backdrop-blur-sm shadow-xl",children:[(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-orange-400 mb-2 italic",children:"Pending Dues"}),(0,t.jsxs)("div",{className:"text-3xl font-mono font-black text-white",children:["₹",G.toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"bg-black/20 p-4 md:p-5 rounded-2xl border border-white/10 backdrop-blur-md space-y-4 shadow-2xl mx-2 md:mx-0",children:[(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)(d.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(m.Input,{placeholder:"Search by student name, ID, or parent...",className:"pl-11 h-12 bg-white/5 border-white/10 rounded-xl focus:ring-accent/30",value:k,onChange:e=>C(e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:flex lg:flex-wrap gap-2",children:[(0,t.jsxs)(p.Select,{value:S,onValueChange:T,children:[(0,t.jsx)(p.SelectTrigger,{className:"w-full lg:w-[180px] h-12 bg-white/5 border-white/10 rounded-xl",children:(0,t.jsx)(p.SelectValue,{placeholder:"All Classes"})}),(0,t.jsxs)(p.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,t.jsx)(p.SelectItem,{value:"all",children:"All Classes"}),O.map(e=>(0,t.jsx)(p.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)(p.Select,{value:L,onValueChange:D,children:[(0,t.jsx)(p.SelectTrigger,{className:"w-full lg:w-[180px] h-12 bg-white/5 border-white/10 rounded-xl",children:(0,t.jsx)(p.SelectValue,{placeholder:"All Villages"})}),(0,t.jsxs)(p.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,t.jsx)(p.SelectItem,{value:"all",children:"All Villages"}),_.map(e=>(0,t.jsx)(p.SelectItem,{value:e.id,children:e.name},e.id))]})]}),("all"!==S||"all"!==L||k)&&(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:()=>{C(""),T("all"),D("all")},className:"h-12 px-6 text-[10px] font-black uppercase tracking-widest text-muted-foreground hover:text-white rounded-xl border border-dashed border-white/10 transition-all",children:"Clear Filters"})]})]}),(0,t.jsx)(u.DataTable,{data:K,isLoading:v,onRowClick:e=>R.push(`/admin/students/${e.studentDocId||e.id}`),columns:[{key:"studentName",header:"Student Info",render:e=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center border border-white/5",children:(0,t.jsx)(o.User,{size:14,className:"text-white/40"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold text-sm text-white leading-tight",children:e.studentName}),(0,t.jsx)("span",{className:"text-[10px] font-mono text-white/40 tracking-tighter uppercase",children:e.studentId})]})]})},{key:"className",header:"Class & Village",render:e=>(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-[10px] uppercase font-black text-muted-foreground tracking-tighter bg-white/5 px-2 py-0.5 rounded border border-white/5 w-fit",children:e.className}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-white/30",children:[(0,t.jsx)(n.MapPin,{size:10}),(0,t.jsx)("span",{className:"truncate max-w-[120px]",children:e.villageName})]})]})},{key:"termFee",header:"Term Fee",headerClassName:"text-right",cellClassName:"text-right",render:e=>{let a=e.items?.filter(e=>"TERM"===e.type).reduce((e,t)=>e+t.amount,0)||0;return(0,t.jsxs)("span",{className:"font-mono font-bold text-sm text-white/80",children:["₹",a.toLocaleString()]})}},{key:"transport",header:"Transport",headerClassName:"text-right",cellClassName:"text-right",render:e=>{let a=e.items?.find(e=>e.name?.toLowerCase().includes("bus")||e.name?.toLowerCase().includes("transport")),s=a?a.amount:0;return(0,t.jsxs)("span",{className:(0,w.cn)("font-mono font-bold text-sm",s>0?"text-cyan-400":"text-white/10"),children:["₹",s.toLocaleString()]})}},{key:"totalFee",header:"Total Fee",headerClassName:"text-right",cellClassName:"text-right",render:e=>(0,t.jsxs)("span",{className:"font-mono font-black text-sm text-white",children:["₹",e.totalFee?.toLocaleString()]})},{key:"totalPaid",header:"Total Paid",headerClassName:"text-right",cellClassName:"text-right",render:e=>(0,t.jsxs)("span",{className:"font-mono font-black text-sm text-emerald-400",children:["₹",e.totalPaid?.toLocaleString()]})},{key:"status",header:"Status",headerClassName:"text-center",cellClassName:"text-center",render:e=>(0,t.jsx)(x.Badge,{variant:"PAID"===e.status?"default":"destructive",className:(0,w.cn)("text-[9px] font-black uppercase tracking-tighter py-0 h-5 border-none","PAID"===e.status?"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"),children:e.status})}],actions:e=>(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsx)(c.Button,{variant:"ghost",onClick:()=>R.push(`/admin/students/${e.studentDocId||e.id}`),className:"w-full justify-start gap-2 h-9 text-xs font-bold uppercase tracking-tighter",children:"Full Student Profile"})})}),(0,t.jsx)(b.Dialog,{open:F,onOpenChange:P,children:(0,t.jsxs)(b.DialogContent,{className:"max-w-2xl bg-[#0A192F] border-white/10 text-white shadow-2xl backdrop-blur-3xl rounded-3xl",children:[(0,t.jsx)(b.DialogHeader,{children:(0,t.jsx)(b.DialogTitle,{className:"text-2xl font-display font-bold italic bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent",children:"Report Configuration"})}),(0,t.jsx)("div",{className:"space-y-6 py-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-3 p-4 bg-white/5 rounded-2xl border border-white/5",children:[(0,t.jsx)(g.Label,{className:"text-[10px] font-black uppercase tracking-widest text-emerald-400",children:"Filter by Classes"}),(0,t.jsxs)("div",{className:"max-h-[300px] overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 pb-2 border-b border-white/5",children:[(0,t.jsx)(f.Checkbox,{id:"all-classes",className:"border-white/20 data-[state=checked]:bg-emerald-500 data-[state=checked]:border-emerald-500",checked:0===z.length,onCheckedChange:e=>e?E([]):null}),(0,t.jsx)(g.Label,{htmlFor:"all-classes",className:"text-sm font-bold opacity-80 cursor-pointer",children:"All Classes"})]}),O.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 py-1",children:[(0,t.jsx)(f.Checkbox,{id:`class-${e.id}`,className:"border-white/10 data-[state=checked]:bg-emerald-500 data-[state=checked]:border-emerald-500",checked:z.includes(e.id),onCheckedChange:t=>{t?E([...z,e.id]):E(z.filter(t=>t!==e.id))}}),(0,t.jsx)(g.Label,{htmlFor:`class-${e.id}`,className:"text-xs font-medium opacity-60 cursor-pointer hover:opacity-100 transition-opacity",children:e.name})]},e.id))]})]}),(0,t.jsxs)("div",{className:"space-y-3 p-4 bg-white/5 rounded-2xl border border-white/5",children:[(0,t.jsx)(g.Label,{className:"text-[10px] font-black uppercase tracking-widest text-cyan-400",children:"Filter by Villages"}),(0,t.jsxs)("div",{className:"max-h-[300px] overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 pb-2 border-b border-white/5",children:[(0,t.jsx)(f.Checkbox,{id:"all-villages",className:"border-white/20 data-[state=checked]:bg-cyan-500 data-[state=checked]:border-cyan-500",checked:0===M.length,onCheckedChange:e=>e?B([]):null}),(0,t.jsx)(g.Label,{htmlFor:"all-villages",className:"text-sm font-bold opacity-80 cursor-pointer",children:"All Villages"})]}),_.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 py-1",children:[(0,t.jsx)(f.Checkbox,{id:`village-${e.id}`,className:"border-white/10 data-[state=checked]:bg-cyan-500 data-[state=checked]:border-cyan-500",checked:M.includes(e.id),onCheckedChange:t=>{t?B([...M,e.id]):B(M.filter(t=>t!==e.id))}}),(0,t.jsx)(g.Label,{htmlFor:`village-${e.id}`,className:"text-xs font-medium opacity-60 cursor-pointer hover:opacity-100 transition-opacity",children:e.name})]},e.id))]})]})]})}),(0,t.jsxs)(b.DialogFooter,{className:"gap-2",children:[(0,t.jsx)(c.Button,{variant:"ghost",onClick:()=>P(!1),className:"rounded-xl hover:bg-white/5",children:"Cancel"}),(0,t.jsxs)(c.Button,{className:"bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white font-black uppercase tracking-tighter gap-2 rounded-xl border-none shadow-lg shadow-emerald-500/20",onClick:()=>{let t=e.filter(e=>{let t=0===z.length||z.includes(e.classId)||z.includes(e.className),a=0===M.length||M.includes(e.villageId)||M.includes(e.villageName);return t&&a});if("csv"===I){let e,a,s;e=new Blob([[["School ID","Student Name","Parent Name","Mobile","Village","Class","Term Fee","Transport Fee","Total Fee","Total Paid","Status"],...t.map(e=>{let t=e.items?.filter(e=>"TERM"===e.type).reduce((e,t)=>e+t.amount,0)||0,a=e.items?.find(e=>e.name?.toLowerCase().includes("bus")||e.name?.toLowerCase().includes("transport")),s=a?a.amount:0;return[e.studentId,e.studentName,e.parentName,e.parentMobile||"",e.villageName,e.className,t,s,e.totalFee,e.totalPaid,e.status]})].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(e),a.setAttribute("href",s),a.setAttribute("download",`fee_structures_${new Date().toISOString().split("T")[0]}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),P(!1)}else(e=>{let t=window.open("","_blank");if(!t)return;let a=`
            <html>
                <head>
                    <title>Fee Structures Report</title>
                    <style>
                        body { font-family: sans-serif; padding: 20px; }
                        .header { display: flex; align-items: center; justify-content: center; gap: 30px; border-bottom: 2px solid #ddd; padding-bottom: 20px; margin-bottom: 20px; }
                        .logo { height: 80px; width: auto; object-fit: contain; }
                        .header-text { text-align: left; }
                        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 12px; }
                        th { background-color: #f2f2f2; }
                        h1 { margin: 0; font-size: 24px; }
                        .header-info { margin-top: 5px; color: #666; font-size: 14px; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        ${V?.schoolLogo?`<img src="${V.schoolLogo}" class="logo" />`:""}
                        <div class="header-text">
                            <h1>${V?.schoolName||"Spoorthy Concept School"} - Fee Structures</h1>
                            <div class="header-info">
                                Selected Dataset Report | Generated on: ${new Date().toLocaleString()}
                            </div>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>School ID</th>
                                <th>Name</th>
                                <th>Class</th>
                                <th>Term Fee</th>
                                <th>Transport</th>
                                <th>Total Fee</th>
                                <th>Paid</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${e.map(e=>{let t=e.items?.filter(e=>"TERM"===e.type).reduce((e,t)=>e+t.amount,0)||0,a=e.items?.find(e=>e.name?.toLowerCase().includes("bus")||e.name?.toLowerCase().includes("transport")),s=a?a.amount:0;return`
                                    <tr>
                                        <td>${e.studentId}</td>
                                        <td>${e.studentName}</td>
                                        <td>${e.className}</td>
                                        <td>₹${t.toLocaleString()}</td>
                                        <td>₹${s.toLocaleString()}</td>
                                        <td>₹${(e.totalFee||0).toLocaleString()}</td>
                                        <td>₹${(e.totalPaid||0).toLocaleString()}</td>
                                        <td>${e.status}</td>
                                    </tr>
                                `}).join("")}
                        </tbody>
                    </table>
                </body>
            </html>
        `;t.document.write(a),t.document.close(),t.print(),P(!1)})(t)},children:["csv"===I?(0,t.jsx)(r.Download,{size:16}):(0,t.jsx)(i.Printer,{size:16}),"csv"===I?"Export CSV":"Print Report"]})]})]})})]})}e.s(["default",()=>j])}]);