(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...a}));r.displayName="Card";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,s.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...a}));i.displayName="CardTitle";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-white/60 font-medium",e),...a}));d.displayName="CardDescription";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>l,"CardTitle",()=>i])},87316,61277,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["default",()=>t],61277),e.s(["Calendar",()=>t],87316)},93479,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,type:a,...r},l)=>(0,t.jsx)("input",{type:a,className:(0,s.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",e),ref:l,...r}));r.displayName="Input",e.s(["Input",()=>r])},10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("label",{ref:r,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...a}));r.displayName="Label",e.s(["Label",()=>r])},76639,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(26999),r=e.i(37727),l=e.i(75157);let i=s.Root,d=s.Trigger,n=s.Portal;s.Close;let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Overlay,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));o.displayName=s.Overlay.displayName;let c=a.forwardRef(({className:e,children:a,...i},d)=>(0,t.jsxs)(n,{children:[(0,t.jsx)(o,{}),(0,t.jsxs)(s.Content,{ref:d,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...i,children:[a,(0,t.jsxs)(s.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(r.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=s.Content.displayName;let m=({className:e,...a})=>(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});m.displayName="DialogHeader";let x=({className:e,...a})=>(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});x.displayName="DialogFooter";let p=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Title,{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));p.displayName=s.Title.displayName;let u=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Description,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...a}));u.displayName=s.Description.displayName,e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>u,"DialogFooter",()=>x,"DialogHeader",()=>m,"DialogTitle",()=>p,"DialogTrigger",()=>d])},84774,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})}));r.displayName="Table";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",e),...a}));l.displayName="TableHeader";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a}));i.displayName="TableBody",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));d.displayName="TableRow";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));n.displayName="TableHead";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));o.displayName="TableCell",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>i,"TableCell",()=>o,"TableHead",()=>n,"TableHeader",()=>l,"TableRow",()=>d])},69049,41071,e=>{"use strict";var t=e.i(43476),a=e.i(84774),s=e.i(75157),r=e.i(19455);let l=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>l],41071);var i=e.i(55146);function d({data:e,columns:d,isLoading:n,onRowClick:o,actions:c}){return n?(0,t.jsx)("div",{className:"w-full h-48 flex items-center justify-center bg-white/5 rounded-xl animate-pulse",children:(0,t.jsx)("div",{className:"h-4 w-4 bg-accent/50 rounded-full animate-ping"})}):(0,t.jsxs)("div",{className:"w-full space-y-3",children:[(0,t.jsx)("div",{className:"overflow-x-auto rounded-xl md:rounded-2xl border border-white/10 bg-black/20 backdrop-blur-md custom-scrollbar",children:(0,t.jsxs)(a.Table,{className:"w-full",children:[(0,t.jsx)(a.TableHeader,{className:"bg-white/5",children:(0,t.jsxs)(a.TableRow,{className:"border-white/10 hover:bg-transparent",children:[d.map(e=>(0,t.jsx)(a.TableHead,{className:(0,s.cn)("text-muted-foreground font-black uppercase text-[7px] md:text-[10px] tracking-widest h-8 md:h-12 whitespace-nowrap px-2 md:px-6 italic",e.headerClassName),children:e.header},e.key)),c&&(0,t.jsx)(a.TableHead,{className:"w-[30px] md:w-[50px] whitespace-nowrap px-2 md:px-6"})]})}),(0,t.jsx)(a.TableBody,{children:0===e.length?(0,t.jsx)(a.TableRow,{children:(0,t.jsx)(a.TableCell,{colSpan:d.length+ +!!c,className:"h-24 md:h-32 text-center text-muted-foreground border-white/10 whitespace-nowrap text-[10px] md:text-sm italic",children:"No results found."})}):e.map((e,n)=>(0,t.jsxs)(a.TableRow,{className:(0,s.cn)("border-white/5 transition-all duration-300 hover:bg-[#64FFDA]/5 group cursor-default",o&&"cursor-pointer"),onClick:()=>o?.(e),children:[d.map(r=>(0,t.jsx)(a.TableCell,{className:(0,s.cn)("py-2 md:py-4 px-2 md:px-6 font-medium whitespace-nowrap text-[10px] md:text-sm",r.cellClassName),children:(0,t.jsx)("div",{className:"flex flex-col",children:r.render?r.render(e,n):(0,t.jsx)("span",{className:"text-white group-hover:text-accent transition-colors",children:e[r.key]})})},`${e.id}-${r.key}`)),c&&(0,t.jsx)(a.TableCell,{className:"px-2 md:px-6",children:(0,t.jsxs)(i.DropdownMenu,{children:[(0,t.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{variant:"ghost",className:"h-7 w-7 md:h-8 md:w-8 p-0 hover:bg-white/10 text-muted-foreground hover:text-white",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(l,{className:"h-3 w-3 md:h-4 md:w-4"})]})}),(0,t.jsxs)(i.DropdownMenuContent,{align:"end",className:"bg-[#0A192F] border-white/10 backdrop-blur-xl rounded-xl",children:[(0,t.jsx)(i.DropdownMenuLabel,{className:"text-[10px] uppercase font-black tracking-widest text-muted-foreground/60 p-3 italic",children:"Operations"}),(0,t.jsx)(i.DropdownMenuSeparator,{className:"bg-white/5"}),(0,t.jsx)("div",{className:"p-1",children:c(e)})]})]})})]},e.id||n))})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-2 md:py-4 px-3 md:px-6 bg-white/5 border border-white/10 rounded-xl md:rounded-2xl",children:[(0,t.jsxs)("div",{className:"text-[8px] md:text-xs font-black uppercase tracking-widest text-muted-foreground italic",children:["Scope: ",(0,t.jsxs)("span",{className:"text-white ml-1",children:[e.length," items"]})]}),(0,t.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Prev"}),(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Next"})]})]})]})}e.s(["DataTable",()=>d],69049)},77572,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(81140),r=e.i(30030),l=e.i(42727),i=e.i(96626),d=e.i(48425),n=e.i(86318),o=e.i(69340),c=e.i(10772),m="Tabs",[x,p]=(0,r.createContextScope)(m,[l.createRovingFocusGroupScope]),u=(0,l.createRovingFocusGroupScope)(),[h,f]=x(m),b=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,onValueChange:l,defaultValue:i,orientation:x="horizontal",dir:p,activationMode:u="automatic",...f}=e,b=(0,n.useDirection)(p),[g,y]=(0,o.useControllableState)({prop:r,onChange:l,defaultProp:i??"",caller:m});return(0,t.jsx)(h,{scope:s,baseId:(0,c.useId)(),value:g,onValueChange:y,orientation:x,dir:b,activationMode:u,children:(0,t.jsx)(d.Primitive.div,{dir:b,"data-orientation":x,...f,ref:a})})});b.displayName=m;var g="TabsList",y=a.forwardRef((e,a)=>{let{__scopeTabs:s,loop:r=!0,...i}=e,n=f(g,s),o=u(s);return(0,t.jsx)(l.Root,{asChild:!0,...o,orientation:n.orientation,dir:n.dir,loop:r,children:(0,t.jsx)(d.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:a})})});y.displayName=g;var w="TabsTrigger",v=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:i,disabled:n=!1,...o}=e,c=f(w,r),m=u(r),x=k(c.baseId,i),p=D(c.baseId,i),h=i===c.value;return(0,t.jsx)(l.Item,{asChild:!0,...m,focusable:!n,active:h,children:(0,t.jsx)(d.Primitive.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":p,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:x,...o,ref:a,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(i)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(i)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;h||n||!e||c.onValueChange(i)})})})});v.displayName=w;var j="TabsContent",N=a.forwardRef((e,s)=>{let{__scopeTabs:r,value:l,forceMount:n,children:o,...c}=e,m=f(j,r),x=k(m.baseId,l),p=D(m.baseId,l),u=l===m.value,h=a.useRef(u);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(i.Presence,{present:n||u,children:({present:a})=>(0,t.jsx)(d.Primitive.div,{"data-state":u?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":x,hidden:!a,id:p,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&o})})});function k(e,t){return`${e}-trigger-${t}`}function D(e,t){return`${e}-content-${t}`}N.displayName=j;var T=e.i(75157);let C=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(y,{ref:s,className:(0,T.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));C.displayName=y.displayName;let A=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(v,{ref:s,className:(0,T.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));A.displayName=v.displayName;let R=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(N,{ref:s,className:(0,T.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));R.displayName=N.displayName,e.s(["Tabs",()=>b,"TabsContent",()=>R,"TabsList",()=>C,"TabsTrigger",()=>A],77572)},97764,e=>{"use strict";function t(e){if(!e)return"";let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return e;let a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${a}/${s}/${r}`}e.s(["formatDateToDDMMYYYY",()=>t])},22915,e=>{"use strict";let t=(0,e.i(75254).default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);e.s(["Archive",()=>t],22915)},29592,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(25913),r=e.i(75157);let l=(0,s.cva)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=a.forwardRef(({className:e,variant:a,...s},i)=>(0,t.jsx)("div",{ref:i,role:"alert",className:(0,r.cn)(l({variant:a}),e),...s}));i.displayName="Alert";let d=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("h5",{ref:s,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",e),...a}));d.displayName="AlertTitle";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",e),...a}));n.displayName="AlertDescription",e.s(["Alert",()=>i,"AlertDescription",()=>n,"AlertTitle",()=>d])},51537,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(76639),r=e.i(19455),l=e.i(93479),i=e.i(10204),d=e.i(29592),n=e.i(78894),o=e.i(70756),c=e.i(27612),m=e.i(22915),x=e.i(31278),p=e.i(75157),u=e.i(80691);function h({isOpen:e,onClose:h,user:b,checkEligibility:g,onDeactivate:y,onDelete:w}){let[v,j]=(0,a.useState)("deactivate"),[N,k]=(0,a.useState)(!1),[D,T]=(0,a.useState)(null),[C,A]=(0,a.useState)(""),[R,S]=(0,a.useState)("");(0,a.useEffect)(()=>{e&&(j("deactivate"),A(""),S(""),T(null),g().then(T))},[e,g]);let M="DELETE",F=C===M,L=async()=>{if("delete"!==v||F){k(!0);try{"deactivate"===v?(await y(R||"Admin request"),(0,u.toast)({title:"User Deactivated",description:`${b.name} has been deactivated.`,type:"success"})):(await w(R||"Admin request"),(0,u.toast)({title:"User Deleted",description:`${b.name} has been permanently deleted.`,type:"success"})),h()}catch(e){console.error(e),(0,u.toast)({title:"Action Failed",description:e.message||"Something went wrong. Please try again.",type:"error"})}finally{k(!1)}}};return(0,t.jsx)(s.Dialog,{open:e,onOpenChange:h,children:(0,t.jsxs)(s.DialogContent,{className:"sm:max-w-md bg-black/95 border-white/10 text-white backdrop-blur-xl",children:[(0,t.jsxs)(s.DialogHeader,{children:[(0,t.jsx)(s.DialogTitle,{className:"text-xl font-bold flex items-center gap-2",children:"delete"===v?(0,t.jsxs)("span",{className:"text-red-500 flex items-center gap-2",children:[(0,t.jsx)(c.Trash2,{className:"w-5 h-5"})," Permanent Delete"]}):(0,t.jsxs)("span",{className:"text-yellow-500 flex items-center gap-2",children:[(0,t.jsx)(m.Archive,{className:"w-5 h-5"})," Deactivate User"]})}),(0,t.jsxs)(s.DialogDescription,{className:"text-zinc-400",children:["Managing access for ",(0,t.jsx)("span",{className:"text-white font-medium",children:b.name})," (",b.schoolId,")"]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 bg-white/5 p-1 rounded-lg",children:[(0,t.jsxs)("button",{onClick:()=>j("deactivate"),className:(0,p.cn)("flex items-center justify-center gap-2 py-2 text-sm font-medium rounded-md transition-all","deactivate"===v?"bg-yellow-500/20 text-yellow-500":"text-zinc-500 hover:text-zinc-300"),children:[(0,t.jsx)(m.Archive,{className:"w-4 h-4"})," Deactivate"]}),(0,t.jsxs)("button",{onClick:()=>j("delete"),disabled:!D?.canDelete&&!b.isDemo,className:(0,p.cn)("flex items-center justify-center gap-2 py-2 text-sm font-medium rounded-md transition-all","delete"===v?"bg-red-500/20 text-red-500":D?.canDelete||b.isDemo?"text-zinc-500 hover:text-zinc-300":"opacity-50 cursor-not-allowed text-zinc-600"),children:[!D?.canDelete&&!b.isDemo&&(0,t.jsx)(o.Lock,{className:"w-3 h-3"})," ",(0,t.jsx)(c.Trash2,{className:"w-4 h-4"})," Hard Delete"]})]}),"deactivate"===v&&(0,t.jsxs)("div",{className:"space-y-4 animate-in fade-in zoom-in-95 duration-200",children:[(0,t.jsxs)(d.Alert,{className:"bg-yellow-500/10 border-yellow-500/20",children:[(0,t.jsx)(n.AlertTriangle,{className:"h-4 w-4 text-yellow-500"}),(0,t.jsx)(d.AlertTitle,{className:"text-yellow-500",children:"Recommended Action"}),(0,t.jsx)(d.AlertDescription,{className:"text-yellow-500/80 text-xs",children:"Deactivation immediately revokes login access but preserves historical records (payments, grades, etc.). This is reversible."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{className:"text-xs uppercase text-zinc-500",children:"Reason (Optional)"}),(0,t.jsx)(l.Input,{className:"bg-black/40 border-white/10",placeholder:"e.g. Graduated, Left School",value:R,onChange:e=>S(e.target.value)})]})]}),"delete"===v&&(0,t.jsx)("div",{className:"space-y-4 animate-in fade-in zoom-in-95 duration-200",children:D?.canDelete||b.isDemo?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Alert,{className:"bg-red-500/10 border-red-500/20",children:[(0,t.jsx)(f,{}),(0,t.jsx)(d.AlertTitle,{className:"text-red-500 font-bold",children:"ACCOUNT DELETION (ARCHIVE)"}),(0,t.jsxs)(d.AlertDescription,{className:"text-red-500/80 text-xs mt-1",children:["This action will deactivate the user account and mark it as ",(0,t.jsx)("strong",{children:"DELETED"}),". All data will be archived and preserved. The user will no longer be able to log in.",(0,t.jsx)("br",{className:"my-2"}),"This action can be reversed by an administrator."]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{className:"text-xs uppercase text-red-400",children:"Type Confirmation"}),(0,t.jsx)("div",{className:"bg-black/40 p-2 rounded border border-red-500/20 text-center font-mono text-xs select-all text-red-300",children:M}),(0,t.jsx)(l.Input,{className:"bg-black/40 border-red-500/30 text-red-500 focus-visible:ring-red-500",placeholder:M,value:C,onChange:e=>A(e.target.value),onPaste:e=>e.preventDefault()})]})]}):(0,t.jsxs)(d.Alert,{className:"bg-red-900/20 border-red-500/20",children:[(0,t.jsx)(o.Lock,{className:"h-4 w-4 text-red-500"}),(0,t.jsx)(d.AlertTitle,{className:"text-red-500",children:"Deletion Blocked"}),(0,t.jsx)(d.AlertDescription,{className:"text-red-400/80 text-xs mt-1",children:D?.reason||"This user has linked records and cannot be hard deleted."})]})})]}),(0,t.jsxs)(s.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,t.jsx)(r.Button,{variant:"ghost",onClick:h,disabled:N,children:"Cancel"}),(0,t.jsxs)(r.Button,{disabled:N||"delete"===v&&!F,className:(0,p.cn)("delete"===v?"bg-red-600 hover:bg-red-700 text-white":"bg-yellow-600 hover:bg-yellow-700 text-white"),onClick:L,children:[N&&(0,t.jsx)(x.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"delete"===v?"Delete Permanently":"Confirm Deactivation"]})]})]})})}function f(){return(0,t.jsx)(n.AlertTriangle,{className:"h-4 w-4 text-red-500"})}e.s(["DeleteUserModal",()=>h])},34161,e=>{"use strict";let t=(0,e.i(75254).default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);e.s(["Key",()=>t],34161)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},87828,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(76639),r=e.i(19455),l=e.i(93479),i=e.i(10204),d=e.i(31278),n=e.i(70756),o=e.i(78894),c=e.i(32341),m=e.i(80691);function x({isOpen:e,onClose:x,user:p,onSuccess:u}){let{user:h}=(0,c.useAuth)(),[f,b]=(0,a.useState)(""),[g,y]=(0,a.useState)(!1);if(!p)return null;let w=async e=>{if(e.preventDefault(),!p.uid)return void(0,m.toast)({title:"Error",description:"User has no linked account.",type:"error"});y(!0);try{let e=await fetch("/api/admin/users/reset-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await h?.getIdToken()}`},body:JSON.stringify({targetUid:p.uid,schoolId:p.schoolId,role:p.role,newPassword:f})}),t=await e.json();t.success?((0,m.toast)({title:"Password Changed",description:`Proactively updated password for ${p.name}.`,type:"success"}),b(""),u&&u(),x()):(0,m.toast)({title:"Reset Failed",description:t.error||"Could not change password.",type:"error"})}catch(e){(0,m.toast)({title:"Error",description:e.message||"An unexpected error occurred.",type:"error"})}finally{y(!1)}};return(0,t.jsx)(s.Dialog,{open:e,onOpenChange:x,children:(0,t.jsxs)(s.DialogContent,{className:"bg-zinc-950 border-white/10 text-white sm:max-w-[425px]",children:[(0,t.jsxs)(s.DialogHeader,{children:[(0,t.jsxs)(s.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Lock,{className:"w-5 h-5 text-amber-500"}),"Reset Password"]}),(0,t.jsxs)(s.DialogDescription,{children:["Set a new password for ",(0,t.jsx)("span",{className:"font-bold text-white",children:p.name})," (",p.schoolId,")."]})]}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg text-xs text-amber-500 flex gap-2",children:[(0,t.jsx)(o.AlertTriangle,{className:"w-4 h-4 shrink-0"}),(0,t.jsx)("p",{children:"This will immediately update the user's password and log them out of all devices."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"New Password"}),(0,t.jsx)(l.Input,{value:f,onChange:e=>b(e.target.value),className:"bg-black/20",placeholder:"Enter new password",required:!0,minLength:6})]}),(0,t.jsxs)(s.DialogFooter,{children:[(0,t.jsx)(r.Button,{type:"button",variant:"ghost",onClick:x,disabled:g,children:"Cancel"}),(0,t.jsxs)(r.Button,{type:"submit",className:"bg-amber-600 hover:bg-amber-700 text-white",disabled:g,children:[g?(0,t.jsx)(d.Loader2,{className:"animate-spin w-4 h-4 mr-2"}):null,"Update Password"]})]})]})]})})}e.s(["AdminChangePasswordModal",()=>x])},25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},12426,e=>{"use strict";let t=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},83211,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(80691),r=e.i(76639),l=e.i(19455),i=e.i(93479),d=e.i(10204),n=e.i(31278),o=e.i(12426),c=e.i(25652);let m=(0,e.i(75254).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var x=e.i(59141),p=e.i(32341);function u({isOpen:u,onClose:h,person:f,onSuccess:b}){let[g,y]=(0,a.useState)(""),[w,v]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),{user:k}=(0,p.useAuth)();(0,a.useEffect)(()=>{u&&f&&(y(f.currentSalary.toString()),"STAFF"===f.role&&f.roleCode?D(f.roleCode):N(null))},[u,f]);let D=async t=>{try{let{getDocs:a,query:s,collection:r,where:l}=await e.A(27510),i=s(r(x.db,"master_staff_roles"),l("code","==",t)),d=await a(i);if(!d.empty){let e=d.docs[0].data();N(e.basicSalary||0)}}catch(e){console.error(e),(0,s.toast)({title:"Error fetching role data",description:"Could not fetch role salary details.",type:"error"})}},T=async()=>{if(f&&g){v(!0);try{if(!k)throw Error("Not authenticated");let e=await k.getIdToken(),t=await fetch("/api/admin/payroll/adjust-salary",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({personId:f.id,role:f.role,amount:Number(g),roleCode:f.roleCode})}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to adjust salary");(0,s.toast)({title:"Salary Adjusted",description:`Successfully updated salary for ${f.name}`,type:"success"}),b(),h()}catch(e){(0,s.toast)({title:"Adjustment Failed",description:e.message||"An error occurred while updating salary.",type:"error"})}finally{v(!1)}}};if(!f)return null;let C=f.currentSalary,A=Number(g)||0,R=A-C;return(0,t.jsx)(r.Dialog,{open:u,onOpenChange:h,children:(0,t.jsxs)(r.DialogContent,{className:"bg-black/95 border-white/10 text-white sm:max-w-[400px] w-[95vw] rounded-2xl",children:[(0,t.jsx)(r.DialogHeader,{children:(0,t.jsx)(r.DialogTitle,{className:"text-xl font-display italic",children:"Adjust Salary"})}),(0,t.jsxs)("div",{className:"space-y-4 md:space-y-6 py-2 md:py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 md:p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,t.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-accent/20 flex items-center justify-center text-accent font-black text-sm md:text-base",children:f.name.charAt(0)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-bold text-sm md:text-base",children:f.name}),(0,t.jsxs)("div",{className:"text-[10px] text-muted-foreground font-mono uppercase tracking-tighter opacity-70",children:[f.schoolId," • ",f.role]})]})]}),null!==j&&(0,t.jsxs)("div",{className:"px-3 py-1.5 rounded-lg bg-blue-500/5 border border-blue-500/10 flex justify-between items-center text-[10px]",children:[(0,t.jsx)("span",{className:"text-blue-400 font-black tracking-widest uppercase",children:"Role Baseline"}),(0,t.jsxs)("span",{className:"font-mono font-bold text-blue-300",children:["₹",j.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,t.jsx)(d.Label,{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:"Monthly Base Salary (₹)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.DollarSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{type:"number",value:g,onChange:e=>y(e.target.value),className:"pl-9 bg-white/5 border-white/10 h-10 md:h-12 text-sm md:text-lg font-mono focus:ring-accent/30 rounded-xl",placeholder:"Enter Amount"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[(0,t.jsxs)("div",{className:"p-2.5 md:p-3 rounded-xl bg-white/5 border border-white/10 text-center md:text-left",children:[(0,t.jsx)("div",{className:"text-[8px] md:text-[10px] uppercase font-black tracking-widest text-muted-foreground mb-0.5 md:mb-1",children:"Current"}),(0,t.jsxs)("div",{className:"text-sm md:text-lg font-mono font-bold",children:["₹",C?.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"p-2.5 md:p-3 rounded-xl bg-white/5 border border-white/10 text-center md:text-left",children:[(0,t.jsx)("div",{className:"text-[8px] md:text-[10px] uppercase font-black tracking-widest text-muted-foreground mb-0.5 md:mb-1",children:"Proposed"}),(0,t.jsxs)("div",{className:"text-sm md:text-lg font-mono font-bold",children:["₹",A?.toLocaleString()]})]})]}),0!==R&&(0,t.jsxs)("div",{className:`p-3 md:p-4 rounded-xl flex items-center justify-between ${R>0?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 font-black uppercase text-[10px] tracking-widest",children:[R>0?(0,t.jsx)(c.TrendingUp,{className:"w-4 h-4"}):(0,t.jsx)(m,{className:"w-4 h-4"}),R>0?"Increase":"Decrease"]}),(0,t.jsxs)("div",{className:"text-base md:text-xl font-mono font-bold",children:[R>0?"+":""," ₹",Math.abs(R).toLocaleString()]})]})]}),(0,t.jsx)(r.DialogFooter,{children:(0,t.jsx)(l.Button,{onClick:T,disabled:w||A===C||A<0,className:"w-full bg-white text-black hover:bg-zinc-200 h-10 md:h-12 rounded-xl font-black uppercase tracking-tighter text-xs md:text-sm shadow-lg shadow-white/5",children:w?(0,t.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}):"Confirm Adjustment"})})]})})}e.s(["AdjustSalaryModal",()=>u],83211)},63727,e=>{"use strict";let t=(0,e.i(75254).default)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);e.s(["Briefcase",()=>t],63727)},96139,e=>{"use strict";let t=(0,e.i(75254).default)("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);e.s(["Coffee",()=>t],96139)},27510,e=>{e.v(t=>Promise.all(["static/chunks/54ab083194d7bfbe.js"].map(t=>e.l(t))).then(()=>t(48323)))}]);