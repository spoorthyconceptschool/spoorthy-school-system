(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(75157);let r=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...t}));r.displayName="Card";let i=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h3",{ref:r,className:(0,a.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...t}));l.displayName="CardTitle";let d=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-white/60 font-medium",e),...t}));d.displayName="CardDescription";let n=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...t}));n.displayName="CardContent",t.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>i,"CardTitle",()=>l])},71689,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},95468,e=>{"use strict";let s=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],95468)},27516,e=>{"use strict";let s=(0,e.i(75254).default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);e.s(["History",()=>s],27516)},15057,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",()=>s],15057)},12263,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(19455),r=e.i(15288),i=e.i(31278),l=e.i(58041),d=e.i(51737),n=e.i(78894);let c=(0,e.i(75254).default)("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]);var o=e.i(95468),x=e.i(27516),m=e.i(61911),h=e.i(71689),p=e.i(15057),u=e.i(59141),f=e.i(80691),b=e.i(75157),g=e.i(22016);function N(){let[e,N]=(0,t.useState)(!1),[j,v]=(0,t.useState)([]),[w,y]=(0,t.useState)(null),C=(e,s="info")=>{v(t=>[{msg:e,type:s},...t].slice(0,50))},k=async e=>{N(!0),y(null),C(`Initiating ${e} purge request...`,"warn");try{let s=await u.auth.currentUser?.getIdToken(),t=await fetch("/api/admin/purge-data",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s} `},body:JSON.stringify({type:e})}),a=await t.json();if(a.success)C(a.message,"success"),(0,f.toast)({title:"Purge Initiated",description:"The system is being wiped in the background.",type:"success"}),setTimeout(()=>C("Process backgrounded. Check server logs for full completion.","info"),2e3);else throw Error(a.error||"Failed to initiate purge")}catch(e){C(`ERROR: ${e.message} `,"err"),(0,f.toast)({title:"Operation Failed",description:e.message,type:"error"})}finally{N(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-[#050505] text-zinc-400 p-8 space-y-8 animate-in fade-in duration-700",children:[(0,s.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"flex gap-4",children:(0,s.jsx)(g.default,{href:"/admin/settings",children:(0,s.jsxs)(a.Button,{variant:"ghost",className:"text-zinc-500 hover:text-white hover:bg-white/5 gap-2 px-0",children:[(0,s.jsx)(h.ArrowLeft,{size:16})," Back to Settings"]})})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(g.default,{href:"/admin",children:(0,s.jsxs)(a.Button,{variant:"outline",className:"text-zinc-400 border-white/5 hover:bg-white/5 gap-2",children:["Dashboard ",(0,s.jsx)(p.ArrowUpRight,{size:14})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-red-500/10 border border-red-500/20 rounded-full text-red-500 text-[10px] font-bold tracking-tighter animate-pulse",children:[(0,s.jsx)(d.ShieldAlert,{size:12})," RESTRICTED ACCESS"]})]})]}),(0,s.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h1",{className:"text-4xl font-display font-bold text-white tracking-tight",children:"System Purge Control"}),(0,s.jsx)("p",{className:"text-zinc-500 max-w-xl",children:"Sensitive administrative tools for database resetting and system-wide data clearing. Use with extreme caution."})]})}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8 mt-12",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(r.Card,{className:"bg-zinc-900/50 border-white/5 backdrop-blur-xl group hover:border-emerald-500/30 transition-all duration-500",children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"p-3 bg-emerald-500/10 rounded-xl text-emerald-400",children:(0,s.jsx)(l.Database,{size:24})}),(0,s.jsx)("div",{className:"text-[10px] font-mono p-1 px-2 bg-emerald-500/10 text-emerald-500 rounded border border-emerald-500/20",children:"DATA RESET"})]}),(0,s.jsx)(r.CardTitle,{className:"text-xl text-white mt-4",children:"Operational Data Purge"}),(0,s.jsxs)(r.CardDescription,{children:["Deletes all operational records (fees, attendance, notices, schedules) but",(0,s.jsx)("b",{children:" preserves all users, students, and staff accounts."})]})]}),(0,s.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("ul",{className:"text-xs space-y-2 text-zinc-500",children:[(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)(o.CheckCircle2,{size:12,className:"text-emerald-500 shrink-0"})," Wipes Fees, Attendance & Exams"]}),(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)(o.CheckCircle2,{size:12,className:"text-emerald-500 shrink-0"})," Wipes Notices & Timetables"]}),(0,s.jsxs)("li",{className:"flex gap-2 text-emerald-400 font-medium italic",children:[(0,s.jsx)(m.Users,{size:12,className:"text-emerald-400 shrink-0"})," Retains Students/Teachers/Staff Details"]}),(0,s.jsxs)("li",{className:"flex gap-2 text-white/50 italic font-medium",children:[(0,s.jsx)(x.History,{size:12,className:"text-amber-500 shrink-0"})," Retains All Login Credentials"]})]}),"OPERATIONAL_ONLY"===w?(0,s.jsxs)("div",{className:"flex gap-2 pt-4 animate-in slide-in-from-bottom-2",children:[(0,s.jsx)(a.Button,{onClick:()=>k("OPERATIONAL_ONLY"),disabled:e,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-bold",children:"CONFIRM RESET"}),(0,s.jsx)(a.Button,{variant:"ghost",onClick:()=>y(null),className:"text-zinc-500",children:"Cancel"})]}):(0,s.jsx)(a.Button,{onClick:()=>y("OPERATIONAL_ONLY"),disabled:e,className:"w-full bg-zinc-800 hover:bg-zinc-700 text-white border border-white/5",children:"Operational Data Reset"})]})]}),(0,s.jsxs)(r.Card,{className:"bg-zinc-900/50 border-white/5 backdrop-blur-xl group hover:border-red-500/30 transition-all duration-500 shadow-2xl shadow-red-500/5",children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"p-3 bg-red-500/10 rounded-xl text-red-400",children:(0,s.jsx)(n.AlertTriangle,{size:24})}),(0,s.jsx)("div",{className:"text-[10px] font-mono p-1 px-2 bg-red-500/10 text-red-500 rounded border border-red-500/20",children:"☢️ DESTRUCTIVE"})]}),(0,s.jsx)(r.CardTitle,{className:"text-xl text-white mt-4",children:"Full System Nuke"}),(0,s.jsx)(r.CardDescription,{children:"Total destruction. Wipes all database records AND deletes all user accounts except for the Master Admin account."})]}),(0,s.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("ul",{className:"text-xs space-y-2 text-zinc-500",children:[(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)(o.CheckCircle2,{size:12,className:"text-red-500 shrink-0"})," Deletes all student/staff data"]}),(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)(o.CheckCircle2,{size:12,className:"text-red-500 shrink-0"})," Deletes all login credentials"]}),(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)(o.CheckCircle2,{size:12,className:"text-red-500 shrink-0"})," Clears Firestore, RTDB, and Storage"]}),(0,s.jsxs)("li",{className:"flex gap-2 text-emerald-500 font-bold italic",children:[(0,s.jsx)(o.CheckCircle2,{size:12,className:"text-emerald-500 shrink-0"})," PRESERVES LANDING PAGE & CMS IMAGES"]})]}),"FULL_SYSTEM"===w?(0,s.jsxs)("div",{className:"flex flex-col gap-2 pt-4 animate-in zoom-in-95",children:[(0,s.jsx)("p",{className:"text-[10px] text-red-500 font-bold text-center mb-2 uppercase tracking-widest",children:"DANGER: THIS CANNOT BE UNDONE"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.Button,{onClick:()=>k("FULL_SYSTEM"),disabled:e,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold animate-pulse",children:"NUKE EVERYTHING"}),(0,s.jsx)(a.Button,{variant:"ghost",onClick:()=>y(null),className:"text-zinc-500",children:"Abort"})]})]}):(0,s.jsx)(a.Button,{onClick:()=>y("FULL_SYSTEM"),disabled:e,className:"w-full bg-red-950/20 hover:bg-red-900/40 text-red-500 border border-red-500/20",children:"Full Factory Reset"})]})]})]}),(0,s.jsx)("div",{className:"flex flex-col h-full min-h-[500px]",children:(0,s.jsxs)("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-2xl flex flex-col h-full shadow-inner relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/5 bg-zinc-900/40 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs font-mono text-zinc-500",children:[(0,s.jsx)(c,{size:14})," SYSTEM_PURGE_LOG"]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500/20"}),(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500/20"}),(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500/20"})]})]}),(0,s.jsxs)("div",{className:"p-6 font-mono text-xs space-y-3 overflow-y-auto flex-1 custom-scrollbar scroll-smooth",children:[0===j.length&&(0,s.jsx)("div",{className:"text-zinc-700 italic",children:"Waiting for process initiation..."}),j.map((e,t)=>(0,s.jsxs)("div",{className:(0,b.cn)("p-2 rounded border border-transparent leading-relaxed animate-in fade-in duration-300","info"===e.type&&"text-zinc-400","warn"===e.type&&"bg-amber-500/5 text-amber-500 border-amber-500/10","success"===e.type&&"bg-emerald-500/5 text-emerald-500 border-emerald-500/10","err"===e.type&&"bg-red-500/5 text-red-500 border-red-500/10"),children:[(0,s.jsxs)("span",{className:"opacity-30 mr-2",children:["[",new Date().toLocaleTimeString(),"]"]}),e.msg]},t))]}),e&&(0,s.jsxs)("div",{className:"absolute inset-x-0 bottom-0 p-4 bg-zinc-900/80 backdrop-blur-sm border-t border-white/5 flex items-center justify-center gap-3 text-white text-sm",children:[(0,s.jsx)(i.Loader2,{className:"w-4 h-4 animate-spin text-emerald-500"}),"Processing secure wipe..."]})]})})]})]})}e.s(["default",()=>N],12263)}]);