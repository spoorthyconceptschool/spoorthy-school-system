(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...s}));r.displayName="Card";let l=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("h3",{ref:r,className:(0,a.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...s}));i.displayName="CardTitle";let d=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-white/60 font-medium",e),...s}));d.displayName="CardDescription";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...s}));n.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>l,"CardTitle",()=>i])},19455,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(91918),r=e.i(75157);let l=s.forwardRef(({className:e,variant:s="default",size:l="default",asChild:i=!1,...d},n)=>{let c=i?a.Slot:"button";return(0,t.jsx)(c,{className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===s,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===s,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===s,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===s,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===s,"text-primary underline-offset-4 hover:underline":"link"===s,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===s,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===s,"h-10 px-6 py-2":"default"===l,"h-9 px-4 text-xs":"sm"===l,"h-12 px-8 text-base":"lg"===l,"h-14 px-10 text-lg":"xl"===l,"h-10 w-10":"icon"===l},e),ref:n,...d})});l.displayName="Button",e.s(["Button",()=>l])},93479,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let r=s.forwardRef(({className:e,type:s,...r},l)=>(0,t.jsx)("input",{type:s,className:(0,a.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",e),ref:l,...r}));r.displayName="Input",e.s(["Input",()=>r])},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},57428,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(20783),r=e.i(30030),l=e.i(81140),i=e.i(69340),d=e.i(99682),n=e.i(35804),c=e.i(96626),o=e.i(48425),u="Checkbox",[h,x]=(0,r.createContextScope)(u),[m,f]=h(u);function p(e){let{__scopeCheckbox:a,checked:r,children:l,defaultChecked:d,disabled:n,form:c,name:o,onCheckedChange:h,required:x,value:f="on",internal_do_not_use_render:p}=e,[b,g]=(0,i.useControllableState)({prop:r,defaultProp:d??!1,onChange:h,caller:u}),[v,j]=s.useState(null),[N,y]=s.useState(null),w=s.useRef(!1),k=!v||!!c||!!v.closest("form"),S={checked:b,disabled:n,setChecked:g,control:v,setControl:j,name:o,form:c,value:f,hasConsumerStoppedPropagationRef:w,required:x,defaultChecked:!C(d)&&d,isFormControl:k,bubbleInput:N,setBubbleInput:y};return(0,t.jsx)(m,{scope:a,...S,children:"function"==typeof p?p(S):l})}var b="CheckboxTrigger",g=s.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:i,...d},n)=>{let{control:c,value:u,disabled:h,checked:x,required:m,setControl:p,setChecked:g,hasConsumerStoppedPropagationRef:v,isFormControl:j,bubbleInput:N}=f(b,e),y=(0,a.useComposedRefs)(n,p),w=s.useRef(x);return s.useEffect(()=>{let e=c?.form;if(e){let t=()=>g(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[c,g]),(0,t.jsx)(o.Primitive.button,{type:"button",role:"checkbox","aria-checked":C(x)?"mixed":x,"aria-required":m,"data-state":k(x),"data-disabled":h?"":void 0,disabled:h,value:u,...d,ref:y,onKeyDown:(0,l.composeEventHandlers)(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.composeEventHandlers)(i,e=>{g(e=>!!C(e)||!e),N&&j&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})});g.displayName=b;var v=s.forwardRef((e,s)=>{let{__scopeCheckbox:a,name:r,checked:l,defaultChecked:i,required:d,disabled:n,value:c,onCheckedChange:o,form:u,...h}=e;return(0,t.jsx)(p,{__scopeCheckbox:a,checked:l,defaultChecked:i,disabled:n,required:d,onCheckedChange:o,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{...h,ref:s,__scopeCheckbox:a}),e&&(0,t.jsx)(w,{__scopeCheckbox:a})]})})});v.displayName=u;var j="CheckboxIndicator",N=s.forwardRef((e,s)=>{let{__scopeCheckbox:a,forceMount:r,...l}=e,i=f(j,a);return(0,t.jsx)(c.Presence,{present:r||C(i.checked)||!0===i.checked,children:(0,t.jsx)(o.Primitive.span,{"data-state":k(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:s,style:{pointerEvents:"none",...e.style}})})});N.displayName=j;var y="CheckboxBubbleInput",w=s.forwardRef(({__scopeCheckbox:e,...r},l)=>{let{control:i,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:h,required:x,disabled:m,name:p,value:b,form:g,bubbleInput:v,setBubbleInput:j}=f(y,e),N=(0,a.useComposedRefs)(l,j),w=(0,d.usePrevious)(u),k=(0,n.useSize)(i);s.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!c.current;if(w!==u&&e){let s=new Event("click",{bubbles:t});v.indeterminate=C(u),e.call(v,!C(u)&&u),v.dispatchEvent(s)}},[v,w,u,c]);let S=s.useRef(!C(u)&&u);return(0,t.jsx)(o.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??S.current,required:x,disabled:m,name:p,value:b,form:g,...r,tabIndex:-1,ref:N,style:{...r.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(e){return"indeterminate"===e}function k(e){return C(e)?"indeterminate":e?"checked":"unchecked"}w.displayName=y;var S=e.i(43531),R=e.i(75157);let E=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(v,{ref:a,className:(0,R.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:(0,t.jsx)(N,{className:(0,R.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(S.Check,{className:"h-4 w-4"})})}));E.displayName=v.displayName,e.s(["Checkbox",()=>E],57428)},17204,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(36180);var a=e.i(98925),r=e.i(59141),l=e.i(72498),i=e.i(19455),d=e.i(67489),n=e.i(15288),c=e.i(87486),o=e.i(57428),u=e.i(31278),h=e.i(61911),x=e.i(72520),m=e.i(55436),f=e.i(93479),p=e.i(80691);function b(){let{classes:e,sections:b,classSections:g}=(0,l.useMasterData)(),v=Object.values(e).map(e=>({id:e.id,name:e.name,order:e.order||99})).sort((e,t)=>e.order-t.order),[j,N]=(0,s.useState)(""),[y,w]=(0,s.useState)("all"),[C,k]=(0,s.useState)([]),[S,R]=(0,s.useState)([]),[E,I]=(0,s.useState)([]),[T,A]=(0,s.useState)(!1),[D,P]=(0,s.useState)([]),[B,H]=(0,s.useState)(""),[_,F]=(0,s.useState)([]),[L,O]=(0,s.useState)(""),[V,G]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{let e=await (0,a.getDocs)((0,a.collection)(r.db,"groups")),t=[];e.forEach(e=>t.push({id:e.id,...e.data()})),k(t)})()},[]),(0,s.useEffect)(()=>{j?(P(Object.values(g).filter(e=>e.classId===j).map(e=>b[e.sectionId]).filter(Boolean)),w("all")):P([])},[j,g,b]),(0,s.useEffect)(()=>{j?(async()=>{A(!0);try{let e=(0,a.query)((0,a.collection)(r.db,"students"),(0,a.where)("classId","==",j));"all"!==y&&(e=(0,a.query)(e,(0,a.where)("sectionId","==",y)));let t=await (0,a.getDocs)(e),s=[];t.forEach(e=>s.push({id:e.id,...e.data()})),s.sort((e,t)=>e.studentName.localeCompare(t.studentName)),R(s),F([])}catch(e){console.error("Error fetching students:",e)}finally{A(!1)}})():R([])},[j,y]),(0,s.useEffect)(()=>{let e=S;if(B){let t=B.toLowerCase();e=e.filter(e=>e.studentName.toLowerCase().includes(t))}I(e)},[S,B]);let M=async()=>{if(!L||0===_.length)return;G(!0);let e=C.find(e=>e.id===L);if(e)try{let t=(0,a.writeBatch)(r.db);_.forEach(s=>{let l=(0,a.doc)(r.db,"students",s);t.update(l,{groupId:e.id,groupName:e.name,groupColor:e.color})}),await t.commit(),R(t=>t.map(t=>_.includes(t.id)?{...t,groupId:e.id,groupName:e.name}:t)),(0,p.toast)({title:"Assigned Successfully",description:`Moved ${_.length} students to ${e.name}`,type:"success"}),F([]),O("")}catch(e){console.error(e),(0,p.toast)({title:"Assignment Failed",type:"error"})}finally{G(!1)}},q=e=>{F(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(n.Card,{className:"bg-slate-900 border-slate-800",children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsxs)(n.CardTitle,{className:"text-white flex items-center gap-2",children:[(0,t.jsx)(h.Users,{className:"text-emerald-500"}),"Student Group Assignment"]}),(0,t.jsx)(n.CardDescription,{children:"Select a class, choose students, and assign them to a House/Group."})]}),(0,t.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 p-4 bg-slate-950/50 rounded-lg border border-slate-800/50",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Class"}),(0,t.jsxs)(d.Select,{value:j,onValueChange:N,children:[(0,t.jsx)(d.SelectTrigger,{className:"bg-slate-900 border-slate-800 text-white",children:(0,t.jsx)(d.SelectValue,{placeholder:"Select Class"})}),(0,t.jsx)(d.SelectContent,{children:v.map(e=>(0,t.jsx)(d.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Section"}),(0,t.jsxs)(d.Select,{value:y,onValueChange:w,disabled:!j,children:[(0,t.jsx)(d.SelectTrigger,{className:"bg-slate-900 border-slate-800 text-white",children:(0,t.jsx)(d.SelectValue,{placeholder:"All Sections"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"all",children:"All Sections"}),D.map(e=>(0,t.jsx)(d.SelectItem,{value:e.id,children:e.name||e.id},e.id))]})]})]}),(0,t.jsxs)("div",{className:"flex-[2] space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Search Student"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Search,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),(0,t.jsx)(f.Input,{placeholder:"Search by name...",value:B,onChange:e=>H(e.target.value),className:"pl-9 bg-slate-900 border-slate-800 text-white"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 p-4 bg-emerald-950/30 border border-emerald-900/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-sm text-emerald-200",children:[_.length," students selected"]}),(0,t.jsxs)("div",{className:"flex-1 max-w-sm flex gap-2",children:[(0,t.jsxs)(d.Select,{value:L,onValueChange:O,children:[(0,t.jsx)(d.SelectTrigger,{className:"bg-slate-900 border-emerald-900/50 text-white",children:(0,t.jsx)(d.SelectValue,{placeholder:"Select Target Group..."})}),(0,t.jsx)(d.SelectContent,{children:C.map(e=>(0,t.jsx)(d.SelectItem,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),e.name]})},e.id))})]}),(0,t.jsx)(i.Button,{onClick:M,disabled:V||!L||0===_.length,className:"bg-emerald-600 hover:bg-emerald-700 text-white whitespace-nowrap",children:V?(0,t.jsx)(u.Loader2,{className:"animate-spin w-4 h-4 ml-2"}):(0,t.jsxs)("div",{className:"flex items-center",children:["Assign ",(0,t.jsx)(x.ArrowRight,{className:"w-4 h-4 ml-2"})]})})]})]}),(0,t.jsxs)("div",{className:"border border-slate-800 rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-slate-950 p-3 border-b border-slate-800 flex items-center gap-4 text-sm font-bold text-slate-400",children:[(0,t.jsx)("div",{className:"w-8 flex justify-center",children:(0,t.jsx)(o.Checkbox,{checked:_.length>0&&_.length===E.length,onCheckedChange:e=>{e?F(E.map(e=>e.id)):F([])},className:"border-slate-600 data-[state=checked]:bg-emerald-600 data-[state=checked]:border-emerald-600"})}),(0,t.jsx)("div",{className:"flex-1",children:"Student Details"}),(0,t.jsx)("div",{className:"w-40",children:"Current Group"})]}),T?(0,t.jsx)("div",{className:"p-10 flex justify-center text-emerald-500",children:(0,t.jsx)(u.Loader2,{className:"animate-spin"})}):0===E.length?(0,t.jsx)("div",{className:"p-10 text-center text-slate-500",children:j?"No students found.":"Please select a class to view students."}):(0,t.jsx)("div",{className:"max-h-[500px] overflow-y-auto divide-y divide-slate-800/50",children:E.map(e=>{let s=C.find(t=>t.id===e.groupId);return(0,t.jsxs)("div",{className:`flex items-center gap-4 p-3 hover:bg-slate-900/50 transition-colors cursor-pointer ${_.includes(e.id)?"bg-emerald-950/10":""}`,onClick:()=>q(e.id),children:[(0,t.jsx)("div",{className:"w-8 flex justify-center",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(o.Checkbox,{checked:_.includes(e.id),onCheckedChange:()=>q(e.id),className:"border-slate-600 data-[state=checked]:bg-emerald-600 data-[state=checked]:border-emerald-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-slate-200",children:e.studentName}),(0,t.jsxs)("div",{className:"text-xs text-slate-500",children:[e.className," ",e.sectionName?`- ${e.sectionName}`:""," â€¢ ID: ",e.id]})]}),(0,t.jsx)("div",{className:"w-40",children:s?(0,t.jsxs)(c.Badge,{variant:"outline",className:"border-slate-700 bg-slate-900 text-white font-normal group-hover:border-slate-600",style:{borderColor:s.color},children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:s.color}}),s.name]}):(0,t.jsx)("span",{className:"text-slate-600 text-xs italic",children:"Unassigned"})})]},e.id)})})]})]})]})})}function g(){return(0,t.jsx)("div",{className:"min-h-screen bg-black text-white p-8 animate-in fade-in",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,t.jsx)("header",{className:"flex items-center justify-between pb-6 border-b border-white/10",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-display font-bold text-white",children:"Groups Management"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Assign your students to their respective Houses/Teams."})]})}),(0,t.jsx)(b,{})]})})}e.s(["default",()=>g],17204)}]);