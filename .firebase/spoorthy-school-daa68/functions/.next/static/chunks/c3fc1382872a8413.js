(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...a}));r.displayName="Card";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,s.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...a}));d.displayName="CardTitle";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-white/60 font-medium",e),...a}));i.displayName="CardDescription";let c=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>c,"CardDescription",()=>i,"CardHeader",()=>l,"CardTitle",()=>d])},93479,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,type:a,...r},l)=>(0,t.jsx)("input",{type:a,className:(0,s.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",e),ref:l,...r}));r.displayName="Input",e.s(["Input",()=>r])},84774,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})}));r.displayName="Table";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",e),...a}));l.displayName="TableHeader";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a}));d.displayName="TableBody",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));i.displayName="TableRow";let c=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));c.displayName="TableHead";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));o.displayName="TableCell",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>d,"TableCell",()=>o,"TableHead",()=>c,"TableHeader",()=>l,"TableRow",()=>i])},69049,41071,e=>{"use strict";var t=e.i(43476),a=e.i(84774),s=e.i(75157),r=e.i(19455);let l=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>l],41071);var d=e.i(55146);function i({data:e,columns:i,isLoading:c,onRowClick:o,actions:n}){return c?(0,t.jsx)("div",{className:"w-full h-48 flex items-center justify-center bg-white/5 rounded-xl animate-pulse",children:(0,t.jsx)("div",{className:"h-4 w-4 bg-accent/50 rounded-full animate-ping"})}):(0,t.jsxs)("div",{className:"w-full space-y-3",children:[(0,t.jsx)("div",{className:"overflow-x-auto rounded-xl md:rounded-2xl border border-white/10 bg-black/20 backdrop-blur-md custom-scrollbar",children:(0,t.jsxs)(a.Table,{className:"w-full",children:[(0,t.jsx)(a.TableHeader,{className:"bg-white/5",children:(0,t.jsxs)(a.TableRow,{className:"border-white/10 hover:bg-transparent",children:[i.map(e=>(0,t.jsx)(a.TableHead,{className:(0,s.cn)("text-muted-foreground font-black uppercase text-[7px] md:text-[10px] tracking-widest h-8 md:h-12 whitespace-nowrap px-2 md:px-6 italic",e.headerClassName),children:e.header},e.key)),n&&(0,t.jsx)(a.TableHead,{className:"w-[30px] md:w-[50px] whitespace-nowrap px-2 md:px-6"})]})}),(0,t.jsx)(a.TableBody,{children:0===e.length?(0,t.jsx)(a.TableRow,{children:(0,t.jsx)(a.TableCell,{colSpan:i.length+ +!!n,className:"h-24 md:h-32 text-center text-muted-foreground border-white/10 whitespace-nowrap text-[10px] md:text-sm italic",children:"No results found."})}):e.map((e,c)=>(0,t.jsxs)(a.TableRow,{className:(0,s.cn)("border-white/5 transition-all duration-300 hover:bg-[#64FFDA]/5 group cursor-default",o&&"cursor-pointer"),onClick:()=>o?.(e),children:[i.map(r=>(0,t.jsx)(a.TableCell,{className:(0,s.cn)("py-2 md:py-4 px-2 md:px-6 font-medium whitespace-nowrap text-[10px] md:text-sm",r.cellClassName),children:(0,t.jsx)("div",{className:"flex flex-col",children:r.render?r.render(e,c):(0,t.jsx)("span",{className:"text-white group-hover:text-accent transition-colors",children:e[r.key]})})},`${e.id}-${r.key}`)),n&&(0,t.jsx)(a.TableCell,{className:"px-2 md:px-6",children:(0,t.jsxs)(d.DropdownMenu,{children:[(0,t.jsx)(d.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{variant:"ghost",className:"h-7 w-7 md:h-8 md:w-8 p-0 hover:bg-white/10 text-muted-foreground hover:text-white",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(l,{className:"h-3 w-3 md:h-4 md:w-4"})]})}),(0,t.jsxs)(d.DropdownMenuContent,{align:"end",className:"bg-[#0A192F] border-white/10 backdrop-blur-xl rounded-xl",children:[(0,t.jsx)(d.DropdownMenuLabel,{className:"text-[10px] uppercase font-black tracking-widest text-muted-foreground/60 p-3 italic",children:"Operations"}),(0,t.jsx)(d.DropdownMenuSeparator,{className:"bg-white/5"}),(0,t.jsx)("div",{className:"p-1",children:n(e)})]})]})})]},e.id||c))})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-2 md:py-4 px-3 md:px-6 bg-white/5 border border-white/10 rounded-xl md:rounded-2xl",children:[(0,t.jsxs)("div",{className:"text-[8px] md:text-xs font-black uppercase tracking-widest text-muted-foreground italic",children:["Scope: ",(0,t.jsxs)("span",{className:"text-white ml-1",children:[e.length," items"]})]}),(0,t.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Prev"}),(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Next"})]})]})]})}e.s(["DataTable",()=>i],69049)},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));r.displayName="Textarea",e.s(["Textarea",()=>r])},63609,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(32341),r=e.i(19455),l=e.i(93479),d=e.i(24687),i=e.i(67489),c=e.i(15288),o=e.i(87486),n=e.i(31278),x=e.i(27612);e.i(36180);var m=e.i(98925),p=e.i(59141),h=e.i(80691),u=e.i(69049);function b(){let{user:e}=(0,s.useAuth)(),[b,f]=(0,a.useState)([]),[g,w]=(0,a.useState)(!0),[N,j]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[T,C]=(0,a.useState)(""),[k,S]=(0,a.useState)(""),[R,A]=(0,a.useState)("REGULAR"),[D,H]=(0,a.useState)("ALL");(0,a.useEffect)(()=>{let e=!0,t=y?(0,m.query)((0,m.collection)(p.db,"notices")):(0,m.query)((0,m.collection)(p.db,"notices"),(0,m.orderBy)("createdAt","desc")),a=(0,m.onSnapshot)(t,t=>{if(!e)return;let a=t.docs.map(e=>({id:e.id,...e.data()}));y&&(a=[...a].sort((e,t)=>(t.createdAt?.seconds||0)-(e.createdAt?.seconds||0))),f(a),w(!1)},t=>{e&&(t.message.includes("index")&&!y?(console.warn("Notices index missing, using fallback."),v(!0)):t.message.includes("index")||(console.error("Notice stream error:",t),w(!1)))});return()=>{e=!1,a()}},[y]);let B=async t=>{t.preventDefault(),j(!0);try{let t=await e?.getIdToken(),a=await fetch("/api/admin/notices/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({title:T,content:k,type:R,target:D})}),s=await a.json();if(!a.ok)throw Error(s.error||"Failed to publish notice");(0,h.toast)({title:"Notice Published",description:"Your notice is now live and audience notified.",type:"success"}),C(""),S(""),A("REGULAR"),H("ALL")}catch(e){(0,h.toast)({title:"Failed",description:e.message||"Could not publish notice.",type:"error"})}finally{j(!1)}},L=async e=>{if(confirm("Delete this notice?"))try{await (0,m.deleteDoc)((0,m.doc)(p.db,"notices",e)),(0,h.toast)({title:"Deleted",description:"Notice removed.",type:"success"})}catch(e){(0,h.toast)({title:"Error",description:"Failed to delete notice.",type:"error"})}};return(0,t.jsxs)("div",{className:"space-y-4 md:space-y-6 max-w-none p-0 animate-in fade-in",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-xl md:text-3xl font-display font-bold text-white",children:"Notice Board"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[(0,t.jsxs)(c.Card,{className:"bg-black/20 border-white/10 h-fit lg:col-span-1 shadow-xl backdrop-blur-sm",children:[(0,t.jsxs)(c.CardHeader,{className:"py-3 px-4 md:py-6",children:[(0,t.jsx)(c.CardTitle,{className:"text-sm md:text-xl font-bold text-accent italic",children:"Create Notice"}),(0,t.jsx)(c.CardDescription,{className:"text-[10px] md:text-xs",children:"Publish updates to the school."})]}),(0,t.jsx)(c.CardContent,{className:"px-4 pb-4 md:px-6 md:pb-6",children:(0,t.jsxs)("form",{onSubmit:B,className:"space-y-3 md:space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-[10px] md:text-xs font-black uppercase tracking-tighter text-muted-foreground",children:"Notice Type"}),(0,t.jsxs)(i.Select,{onValueChange:A,value:R,children:[(0,t.jsx)(i.SelectTrigger,{className:"bg-white/5 border-white/10 h-8 md:h-10 text-xs md:text-sm",children:(0,t.jsx)(i.SelectValue,{})}),(0,t.jsxs)(i.SelectContent,{className:"bg-[#0A192F] border-white/10",children:[(0,t.jsx)(i.SelectItem,{value:"REGULAR",children:"Regular Notice"}),(0,t.jsx)(i.SelectItem,{value:"HOLIDAY",children:"Holiday Notice"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{className:"text-[10px] md:text-xs font-black uppercase tracking-tighter text-muted-foreground",children:"Target Audience"}),(0,t.jsxs)(i.Select,{onValueChange:H,value:D,children:[(0,t.jsx)(i.SelectTrigger,{className:"bg-white/5 border-white/10 h-8 md:h-10 text-xs md:text-sm",children:(0,t.jsx)(i.SelectValue,{})}),(0,t.jsxs)(i.SelectContent,{className:"bg-[#0A192F] border-white/10",children:[(0,t.jsx)(i.SelectItem,{value:"ALL",children:"Everyone"}),(0,t.jsx)(i.SelectItem,{value:"TEACHERS",children:"Teachers Only"}),(0,t.jsx)(i.SelectItem,{value:"STUDENTS",children:"Students Only"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Input,{required:!0,placeholder:"Title",value:T,onChange:e=>C(e.target.value),className:"bg-white/5 border-white/10 h-8 md:h-10 text-xs md:text-sm font-bold"}),(0,t.jsx)(d.Textarea,{required:!0,placeholder:"Notice content...",value:k,onChange:e=>S(e.target.value),className:"bg-white/5 border-white/10 min-h-[80px] md:min-h-[120px] text-xs md:text-sm resize-none"})]}),(0,t.jsx)(r.Button,{type:"submit",disabled:N,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold h-8 md:h-10 text-[10px] md:text-sm shadow-lg shadow-emerald-900/20",children:N?(0,t.jsx)(n.Loader2,{className:"animate-spin w-4 h-4"}):"Publish Notice"})]})})]}),(0,t.jsxs)(c.Card,{className:"bg-black/20 border-white/10 lg:col-span-2 shadow-xl backdrop-blur-sm",children:[(0,t.jsx)(c.CardHeader,{className:"py-3 px-4 md:py-6",children:(0,t.jsx)(c.CardTitle,{className:"text-sm md:text-xl font-bold text-accent italic",children:"Notice History"})}),(0,t.jsx)(c.CardContent,{className:"px-3 md:px-6 pb-4 md:pb-6",children:(0,t.jsx)(u.DataTable,{data:b,isLoading:g,columns:[{key:"title",header:"Notice Details",render:e=>(0,t.jsxs)("div",{className:"flex flex-col gap-1 max-w-[300px]",children:[(0,t.jsx)("span",{className:"font-bold text-sm text-white group-hover:text-accent transition-colors leading-tight",children:e.title}),(0,t.jsx)("p",{className:"text-[10px] md:text-xs text-white/40 line-clamp-2 leading-relaxed",children:e.content})]})},{key:"type",header:"Type & Target",render:e=>(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:["HOLIDAY"===e.type&&(0,t.jsx)(o.Badge,{className:"text-[7px] md:text-[8px] bg-yellow-500/20 text-yellow-500 border-none px-1.5 py-0 h-4 uppercase font-black",children:"Holiday"}),(0,t.jsx)(o.Badge,{variant:"secondary",className:"text-[7px] md:text-[8px] px-1.5 py-0 h-4 border-none bg-white/10 text-white/60 uppercase font-black",children:e.target})]})},{key:"meta",header:"Published",cellClassName:"hidden md:table-cell",headerClassName:"hidden md:table-cell",render:e=>(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[(0,t.jsx)("span",{className:"text-[9px] font-black text-muted-foreground uppercase tracking-widest leading-none",children:e.senderName}),(0,t.jsx)("span",{className:"text-[8px] text-muted-foreground/40 mt-1 uppercase font-mono",children:e.createdAt?new Date(e.createdAt?.seconds*1e3).toLocaleDateString():"Just now"})]})}],actions:e=>(0,t.jsxs)(r.Button,{variant:"ghost",className:"w-full justify-start gap-2 h-9 text-xs font-bold uppercase tracking-tighter text-red-400 hover:text-white hover:bg-red-500/20",onClick:()=>L(e.id),children:[(0,t.jsx)(x.Trash2,{size:14})," Delete Notice"]})})})]})]})]})}e.s(["default",()=>b])}]);