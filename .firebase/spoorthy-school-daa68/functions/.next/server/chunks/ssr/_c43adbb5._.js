module.exports=[30485,31052,a=>{"use strict";var b,c=a.i(88156),d=a.i(69304),e=a.i(57179),f=a.i(14834);function g(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let h=new d.ErrorFactory("auth","Firebase",g()),i=new f.Logger("@firebase/auth");function j(a,...b){i.logLevel<=f.LogLevel.ERROR&&i.error(`Auth (${c.SDK_VERSION}): ${a}`,...b)}function k(a,...b){throw o(a,...b)}function l(a,...b){return o(a,...b)}function m(a,b,c){let e={...g(),[b]:c};return new d.ErrorFactory("auth","Firebase",e).create(b,{appName:a.name})}function n(a){return m(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function o(a,...b){if("string"!=typeof a){let c=b[0],d=[...b.slice(1)];return d[0]&&(d[0].appName=a.name),a._errorFactory.create(c,...d)}return h.create(a,...b)}function p(a,b,...c){if(!a)throw o(b,...c)}function q(a){let b="INTERNAL ASSERTION FAILED: "+a;throw j(b),Error(b)}function r(){return"u">typeof self&&self.location?.protocol||null}class s{static initialize(a,b,c){this.fetchImpl=a,b&&(this.headersImpl=b),c&&(this.responseImpl=c)}static fetch(){return this.fetchImpl?this.fetchImpl:"u">typeof self&&"fetch"in self?self.fetch:"u">typeof globalThis&&globalThis.fetch?globalThis.fetch:"u">typeof fetch?fetch:void q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"u">typeof self&&"Headers"in self?self.Headers:"u">typeof globalThis&&globalThis.Headers?globalThis.Headers:"u">typeof Headers?Headers:void q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"u">typeof self&&"Response"in self?self.Response:"u">typeof globalThis&&globalThis.Response?globalThis.Response:"u">typeof Response?Response:void q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},u=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v=new class{constructor(a,b){this.shortDelay=a,this.longDelay=b,b>a||q("Short delay should be less than long delay!"),this.isMobile=(0,d.isMobileCordova)()||(0,d.isReactNative)()}get(){return!("u">typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===r()||"https:"===r()||(0,d.isBrowserExtension)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}(3e4,6e4);function w(a,b){return a.tenantId&&!b.tenantId?{...b,tenantId:a.tenantId}:b}async function x(a,b,c,e,f={}){return y(a,f,async()=>{let f={},g={};e&&("GET"===b?g=e:f={body:JSON.stringify(e)});let h=(0,d.querystring)({key:a.config.apiKey,...g}).slice(1),i=await a._getAdditionalHeaders();i["Content-Type"]="application/json",a.languageCode&&(i["X-Firebase-Locale"]=a.languageCode);let j={method:b,headers:i,...f};return(0,d.isCloudflareWorker)()||(j.referrerPolicy="no-referrer"),a.emulatorConfig&&(0,d.isCloudWorkstation)(a.emulatorConfig.host)&&(j.credentials="include"),s.fetch()(await A(a,a.config.apiHost,c,h),j)})}async function y(a,b,c){a._canInitEmulator=!1;let e={...t,...b};try{let b=new B(a),d=await Promise.race([c(),b.promise]);b.clearNetworkTimeout();let f=await d.json();if("needConfirmation"in f)throw C(a,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{let[b,c]=(d.ok?f.errorMessage:f.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===b)throw C(a,"credential-already-in-use",f);if("EMAIL_EXISTS"===b)throw C(a,"email-already-in-use",f);if("USER_DISABLED"===b)throw C(a,"user-disabled",f);let g=e[b]||b.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw m(a,g,c);k(a,g)}}catch(b){if(b instanceof d.FirebaseError)throw b;k(a,"network-request-failed",{message:String(b)})}}async function z(a,b,c,d,e={}){let f=await x(a,b,c,d,e);return"mfaPendingCredential"in f&&k(a,"multi-factor-auth-required",{_serverResponse:f}),f}async function A(a,b,c,d){let e=`${b}${c}?${d}`,f=a.config.emulator?function(a,b){var c;c=a.emulator,c||q("Emulator should always be set here");let{url:d}=a.emulator;return b?`${d}${b.startsWith("/")?b.slice(1):b}`:d}(a.config,e):`${a.config.apiScheme}://${e}`;return u.includes(c)&&(await a._persistenceManagerAvailable,"COOKIE"===a._getPersistenceType())?a._getPersistence()._getFinalTarget(f).toString():f}class B{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(a){this.auth=a,this.timer=null,this.promise=new Promise((a,b)=>{this.timer=setTimeout(()=>b(l(this.auth,"network-request-failed")),v.get())})}}function C(a,b,c){let d={appName:a.name};c.email&&(d.email=c.email),c.phoneNumber&&(d.phoneNumber=c.phoneNumber);let e=l(a,b,d);return e.customData._tokenResponse=c,e}function D(a){return void 0!==a&&void 0!==a.enterprise}class E{constructor(a){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===a.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=a.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=a.recaptchaEnforcementState}getProviderEnforcementState(a){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let b of this.recaptchaEnforcementState)if(b.provider&&b.provider===a)switch(b.enforcementState){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}return null}isProviderEnabled(a){return"ENFORCE"===this.getProviderEnforcementState(a)||"AUDIT"===this.getProviderEnforcementState(a)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F(a,b){return x(a,"GET","/v2/recaptchaConfig",w(a,b))}async function G(a,b){return x(a,"POST","/v1/accounts:delete",b)}async function H(a,b){return x(a,"POST","/v1/accounts:lookup",b)}function I(a){if(a)try{let b=new Date(Number(a));if(!isNaN(b.getTime()))return b.toUTCString()}catch(a){}}async function J(a,b=!1){let c=(0,d.getModularInstance)(a),e=await c.getIdToken(b),f=L(e);p(f&&f.exp&&f.auth_time&&f.iat,c.auth,"internal-error");let g="object"==typeof f.firebase?f.firebase:void 0,h=g?.sign_in_provider;return{claims:f,token:e,authTime:I(K(f.auth_time)),issuedAtTime:I(K(f.iat)),expirationTime:I(K(f.exp)),signInProvider:h||null,signInSecondFactor:g?.sign_in_second_factor||null}}function K(a){return 1e3*Number(a)}function L(a){let[b,c,e]=a.split(".");if(void 0===b||void 0===c||void 0===e)return j("JWT malformed, contained fewer than 3 sections"),null;try{let a=(0,d.base64Decode)(c);if(!a)return j("Failed to decode base64 JWT payload"),null;return JSON.parse(a)}catch(a){return j("Caught error parsing JWT payload as JSON",a?.toString()),null}}function M(a){let b=L(a);return p(b,"internal-error"),p(void 0!==b.exp,"internal-error"),p(void 0!==b.iat,"internal-error"),Number(b.exp)-Number(b.iat)}async function N(a,b,c=!1){if(c)return b;try{return await b}catch(b){throw b instanceof d.FirebaseError&&function({code:a}){return"auth/user-disabled"===a||"auth/user-token-expired"===a}(b)&&a.auth.currentUser===a&&await a.auth.signOut(),b}}class O{constructor(a){this.user=a,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(a){if(!a)return this.errorBackoff=3e4,Math.max(0,(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5);{let a=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),a}}schedule(a=!1){if(!this.isRunning)return;let b=this.getInterval(a);this.timerId=setTimeout(async()=>{await this.iteration()},b)}async iteration(){try{await this.user.getIdToken(!0)}catch(a){a?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class P{constructor(a,b){this.createdAt=a,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=I(this.lastLoginAt),this.creationTime=I(this.createdAt)}_copy(a){this.createdAt=a.createdAt,this.lastLoginAt=a.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Q(a){var b,c;let d=a.auth,e=await a.getIdToken(),f=await N(a,H(d,{idToken:e}));p(f?.users.length,d,"internal-error");let g=f.users[0];a._notifyReloadListener(g);let h=g.providerUserInfo?.length?S(g.providerUserInfo):[],i=(b=a.providerData,c=h,[...b.filter(a=>!c.some(b=>b.providerId===a.providerId)),...c]),j=a.isAnonymous,k=!(a.email&&g.passwordHash)&&!i?.length;Object.assign(a,{uid:g.localId,displayName:g.displayName||null,photoURL:g.photoUrl||null,email:g.email||null,emailVerified:g.emailVerified||!1,phoneNumber:g.phoneNumber||null,tenantId:g.tenantId||null,providerData:i,metadata:new P(g.createdAt,g.lastLoginAt),isAnonymous:!!j&&k})}async function R(a){let b=(0,d.getModularInstance)(a);await Q(b),await b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)}function S(a){return a.map(({providerId:a,...b})=>({providerId:a,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}))}async function T(a,b){let c=await y(a,{},async()=>{let c=(0,d.querystring)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:e,apiKey:f}=a.config,g=await A(a,e,"/v1/token",`key=${f}`),h=await a._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";let i={method:"POST",headers:h,body:c};return a.emulatorConfig&&(0,d.isCloudWorkstation)(a.emulatorConfig.host)&&(i.credentials="include"),s.fetch()(g,i)});return{accessToken:c.access_token,expiresIn:c.expires_in,refreshToken:c.refresh_token}}async function U(a,b){return x(a,"POST","/v2/accounts:revokeToken",w(a,b))}class V{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(a){p(a.idToken,"internal-error"),p(void 0!==a.idToken,"internal-error"),p(void 0!==a.refreshToken,"internal-error");let b="expiresIn"in a&&void 0!==a.expiresIn?Number(a.expiresIn):M(a.idToken);this.updateTokensAndExpiration(a.idToken,a.refreshToken,b)}updateFromIdToken(a){p(0!==a.length,"internal-error");let b=M(a);this.updateTokensAndExpiration(a,null,b)}async getToken(a,b=!1){return b||!this.accessToken||this.isExpired?(p(this.refreshToken,a,"user-token-expired"),this.refreshToken)?(await this.refresh(a,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(a,b){let{accessToken:c,refreshToken:d,expiresIn:e}=await T(a,b);this.updateTokensAndExpiration(c,d,Number(e))}updateTokensAndExpiration(a,b,c){this.refreshToken=b||null,this.accessToken=a||null,this.expirationTime=Date.now()+1e3*c}static fromJSON(a,b){let{refreshToken:c,accessToken:d,expirationTime:e}=b,f=new V;return c&&(p("string"==typeof c,"internal-error",{appName:a}),f.refreshToken=c),d&&(p("string"==typeof d,"internal-error",{appName:a}),f.accessToken=d),e&&(p("number"==typeof e,"internal-error",{appName:a}),f.expirationTime=e),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(a){this.accessToken=a.accessToken,this.refreshToken=a.refreshToken,this.expirationTime=a.expirationTime}_clone(){return Object.assign(new V,this.toJSON())}_performRefresh(){return q("not implemented")}}function W(a,b){p("string"==typeof a||void 0===a,"internal-error",{appName:b})}class X{constructor({uid:a,auth:b,stsTokenManager:c,...d}){this.providerId="firebase",this.proactiveRefresh=new O(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=b,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=d.displayName||null,this.email=d.email||null,this.emailVerified=d.emailVerified||!1,this.phoneNumber=d.phoneNumber||null,this.photoURL=d.photoURL||null,this.isAnonymous=d.isAnonymous||!1,this.tenantId=d.tenantId||null,this.providerData=d.providerData?[...d.providerData]:[],this.metadata=new P(d.createdAt||void 0,d.lastLoginAt||void 0)}async getIdToken(a){let b=await N(this,this.stsTokenManager.getToken(this.auth,a));return p(b,this.auth,"internal-error"),this.accessToken!==b&&(this.accessToken=b,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),b}getIdTokenResult(a){return J(this,a)}reload(){return R(this)}_assign(a){this!==a&&(p(this.uid===a.uid,this.auth,"internal-error"),this.displayName=a.displayName,this.photoURL=a.photoURL,this.email=a.email,this.emailVerified=a.emailVerified,this.phoneNumber=a.phoneNumber,this.isAnonymous=a.isAnonymous,this.tenantId=a.tenantId,this.providerData=a.providerData.map(a=>({...a})),this.metadata._copy(a.metadata),this.stsTokenManager._assign(a.stsTokenManager))}_clone(a){let b=new X({...this,auth:a,stsTokenManager:this.stsTokenManager._clone()});return b.metadata._copy(this.metadata),b}_onReload(a){p(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=a,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(a){this.reloadListener?this.reloadListener(a):this.reloadUserInfo=a}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(a,b=!1){let c=!1;a.idToken&&a.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(a),c=!0),b&&await Q(this),await this.auth._persistUserIfCurrent(this),c&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,c._isFirebaseServerApp)(this.auth.app))return Promise.reject(n(this.auth));let a=await this.getIdToken();return await N(this,G(this.auth,{idToken:a})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(a=>({...a})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(a,b){let c=b.displayName??void 0,d=b.email??void 0,e=b.phoneNumber??void 0,f=b.photoURL??void 0,g=b.tenantId??void 0,h=b._redirectEventId??void 0,i=b.createdAt??void 0,j=b.lastLoginAt??void 0,{uid:k,emailVerified:l,isAnonymous:m,providerData:n,stsTokenManager:o}=b;p(k&&o,a,"internal-error");let q=V.fromJSON(this.name,o);p("string"==typeof k,a,"internal-error"),W(c,a.name),W(d,a.name),p("boolean"==typeof l,a,"internal-error"),p("boolean"==typeof m,a,"internal-error"),W(e,a.name),W(f,a.name),W(g,a.name),W(h,a.name),W(i,a.name),W(j,a.name);let r=new X({uid:k,auth:a,email:d,emailVerified:l,displayName:c,isAnonymous:m,photoURL:f,phoneNumber:e,tenantId:g,stsTokenManager:q,createdAt:i,lastLoginAt:j});return n&&Array.isArray(n)&&(r.providerData=n.map(a=>({...a}))),h&&(r._redirectEventId=h),r}static async _fromIdTokenResponse(a,b,c=!1){let d=new V;d.updateFromServerResponse(b);let e=new X({uid:b.localId,auth:a,stsTokenManager:d,isAnonymous:c});return await Q(e),e}static async _fromGetAccountInfoResponse(a,b,c){let d=b.users[0];p(void 0!==d.localId,"internal-error");let e=void 0!==d.providerUserInfo?S(d.providerUserInfo):[],f=!(d.email&&d.passwordHash)&&!e?.length,g=new V;g.updateFromIdToken(c);let h=new X({uid:d.localId,auth:a,stsTokenManager:g,isAnonymous:f});return Object.assign(h,{uid:d.localId,displayName:d.displayName||null,photoURL:d.photoUrl||null,email:d.email||null,emailVerified:d.emailVerified||!1,phoneNumber:d.phoneNumber||null,tenantId:d.tenantId||null,providerData:e,metadata:new P(d.createdAt,d.lastLoginAt),isAnonymous:!(d.email&&d.passwordHash)&&!e?.length}),h}}let Y=new Map;function Z(a){a instanceof Function||q("Expected a class definition");let b=Y.get(a);return b?(b instanceof a||q("Instance stored in cache mismatched with class"),b):(b=new a,Y.set(a,b),b)}class ${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(a,b){this.storage[a]=b}async _get(a){let b=this.storage[a];return void 0===b?null:b}async _remove(a){delete this.storage[a]}_addListener(a,b){}_removeListener(a,b){}}function _(a,b,c){return`firebase:${a}:${b}:${c}`}$.type="NONE";class aa{constructor(a,b,c){this.persistence=a,this.auth=b,this.userKey=c;const{config:d,name:e}=this.auth;this.fullUserKey=_(this.userKey,d.apiKey,e),this.fullPersistenceKey=_("persistence",d.apiKey,e),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(a){return this.persistence._set(this.fullUserKey,a.toJSON())}async getCurrentUser(){let a=await this.persistence._get(this.fullUserKey);if(!a)return null;if("string"==typeof a){let b=await H(this.auth,{idToken:a}).catch(()=>void 0);return b?X._fromGetAccountInfoResponse(this.auth,b,a):null}return X._fromJSON(this.auth,a)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(a){if(this.persistence===a)return;let b=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=a,b)return this.setCurrentUser(b)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(a,b,c="authUser"){if(!b.length)return new aa(Z($),a,c);let d=(await Promise.all(b.map(async a=>{if(await a._isAvailable())return a}))).filter(a=>a),e=d[0]||Z($),f=_(c,a.config.apiKey,a.name),g=null;for(let c of b)try{let b=await c._get(f);if(b){let d;if("string"==typeof b){let c=await H(a,{idToken:b}).catch(()=>void 0);if(!c)break;d=await X._fromGetAccountInfoResponse(a,c,b)}else d=X._fromJSON(a,b);c!==e&&(g=d),e=c;break}}catch{}let h=d.filter(a=>a._shouldAllowMigration);return e._shouldAllowMigration&&h.length&&(e=h[0],g&&await e._set(f,g.toJSON()),await Promise.all(b.map(async a=>{if(a!==e)try{await a._remove(f)}catch{}}))),new aa(e,a,c)}}function ab(a){let b=a.toLowerCase();if(b.includes("opera/")||b.includes("opr/")||b.includes("opios/"))return"Opera";{if(function(a=(0,d.getUA)()){return/iemobile/i.test(a)}(b))return"IEMobile";if(b.includes("msie")||b.includes("trident/"))return"IE";if(b.includes("edge/"))return"Edge";if(function(a=(0,d.getUA)()){return/firefox\//i.test(a)}(b))return"Firefox";if(b.includes("silk/"))return"Silk";if(function(a=(0,d.getUA)()){return/blackberry/i.test(a)}(b))return"Blackberry";if(function(a=(0,d.getUA)()){return/webos/i.test(a)}(b))return"Webos";if(function(a=(0,d.getUA)()){let b=a.toLowerCase();return b.includes("safari/")&&!b.includes("chrome/")&&!b.includes("crios/")&&!b.includes("android")}(b))return"Safari";if((b.includes("chrome/")||function(a=(0,d.getUA)()){return/crios\//i.test(a)}(b))&&!b.includes("edge/"))return"Chrome";if(function(a=(0,d.getUA)()){return/android/i.test(a)}(b))return"Android";let c=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(c?.length===2)return c[1]}return"Other"}function ac(a,b=[]){let e;switch(a){case"Browser":e=ab((0,d.getUA)());break;case"Worker":e=`${ab((0,d.getUA)())}-${a}`;break;default:e=a}let f=b.length?b.join(","):"FirebaseCore-web";return`${e}/JsCore/${c.SDK_VERSION}/${f}`}class ad{constructor(a){this.auth=a,this.queue=[]}pushCallback(a,b){let c=b=>new Promise((c,d)=>{try{let d=a(b);c(d)}catch(a){d(a)}});c.onAbort=b,this.queue.push(c);let d=this.queue.length-1;return()=>{this.queue[d]=()=>Promise.resolve()}}async runMiddleware(a){if(this.auth.currentUser===a)return;let b=[];try{for(let c of this.queue)await c(a),c.onAbort&&b.push(c.onAbort)}catch(a){for(let a of(b.reverse(),b))try{a()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function ae(a,b={}){return x(a,"GET","/v2/passwordPolicy",w(a,b))}class af{constructor(a){const b=a.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=b.minPasswordLength??6,b.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=b.maxPasswordLength),void 0!==b.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=b.containsLowercaseCharacter),void 0!==b.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=b.containsUppercaseCharacter),void 0!==b.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=b.containsNumericCharacter),void 0!==b.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=b.containsNonAlphanumericCharacter),this.enforcementState=a.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=a.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=a.forceUpgradeOnSignin??!1,this.schemaVersion=a.schemaVersion}validatePassword(a){let b={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(a,b),this.validatePasswordCharacterOptions(a,b),b.isValid&&(b.isValid=b.meetsMinPasswordLength??!0),b.isValid&&(b.isValid=b.meetsMaxPasswordLength??!0),b.isValid&&(b.isValid=b.containsLowercaseLetter??!0),b.isValid&&(b.isValid=b.containsUppercaseLetter??!0),b.isValid&&(b.isValid=b.containsNumericCharacter??!0),b.isValid&&(b.isValid=b.containsNonAlphanumericCharacter??!0),b}validatePasswordLengthOptions(a,b){let c=this.customStrengthOptions.minPasswordLength,d=this.customStrengthOptions.maxPasswordLength;c&&(b.meetsMinPasswordLength=a.length>=c),d&&(b.meetsMaxPasswordLength=a.length<=d)}validatePasswordCharacterOptions(a,b){let c;this.updatePasswordCharacterOptionsStatuses(b,!1,!1,!1,!1);for(let d=0;d<a.length;d++)c=a.charAt(d),this.updatePasswordCharacterOptionsStatuses(b,c>="a"&&c<="z",c>="A"&&c<="Z",c>="0"&&c<="9",this.allowedNonAlphanumericCharacters.includes(c))}updatePasswordCharacterOptionsStatuses(a,b,c,d,e){this.customStrengthOptions.containsLowercaseLetter&&(a.containsLowercaseLetter||(a.containsLowercaseLetter=b)),this.customStrengthOptions.containsUppercaseLetter&&(a.containsUppercaseLetter||(a.containsUppercaseLetter=c)),this.customStrengthOptions.containsNumericCharacter&&(a.containsNumericCharacter||(a.containsNumericCharacter=d)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(a.containsNonAlphanumericCharacter||(a.containsNonAlphanumericCharacter=e))}}class ag{constructor(a,b,c,d){this.app=a,this.heartbeatServiceProvider=b,this.appCheckServiceProvider=c,this.config=d,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ai(this),this.idTokenSubscription=new ai(this),this.beforeStateQueue=new ad(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=a.name,this.clientVersion=d.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(a,b){return b&&(this._popupRedirectResolver=Z(b)),this._initializationPromise=this.queue(async()=>{if(!this._deleted){if(this.persistenceManager=await aa.create(this,a),this._resolvePersistenceManagerAvailable?.(),!this._deleted){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(b),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let a=await this.assertedPersistence.getCurrentUser();if(this.currentUser||a){if(this.currentUser&&a&&this.currentUser.uid===a.uid){this._currentUser._assign(a),await this.currentUser.getIdToken();return}await this._updateCurrentUser(a,!0)}}async initializeCurrentUserFromIdToken(a){try{let b=await H(this,{idToken:a}),c=await X._fromGetAccountInfoResponse(this,b,a);await this.directlySetCurrentUser(c)}catch(a){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",a),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(a){if((0,c._isFirebaseServerApp)(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(b=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(b,b))}):this.directlySetCurrentUser(null)}let b=await this.assertedPersistence.getCurrentUser(),d=b,e=!1;if(a&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let b=this.redirectUser?._redirectEventId,c=d?._redirectEventId,f=await this.tryRedirectSignIn(a);(!b||b===c)&&f?.user&&(d=f.user,e=!0)}if(!d)return this.directlySetCurrentUser(null);if(!d._redirectEventId){if(e)try{await this.beforeStateQueue.runMiddleware(d)}catch(a){d=b,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return d?this.reloadAndSetCurrentUserOrClear(d):this.directlySetCurrentUser(null)}return(p(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===d._redirectEventId)?this.directlySetCurrentUser(d):this.reloadAndSetCurrentUserOrClear(d)}async tryRedirectSignIn(a){let b=null;try{b=await this._popupRedirectResolver._completeRedirectFn(this,a,!0)}catch(a){await this._setRedirectUser(null)}return b}async reloadAndSetCurrentUserOrClear(a){try{await Q(a)}catch(a){if(a?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(a)}useDeviceLanguage(){this.languageCode=function(){if("u"<typeof navigator)return null;let a=navigator;return a.languages&&a.languages[0]||a.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(a){if((0,c._isFirebaseServerApp)(this.app))return Promise.reject(n(this));let b=a?(0,d.getModularInstance)(a):null;return b&&p(b.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(b&&b._clone(this))}async _updateCurrentUser(a,b=!1){if(!this._deleted)return a&&p(this.tenantId===a.tenantId,this,"tenant-id-mismatch"),b||await this.beforeStateQueue.runMiddleware(a),this.queue(async()=>{await this.directlySetCurrentUser(a),this.notifyAuthListeners()})}async signOut(){return(0,c._isFirebaseServerApp)(this.app)?Promise.reject(n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(a){return(0,c._isFirebaseServerApp)(this.app)?Promise.reject(n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Z(a))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(a){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let b=this._getPasswordPolicyInternal();return b.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):b.validatePassword(a)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let a=new af(await ae(this));null===this.tenantId?this._projectPasswordPolicy=a:this._tenantPasswordPolicies[this.tenantId]=a}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(a){this._errorFactory=new d.ErrorFactory("auth","Firebase",a())}onAuthStateChanged(a,b,c){return this.registerStateListener(this.authStateSubscription,a,b,c)}beforeAuthStateChanged(a,b){return this.beforeStateQueue.pushCallback(a,b)}onIdTokenChanged(a,b,c){return this.registerStateListener(this.idTokenSubscription,a,b,c)}authStateReady(){return new Promise((a,b)=>{if(this.currentUser)a();else{let c=this.onAuthStateChanged(()=>{c(),a()},b)}})}async revokeAccessToken(a){if(this.currentUser){let b={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:a,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(b.tenantId=this.tenantId),await U(this,b)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(a,b){let c=await this.getOrInitRedirectPersistenceManager(b);return null===a?c.removeCurrentUser():c.setCurrentUser(a)}async getOrInitRedirectPersistenceManager(a){if(!this.redirectPersistenceManager){let b=a&&Z(a)||this._popupRedirectResolver;p(b,this,"argument-error"),this.redirectPersistenceManager=await aa.create(this,[Z(b._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(a){return(this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===a)?this._currentUser:this.redirectUser?._redirectEventId===a?this.redirectUser:null}async _persistUserIfCurrent(a){if(a===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(a))}_notifyListenersIfCurrent(a){a===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let a=this.currentUser?.uid??null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(a,b,c,d){if(this._deleted)return()=>{};let e="function"==typeof b?b:b.next.bind(b),f=!1,g=this._isInitialized?Promise.resolve():this._initializationPromise;if(p(g,this,"internal-error"),g.then(()=>{f||e(this.currentUser)}),"function"==typeof b){let e=a.addObserver(b,c,d);return()=>{f=!0,e()}}{let c=a.addObserver(b);return()=>{f=!0,c()}}}async directlySetCurrentUser(a){this.currentUser&&this.currentUser!==a&&this._currentUser._stopProactiveRefresh(),a&&this.isProactiveRefreshEnabled&&a._startProactiveRefresh(),this.currentUser=a,a?await this.assertedPersistence.setCurrentUser(a):await this.assertedPersistence.removeCurrentUser()}queue(a){return this.operations=this.operations.then(a,a),this.operations}get assertedPersistence(){return p(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(a){!a||this.frameworks.includes(a)||(this.frameworks.push(a),this.frameworks.sort(),this.clientVersion=ac(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let a={"X-Client-Version":this.clientVersion};this.app.options.appId&&(a["X-Firebase-gmpid"]=this.app.options.appId);let b=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();b&&(a["X-Firebase-Client"]=b);let c=await this._getAppCheckToken();return c&&(a["X-Firebase-AppCheck"]=c),a}async _getAppCheckToken(){if((0,c._isFirebaseServerApp)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let a=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return a?.error&&function(a,...b){i.logLevel<=f.LogLevel.WARN&&i.warn(`Auth (${c.SDK_VERSION}): ${a}`,...b)}(`Error while retrieving App Check token: ${a.error}`),a?.token}}function ah(a){return(0,d.getModularInstance)(a)}class ai{constructor(a){this.auth=a,this.observer=null,this.addObserver=(0,d.createSubscribe)(a=>this.observer=a)}get next(){return p(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class aj{constructor(){this.enterprise=new ak}ready(a){a()}execute(a,b){return Promise.resolve("token")}render(a,b){return""}}class ak{ready(a){a()}execute(a,b){return Promise.resolve("token")}render(a,b){return""}}let al="NO_RECAPTCHA";class am{constructor(a){this.type="recaptcha-enterprise",this.auth=ah(a)}async verify(a="verify",b=!1){async function c(a){if(!b){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(b,c)=>{F(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0===d.recaptchaKey)c(Error("recaptcha Enterprise site key undefined"));else{let c=new E(d);return null==a.tenantId?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,b(c.siteKey)}}).catch(a=>{c(a)})})}return this.auth.settings.appVerificationDisabledForTesting?new aj().execute("siteKey",{action:"verify"}):new Promise((d,e)=>{c(this.auth).then(c=>{let f;if(!(!b&&D(window.grecaptcha)))return void e(Error("RecaptchaVerifier is only supported in browser"));D(f=window.grecaptcha)?f.enterprise.ready(()=>{f.enterprise.execute(c,{action:a}).then(a=>{d(a)}).catch(()=>{d(al)})}):e(Error("No reCAPTCHA enterprise script loaded."))}).catch(a=>{e(a)})})}}async function an(a,b,c,d=!1,e=!1){let f,g=new am(a);if(e)f=al;else try{f=await g.verify(c)}catch(a){f=await g.verify(c,!0)}let h={...b};if("mfaSmsEnrollment"===c||"mfaSmsSignIn"===c){if("phoneEnrollmentInfo"in h){let a=h.phoneEnrollmentInfo.phoneNumber,b=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:b,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){let a=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:a,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return d?Object.assign(h,{captchaResp:f}):Object.assign(h,{captchaResponse:f}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function ao(a,b,c,d,e){if("EMAIL_PASSWORD_PROVIDER"===e)if(!a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return d(a,b).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log(`${c} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let e=await an(a,b,c,"getOobCode"===c);return d(a,e)}});else{let e=await an(a,b,c,"getOobCode"===c);return d(a,e)}if("PHONE_PROVIDER"!==e)return Promise.reject(e+" provider is not supported.");if(a._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let e=await an(a,b,c);return d(a,e).catch(async e=>{if(a._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&("auth/missing-recaptcha-token"===e.code||"auth/invalid-app-credential"===e.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${c} flow.`);let e=await an(a,b,c,!1,!0);return d(a,e)}return Promise.reject(e)})}{let e=await an(a,b,c,!1,!0);return d(a,e)}}function ap(a){let b=a.indexOf(":");return b<0?"":a.substr(0,b+1)}function aq(a){if(!a)return null;let b=Number(a);return isNaN(b)?null:b}class ar{constructor(a,b){this.providerId=a,this.signInMethod=b}toJSON(){return q("not implemented")}_getIdTokenResponse(a){return q("not implemented")}_linkToIdToken(a,b){return q("not implemented")}_getReauthenticationResolver(a){return q("not implemented")}}async function as(a,b){return x(a,"POST","/v1/accounts:update",b)}async function at(a,b){return x(a,"POST","/v1/accounts:signUp",b)}async function au(a,b){return z(a,"POST","/v1/accounts:signInWithPassword",w(a,b))}async function av(a,b){return z(a,"POST","/v1/accounts:signInWithEmailLink",w(a,b))}async function aw(a,b){return z(a,"POST","/v1/accounts:signInWithEmailLink",w(a,b))}class ax extends ar{constructor(a,b,c,d=null){super("password",c),this._email=a,this._password=b,this._tenantId=d}static _fromEmailAndPassword(a,b){return new ax(a,b,"password")}static _fromEmailAndCode(a,b,c=null){return new ax(a,b,"emailLink",c)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(a){let b="string"==typeof a?JSON.parse(a):a;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);else if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}async _getIdTokenResponse(a){switch(this.signInMethod){case"password":return ao(a,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",au,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return av(a,{email:this._email,oobCode:this._password});default:k(a,"internal-error")}}async _linkToIdToken(a,b){switch(this.signInMethod){case"password":return ao(a,{idToken:b,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",at,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return aw(a,{idToken:b,email:this._email,oobCode:this._password});default:k(a,"internal-error")}}_getReauthenticationResolver(a){return this._getIdTokenResponse(a)}}async function ay(a,b){return z(a,"POST","/v1/accounts:signInWithIdp",w(a,b))}class az extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(a){let b=new az(a.providerId,a.signInMethod);return a.idToken||a.accessToken?(a.idToken&&(b.idToken=a.idToken),a.accessToken&&(b.accessToken=a.accessToken),a.nonce&&!a.pendingToken&&(b.nonce=a.nonce),a.pendingToken&&(b.pendingToken=a.pendingToken)):a.oauthToken&&a.oauthTokenSecret?(b.accessToken=a.oauthToken,b.secret=a.oauthTokenSecret):k("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(a){let{providerId:b,signInMethod:c,...d}="string"==typeof a?JSON.parse(a):a;if(!b||!c)return null;let e=new az(b,c);return e.idToken=d.idToken||void 0,e.accessToken=d.accessToken||void 0,e.secret=d.secret,e.nonce=d.nonce,e.pendingToken=d.pendingToken||null,e}_getIdTokenResponse(a){return ay(a,this.buildRequest())}_linkToIdToken(a,b){let c=this.buildRequest();return c.idToken=b,ay(a,c)}_getReauthenticationResolver(a){let b=this.buildRequest();return b.autoCreate=!1,ay(a,b)}buildRequest(){let a={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)a.pendingToken=this.pendingToken;else{let b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),a.postBody=(0,d.querystring)(b)}return a}}class aA{constructor(a){const b=(0,d.querystringDecode)((0,d.extractQuerystring)(a)),c=b.apiKey??null,e=b.oobCode??null,f=function(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(b.mode??null);p(c&&e&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=e,this.continueUrl=b.continueUrl??null,this.languageCode=b.lang??null,this.tenantId=b.tenantId??null}static parseLink(a){let b,c,e,f=(c=(b=(0,d.querystringDecode)((0,d.extractQuerystring)(a)).link)?(0,d.querystringDecode)((0,d.extractQuerystring)(b)).deep_link_id:null,((e=(0,d.querystringDecode)((0,d.extractQuerystring)(a)).deep_link_id)?(0,d.querystringDecode)((0,d.extractQuerystring)(e)).link:null)||e||c||b||a);try{return new aA(f)}catch{return null}}}class aB{constructor(){this.providerId=aB.PROVIDER_ID}static credential(a,b){return ax._fromEmailAndPassword(a,b)}static credentialWithLink(a,b){let c=aA.parseLink(b);return p(c,"argument-error"),ax._fromEmailAndCode(a,c.code,c.tenantId)}}aB.PROVIDER_ID="password",aB.EMAIL_PASSWORD_SIGN_IN_METHOD="password",aB.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class aC{constructor(a){this.providerId=a,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(a){this.defaultLanguageCode=a}setCustomParameters(a){return this.customParameters=a,this}getCustomParameters(){return this.customParameters}}class aD extends aC{constructor(){super(...arguments),this.scopes=[]}addScope(a){return this.scopes.includes(a)||this.scopes.push(a),this}getScopes(){return[...this.scopes]}}class aE extends aD{constructor(){super("facebook.com")}static credential(a){return az._fromParams({providerId:aE.PROVIDER_ID,signInMethod:aE.FACEBOOK_SIGN_IN_METHOD,accessToken:a})}static credentialFromResult(a){return aE.credentialFromTaggedObject(a)}static credentialFromError(a){return aE.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a||!("oauthAccessToken"in a)||!a.oauthAccessToken)return null;try{return aE.credential(a.oauthAccessToken)}catch{return null}}}aE.FACEBOOK_SIGN_IN_METHOD="facebook.com",aE.PROVIDER_ID="facebook.com";class aF extends aD{constructor(){super("google.com"),this.addScope("profile")}static credential(a,b){return az._fromParams({providerId:aF.PROVIDER_ID,signInMethod:aF.GOOGLE_SIGN_IN_METHOD,idToken:a,accessToken:b})}static credentialFromResult(a){return aF.credentialFromTaggedObject(a)}static credentialFromError(a){return aF.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;let{oauthIdToken:b,oauthAccessToken:c}=a;if(!b&&!c)return null;try{return aF.credential(b,c)}catch{return null}}}aF.GOOGLE_SIGN_IN_METHOD="google.com",aF.PROVIDER_ID="google.com";class aG extends aD{constructor(){super("github.com")}static credential(a){return az._fromParams({providerId:aG.PROVIDER_ID,signInMethod:aG.GITHUB_SIGN_IN_METHOD,accessToken:a})}static credentialFromResult(a){return aG.credentialFromTaggedObject(a)}static credentialFromError(a){return aG.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a||!("oauthAccessToken"in a)||!a.oauthAccessToken)return null;try{return aG.credential(a.oauthAccessToken)}catch{return null}}}aG.GITHUB_SIGN_IN_METHOD="github.com",aG.PROVIDER_ID="github.com";class aH extends aD{constructor(){super("twitter.com")}static credential(a,b){return az._fromParams({providerId:aH.PROVIDER_ID,signInMethod:aH.TWITTER_SIGN_IN_METHOD,oauthToken:a,oauthTokenSecret:b})}static credentialFromResult(a){return aH.credentialFromTaggedObject(a)}static credentialFromError(a){return aH.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;let{oauthAccessToken:b,oauthTokenSecret:c}=a;if(!b||!c)return null;try{return aH.credential(b,c)}catch{return null}}}aH.TWITTER_SIGN_IN_METHOD="twitter.com",aH.PROVIDER_ID="twitter.com";class aI{constructor(a){this.user=a.user,this.providerId=a.providerId,this._tokenResponse=a._tokenResponse,this.operationType=a.operationType}static async _fromIdTokenResponse(a,b,c,d=!1){return new aI({user:await X._fromIdTokenResponse(a,c,d),providerId:aJ(c),_tokenResponse:c,operationType:b})}static async _forOperation(a,b,c){return await a._updateTokensIfNecessary(c,!0),new aI({user:a,providerId:aJ(c),_tokenResponse:c,operationType:b})}}function aJ(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class aK extends d.FirebaseError{constructor(a,b,c,d){super(b.code,b.message),this.operationType=c,this.user=d,Object.setPrototypeOf(this,aK.prototype),this.customData={appName:a.name,tenantId:a.tenantId??void 0,_serverResponse:b.customData._serverResponse,operationType:c}}static _fromErrorAndOperation(a,b,c,d){return new aK(a,b,c,d)}}function aL(a,b,c,d){return("reauthenticate"===b?c._getReauthenticationResolver(a):c._getIdTokenResponse(a)).catch(c=>{if("auth/multi-factor-auth-required"===c.code)throw aK._fromErrorAndOperation(a,c,b,d);throw c})}async function aM(a,b,d=!1){let{auth:e}=a;if((0,c._isFirebaseServerApp)(e.app))return Promise.reject(n(e));let f="reauthenticate";try{let c=await N(a,aL(e,f,b,a),d);p(c.idToken,e,"internal-error");let g=L(c.idToken);p(g,e,"internal-error");let{sub:h}=g;return p(a.uid===h,e,"user-mismatch"),aI._forOperation(a,f,c)}catch(a){throw a?.code==="auth/user-not-found"&&k(e,"user-mismatch"),a}}async function aN(a,b,d=!1){if((0,c._isFirebaseServerApp)(a.app))return Promise.reject(n(a));let e="signIn",f=await aL(a,e,b),g=await aI._fromIdTokenResponse(a,e,f);return d||await a._updateCurrentUser(g.user),g}async function aO(a,b){return aN(ah(a),b)}async function aP(a,b){return aM((0,d.getModularInstance)(a),b)}class aQ{constructor(a,b){this.factorId=a,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(a,b){return"phoneInfo"in b?aR._fromServerResponse(a,b):"totpInfo"in b?aS._fromServerResponse(a,b):k(a,"internal-error")}}class aR extends aQ{constructor(a){super("phone",a),this.phoneNumber=a.phoneInfo}static _fromServerResponse(a,b){return new aR(b)}}class aS extends aQ{constructor(a){super("totp",a)}static _fromServerResponse(a,b){return new aS(b)}}async function aT(a){let b=ah(a);b._getPasswordPolicyInternal()&&await b._updatePasswordPolicy()}function aU(a,b,e){return(0,c._isFirebaseServerApp)(a.app)?Promise.reject(n(a)):aO((0,d.getModularInstance)(a),aB.credential(b,e)).catch(async b=>{throw"auth/password-does-not-meet-requirements"===b.code&&aT(a),b})}function aV(a,b){return aW((0,d.getModularInstance)(a),null,b)}async function aW(a,b,c){let{auth:d}=a,e={idToken:await a.getIdToken(),returnSecureToken:!0};b&&(e.email=b),c&&(e.password=c);let f=await N(a,as(d,e));await a._updateTokensIfNecessary(f,!0)}function aX(a,b,c,e){return(0,d.getModularInstance)(a).onAuthStateChanged(b,c,e)}function aY(a){return(0,d.getModularInstance)(a).signOut()}new WeakMap;var aZ="@firebase/auth",a$="1.12.0";class a_{constructor(a){this.auth=a,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(a){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(a)}:null}addAuthTokenListener(a){if(this.assertAuthConfigured(),this.internalListeners.has(a))return;let b=this.auth.onIdTokenChanged(b=>{a(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(a,b),this.updateProactiveRefresh()}removeAuthTokenListener(a){this.assertAuthConfigured();let b=this.internalListeners.get(a);b&&(this.internalListeners.delete(a),b(),this.updateProactiveRefresh())}assertAuthConfigured(){p(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function a0(a=(0,c.getApp)()){let b=(0,c._getProvider)(a,"auth");if(b.isInitialized())return b.getImmediate();let e=function(a,b){let e=(0,c._getProvider)(a,"auth");if(e.isInitialized()){let a=e.getImmediate(),b=e.getOptions();if((0,d.deepEqual)(b,(void 0)??{}))return a;k(a,"already-initialized")}return e.initialize({options:void 0})}(a),f=(0,d.getDefaultEmulatorHost)("auth");return f&&function(a,b,c){let e=ah(a);p(/^https?:\/\//.test(b),e,"invalid-emulator-scheme");let f=ap(b),{host:g,port:h}=function(a){let b=ap(a),c=/(\/\/)?([^?#/]+)/.exec(a.substr(b.length));if(!c)return{host:"",port:null};let d=c[2].split("@").pop()||"",e=/^(\[[^\]]+\])(:|$)/.exec(d);if(e){let a=e[1];return{host:a,port:aq(d.substr(a.length+1))}}{let[a,b]=d.split(":");return{host:a,port:aq(b)}}}(b),i=null===h?"":`:${h}`,j={url:`${f}//${g}${i}/`},k=Object.freeze({host:g,port:h,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!e._canInitEmulator){p(e.config.emulator&&e.emulatorConfig,e,"emulator-config-failed"),p((0,d.deepEqual)(j,e.config.emulator)&&(0,d.deepEqual)(k,e.emulatorConfig),e,"emulator-config-failed");return}e.config.emulator=j,e.emulatorConfig=k,e.settings.appVerificationDisabledForTesting=!0,(0,d.isCloudWorkstation)(g)?((0,d.pingServer)(`${f}//${g}${i}`),(0,d.updateEmulatorBanner)("Auth",!0)):"u">typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.")}(e,`http://${f}`),e}s.initialize(fetch,Headers,Response),b="Node",(0,c._registerComponent)(new e.Component("auth",(a,{options:c})=>{let d,e,f=a.getProvider("app").getImmediate(),g=a.getProvider("heartbeat"),h=a.getProvider("app-check-internal"),{apiKey:i,authDomain:j}=f.options;p(i&&!i.includes(":"),"invalid-api-key",{appName:f.name});let k=new ag(f,g,h,{apiKey:i,authDomain:j,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ac(b)});return e=(Array.isArray(d=c?.persistence||[])?d:[d]).map(Z),c?.errorMap&&k._updateErrorMap(c.errorMap),k._initializeWithPersistence(e,c?.popupRedirectResolver),k},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((a,b,c)=>{a.getProvider("auth-internal").initialize()})),(0,c._registerComponent)(new e.Component("auth-internal",a=>new a_(ah(a.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,c.registerVersion)(aZ,a$,function(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(b)),(0,c.registerVersion)(aZ,a$,"esm2020"),l("operation-not-supported-in-this-environment"),ag.prototype.setPersistence=async()=>{};a.s([],48641),a.s([],30485),a.i(48641),a.s(["EmailAuthProvider",()=>aB,"getAuth",()=>a0,"onAuthStateChanged",()=>aX,"reauthenticateWithCredential",()=>aP,"signInWithEmailAndPassword",()=>aU,"signOut",()=>aY,"updatePassword",()=>aV],31052)},1611,14692,a=>{"use strict";var b=a.i(88156);(0,b.registerVersion)("firebase","12.9.0","app"),a.s([],1611),a.i(69304),a.s(["getApp",()=>b.getApp,"getApps",()=>b.getApps,"initializeApp",()=>b.initializeApp],14692)},20237,a=>{"use strict";let b,c;a.i(1611);var d,e,f,g,h=a.i(14692);a.i(30485);var i=a.i(31052);a.i(69387);var j=a.i(60574),k=a.i(88156),l=a.i(69304),m=a.i(57179);let n="functions";class o extends l.FirebaseError{constructor(a,b,c){super(`${n}/${a}`,b||""),this.details=c,Object.setPrototypeOf(this,o.prototype)}}class p{constructor(a,b,c,d){this.app=a,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,(0,k._isFirebaseServerApp)(a)&&a.settings.appCheckToken&&(this.serverAppAppCheckToken=a.settings.appCheckToken),this.auth=b.getImmediate({optional:!0}),this.messaging=c.getImmediate({optional:!0}),this.auth||b.get().then(a=>this.auth=a,()=>{}),this.messaging||c.get().then(a=>this.messaging=a,()=>{}),this.appCheck||d?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{let a=await this.auth.getToken();return a?.accessToken}catch(a){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(a){return}}async getAppCheckToken(a){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let b=a?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return b.error?null:b.token}return null}async getContext(a){let b=await this.getAuthToken();return{authToken:b,messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(a)}}}let q="us-central1";class r{constructor(a,b,c,d,e=q,f=(...a)=>fetch(...a)){this.app=a,this.fetchImpl=f,this.emulatorOrigin=null,this.contextProvider=new p(a,b,c,d),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(e);this.customDomain=a.origin+("/"===a.pathname?"":a.pathname),this.region=q}catch(a){this.customDomain=null,this.region=e}}_delete(){return this.deleteService()}_url(a){let b=this.app.options.projectId;if(null!==this.emulatorOrigin){let c=this.emulatorOrigin;return`${c}/${b}/${this.region}/${a}`}return null!==this.customDomain?`${this.customDomain}/${a}`:`https://${this.region}-${b}.cloudfunctions.net/${a}`}}let s="@firebase/functions",t="0.13.1";(0,k._registerComponent)(new m.Component(n,(a,{instanceIdentifier:b})=>new r(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("messaging-internal"),a.getProvider("app-check-internal"),b),"PUBLIC").setMultipleInstances(!0)),(0,k.registerVersion)(s,t,void 0),(0,k.registerVersion)(s,t,"esm2020");var u=l;let v="firebasestorage.googleapis.com";class w extends u.FirebaseError{constructor(a,b,c=0){super(x(a),`Firebase Storage: ${b} (${x(a)})`),this.status_=c,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,w.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return x(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function x(a){return"storage/"+a}function y(a){return new w(f.INVALID_ARGUMENT,a)}function z(){return new w(f.APP_DELETED,"The Firebase app was deleted.")}(d=f||(f={})).UNKNOWN="unknown",d.OBJECT_NOT_FOUND="object-not-found",d.BUCKET_NOT_FOUND="bucket-not-found",d.PROJECT_NOT_FOUND="project-not-found",d.QUOTA_EXCEEDED="quota-exceeded",d.UNAUTHENTICATED="unauthenticated",d.UNAUTHORIZED="unauthorized",d.UNAUTHORIZED_APP="unauthorized-app",d.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",d.INVALID_CHECKSUM="invalid-checksum",d.CANCELED="canceled",d.INVALID_EVENT_NAME="invalid-event-name",d.INVALID_URL="invalid-url",d.INVALID_DEFAULT_BUCKET="invalid-default-bucket",d.NO_DEFAULT_BUCKET="no-default-bucket",d.CANNOT_SLICE_BLOB="cannot-slice-blob",d.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",d.NO_DOWNLOAD_URL="no-download-url",d.INVALID_ARGUMENT="invalid-argument",d.INVALID_ARGUMENT_COUNT="invalid-argument-count",d.APP_DELETED="app-deleted",d.INVALID_ROOT_OPERATION="invalid-root-operation",d.INVALID_FORMAT="invalid-format",d.INTERNAL_ERROR="internal-error",d.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class A{constructor(a,b){this.bucket=a,this.path_=b}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,b){let c;try{c=A.makeFromUrl(a,b)}catch(b){return new A(a,"")}if(""===c.path)return c;throw new w(f.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+a+"'.")}static makeFromUrl(a,b){let c=null,d="([A-Za-z0-9.\\-_]+)",e=RegExp("^gs://"+d+"(/(.*))?$","i");function g(a){a.path_=decodeURIComponent(a.path)}let h=b.replace(/[.]/g,"\\."),i=RegExp(`^https?://${h}/v[A-Za-z0-9_]+/b/${d}/o(/([^?#]*).*)?$`,"i"),j=b===v?"(?:storage.googleapis.com|storage.cloud.google.com)":b,k=[{regex:e,indices:{bucket:1,path:3},postModify:function(a){"/"===a.path.charAt(a.path.length-1)&&(a.path_=a.path_.slice(0,-1))}},{regex:i,indices:{bucket:1,path:3},postModify:g},{regex:RegExp(`^https?://${j}/${d}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:g}];for(let b=0;b<k.length;b++){let d=k[b],e=d.regex.exec(a);if(e){let a=e[d.indices.bucket],b=e[d.indices.path];b||(b=""),c=new A(a,b),d.postModify(c);break}}if(null==c)throw new w(f.INVALID_URL,"Invalid URL '"+a+"'.");return c}}class B{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function C(a,b,c,d){if(d<b)throw y(`Invalid value for '${a}'. Expected ${b} or greater.`);if(d>c)throw y(`Invalid value for '${a}'. Expected ${c} or less.`)}(e=g||(g={}))[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT";class D{constructor(a,b,c,d,e,f,g,h,i,j,k,l=!0,m=!1){this.url_=a,this.method_=b,this.headers_=c,this.body_=d,this.successCodes_=e,this.additionalRetryCodes_=f,this.callback_=g,this.errorCallback_=h,this.timeout_=i,this.progressCallback_=j,this.connectionFactory_=k,this.retry=l,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((a,b)=>{this.resolve_=a,this.reject_=b,this.start_()})}start_(){let a=(a,b)=>{if(b)return void a(!1,new E(!1,null,!0));let c=this.connectionFactory_();this.pendingConnection_=c;let d=a=>{let b=a.loaded,c=a.lengthComputable?a.total:-1;null!==this.progressCallback_&&this.progressCallback_(b,c)};null!==this.progressCallback_&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{var b;let e,f,h;null!==this.progressCallback_&&c.removeUploadProgressListener(d),this.pendingConnection_=null;let i=c.getErrorCode()===g.NO_ERROR,j=c.getStatus();!i||(b=this.additionalRetryCodes_,e=j>=500&&j<600,f=-1!==[408,429].indexOf(j),h=-1!==b.indexOf(j),(e||f||h)&&this.retry)?a(!1,new E(!1,null,c.getErrorCode()===g.ABORT)):a(!0,new E(-1!==this.successCodes_.indexOf(j),c))})},b=(a,b)=>{let c=this.resolve_,d=this.reject_,e=b.connection;if(b.wasSuccessCode)try{let a=this.callback_(e,e.getResponse());void 0!==a?c(a):c()}catch(a){d(a)}else if(null!==e){let a=new w(f.UNKNOWN,"An unknown error occurred, please check the error payload for server response.");a.serverResponse=e.getErrorText(),d(this.errorCallback_?this.errorCallback_(e,a):a)}else d(b.canceled?this.appDelete_?z():new w(f.CANCELED,"User canceled the upload/download."):new w(f.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?b(!1,new E(!1,null,!0)):this.backoffId_=function(a,b,c){let d=1,e=null,f=null,g=!1,h=0,i=!1;function j(...a){i||(i=!0,b.apply(null,a))}function k(b){e=setTimeout(()=>{e=null,a(m,2===h)},b)}function l(){f&&clearTimeout(f)}function m(a,...b){let c;if(i)return void l();if(a||2===h||g){l(),j.call(null,a,...b);return}d<64&&(d*=2),1===h?(h=2,c=0):c=(d+Math.random())*1e3,k(c)}let n=!1;function o(a){n||(n=!0,l(),!i&&(null!==e?(a||(h=2),clearTimeout(e),k(0)):a||(h=1)))}return k(0),f=setTimeout(()=>{g=!0,o(!0)},c),o}(a,b,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class E{constructor(a,b,c){this.wasSuccessCode=a,this.connection=b,this.canceled=!!c}}class F{constructor(a,b){this._service=a,b instanceof A?this._location=b:this._location=A.makeFromUrl(b,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,b){return new F(a,b)}get root(){let a=new A(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){var a;let b;return -1===(b=(a=this._location.path).lastIndexOf("/",a.length-2))?a:a.slice(b+1)}get storage(){return this._service}get parent(){let a=function(a){if(0===a.length)return null;let b=a.lastIndexOf("/");return -1===b?"":a.slice(0,b)}(this._location.path);if(null===a)return null;let b=new A(this._location.bucket,a);return new F(this._service,b)}_throwIfRoot(a){if(""===this._location.path)throw new w(f.INVALID_ROOT_OPERATION,"The operation '"+a+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}}function G(a,b){let c=b?.storageBucket;return null==c?null:A.makeFromBucketSpec(c,a)}class H{constructor(a,b,c,d,e,f=!1){this.app=a,this._authProvider=b,this._appCheckProvider=c,this._url=d,this._firebaseVersion=e,this._isUsingEmulator=f,this._bucket=null,this._host=v,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=d?this._bucket=A.makeFromBucketSpec(d,this._host):this._bucket=G(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,null!=this._url?this._bucket=A.makeFromBucketSpec(this._url,a):this._bucket=G(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){C("time",0,1/0,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){C("time",0,1/0,a),this._maxOperationRetryTime=a}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let a=this._authProvider.getImmediate({optional:!0});if(a){let b=await a.getToken();if(null!==b)return b.accessToken}return null}async _getAppCheckToken(){if((0,k._isFirebaseServerApp)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let a=this._appCheckProvider.getImmediate({optional:!0});return a?(await a.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new F(this,a)}_makeRequest(a,b,c,d,e=!0){if(this._deleted)return new B(z());{let f=function(a,b,c,d,e,f,g=!0,h=!1){let i=function(a){let b=encodeURIComponent,c="?";for(let d in a)a.hasOwnProperty(d)&&(c=c+(b(d)+"=")+b(a[d])+"&");return c.slice(0,-1)}(a.urlParams),j=a.url+i,k=Object.assign({},a.headers);return b&&(k["X-Firebase-GMPID"]=b),null!==c&&c.length>0&&(k.Authorization="Firebase "+c),k["X-Firebase-Storage-Version"]="webjs/"+(f??"AppManager"),null!==d&&(k["X-Firebase-AppCheck"]=d),new D(j,a.method,k,a.body,a.successCodes,a.additionalRetryCodes,a.handler,a.errorHandler,a.timeout,a.progressCallback,e,g,h)}(a,this._appId,c,d,b,this._firebaseVersion,e,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(a,b){let[c,d]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(a,b,c,d).getPromise()}}let I="storage";(0,k._registerComponent)(new m.Component(I,function(a,{instanceIdentifier:b}){return new H(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),b,k.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,k.registerVersion)("@firebase/storage","0.14.0"),a.i(72029);var J=a.i(50455);(0,h.getApps)().length?(b=(0,h.getApp)(),c=(0,j.getFirestore)(b)):(b=(0,h.initializeApp)({apiKey:"AIzaSyAM6qJVQyW-Dt9VQevxEBxKXewYcXiBCd4",authDomain:"spoorthy-school-daa68.firebaseapp.com",projectId:"spoorthy-school-daa68",storageBucket:"spoorthy-school-daa68.appspot.com",messagingSenderId:"44655361000",appId:"1:44655361000:web:b178f676d7e65c9019825d",measurementId:"G-RMRPMQXMBL",databaseURL:"https://spoorthy-school-daa68-default-rtdb.firebaseio.com"}),c=(0,j.initializeFirestore)(b,{localCache:(0,j.persistentLocalCache)({tabManager:(0,j.persistentMultipleTabManager)()})}));let K=(0,i.getAuth)(b),L=function(a=(0,k.getApp)(),b=q){let c=(0,k._getProvider)((0,l.getModularInstance)(a),n).getImmediate({identifier:b}),d=(0,l.getDefaultEmulatorHostnameAndPort)("functions");return d&&function(a,b,c){var d;let e;d=(0,l.getModularInstance)(a),e=(0,l.isCloudWorkstation)(b),d.emulatorOrigin=`http${e?"s":""}://${b}:${c}`,e&&((0,l.pingServer)(d.emulatorOrigin+"/backends"),(0,l.updateEmulatorBanner)("Functions",!0))}(c,...d),c}(b),M=function(a=(0,k.getApp)(),b){a=(0,u.getModularInstance)(a);let c=(0,k._getProvider)(a,I).getImmediate({identifier:void 0}),d=(0,u.getDefaultEmulatorHostnameAndPort)("storage");return d&&function(a,b,c,d={}){!function(a,b,c,d={}){a.host=`${b}:${c}`;let e=(0,u.isCloudWorkstation)(b);e&&((0,u.pingServer)(`https://${a.host}/b`),(0,u.updateEmulatorBanner)("Storage",!0)),a._isUsingEmulator=!0,a._protocol=e?"https":"http";let{mockUserToken:f}=d;f&&(a._overrideAuthToken="string"==typeof f?f:(0,u.createMockUserToken)(f,a.app.options.projectId))}(a,b,c,d)}(c,...d),c}(b),N=(0,J.getDatabase)(b);a.s(["app",()=>b,"auth",()=>K,"db",()=>c,"functions",()=>L,"rtdb",()=>N,"storage",()=>M],20237)}];

//# sourceMappingURL=_c43adbb5._.js.map