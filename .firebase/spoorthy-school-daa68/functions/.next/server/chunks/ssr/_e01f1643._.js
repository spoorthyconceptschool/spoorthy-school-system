module.exports=[70430,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("label",{ref:e,className:(0,d.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...c}));e.displayName="Label",a.s(["Label",()=>e])},91965,a=>{"use strict";let b=(0,a.i(70106).default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);a.s(["History",()=>b],91965)},99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(68114);let f=c.forwardRef(({className:a,variant:c="default",size:f="default",asChild:g=!1,...h},i)=>{let j=g?d.Slot:"button";return(0,b.jsx)(j,{className:(0,e.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===c,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===c,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===c,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===c,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===c,"text-primary underline-offset-4 hover:underline":"link"===c,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===c,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===c,"h-10 px-6 py-2":"default"===f,"h-9 px-4 text-xs":"sm"===f,"h-12 px-8 text-base":"lg"===f,"h-14 px-10 text-lg":"xl"===f,"h-10 w-10":"icon"===f},a),ref:i,...h})});f.displayName="Button",a.s(["Button",()=>f])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-white/60 font-medium",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},5784,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},92759,a=>{"use strict";let b=(0,a.i(70106).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},84141,a=>{"use strict";function b(a){if(!a)return"";let b="string"==typeof a?new Date(a):a;if(isNaN(b.getTime()))return a;let c=String(b.getDate()).padStart(2,"0"),d=String(b.getMonth()+1).padStart(2,"0"),e=b.getFullYear();return`${c}/${d}/${e}`}a.s(["formatDateToDDMMYYYY",()=>b])},76208,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(99570),f=a.i(91119),g=a.i(70430),h=a.i(80701),i=a.i(29246),j=a.i(86304),k=a.i(96221),l=a.i(41675),m=a.i(91965),n=a.i(92759),o=a.i(20237);a.i(69387);var p=a.i(60574),q=a.i(84141),r=a.i(68114);let s=c.forwardRef(({className:a,...d},e)=>{let f=c.useRef(null);c.useImperativeHandle(e,()=>f.current);let g=a=>{a.stopPropagation();try{f.current?.showPicker()}catch(a){f.current?.focus()}};return(0,b.jsx)("div",{className:(0,r.cn)("flex h-12 w-full items-center rounded-full border border-white/10 bg-[#282828] px-1 transition-all focus-within:ring-2 focus-within:ring-accent focus-within:ring-offset-2 ring-offset-background hover:bg-[#333] cursor-pointer",a),onClick:g,children:(0,b.jsx)("input",{type:"date",ref:f,className:"flex-1 w-full bg-transparent border-0 px-4 text-sm text-white placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden cursor-pointer h-full",onClick:g,...d})})});function t(){let{user:a}=(0,d.useAuth)(),[r,t]=(0,c.useState)(null),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)({fromDate:"",toDate:"",type:"PERSONAL",reason:""});(0,c.useEffect)(()=>{let b=((a=0)=>{let b=new Date;b.setDate(b.getDate()+a);let c=b.getFullYear(),d=String(b.getMonth()+1).padStart(2,"0"),e=String(b.getDate()).padStart(2,"0");return`${c}-${d}-${e}`})(+(new Date().getHours()>=7));B(b),F(a=>({...a,fromDate:b,toDate:b})),a&&(G(),H())},[a]);let G=async()=>{let b=a?.email?.split("@")[0].toUpperCase();if(!b)return;let c=await (0,p.getDoc)((0,p.doc)(o.db,"students",b));c.exists()&&t(c.data())},H=async()=>{x(!0),D("");try{let b=await a?.getIdToken(),c=await fetch("/api/student/leaves",{headers:{Authorization:`Bearer ${b}`}}),d=await c.json();d.success?v(d.data):D(d.error||"Failed to load leave history")}catch(a){console.error(a),D("Failed to connect to server")}finally{x(!1)}},I=async b=>{if(b.preventDefault(),!E.reason)return alert("Please provide a reason");if(!r)return alert("Profile loading, please wait...");z(!0);try{let b=await a?.getIdToken(),c=await fetch("/api/student/leaves",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({...E,studentName:r.studentName||r.name,classId:r.classId,sectionId:r.sectionId})}),d=await c.json();d.success?(alert("Leave application submitted successfully!"),F({...E,reason:""}),H()):alert(d.error)}catch(a){alert(a.message)}finally{z(!1)}};return(0,b.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto p-4 md:p-6 animate-in fade-in",children:[(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-display font-bold",children:"Leave Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Apply for leave by selecting dates."})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)(f.Card,{className:"md:col-span-1 bg-black/20 border-white/10 h-fit sticky top-24",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Send,{className:"w-5 h-5 text-blue-400"})," Apply Leave"]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"From Date"}),(0,b.jsx)(s,{min:A,value:E.fromDate,onChange:a=>F({...E,fromDate:a.target.value}),className:"bg-black/40 border-white/10"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"To Date"}),(0,b.jsx)(s,{min:E.fromDate||A,value:E.toDate,onChange:a=>F({...E,toDate:a.target.value}),className:"bg-black/40 border-white/10"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Leave Type"}),(0,b.jsxs)(h.Select,{value:E.type,onValueChange:a=>F({...E,type:a}),children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-black/40 border-white/10",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"SICK",children:"Sick Leave"}),(0,b.jsx)(h.SelectItem,{value:"PERSONAL",children:"Personal"}),(0,b.jsx)(h.SelectItem,{value:"EMERGENCY",children:"Emergency"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Reason"}),(0,b.jsx)(i.Textarea,{placeholder:"Brief explanation...",value:E.reason,onChange:a=>F({...E,reason:a.target.value}),className:"bg-black/40 border-white/10 min-h-[100px]"})]}),(0,b.jsx)(e.Button,{disabled:y,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:y?(0,b.jsx)(k.Loader2,{className:"animate-spin mr-2"}):"Submit Request"})]})})]}),(0,b.jsxs)(f.Card,{className:"md:col-span-2 bg-black/20 border-white/10",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)(f.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(m.History,{className:"w-5 h-5 text-emerald-400"})," My Leave History"]}),(0,b.jsx)(f.CardDescription,{children:"View the status of your past and pending applications."})]}),(0,b.jsx)(f.CardContent,{className:"p-0",children:w?(0,b.jsx)("div",{className:"p-10 flex justify-center",children:(0,b.jsx)(k.Loader2,{className:"animate-spin"})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{className:"bg-white/5 text-[10px] text-muted-foreground uppercase font-medium",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-4",children:"Dates"}),(0,b.jsx)("th",{className:"p-4",children:"Type"}),(0,b.jsx)("th",{className:"p-4",children:"Reason"}),(0,b.jsx)("th",{className:"p-4 text-right",children:"Status"})]})}),(0,b.jsxs)("tbody",{className:"divide-y divide-white/5",children:[u.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,b.jsx)("td",{className:"p-4 text-xs font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Calendar,{className:"w-3 h-3 text-muted-foreground"}),a.fromDate===a.toDate?(0,q.formatDateToDDMMYYYY)(a.fromDate):`${(0,q.formatDateToDDMMYYYY)(a.fromDate)} - ${(0,q.formatDateToDDMMYYYY)(a.toDate)}`]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(j.Badge,{variant:"outline",className:"text-[10px]",children:a.type})}),(0,b.jsx)("td",{className:"p-4 text-xs text-muted-foreground",title:a.reason,children:(0,b.jsx)("p",{className:"line-clamp-2 max-w-[200px]",children:a.reason})}),(0,b.jsxs)("td",{className:"p-4 text-right",children:["PENDING"===a.status&&(0,b.jsx)(j.Badge,{className:"bg-yellow-500/20 text-yellow-500 border-yellow-500/10",children:"Pending"}),"APPROVED"===a.status&&(0,b.jsx)(j.Badge,{className:"bg-emerald-500/20 text-emerald-500 border-emerald-500/10",children:"Approved"}),"REJECTED"===a.status&&(0,b.jsx)(j.Badge,{className:"bg-red-500/20 text-red-500 border-red-500/10",children:"Rejected"})]})]},a.id)),C?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"p-12 text-center text-red-400 italic text-sm",children:C})}):0===u.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"p-12 text-center text-muted-foreground italic text-sm",children:"No leave history found."})}):null]})]})})})]})]})]})}s.displayName="DatePickerInput",a.s(["default",()=>t],76208)}];

//# sourceMappingURL=_e01f1643._.js.map