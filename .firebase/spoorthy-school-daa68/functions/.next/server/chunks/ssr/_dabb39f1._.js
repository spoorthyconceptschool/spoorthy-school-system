module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-white/60 font-medium",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},5784,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},67453,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},91965,a=>{"use strict";let b=(0,a.i(70106).default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);a.s(["History",()=>b],91965)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},92759,a=>{"use strict";let b=(0,a.i(70106).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},27786,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(29246),g=a.i(80701),h=a.i(91119),i=a.i(96221),j=a.i(92759);let k=(0,a.i(70106).default)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var l=a.i(91965),m=a.i(81560),n=a.i(67453),o=a.i(56025),p=a.i(91410);a.i(69387);var q=a.i(60574),r=a.i(20237);function s(){let{user:a}=(0,o.useAuth)(),{classes:s,sections:t,subjects:u,classSections:v}=(0,p.useMasterData)(),w=Object.values(s||{}).sort((a,b)=>a.order-b.order),x=Object.values(u||{}).sort((a,b)=>a.name.localeCompare(b.name)),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=!0,b=O?(0,q.query)((0,q.collection)(r.db,"homework"),(0,q.limit)(10)):(0,q.query)((0,q.collection)(r.db,"homework"),(0,q.orderBy)("createdAt","desc"),(0,q.limit)(10)),c=(0,q.onSnapshot)(b,b=>{if(!a)return;let c=b.docs.map(a=>({id:a.id,...a.data()}));O&&(c=[...c].sort((a,b)=>(b.createdAt?.seconds||0)-(a.createdAt?.seconds||0))),N(c)},b=>{a&&b.message.includes("index")&&!O&&(console.warn("[Admin Homework] Index missing, switching to fallback."),P(!0))});return()=>{a=!1,c()}},[O]);let Q=async a=>{if(confirm("Delete this assignment?"))try{await (0,q.deleteDoc)((0,q.doc)(r.db,"homework",a))}catch(a){alert(a.message)}},R=y?Object.values(v||{}).filter(a=>a.classId===y).map(a=>t[a.sectionId]).filter(Boolean):[],S=y&&0===R.length?[{id:"GENERAL",name:"General / No Section"}]:R,T=async b=>{if(b.preventDefault(),!y||!A||!C)return void alert("Please select Class, Section, and Subject.");L(!0);try{let b=await fetch("/api/admin/homework/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await a?.getIdToken()}`},body:JSON.stringify({classId:y,sectionId:A,subjectId:C,title:E,description:G,dueDate:I,isInternal:!0})}),c=await b.json();c.success?(alert("Homework sent successfully!"),F(""),H(""),z(""),B(""),D(""),J("")):alert(c.error)}catch(a){alert(a.message)}finally{L(!1)}};return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto p-2 md:p-4 space-y-4 animate-in fade-in duration-500 pb-20",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 border-b border-white/5 pb-2",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"font-display text-lg md:text-xl font-bold bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent italic leading-tight",children:"Post Homework"})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-accent animate-pulse"}),(0,b.jsx)("span",{className:"text-[8px] text-accent font-black uppercase tracking-widest",children:"Active System"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-start",children:[(0,b.jsx)("div",{className:"lg:col-span-5",children:(0,b.jsxs)(h.Card,{className:"glass-panel border-white/5 bg-black/20 overflow-hidden shadow-2xl",children:[(0,b.jsx)("div",{className:"bg-white/5 border-b border-white/5 px-5 py-3 flex items-center justify-between",children:(0,b.jsxs)(h.CardTitle,{className:"text-sm font-bold flex items-center gap-2 italic",children:[(0,b.jsx)(j.Send,{className:"w-4 h-4 text-accent"}),"New Assignment"]})}),(0,b.jsx)(h.CardContent,{className:"p-4 md:p-5",children:(0,b.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[8px] font-black uppercase tracking-widest text-muted-foreground opacity-50 ml-0.5",children:"Class"}),(0,b.jsxs)(g.Select,{onValueChange:a=>{z(a),B("")},value:y,children:[(0,b.jsx)(g.SelectTrigger,{className:"bg-white/5 border-white/5 h-9 rounded-md focus:ring-accent transition-all text-white text-[10px] px-3",children:(0,b.jsx)(g.SelectValue,{placeholder:"Select"})}),(0,b.jsx)(g.SelectContent,{className:"bg-neutral-900 border-white/10",children:w.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id,className:"text-[10px]",children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[8px] font-black uppercase tracking-widest text-muted-foreground opacity-50 ml-0.5",children:"Section"}),(0,b.jsxs)(g.Select,{onValueChange:B,value:A,disabled:!y,children:[(0,b.jsx)(g.SelectTrigger,{className:"bg-white/5 border-white/5 h-9 rounded-md focus:ring-accent transition-all text-white text-[10px] px-3",children:(0,b.jsx)(g.SelectValue,{placeholder:y?"Select":"..."})}),(0,b.jsxs)(g.SelectContent,{className:"bg-neutral-900 border-white/10",children:[(0,b.jsx)(g.SelectItem,{value:"ALL",className:"text-[10px]",children:"ALL"}),S.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id,className:"text-[10px]",children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[8px] font-black uppercase tracking-widest text-muted-foreground opacity-50 ml-0.5",children:"Subject"}),(0,b.jsxs)(g.Select,{onValueChange:D,value:C,children:[(0,b.jsx)(g.SelectTrigger,{className:"bg-white/5 border-white/5 h-9 rounded-md focus:ring-accent transition-all text-white text-[10px] px-3",children:(0,b.jsx)(g.SelectValue,{placeholder:"Select"})}),(0,b.jsx)(g.SelectContent,{className:"bg-neutral-900 border-white/10",children:x.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id,className:"text-[10px]",children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[8px] font-black uppercase tracking-widest text-muted-foreground opacity-50 ml-0.5",children:"Due Date"}),(0,b.jsx)(e.Input,{type:"date",value:I,onChange:a=>J(a.target.value),className:"bg-white/5 border-white/5 h-9 rounded-md focus:ring-accent transition-all text-white text-[10px] px-3"})]})]}),(0,b.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[8px] font-black uppercase tracking-widest text-muted-foreground opacity-50",children:"Homework Title"}),(0,b.jsx)(e.Input,{required:!0,value:E,onChange:a=>F(a.target.value),placeholder:"e.g. Chapter 5 Review",className:"bg-white/10 border-white/5 h-9 rounded-md focus:ring-accent transition-all text-[11px] font-bold text-white px-3"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[8px] font-black uppercase tracking-widest text-muted-foreground opacity-50",children:"Detailed Instructions"}),(0,b.jsx)(f.Textarea,{required:!0,value:G,onChange:a=>H(a.target.value),placeholder:"Task details...",className:"bg-white/5 border-white/5 min-h-[80px] rounded-md focus:ring-accent transition-all text-[10px] text-white/80 leading-relaxed p-3"})]})]}),(0,b.jsx)(d.Button,{type:"submit",disabled:K||!y||!A||!C,className:"w-full h-10 rounded-lg bg-accent text-accent-foreground font-black text-[10px] hover:bg-accent/90 shadow-md shadow-accent/5 transition-all uppercase tracking-widest",children:K?(0,b.jsx)(i.Loader2,{className:"animate-spin w-4 h-4"}):(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Send,{className:"w-3.5 h-3.5"}),"POST ASSIGNMENT"]})})]})})]})}),(0,b.jsxs)("div",{className:"lg:col-span-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(l.History,{className:"w-6 h-6 text-accent"}),(0,b.jsx)("h2",{className:"text-xl font-bold italic",children:"Live Broadcast Feedback"})]}),(0,b.jsx)("span",{className:"text-[10px] bg-accent/20 text-accent border border-accent/30 px-3 py-1 rounded-full font-black animate-pulse",children:"REAL-TIME"})]}),(0,b.jsx)("div",{className:"space-y-4",children:0===M.length?(0,b.jsxs)("div",{className:"md:col-span-2 glass-panel p-8 text-center rounded-2xl border-dashed border-white/10 opacity-50",children:[(0,b.jsx)(l.History,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-[10px] font-medium uppercase tracking-widest",children:"No recent broadcasts"})]}):M.map(a=>(0,b.jsx)(h.Card,{className:"bg-white/5 border-white/10 hover:border-accent/40 transition-colors group relative overflow-hidden",children:(0,b.jsxs)(h.CardContent,{className:"p-3 text-white",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"space-y-0.5 min-w-0 pr-6",children:[(0,b.jsx)("h4",{className:"font-bold text-xs truncate leading-tight",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-[8px] text-muted-foreground uppercase font-black tracking-tighter",children:[(0,b.jsx)("span",{children:s[a.classId]?.name}),(0,b.jsx)("span",{className:"w-0.5 h-0.5 bg-white/20 rounded-full"}),(0,b.jsxs)("span",{children:["SEC ",t[a.sectionId]?.name]})]})]}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>Q(a.id),className:"h-6 w-6 text-muted-foreground hover:text-red-500 absolute top-2 right-2",children:(0,b.jsx)(m.Trash2,{className:"w-3.5 h-3.5"})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-white/5 text-[8px] font-mono text-muted-foreground/60",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1 truncate",children:[(0,b.jsx)(k,{className:"w-2.5 h-2.5"})," ",u[a.subjectId]?.name]}),(0,b.jsx)("span",{className:"shrink-0",children:a.createdAt?new Date(1e3*a.createdAt.seconds).toLocaleDateString([],{month:"short",day:"numeric"}):"..."})]})]})},a.id))}),(0,b.jsxs)("div",{className:"mt-6 p-3 bg-emerald-500/5 border border-emerald-500/10 rounded-xl flex items-start gap-2",children:[(0,b.jsx)(n.CheckCircle2,{className:"w-3.5 h-3.5 text-emerald-500 shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-[9px] text-emerald-500/60 leading-relaxed font-bold uppercase tracking-widest",children:"Instant real-time sync active."})]})]})]})]})}a.s(["default",()=>s],27786)}];

//# sourceMappingURL=_dabb39f1._.js.map