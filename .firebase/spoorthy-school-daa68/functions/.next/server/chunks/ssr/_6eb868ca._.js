module.exports=[99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(68114);let f=c.forwardRef(({className:a,variant:c="default",size:f="default",asChild:g=!1,...h},i)=>{let j=g?d.Slot:"button";return(0,b.jsx)(j,{className:(0,e.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===c,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===c,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===c,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===c,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===c,"text-primary underline-offset-4 hover:underline":"link"===c,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===c,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===c,"h-10 px-6 py-2":"default"===f,"h-9 px-4 text-xs":"sm"===f,"h-12 px-8 text-base":"lg"===f,"h-14 px-10 text-lg":"xl"===f,"h-10 w-10":"icon"===f},a),ref:i,...h})});f.displayName="Button",a.s(["Button",()=>f])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-white/60 font-medium",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},71931,a=>{"use strict";let b=(0,a.i(70106).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);a.s(["Printer",()=>b],71931)},91965,a=>{"use strict";let b=(0,a.i(70106).default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);a.s(["History",()=>b],91965)},76841,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(91119),f=a.i(99570),g=a.i(86304),h=a.i(96221),i=a.i(16201),j=a.i(56738),k=a.i(91965),l=a.i(4720),m=a.i(71931);a.i(69387);var n=a.i(60574),o=a.i(20237),p=a.i(64550);function q(){let{user:a}=(0,d.useAuth)(),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(null);(0,c.useEffect)(()=>{a&&C()},[a]);let C=async()=>{if(a?.uid)try{let b=(0,n.query)((0,n.collection)(o.db,"students"),(0,n.where)("uid","==",a.uid)),c=await (0,n.getDocs)(b);if(c.empty)return void v(!1);let d={id:c.docs[0].id,...c.docs[0].data()},e=d.schoolId||d.id;z(e),B(d);let f=(0,n.doc)(o.db,"student_fee_ledgers",`${e}_2025-2026`),g=await (0,n.getDoc)(f);g.exists()&&r(g.data());try{let a=(0,n.collection)(o.db,"payments"),b=(0,n.query)(a,(0,n.where)("studentId","==",e),(0,n.orderBy)("date","desc"),(0,n.limit)(20)),c=await (0,n.getDocs)(b);t(c.docs.map(a=>({id:a.id,...a.data()})))}catch(d){console.warn("Payments fetch error (index?):",d);let a=(0,n.collection)(o.db,"payments"),b=(0,n.query)(a,(0,n.where)("studentId","==",e)),c=(await (0,n.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()})).sort((a,b)=>{let c=a.date?.seconds||0;return(b.date?.seconds||0)-c});t(c)}}catch(a){console.error("Error fetching fees:",a)}finally{v(!1)}},D=async a=>{alert("Online payment integration is currently under maintenance. Please contact the administration.")};if(u)return(0,b.jsx)("div",{className:"p-10 flex justify-center text-[#E6F1FF]",children:(0,b.jsx)(h.Loader2,{className:"animate-spin"})});let E=q?.items||[],F=E.reduce((a,b)=>a+(b.amount-(b.paidAmount||0)),0);return(0,b.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-10",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-[#E6F1FF]",children:"Fees & Payments"}),(0,b.jsx)(g.Badge,{variant:F<=0?"default":"destructive",className:F<=0?"bg-green-500/20 text-green-400":"",children:F<=0?"All Dues Cleared":"Payment Pending"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)(e.Card,{className:"bg-[#112240] border-[#64FFDA]/10 lg:col-span-1",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"text-[#64FFDA] flex items-center gap-2",children:[(0,b.jsx)(j.Wallet,{className:"w-5 h-5"})," Total Payable"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"text-4xl font-bold text-[#E6F1FF] font-mono",children:["₹ ",F.toLocaleString()]}),(0,b.jsx)("p",{className:"text-sm text-[#8892B0] mt-2 mb-6",children:"Outstanding amount for current academic year."}),F>0?(0,b.jsx)(f.Button,{onClick:()=>D(F),disabled:w,className:"w-full bg-[#3B82F6] hover:bg-[#2563EB] text-white font-bold h-12 text-lg shadow-[0_0_20px_-5px_#3B82F6]",children:w?(0,b.jsx)(h.Loader2,{className:"animate-spin mr-2"}):"Pay Fees Now"}):(0,b.jsxs)("div",{className:"flex items-center justify-center p-4 bg-green-500/10 rounded-lg text-green-400 font-medium",children:[(0,b.jsx)(i.CheckCircle,{className:"mr-2 h-5 w-5"})," No Dues Pending"]})]})]}),(0,b.jsxs)(e.Card,{className:"bg-[#112240] border-[#64FFDA]/10 lg:col-span-2 flex flex-col",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"text-[#E6F1FF] flex items-center gap-2",children:[(0,b.jsx)(k.History,{className:"w-5 h-5"})," Payment History"]})}),(0,b.jsx)(e.CardContent,{className:"flex-1 overflow-auto max-h-[300px] scrollbar-thin scrollbar-thumb-white/10",children:0===s.length?(0,b.jsx)("div",{className:"text-center py-10 text-[#8892B0]",children:"No payment history found."}):(0,b.jsx)("div",{className:"space-y-3",children:s.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded bg-[#0A192F]/50 border border-white/5 hover:border-[#64FFDA]/20 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-full bg-green-500/10 text-green-400",children:(0,b.jsx)(i.CheckCircle,{size:16})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"font-mono text-[#E6F1FF]",children:["₹",Number(a.amount).toLocaleString()]}),(0,b.jsxs)("div",{className:"text-xs text-[#8892B0] flex gap-2",children:[(0,b.jsx)("span",{children:a.date?.toDate?a.date.toDate().toLocaleDateString():"N/A"}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{className:"uppercase",children:a.method})]})]})]}),(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",className:"border-[#64FFDA]/20 text-[#64FFDA] hover:bg-[#64FFDA]/10",onClick:()=>(0,p.printPaymentReceipt)({payment:a,student:A,ledger:q}),children:[(0,b.jsx)(m.Printer,{className:"w-3 h-3 mr-2"})," Receipt"]})]},c))})})]})]}),(0,b.jsxs)(e.Card,{className:"bg-[#112240] border-[#64FFDA]/10",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"text-[#E6F1FF] flex items-center gap-2",children:[(0,b.jsx)(l.FileText,{className:"w-5 h-5"})," Fee Breakdown"]})}),(0,b.jsx)(e.CardContent,{children:E.length?(0,b.jsx)("div",{className:"space-y-4",children:E.map((a,c)=>{let d=a.paidAmount||0,e=a.amount-d<=0;return(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between p-4 rounded-lg bg-[#0A192F]/50 border border-white/5 hover:border-white/10 transition-colors",children:[(0,b.jsxs)("div",{className:"mb-2 md:mb-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-bold text-lg text-[#E6F1FF]",children:a.name}),(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs border-white/10 text-[#8892B0] uppercase",children:a.type||"FEE"})]}),(0,b.jsxs)("div",{className:"text-sm text-[#8892B0] mt-1",children:["Due Date: ",a.dueDate||"N/A"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-xs text-[#8892B0] uppercase tracking-wider mb-1",children:"Status"}),(0,b.jsx)("div",{className:`font-bold text-sm ${e?"text-green-400":"text-yellow-400"}`,children:e?"PAID":"PENDING"})]}),(0,b.jsxs)("div",{className:"text-right min-w-[100px]",children:[(0,b.jsx)("div",{className:"text-xs text-[#8892B0] uppercase tracking-wider mb-1",children:"Amount"}),(0,b.jsxs)("div",{className:"font-mono text-xl text-[#E6F1FF]",children:["₹ ",a.amount.toLocaleString()]}),d>0&&!e&&(0,b.jsxs)("div",{className:"text-xs text-green-400",children:["Paid: ₹",d.toLocaleString()]})]})]})]},c)})}):(0,b.jsx)("div",{className:"text-center py-10 text-[#8892B0]",children:"No active fee structure assigned."})})]})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=_6eb868ca._.js.map