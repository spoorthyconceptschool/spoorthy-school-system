{"version":3,"sources":["../../../../src/app/admin/fees/structures/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { collection, getDocs, query, orderBy, where } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { Loader2, Download, Printer, Search, User, MapPin } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { useMasterData } from \"@/context/MasterDataContext\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { DataTable } from \"@/components/ui/data-table\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function FeeStructuresPage() {\r\n    const [ledgers, setLedgers] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [search, setSearch] = useState(\"\");\r\n    const [classFilter, setClassFilter] = useState(\"all\");\r\n    const [villageFilter, setVillageFilter] = useState(\"all\");\r\n    const router = useRouter();\r\n\r\n    // Report Wizard State\r\n    const [isWizardOpen, setIsWizardOpen] = useState(false);\r\n    const [wizardType, setWizardType] = useState<'csv' | 'print'>('csv');\r\n    const [selectedClasses, setSelectedClasses] = useState<string[]>([]);\r\n    const [selectedVillages, setSelectedVillages] = useState<string[]>([]);\r\n\r\n    const { classes: classesData, villages: villagesData, branding } = useMasterData();\r\n    const classes = Object.values(classesData || {}).map((c: any) => ({ id: c.id, name: c.name, order: c.order || 99 })).sort((a: any, b: any) => a.order - b.order);\r\n    const villages = Object.values(villagesData || {}).map((v: any) => ({ id: v.id, name: v.name })).sort((a: any, b: any) => a.name.localeCompare(b.name));\r\n\r\n    const fetchLedgers = async () => {\r\n        try {\r\n            const q = query(collection(db, \"student_fee_ledgers\"), orderBy(\"className\", \"asc\"));\r\n            const snap = await getDocs(q);\r\n            setLedgers(snap.docs.map(d => ({ id: d.id, ...d.data() })));\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchLedgers();\r\n    }, []);\r\n\r\n    const filtered = ledgers.filter(l => {\r\n        const matchesSearch = !search ||\r\n            l.studentId?.toLowerCase().includes(search.toLowerCase()) ||\r\n            l.studentName?.toLowerCase().includes(search.toLowerCase()) ||\r\n            l.parentName?.toLowerCase().includes(search.toLowerCase()) ||\r\n            l.parentMobile?.toLowerCase().includes(search.toLowerCase()) ||\r\n            l.villageName?.toLowerCase().includes(search.toLowerCase()) ||\r\n            l.className?.toLowerCase().includes(search.toLowerCase());\r\n\r\n        const matchesClass = classFilter === \"all\" || l.classId === classFilter || l.className === classFilter;\r\n        const matchesVillage = villageFilter === \"all\" || l.villageId === villageFilter || l.villageName === villageFilter;\r\n\r\n        return matchesSearch && matchesClass && matchesVillage;\r\n    });\r\n\r\n    const exportToCSV = (targetData: any[]) => {\r\n        const headers = [\"School ID\", \"Student Name\", \"Parent Name\", \"Mobile\", \"Village\", \"Class\", \"Term Fee\", \"Transport Fee\", \"Total Fee\", \"Total Paid\", \"Status\"];\r\n        const rows = targetData.map(l => {\r\n            const termTotal = l.items?.filter((i: any) => i.type === 'TERM').reduce((sum: number, i: any) => sum + i.amount, 0) || 0;\r\n            const transportItem = l.items?.find((i: any) => i.name?.toLowerCase().includes('bus') || i.name?.toLowerCase().includes('transport'));\r\n            const transportFee = transportItem ? transportItem.amount : 0;\r\n\r\n            return [\r\n                l.studentId,\r\n                l.studentName,\r\n                l.parentName,\r\n                l.parentMobile || \"\",\r\n                l.villageName,\r\n                l.className,\r\n                termTotal,\r\n                transportFee,\r\n                l.totalFee,\r\n                l.totalPaid,\r\n                l.status\r\n            ];\r\n        });\r\n\r\n        const csvContent = [headers, ...rows].map(e => e.join(\",\")).join(\"\\n\");\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const link = document.createElement(\"a\");\r\n        const url = URL.createObjectURL(blob);\r\n        link.setAttribute(\"href\", url);\r\n        link.setAttribute(\"download\", `fee_structures_${new Date().toISOString().split('T')[0]}.csv`);\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        setIsWizardOpen(false);\r\n    };\r\n\r\n    const handlePrint = (targetData: any[]) => {\r\n        const printWindow = window.open('', '_blank');\r\n        if (!printWindow) return;\r\n\r\n        const html = `\r\n            <html>\r\n                <head>\r\n                    <title>Fee Structures Report</title>\r\n                    <style>\r\n                        body { font-family: sans-serif; padding: 20px; }\r\n                        .header { display: flex; align-items: center; justify-content: center; gap: 30px; border-bottom: 2px solid #ddd; padding-bottom: 20px; margin-bottom: 20px; }\r\n                        .logo { height: 80px; width: auto; object-fit: contain; }\r\n                        .header-text { text-align: left; }\r\n                        table { width: 100%; border-collapse: collapse; margin-top: 20px; }\r\n                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 12px; }\r\n                        th { background-color: #f2f2f2; }\r\n                        h1 { margin: 0; font-size: 24px; }\r\n                        .header-info { margin-top: 5px; color: #666; font-size: 14px; }\r\n                    </style>\r\n                </head>\r\n                <body>\r\n                    <div class=\"header\">\r\n                        ${branding?.schoolLogo ? `<img src=\"${branding.schoolLogo}\" class=\"logo\" />` : ''}\r\n                        <div class=\"header-text\">\r\n                            <h1>${branding?.schoolName || 'Spoorthy Concept School'} - Fee Structures</h1>\r\n                            <div class=\"header-info\">\r\n                                Selected Dataset Report | Generated on: ${new Date().toLocaleString()}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <table>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>School ID</th>\r\n                                <th>Name</th>\r\n                                <th>Class</th>\r\n                                <th>Term Fee</th>\r\n                                <th>Transport</th>\r\n                                <th>Total Fee</th>\r\n                                <th>Paid</th>\r\n                                <th>Status</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            ${targetData.map(l => {\r\n            const termTotal = l.items?.filter((i: any) => i.type === 'TERM').reduce((sum: number, i: any) => sum + i.amount, 0) || 0;\r\n            const transportItem = l.items?.find((i: any) => i.name?.toLowerCase().includes('bus') || i.name?.toLowerCase().includes('transport'));\r\n            const transportFee = transportItem ? transportItem.amount : 0;\r\n            return `\r\n                                    <tr>\r\n                                        <td>${l.studentId}</td>\r\n                                        <td>${l.studentName}</td>\r\n                                        <td>${l.className}</td>\r\n                                        <td>₹${termTotal.toLocaleString()}</td>\r\n                                        <td>₹${transportFee.toLocaleString()}</td>\r\n                                        <td>₹${(l.totalFee || 0).toLocaleString()}</td>\r\n                                        <td>₹${(l.totalPaid || 0).toLocaleString()}</td>\r\n                                        <td>${l.status}</td>\r\n                                    </tr>\r\n                                `;\r\n        }).join('')}\r\n                        </tbody>\r\n                    </table>\r\n                </body>\r\n            </html>\r\n        `;\r\n\r\n        printWindow.document.write(html);\r\n        printWindow.document.close();\r\n        printWindow.print();\r\n        setIsWizardOpen(false);\r\n    };\r\n\r\n    const handleGenerateReport = () => {\r\n        const targetData = ledgers.filter(l => {\r\n            const matchesClass = selectedClasses.length === 0 || selectedClasses.includes(l.classId) || selectedClasses.includes(l.className);\r\n            const matchesVillage = selectedVillages.length === 0 || selectedVillages.includes(l.villageId) || selectedVillages.includes(l.villageName);\r\n            return matchesClass && matchesVillage;\r\n        });\r\n\r\n        if (wizardType === 'csv') exportToCSV(targetData);\r\n        else handlePrint(targetData);\r\n    };\r\n\r\n    // Stats\r\n    const totalExpected = filtered.reduce((s, l) => s + (l.totalFee || 0), 0);\r\n    const totalCollected = filtered.reduce((s, l) => s + (l.totalPaid || 0), 0);\r\n    const totalPending = totalExpected - totalCollected;\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in duration-500 max-w-none p-0 pb-20\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between pt-4 gap-6 px-2 md:px-0\">\r\n                <div>\r\n                    <h1 className=\"text-3xl md:text-5xl font-display font-bold bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent italic leading-tight\">\r\n                        Fee Structures\r\n                    </h1>\r\n                    <p className=\"text-muted-foreground text-sm md:text-lg tracking-tight\">Master record of all <span className=\"text-white font-bold\">student fee allocations</span></p>\r\n                </div>\r\n\r\n                <div className=\"flex flex-wrap items-center gap-2 md:gap-3\">\r\n                    <Button variant=\"outline\" onClick={() => { setWizardType('print'); setIsWizardOpen(true); }} className=\"h-11 gap-2 border-white/10 bg-white/5 backdrop-blur-sm rounded-xl hover:bg-white/10\">\r\n                        <Printer size={16} /> <span className=\"hidden sm:inline\">Print Report</span><span className=\"sm:hidden\">Print</span>\r\n                    </Button>\r\n                    <Button variant=\"outline\" onClick={() => { setWizardType('csv'); setIsWizardOpen(true); }} className=\"h-11 gap-2 border-white/10 bg-white/5 backdrop-blur-sm rounded-xl hover:bg-white/10\">\r\n                        <Download size={16} /> <span className=\"hidden sm:inline\">Export CSV</span><span className=\"sm:hidden\">Export</span>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats Overview */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 px-2 md:px-0\">\r\n                <div className=\"bg-emerald-500/5 border border-emerald-500/10 p-5 rounded-2xl backdrop-blur-sm shadow-xl\">\r\n                    <p className=\"text-[10px] font-black uppercase tracking-widest text-emerald-400 mb-2 italic\">Total Allocation</p>\r\n                    <div className=\"text-3xl font-mono font-black text-white\">₹{totalExpected.toLocaleString()}</div>\r\n                </div>\r\n                <div className=\"bg-blue-500/5 border border-blue-500/10 p-5 rounded-2xl backdrop-blur-sm shadow-xl\">\r\n                    <p className=\"text-[10px] font-black uppercase tracking-widest text-blue-400 mb-2 italic\">Collected Fees</p>\r\n                    <div className=\"text-3xl font-mono font-black text-white\">₹{totalCollected.toLocaleString()}</div>\r\n                </div>\r\n                <div className=\"bg-orange-500/5 border border-orange-500/10 p-5 rounded-2xl backdrop-blur-sm shadow-xl\">\r\n                    <p className=\"text-[10px] font-black uppercase tracking-widest text-orange-400 mb-2 italic\">Pending Dues</p>\r\n                    <div className=\"text-3xl font-mono font-black text-white\">₹{totalPending.toLocaleString()}</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"bg-black/20 p-4 md:p-5 rounded-2xl border border-white/10 backdrop-blur-md space-y-4 shadow-2xl mx-2 md:mx-0\">\r\n                <div className=\"relative w-full\">\r\n                    <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\r\n                    <Input\r\n                        placeholder=\"Search by student name, ID, or parent...\"\r\n                        className=\"pl-11 h-12 bg-white/5 border-white/10 rounded-xl focus:ring-accent/30\"\r\n                        value={search}\r\n                        onChange={e => setSearch(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:flex lg:flex-wrap gap-2\">\r\n                    <Select value={classFilter} onValueChange={setClassFilter}>\r\n                        <SelectTrigger className=\"w-full lg:w-[180px] h-12 bg-white/5 border-white/10 rounded-xl\">\r\n                            <SelectValue placeholder=\"All Classes\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent className=\"bg-zinc-900 border-white/10 text-white\">\r\n                            <SelectItem value=\"all\">All Classes</SelectItem>\r\n                            {classes.map(c => <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>)}\r\n                        </SelectContent>\r\n                    </Select>\r\n                    <Select value={villageFilter} onValueChange={setVillageFilter}>\r\n                        <SelectTrigger className=\"w-full lg:w-[180px] h-12 bg-white/5 border-white/10 rounded-xl\">\r\n                            <SelectValue placeholder=\"All Villages\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent className=\"bg-zinc-900 border-white/10 text-white\">\r\n                            <SelectItem value=\"all\">All Villages</SelectItem>\r\n                            {villages.map(v => <SelectItem key={v.id} value={v.id}>{v.name}</SelectItem>)}\r\n                        </SelectContent>\r\n                    </Select>\r\n                    {(classFilter !== \"all\" || villageFilter !== \"all\" || search) && (\r\n                        <Button variant=\"ghost\" size=\"sm\" onClick={() => { setSearch(\"\"); setClassFilter(\"all\"); setVillageFilter(\"all\"); }} className=\"h-12 px-6 text-[10px] font-black uppercase tracking-widest text-muted-foreground hover:text-white rounded-xl border border-dashed border-white/10 transition-all\">\r\n                            Clear Filters\r\n                        </Button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content View */}\r\n            <DataTable\r\n                data={filtered}\r\n                isLoading={loading}\r\n                onRowClick={(l) => router.push(`/admin/students/${l.studentDocId || l.id}`)}\r\n                columns={[\r\n                    {\r\n                        key: \"studentName\",\r\n                        header: \"Student Info\",\r\n                        render: (l: any) => (\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center border border-white/5\">\r\n                                    <User size={14} className=\"text-white/40\" />\r\n                                </div>\r\n                                <div className=\"flex flex-col\">\r\n                                    <span className=\"font-bold text-sm text-white leading-tight\">{l.studentName}</span>\r\n                                    <span className=\"text-[10px] font-mono text-white/40 tracking-tighter uppercase\">{l.studentId}</span>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    },\r\n                    {\r\n                        key: \"className\",\r\n                        header: \"Class & Village\",\r\n                        render: (l: any) => (\r\n                            <div className=\"flex flex-col gap-1\">\r\n                                <span className=\"text-[10px] uppercase font-black text-muted-foreground tracking-tighter bg-white/5 px-2 py-0.5 rounded border border-white/5 w-fit\">{l.className}</span>\r\n                                <div className=\"flex items-center gap-1 text-[10px] text-white/30\">\r\n                                    <MapPin size={10} />\r\n                                    <span className=\"truncate max-w-[120px]\">{l.villageName}</span>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    },\r\n                    {\r\n                        key: \"termFee\",\r\n                        header: \"Term Fee\",\r\n                        headerClassName: \"text-right\",\r\n                        cellClassName: \"text-right\",\r\n                        render: (l: any) => {\r\n                            const termTotal = l.items?.filter((i: any) => i.type === 'TERM').reduce((sum: number, i: any) => sum + i.amount, 0) || 0;\r\n                            return <span className=\"font-mono font-bold text-sm text-white/80\">₹{termTotal.toLocaleString()}</span>\r\n                        }\r\n                    },\r\n                    {\r\n                        key: \"transport\",\r\n                        header: \"Transport\",\r\n                        headerClassName: \"text-right\",\r\n                        cellClassName: \"text-right\",\r\n                        render: (l: any) => {\r\n                            const transportItem = l.items?.find((i: any) => i.name?.toLowerCase().includes('bus') || i.name?.toLowerCase().includes('transport'));\r\n                            const transportFee = transportItem ? transportItem.amount : 0;\r\n                            return (\r\n                                <span className={cn(\r\n                                    \"font-mono font-bold text-sm\",\r\n                                    transportFee > 0 ? \"text-cyan-400\" : \"text-white/10\"\r\n                                )}>\r\n                                    ₹{transportFee.toLocaleString()}\r\n                                </span>\r\n                            );\r\n                        }\r\n                    },\r\n                    {\r\n                        key: \"totalFee\",\r\n                        header: \"Total Fee\",\r\n                        headerClassName: \"text-right\",\r\n                        cellClassName: \"text-right\",\r\n                        render: (l: any) => <span className=\"font-mono font-black text-sm text-white\">₹{l.totalFee?.toLocaleString()}</span>\r\n                    },\r\n                    {\r\n                        key: \"totalPaid\",\r\n                        header: \"Total Paid\",\r\n                        headerClassName: \"text-right\",\r\n                        cellClassName: \"text-right\",\r\n                        render: (l: any) => <span className=\"font-mono font-black text-sm text-emerald-400\">₹{l.totalPaid?.toLocaleString()}</span>\r\n                    },\r\n                    {\r\n                        key: \"status\",\r\n                        header: \"Status\",\r\n                        headerClassName: \"text-center\",\r\n                        cellClassName: \"text-center\",\r\n                        render: (l: any) => (\r\n                            <Badge variant={l.status === 'PAID' ? 'default' : 'destructive'}\r\n                                className={cn(\r\n                                    \"text-[9px] font-black uppercase tracking-tighter py-0 h-5 border-none\",\r\n                                    l.status === 'PAID' ? \"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30\" : \"bg-red-500/20 text-red-400 hover:bg-red-500/30\"\r\n                                )}>\r\n                                {l.status}\r\n                            </Badge>\r\n                        )\r\n                    }\r\n                ]}\r\n                actions={(l) => (\r\n                    <div className=\"flex flex-col gap-1\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            onClick={() => router.push(`/admin/students/${l.studentDocId || l.id}`)}\r\n                            className=\"w-full justify-start gap-2 h-9 text-xs font-bold uppercase tracking-tighter\"\r\n                        >\r\n                            Full Student Profile\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n            />\r\n\r\n            <Dialog open={isWizardOpen} onOpenChange={setIsWizardOpen}>\r\n                <DialogContent className=\"max-w-2xl bg-[#0A192F] border-white/10 text-white shadow-2xl backdrop-blur-3xl rounded-3xl\">\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"text-2xl font-display font-bold italic bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent\">\r\n                            Report Configuration\r\n                        </DialogTitle>\r\n                    </DialogHeader>\r\n\r\n                    <div className=\"space-y-6 py-4\">\r\n                        <div className=\"grid grid-cols-2 gap-8\">\r\n                            {/* Classes Section */}\r\n                            <div className=\"space-y-3 p-4 bg-white/5 rounded-2xl border border-white/5\">\r\n                                <Label className=\"text-[10px] font-black uppercase tracking-widest text-emerald-400\">Filter by Classes</Label>\r\n                                <div className=\"max-h-[300px] overflow-y-auto space-y-2 pr-2 custom-scrollbar\">\r\n                                    <div className=\"flex items-center gap-3 pb-2 border-b border-white/5\">\r\n                                        <Checkbox\r\n                                            id=\"all-classes\"\r\n                                            className=\"border-white/20 data-[state=checked]:bg-emerald-500 data-[state=checked]:border-emerald-500\"\r\n                                            checked={selectedClasses.length === 0}\r\n                                            onCheckedChange={(checked) => checked ? setSelectedClasses([]) : null}\r\n                                        />\r\n                                        <Label htmlFor=\"all-classes\" className=\"text-sm font-bold opacity-80 cursor-pointer\">All Classes</Label>\r\n                                    </div>\r\n                                    {classes.map(c => (\r\n                                        <div key={c.id} className=\"flex items-center gap-3 py-1\">\r\n                                            <Checkbox\r\n                                                id={`class-${c.id}`}\r\n                                                className=\"border-white/10 data-[state=checked]:bg-emerald-500 data-[state=checked]:border-emerald-500\"\r\n                                                checked={selectedClasses.includes(c.id)}\r\n                                                onCheckedChange={(checked) => {\r\n                                                    if (checked) setSelectedClasses([...selectedClasses, c.id]);\r\n                                                    else setSelectedClasses(selectedClasses.filter(id => id !== c.id));\r\n                                                }}\r\n                                            />\r\n                                            <Label htmlFor={`class-${c.id}`} className=\"text-xs font-medium opacity-60 cursor-pointer hover:opacity-100 transition-opacity\">{c.name}</Label>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Villages Section */}\r\n                            <div className=\"space-y-3 p-4 bg-white/5 rounded-2xl border border-white/5\">\r\n                                <Label className=\"text-[10px] font-black uppercase tracking-widest text-cyan-400\">Filter by Villages</Label>\r\n                                <div className=\"max-h-[300px] overflow-y-auto space-y-2 pr-2 custom-scrollbar\">\r\n                                    <div className=\"flex items-center gap-3 pb-2 border-b border-white/5\">\r\n                                        <Checkbox\r\n                                            id=\"all-villages\"\r\n                                            className=\"border-white/20 data-[state=checked]:bg-cyan-500 data-[state=checked]:border-cyan-500\"\r\n                                            checked={selectedVillages.length === 0}\r\n                                            onCheckedChange={(checked) => checked ? setSelectedVillages([]) : null}\r\n                                        />\r\n                                        <Label htmlFor=\"all-villages\" className=\"text-sm font-bold opacity-80 cursor-pointer\">All Villages</Label>\r\n                                    </div>\r\n                                    {villages.map(v => (\r\n                                        <div key={v.id} className=\"flex items-center gap-3 py-1\">\r\n                                            <Checkbox\r\n                                                id={`village-${v.id}`}\r\n                                                className=\"border-white/10 data-[state=checked]:bg-cyan-500 data-[state=checked]:border-cyan-500\"\r\n                                                checked={selectedVillages.includes(v.id)}\r\n                                                onCheckedChange={(checked) => {\r\n                                                    if (checked) setSelectedVillages([...selectedVillages, v.id]);\r\n                                                    else setSelectedVillages(selectedVillages.filter(id => id !== v.id));\r\n                                                }}\r\n                                            />\r\n                                            <Label htmlFor={`village-${v.id}`} className=\"text-xs font-medium opacity-60 cursor-pointer hover:opacity-100 transition-opacity\">{v.name}</Label>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <DialogFooter className=\"gap-2\">\r\n                        <Button variant=\"ghost\" onClick={() => setIsWizardOpen(false)} className=\"rounded-xl hover:bg-white/5\">Cancel</Button>\r\n                        <Button\r\n                            className=\"bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white font-black uppercase tracking-tighter gap-2 rounded-xl border-none shadow-lg shadow-emerald-500/20\"\r\n                            onClick={handleGenerateReport}\r\n                        >\r\n                            {wizardType === 'csv' ? <Download size={16} /> : <Printer size={16} />}\r\n                            {wizardType === 'csv' ? 'Export CSV' : 'Print Report'}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}