module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-white/60 font-medium",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(68114);let f=c.forwardRef(({className:a,variant:c="default",size:f="default",asChild:g=!1,...h},i)=>{let j=g?d.Slot:"button";return(0,b.jsx)(j,{className:(0,e.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===c,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===c,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===c,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===c,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===c,"text-primary underline-offset-4 hover:underline":"link"===c,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===c,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===c,"h-10 px-6 py-2":"default"===f,"h-9 px-4 text-xs":"sm"===f,"h-12 px-8 text-base":"lg"===f,"h-14 px-10 text-lg":"xl"===f,"h-10 w-10":"icon"===f},a),ref:i,...h})});f.displayName="Button",a.s(["Button",()=>f])},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},5784,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},91965,a=>{"use strict";let b=(0,a.i(70106).default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);a.s(["History",()=>b],91965)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},92759,a=>{"use strict";let b=(0,a.i(70106).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},79750,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(99570),f=a.i(66718),g=a.i(29246),h=a.i(80701),i=a.i(91119),j=a.i(38246),k=a.i(96221),l=a.i(15618),m=a.i(81560),n=a.i(210),o=a.i(92759),p=a.i(91965),q=a.i(41675);a.i(69387);var r=a.i(60574),s=a.i(20237),t=a.i(91410),u=a.i(88110),v=a.i(68114);function w(){let{user:a}=(0,d.useAuth)(),{subjects:v,classes:w,sections:y,subjectTeachers:z}=(0,t.useMasterData)(),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)({});(0,c.useEffect)(()=>{a?.uid&&(async()=>{let b=(0,r.query)((0,r.collection)(s.db,"teachers"),(0,r.where)("uid","==",a.uid),(0,r.limit)(1)),c=await (0,r.getDocs)(b);c.empty||F(c.docs[0].data().schoolId||c.docs[0].id)})()},[a]),(0,c.useEffect)(()=>{if(!a||!E)return;let b=!0,c=G?(0,r.query)((0,r.collection)(s.db,"homework"),(0,r.where)("teacherId","==",E),(0,r.limit)(10)):(0,r.query)((0,r.collection)(s.db,"homework"),(0,r.where)("teacherId","==",E),(0,r.orderBy)("createdAt","desc"),(0,r.limit)(10)),d=(0,r.onSnapshot)(c,a=>{if(!b)return;let c=a.docs.map(a=>({id:a.id,...a.data()}));G&&(c=[...c].sort((a,b)=>(b.createdAt?.seconds||0)-(a.createdAt?.seconds||0))),B(c)},a=>{b&&a.message.includes("index")&&!G&&(console.warn("Homework index missing, using fallback."),H(!0))});return()=>{b=!1,d()}},[a,E,G]);let Q=a=>{if(!a||!E||!z)return[];let b=z[a]||{};return Object.keys(b).filter(a=>b[a]===E)};(0,c.useEffect)(()=>{P({})},[I]);let R=async b=>{if(b.preventDefault(),!I)return;let c=Object.entries(O).filter(([a,b])=>b.trim().length>0);if(0===c.length)return void(0,u.toast)({title:"Empty",description:"Please enter homework for at least one subject.",type:"error"});D(!0);let[d,e]=I.split("_");try{let b=0,f=c.map(async([c,f])=>{let g=await fetch("/api/teacher/homework/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await a?.getIdToken()}`},body:JSON.stringify({classId:d,sectionId:e,subjectId:c,title:`${v[c]?.name||"Homework"} Task`,description:f,dueDate:M})}),h=await g.json();return h.success&&b++,h});await Promise.all(f),b>0?((0,u.toast)({title:"Success",description:`Published ${b} tasks successfully!`,type:"success"}),P({}),N("")):(0,u.toast)({title:"Error",description:"All tasks failed to publish.",type:"error"})}catch(a){(0,u.toast)({title:"Error",description:a.message,type:"error"})}finally{D(!1)}},S=async a=>{if(confirm("Are you sure you want to delete this assignment?"))try{await (0,r.deleteDoc)((0,r.doc)(s.db,"homework",a)),(0,u.toast)({title:"Deleted",description:"Assignment removed from history.",type:"success"})}catch(a){(0,u.toast)({title:"Error",description:a.message,type:"error"})}},T=(()=>{if(!E||!z)return[];let a=new Map;return Object.keys(z).forEach(b=>{if(Object.values(z[b]).includes(E)){let[c,d]=b.split("_");a.set(b,{classId:c,sectionId:d,key:b})}}),Array.from(a.values())})();return(0,b.jsxs)("div",{className:"max-w-[1600px] mx-auto p-4 md:p-8 space-y-8 animate-in fade-in duration-700 pb-20",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.default,{href:"/teacher",className:"group flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-muted-foreground hover:text-accent transition-all mb-1",children:[(0,b.jsx)(n.ArrowLeft,{className:"w-3 h-3 transition-transform group-hover:-translate-x-1"})," Back to Dashboard"]}),(0,b.jsx)("h1",{className:"text-3xl md:text-6xl font-display font-bold bg-gradient-to-r from-white to-white/40 bg-clip-text text-transparent italic leading-tight",children:"Homework Portal"})]}),(0,b.jsx)("div",{className:"flex items-center gap-4 bg-white/5 border border-white/10 px-6 py-3 rounded-2xl backdrop-blur-md shadow-inner",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-emerald-500/80",children:"Cloud Sync: Active"})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,b.jsxs)(i.Card,{className:"lg:col-span-5 bg-black/40 border-white/10 backdrop-blur-3xl shadow-2xl rounded-3xl overflow-hidden h-fit sticky top-8",children:[(0,b.jsxs)("div",{className:"bg-white/5 p-6 border-b border-white/10",children:[(0,b.jsxs)(i.CardTitle,{className:"flex items-center gap-3 text-2xl font-display italic",children:[(0,b.jsx)(l.Plus,{className:"w-6 h-6 text-accent"})," Assign Homework"]}),(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase font-black tracking-widest mt-1 opacity-50",children:"Fill the tasks for the subjects you teach"})]}),(0,b.jsx)(i.CardContent,{className:"p-6",children:(0,b.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[10px] font-black uppercase text-muted-foreground tracking-[0.2em] ml-1",children:"Class & Section"}),(0,b.jsxs)(h.Select,{onValueChange:J,value:I,required:!0,children:[(0,b.jsx)(h.SelectTrigger,{className:"h-12 bg-white/5 border-white/10 rounded-xl font-bold focus:ring-accent/20",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select Class"})}),(0,b.jsx)(h.SelectContent,{className:"bg-[#0A192F] border-white/10 text-white",children:T.map(a=>(0,b.jsxs)(h.SelectItem,{value:a.key,className:"focus:bg-accent focus:text-black font-bold py-3",children:[w[a.classId]?.name||a.classId," - ",y[a.sectionId]?.name||a.sectionId]},a.key))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[10px] font-black uppercase text-muted-foreground tracking-[0.2em] ml-1",children:"Submission Deadline"}),(0,b.jsx)(f.Input,{type:"date",required:!0,className:"h-12 bg-white/5 border-white/10 rounded-xl font-bold focus:ring-accent/20",value:M,onChange:a=>N(a.target.value)})]})]}),I&&(0,b.jsx)("div",{className:"border border-white/10 rounded-2xl overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"text-[10px] uppercase bg-white/5 text-muted-foreground font-black tracking-widest",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 border-b border-white/10 w-1/3",children:"Subject"}),(0,b.jsx)("th",{className:"px-4 py-3 border-b border-white/10",children:"Homework Task"})]})}),(0,b.jsxs)("tbody",{children:[Q(I).map(a=>(0,b.jsxs)("tr",{className:"border-b border-white/5 last:border-0 hover:bg-white/5 transition-colors",children:[(0,b.jsx)("td",{className:"px-4 py-3 font-bold text-accent",children:v[a]?.name||a}),(0,b.jsx)("td",{className:"px-4 py-2",children:(0,b.jsx)(g.Textarea,{placeholder:`Enter ${v[a]?.name||"homework"} task...`,className:"min-h-[60px] bg-transparent border-none resize-none focus:ring-0 px-0 placeholder:text-white/20",value:O[a]||"",onChange:b=>P(c=>({...c,[a]:b.target.value}))})})]},a)),0===Q(I).length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:2,className:"p-8 text-center text-muted-foreground text-xs",children:"No subjects assigned to you for this class."})})]})]})}),(0,b.jsx)(e.Button,{type:"submit",disabled:C||!I,className:"w-full bg-accent text-black hover:bg-white hover:scale-[1.02] font-black h-12 rounded-xl transition-all shadow-xl shadow-accent/10 uppercase tracking-widest text-xs",children:C?(0,b.jsx)(k.Loader2,{className:"animate-spin w-5 h-5"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Send,{className:"w-4 h-4 mr-2"})," Publish Tasks"]})})]})})]}),(0,b.jsxs)("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4 h-fit",children:[(0,b.jsxs)("div",{className:"md:col-span-2 flex items-center gap-3 mb-2",children:[(0,b.jsx)(p.History,{className:"w-5 h-5 text-accent"}),(0,b.jsx)("h2",{className:"text-xl font-display font-bold italic",children:"Broadcast History"}),(0,b.jsx)("div",{className:"flex-1 h-px bg-white/5"}),(0,b.jsx)(x,{className:"bg-white/5 border-white/10 text-[10px] text-white/40 uppercase tracking-widest font-black",children:"Latest 10 Entries"})]}),0===A.length?(0,b.jsxs)("div",{className:"md:col-span-2 py-32 text-center text-muted-foreground bg-white/5 rounded-[40px] border border-dashed border-white/10 backdrop-blur-sm flex flex-col items-center justify-center gap-4",children:[(0,b.jsx)(p.History,{className:"w-12 h-12 opacity-10"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-black uppercase tracking-widest text-xs opacity-40",children:"No records found"}),(0,b.jsx)("p",{className:"text-[10px]",children:"Start by assigning homework to your classes."})]})]}):A.map(a=>(0,b.jsxs)("div",{className:"group relative bg-black/40 border border-white/10 rounded-3xl p-6 hover:bg-white/5 transition-all backdrop-blur-md overflow-hidden flex flex-col justify-between",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-accent/5 blur-3xl -mr-16 -mt-16 group-hover:bg-accent/10 transition-colors"}),(0,b.jsxs)("div",{className:"space-y-4 relative z-10",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(x,{className:"bg-accent text-black border-none text-[8px] uppercase font-black tracking-widest px-3 py-1",children:[w[a.classId]?.name||a.classId," ",y[a.sectionId]?.name?`- ${y[a.sectionId].name}`:""]}),(0,b.jsx)(x,{variant:"outline",className:"border-white/10 text-white/40 text-[8px] uppercase font-black tracking-widest px-3 py-1",children:v[a.subjectId]?.name||a.subjectId})]}),(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",className:"w-8 h-8 rounded-xl text-red-500/40 hover:bg-red-500/10 hover:text-red-500 transition-all",onClick:()=>S(a.id),children:(0,b.jsx)(m.Trash2,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-xl text-white group-hover:text-accent transition-colors leading-tight",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-3 mt-2 leading-relaxed opacity-60 font-medium",children:a.description})]})]}),(0,b.jsxs)("div",{className:"mt-8 flex items-center justify-between border-t border-white/5 pt-4 relative z-10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-accent font-black uppercase tracking-widest",children:[(0,b.jsx)(q.Calendar,{className:"w-3.5 h-3.5"}),"Due ",new Date(a.dueDate).toLocaleDateString(void 0,{day:"numeric",month:"short"})]}),(0,b.jsx)("span",{className:"text-[8px] text-muted-foreground font-black uppercase tracking-widest opacity-30",children:a.createdAt?new Date(1e3*a.createdAt.seconds).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"..."})]})]},a.id))]})]})]})}function x({children:a,className:c,variant:d}){return(0,b.jsx)("span",{className:(0,v.cn)("px-2 py-0.5 rounded-full text-[10px] font-bold border","outline"===d?"bg-transparent":"bg-white/10",c),children:a})}a.s(["default",()=>w])}];

//# sourceMappingURL=_48929073._.js.map