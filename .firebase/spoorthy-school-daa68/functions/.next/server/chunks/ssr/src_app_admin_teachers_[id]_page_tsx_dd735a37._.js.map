{"version":3,"sources":["../../../../src/app/admin/teachers/%5Bid%5D/page.tsx","../../../../src/components/admin/edit-teacher-modal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { doc, getDoc, collection, query, where, getDocs, updateDoc, Timestamp, addDoc, orderBy, onSnapshot } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, ArrowLeft, Phone, MapPin, BookOpen, GraduationCap, DollarSign, Wallet, Edit, CheckCircle } from \"lucide-react\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogFooter\r\n} from \"@/components/ui/dialog\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { AdjustSalaryModal } from \"@/components/admin/adjust-salary-modal\";\r\nimport { EditTeacherModal } from \"@/components/admin/edit-teacher-modal\";\r\nimport { AdminChangePasswordModal } from \"@/components/admin/admin-change-password-modal\";\r\nimport { KeyRound, Settings } from \"lucide-react\";\r\n\r\nexport default function TeacherProfilePage() {\r\n    const { user } = useAuth();\r\n    const { id } = useParams();\r\n    const router = useRouter();\r\n    const [teacher, setTeacher] = useState<any>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [role, setRole] = useState<string>(\"\");\r\n\r\n    useEffect(() => {\r\n        if (!user) return;\r\n        const unsub = onSnapshot(doc(db, \"users\", user.uid), (d) => {\r\n            if (d.exists()) setRole(d.data().role);\r\n        });\r\n        return () => unsub();\r\n    }, [user]);\r\n\r\n    // Salary History\r\n    const [payments, setPayments] = useState<any[]>([]);\r\n\r\n    // Pay Salary Modal\r\n    const [isPayModalOpen, setIsPayModalOpen] = useState(false);\r\n    const [payForm, setPayForm] = useState({\r\n        month: new Date().toLocaleString('default', { month: 'long' }),\r\n        year: new Date().getFullYear().toString(),\r\n        amount: \"\",\r\n        method: \"CASH\",\r\n        notes: \"\"\r\n    });\r\n    const [paying, setPaying] = useState(false);\r\n\r\n    // Adjust Salary\r\n    const [isSalaryModalOpen, setIsSalaryModalOpen] = useState(false);\r\n\r\n    // Edit Profile\r\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n\r\n    // Password Reset\r\n    const [isPasswordModalOpen, setIsPasswordModalOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            fetchTeacher();\r\n            fetchPayments();\r\n        }\r\n    }, [id]);\r\n\r\n    const fetchTeacher = async () => {\r\n        try {\r\n            const docRef = doc(db, \"teachers\", id as string);\r\n            const snap = await getDoc(docRef);\r\n            if (snap.exists()) {\r\n                setTeacher(snap.data());\r\n            } else {\r\n                alert(\"Teacher not found\");\r\n                router.back();\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchPayments = async () => {\r\n        try {\r\n            const q = query(\r\n                collection(db, \"salary_payments\"),\r\n                where(\"personId\", \"==\", id),\r\n                orderBy(\"createdAt\", \"desc\") // requires index\r\n            );\r\n            // Index might be missing, so simplistic client sort for MVP if index fails\r\n            // But let's try standard fetch\r\n            const qSimple = query(collection(db, \"salary_payments\"), where(\"personId\", \"==\", id));\r\n            const snap = await getDocs(qSimple);\r\n            const data = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n            // Client sort\r\n            data.sort((a: any, b: any) => b.createdAt?.seconds - a.createdAt?.seconds);\r\n            setPayments(data);\r\n        } catch (e) { console.error(e); }\r\n    };\r\n\r\n    const handlePaySalary = async () => {\r\n        setPaying(true);\r\n        try {\r\n            if (!payForm.amount) throw new Error(\"Amount required\");\r\n\r\n            // TODO: Move to API route if complex, but simple record creation is OK securely via Rules\r\n            // Actually, Plan says Use API Route `api/admin/payroll/process`\r\n            // Let's implement that properly or keep it client-side secure since it's admin only.\r\n            // Requirement said \"Backend Implementation (Mandatory Cloud Functions): paySalary(payload)\".\r\n            // So we MUST use API route.\r\n\r\n            const token = await user?.getIdToken();\r\n            const res = await fetch(\"/api/admin/payroll/process\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    personId: id,\r\n                    personType: \"TEACHER\",\r\n                    ...payForm,\r\n                    amount: Number(payForm.amount)\r\n                })\r\n            });\r\n            const data = await res.json();\r\n            if (!res.ok) throw new Error(data.error);\r\n\r\n            alert(\"Salary Payment Recorded!\");\r\n            setIsPayModalOpen(false);\r\n            fetchPayments();\r\n        } catch (error: any) {\r\n            alert(error.message);\r\n        } finally {\r\n            setPaying(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"p-10 flex justify-center\"><Loader2 className=\"animate-spin\" /></div>;\r\n    if (!teacher) return null;\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n            <div className=\"flex flex-col xl:flex-row xl:items-center gap-4\">\r\n                <div className=\"flex items-center gap-4 w-full xl:w-auto\">\r\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => router.back()}>\r\n                        <ArrowLeft className=\"w-5 h-5\" />\r\n                    </Button>\r\n                    <div>\r\n                        <h1 className=\"text-2xl md:text-3xl font-display font-bold\">{teacher.name}</h1>\r\n                        <div className=\"flex flex-wrap items-center gap-2 text-muted-foreground mt-1\">\r\n                            <Badge variant=\"outline\" className=\"border-blue-500/50 text-blue-400 font-mono\">\r\n                                {teacher.schoolId}\r\n                            </Badge>\r\n                            <span>•</span>\r\n                            <span>{teacher.status}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2 w-full xl:w-auto xl:ml-auto\">\r\n                    <Button onClick={() => setIsPasswordModalOpen(true)} variant=\"outline\" className=\"border-white/10 hover:bg-white/5 flex-1 md:flex-none\">\r\n                        <KeyRound className=\"w-4 h-4 mr-2\" /> Reset Password\r\n                    </Button>\r\n                    <Button onClick={() => setIsEditModalOpen(true)} variant=\"outline\" className=\"border-white/10 hover:bg-white/5 flex-1 md:flex-none\">\r\n                        <Edit className=\"w-4 h-4 mr-2\" /> Edit Profile\r\n                    </Button>\r\n                    {role !== \"MANAGER\" && (\r\n                        <>\r\n                            <Button onClick={() => setIsSalaryModalOpen(true)} variant=\"outline\" className=\"border-white/10 hover:bg-white/5 flex-1 md:flex-none\">\r\n                                <Settings className=\"w-4 h-4 mr-2\" /> Adjust Salary\r\n                            </Button>\r\n                            <Button onClick={() => setIsPayModalOpen(true)} className=\"bg-green-600 hover:bg-green-700 text-white flex-1 md:flex-none\">\r\n                                <Wallet className=\"w-4 h-4 mr-2\" /> Pay Salary\r\n                            </Button>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                {/* Profile Card */}\r\n                <Card className=\"md:col-span-2 bg-black/40 border-white/10\">\r\n                    <CardHeader><CardTitle className=\"text-lg\">Personal Details</CardTitle></CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <Label className=\"text-muted-foreground\">Mobile</Label>\r\n                                <div className=\"flex items-center gap-2 mt-1\">\r\n                                    <Phone className=\"w-4 h-4 text-blue-400\" />\r\n                                    <span className=\"font-mono\">{teacher.mobile}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <Label className=\"text-muted-foreground\">Age</Label>\r\n                                <div className=\"mt-1\">{teacher.age} years</div>\r\n                            </div>\r\n                            <div className=\"col-span-2\">\r\n                                <Label className=\"text-muted-foreground\">Address</Label>\r\n                                <div className=\"flex items-start gap-2 mt-1\">\r\n                                    <MapPin className=\"w-4 h-4 text-red-400 mt-1\" />\r\n                                    <span>{teacher.address}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-span-2\">\r\n                                <Label className=\"text-muted-foreground\">Qualifications</Label>\r\n                                <div className=\"flex items-center gap-2 mt-1\">\r\n                                    <GraduationCap className=\"w-4 h-4 text-yellow-400\" />\r\n                                    <span>{teacher.qualifications}</span>\r\n                                </div>\r\n                            </div>\r\n                            {teacher.classTeacherOf && (\r\n                                <div className=\"col-span-2\">\r\n                                    <Label className=\"text-muted-foreground\">Class In-charge</Label>\r\n                                    <div className=\"flex items-center gap-2 mt-1 text-emerald-400 font-bold\">\r\n                                        <CheckCircle className=\"w-4 h-4\" />\r\n                                        <span>Class Teacher of {teacher.classTeacherOf.classId.toUpperCase()} - {teacher.classTeacherOf.sectionId}</span>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"pt-4 border-t border-white/10\">\r\n                            <Label className=\"text-muted-foreground block mb-2\">Teaching Subjects</Label>\r\n                            <div className=\"flex gap-2\">\r\n                                {teacher.subjects?.map((sub: string) => (\r\n                                    <Badge key={sub} className=\"bg-purple-500/10 text-purple-400 border border-purple-500/20 px-3 py-1\">\r\n                                        <BookOpen className=\"w-3 h-3 mr-2\" /> {sub}\r\n                                    </Badge>\r\n                                ))}\r\n                                {(!teacher.subjects || teacher.subjects.length === 0) && <span className=\"text-muted-foreground italic\">No subjects assigned</span>}\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Salary Overview */}\r\n                {role !== \"MANAGER\" && (\r\n                    <Card className=\"bg-black/40 border-white/10\">\r\n                        <CardHeader><CardTitle className=\"text-lg\">Compensations</CardTitle></CardHeader>\r\n                        <CardContent className=\"space-y-6\">\r\n                            <div className=\"bg-white/5 p-4 rounded-xl border border-white/10 text-center\">\r\n                                <div className=\"text-muted-foreground text-sm uppercase tracking-wider mb-1\">Current Salary</div>\r\n                                <div className=\"text-3xl font-display font-bold\">₹{teacher.salary?.toLocaleString()}</div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <h4 className=\"text-sm font-semibold mb-3\">Recent Payments</h4>\r\n                                <div className=\"space-y-2\">\r\n                                    {payments.slice(0, 5).map(pay => (\r\n                                        <div key={pay.id} className=\"flex justify-between items-center text-sm p-2 bg-white/5 rounded\">\r\n                                            <div>\r\n                                                <div className=\"font-bold\">{pay.month} {pay.year}</div>\r\n                                                <div className=\"text-xs text-muted-foreground\">{pay.method}</div>\r\n                                            </div>\r\n                                            <div className=\"font-mono text-green-400 font-bold\">+₹{pay.amount.toLocaleString()}</div>\r\n                                        </div>\r\n                                    ))}\r\n                                    {payments.length === 0 && <div className=\"text-center text-muted-foreground text-sm\">No payment history</div>}\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                )}\r\n            </div>\r\n\r\n            {/* Pay Salary Modal */}\r\n            <Dialog open={isPayModalOpen} onOpenChange={setIsPayModalOpen}>\r\n                <DialogContent className=\"bg-black/95 border-white/10 text-white\">\r\n                    <DialogHeader><DialogTitle>Pay Salary to {teacher.name}</DialogTitle></DialogHeader>\r\n                    <div className=\"space-y-4 py-2\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Month</Label>\r\n                                <Select value={payForm.month} onValueChange={v => setPayForm({ ...payForm, month: v })}>\r\n                                    <SelectTrigger className=\"bg-white/5 border-white/10\"><SelectValue /></SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'].map(m => (\r\n                                            <SelectItem key={m} value={m}>{m}</SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Year</Label>\r\n                                <Input value={payForm.year} onChange={e => setPayForm({ ...payForm, year: e.target.value })} className=\"bg-white/5 border-white/10\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Amount (₹)</Label>\r\n                            <div className=\"relative\">\r\n                                <DollarSign className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\r\n                                <Input\r\n                                    type=\"number\"\r\n                                    value={payForm.amount}\r\n                                    onChange={e => setPayForm({ ...payForm, amount: e.target.value })}\r\n                                    className=\"pl-9 bg-white/5 border-white/10\"\r\n                                    placeholder={teacher.salary?.toString()}\r\n                                />\r\n                            </div>\r\n                            <p className=\"text-xs text-muted-foreground\">Base Salary: ₹{teacher.salary?.toLocaleString()}</p>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Payment Mode</Label>\r\n                            <Select value={payForm.method} onValueChange={v => setPayForm({ ...payForm, method: v })}>\r\n                                <SelectTrigger className=\"bg-white/5 border-white/10\"><SelectValue /></SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"CASH\">Cash</SelectItem>\r\n                                    <SelectItem value=\"UPI\">UPI / Online</SelectItem>\r\n                                    <SelectItem value=\"CHEQUE\">Cheque</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Notes (Optional)</Label>\r\n                            <Textarea\r\n                                value={payForm.notes}\r\n                                onChange={e => setPayForm({ ...payForm, notes: e.target.value })}\r\n                                className=\"bg-white/5 border-white/10\"\r\n                                placeholder=\"e.g. Bonus included\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button onClick={handlePaySalary} disabled={paying} className=\"w-full bg-green-600 hover:bg-green-700 text-white\">\r\n                            {paying ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : \"Confirm Payment\"}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            <AdjustSalaryModal\r\n                isOpen={isSalaryModalOpen}\r\n                onClose={() => setIsSalaryModalOpen(false)}\r\n                person={teacher ? {\r\n                    id: id as string,\r\n                    name: teacher.name,\r\n                    schoolId: teacher.schoolId,\r\n                    role: \"TEACHER\",\r\n                    currentSalary: teacher.salary || 0\r\n                } : null}\r\n                onSuccess={() => fetchTeacher()}\r\n            />\r\n\r\n            <EditTeacherModal\r\n                isOpen={isEditModalOpen}\r\n                onClose={() => setIsEditModalOpen(false)}\r\n                teacher={teacher ? { id, ...teacher } : null}\r\n                onSuccess={() => fetchTeacher()}\r\n            />\r\n\r\n            <AdminChangePasswordModal\r\n                isOpen={isPasswordModalOpen}\r\n                onClose={() => setIsPasswordModalOpen(false)}\r\n                user={teacher ? {\r\n                    uid: teacher.uid,\r\n                    schoolId: teacher.schoolId,\r\n                    name: teacher.name,\r\n                    role: \"TEACHER\"\r\n                } : null}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogFooter\r\n} from \"@/components/ui/dialog\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport { doc, updateDoc } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { useMasterData } from \"@/context/MasterDataContext\";\r\nimport { toast } from \"@/lib/toast-store\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { notifyManagerAction } from \"@/lib/notifications\";\r\nimport { onSnapshot } from \"firebase/firestore\";\r\n\r\ninterface EditTeacherModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    teacher: any;\r\n    onSuccess: () => void;\r\n}\r\n\r\nexport function EditTeacherModal({ isOpen, onClose, teacher, onSuccess }: EditTeacherModalProps) {\r\n    const { subjects: masterSubjects } = useMasterData();\r\n    const [subjects, setSubjects] = useState<any[]>([]);\r\n\r\n    // Form\r\n    const [form, setForm] = useState({\r\n        name: \"\",\r\n        mobile: \"\",\r\n        age: \"\",\r\n        address: \"\",\r\n        qualifications: \"\",\r\n        primarySubject: \"\",\r\n        secondarySubject: \"\",\r\n        classTeacherClass: \"\",\r\n        classTeacherSection: \"\"\r\n    });\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    const { user } = useAuth();\r\n    const [role, setRole] = useState<string>(\"\");\r\n\r\n    useEffect(() => {\r\n        if (!user) return;\r\n        const unsub = onSnapshot(doc(db, \"users\", user.uid), (d) => {\r\n            if (d.exists()) setRole(d.data().role);\r\n        });\r\n        return () => unsub();\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && teacher) {\r\n            setForm({\r\n                name: teacher.name || \"\",\r\n                mobile: teacher.mobile || \"\",\r\n                age: teacher.age?.toString() || \"\",\r\n                address: teacher.address || \"\",\r\n                qualifications: teacher.qualifications || \"\",\r\n                primarySubject: teacher.subjects?.[0] || \"\",\r\n                secondarySubject: teacher.subjects?.[1] || \"NONE\",\r\n                classTeacherClass: teacher.classTeacherOf?.classId || \"NONE\",\r\n                classTeacherSection: teacher.classTeacherOf?.sectionId || \"A\"\r\n            });\r\n\r\n            // Populate subjects from Master Data context\r\n            const activeSubjects = Object.values(masterSubjects || {})\r\n                .filter((s: any) => s.isActive !== false)\r\n                .sort((a: any, b: any) => a.name.localeCompare(b.name));\r\n            setSubjects(activeSubjects);\r\n        }\r\n    }, [isOpen, teacher, masterSubjects]);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!teacher?.id) return;\r\n        setSubmitting(true);\r\n\r\n        try {\r\n            const selectedSubjects = [];\r\n            if (form.primarySubject && form.primarySubject !== \"NONE\") selectedSubjects.push(form.primarySubject);\r\n            if (form.secondarySubject && form.secondarySubject !== \"NONE\" && form.secondarySubject !== form.primarySubject) selectedSubjects.push(form.secondarySubject);\r\n\r\n            const docRef = doc(db, \"teachers\", teacher.id);\r\n            await updateDoc(docRef, {\r\n                name: form.name,\r\n                mobile: form.mobile,\r\n                age: Number(form.age),\r\n                address: form.address,\r\n                qualifications: form.qualifications,\r\n                subjects: selectedSubjects,\r\n                classTeacherOf: (form.classTeacherClass && form.classTeacherClass !== \"NONE\") ? {\r\n                    classId: form.classTeacherClass,\r\n                    sectionId: form.classTeacherSection || \"A\"\r\n                } : null,\r\n                updatedAt: new Date().toISOString()\r\n            });\r\n\r\n            // Notification for Manager Action\r\n            if (role === \"MANAGER\") {\r\n                await notifyManagerAction({\r\n                    userId: teacher.uid || teacher.id,\r\n                    title: \"Profile Updated\",\r\n                    message: `Teacher profile ${form.name} has been updated by Manager ${user?.displayName || 'System'}.`,\r\n                    type: \"INFO\",\r\n                    actionBy: user?.uid,\r\n                    actionByName: user?.displayName || \"Manager\"\r\n                });\r\n            }\r\n\r\n            toast({\r\n                title: \"Teacher Updated\",\r\n                description: `Successfully updated details for ${form.name}`,\r\n                type: \"success\"\r\n            });\r\n\r\n            onSuccess();\r\n            onClose();\r\n        } catch (err: any) {\r\n            toast({\r\n                title: \"Update Failed\",\r\n                description: err.message || \"Could not update teacher details.\",\r\n                type: \"error\"\r\n            });\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onClose}>\r\n            <DialogContent className=\"bg-black/95 border-white/10 text-white sm:max-w-[600px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Edit Teacher Details</DialogTitle>\r\n                </DialogHeader>\r\n\r\n                <form onSubmit={handleSubmit} className=\"grid grid-cols-2 gap-4 py-2\">\r\n                    {/* Left Col */}\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Full Name</Label>\r\n                            <Input required value={form.name} onChange={e => setForm({ ...form, name: e.target.value })} className=\"bg-white/5 border-white/10\" />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Mobile Number</Label>\r\n                            <Input required type=\"tel\" maxLength={10} value={form.mobile} onChange={e => setForm({ ...form, mobile: e.target.value })} className=\"bg-white/5 border-white/10 font-mono\" />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Age</Label>\r\n                            <Input required type=\"number\" min=\"18\" value={form.age} onChange={e => setForm({ ...form, age: e.target.value })} className=\"bg-white/5 border-white/10\" />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Address</Label>\r\n                            <Input required value={form.address} onChange={e => setForm({ ...form, address: e.target.value })} className=\"bg-white/5 border-white/10\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right Col */}\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Primary Subject</Label>\r\n                            <Select value={form.primarySubject} onValueChange={v => setForm({ ...form, primarySubject: v })}>\r\n                                <SelectTrigger className=\"bg-white/5 border-white/10\"><SelectValue placeholder=\"Select\" /></SelectTrigger>\r\n                                <SelectContent className=\"bg-black border-white/10 text-white\">\r\n                                    {subjects.map(s => <SelectItem key={s.id} value={s.name || \"Unknown\"}>{s.name || \"Unknown\"}</SelectItem>)}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Secondary Subject (Optional)</Label>\r\n                            <Select value={form.secondarySubject} onValueChange={v => setForm({ ...form, secondarySubject: v })}>\r\n                                <SelectTrigger className=\"bg-white/5 border-white/10\"><SelectValue placeholder=\"None\" /></SelectTrigger>\r\n                                <SelectContent className=\"bg-black border-white/10 text-white\">\r\n                                    <SelectItem value=\"NONE\">None</SelectItem>\r\n                                    {subjects.filter(s => s.name !== form.primarySubject).map(s => <SelectItem key={s.id} value={s.name || \"Unknown\"}>{s.name || \"Unknown\"}</SelectItem>)}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Qualifications</Label>\r\n                            <Input required value={form.qualifications} onChange={e => setForm({ ...form, qualifications: e.target.value })} className=\"bg-white/5 border-white/10\" placeholder=\"e.g. B.Ed, M.Sc\" />\r\n                        </div>\r\n\r\n                        <div className=\"pt-4 border-t border-white/10\">\r\n                            <Label className=\"text-xs text-muted-foreground uppercase mb-2 block\">Class Teacher Assignment</Label>\r\n                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                <Select value={form.classTeacherClass} onValueChange={v => setForm({ ...form, classTeacherClass: v })}>\r\n                                    <SelectTrigger className=\"bg-white/5 border-white/10 text-xs\"><SelectValue placeholder=\"Class\" /></SelectTrigger>\r\n                                    <SelectContent className=\"bg-black border-white/10 text-white\">\r\n                                        <SelectItem value=\"NONE\">None</SelectItem>\r\n                                        {Object.values(useMasterData().classes).sort((a: any, b: any) => a.order - b.order).map((c: any) => (\r\n                                            <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                                <Select value={form.classTeacherSection} onValueChange={v => setForm({ ...form, classTeacherSection: v })}>\r\n                                    <SelectTrigger className=\"bg-white/5 border-white/10 text-xs\"><SelectValue placeholder=\"Section\" /></SelectTrigger>\r\n                                    <SelectContent className=\"bg-black border-white/10 text-white\">\r\n                                        {Object.values(useMasterData().sections).map((s: any) => (\r\n                                            <SelectItem key={s.id} value={s.id}>{s.name}</SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <DialogFooter className=\"col-span-2 mt-4\">\r\n                        <Button type=\"button\" variant=\"ghost\" onClick={onClose} disabled={submitting}>\r\n                            Cancel\r\n                        </Button>\r\n                        <Button type=\"submit\" disabled={submitting} className=\"bg-white text-black hover:bg-zinc-200\">\r\n                            {submitting ? <Loader2 className=\"w-4 h-4 animate-spin mr-2\" /> : null}\r\n                            Save Changes\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}