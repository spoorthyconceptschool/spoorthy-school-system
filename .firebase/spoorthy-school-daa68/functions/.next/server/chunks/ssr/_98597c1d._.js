module.exports=[99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(68114);let f=c.forwardRef(({className:a,variant:c="default",size:f="default",asChild:g=!1,...h},i)=>{let j=g?d.Slot:"button";return(0,b.jsx)(j,{className:(0,e.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===c,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===c,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===c,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===c,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===c,"text-primary underline-offset-4 hover:underline":"link"===c,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===c,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===c,"h-10 px-6 py-2":"default"===f,"h-9 px-4 text-xs":"sm"===f,"h-12 px-8 text-base":"lg"===f,"h-14 px-10 text-lg":"xl"===f,"h-10 w-10":"icon"===f},a),ref:i,...h})});f.displayName="Button",a.s(["Button",()=>f])},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},84505,a=>{"use strict";let b=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],84505)},56226,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025);a.i(69387);var e=a.i(60574),f=a.i(20237),g=a.i(91410),h=a.i(99570),i=a.i(96221),j=a.i(210),k=a.i(84505),l=a.i(70106);let m=(0,l.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),n=(0,l.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=a.i(92e3),p=a.i(50944);function q({params:a}){let{id:l}=(0,c.use)(a),{user:q}=(0,d.useAuth)(),r=(0,p.useRouter)(),{subjects:s}=(0,g.useMasterData)(),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null);(0,c.useEffect)(()=>{q&&D()},[q,l]);let D=async()=>{try{if(!q?.uid)return;let[a,b,c]=await Promise.all([(0,e.getDocs)((0,e.query)((0,e.collection)(f.db,"students"),(0,e.where)("uid","==",q.uid))),(0,e.getDoc)((0,e.doc)(f.db,"exams",l)),(0,e.getDoc)((0,e.doc)(f.db,"settings","branding"))]);if(a.empty)return void u(!1);let d={id:a.docs[0].id,...a.docs[0].data()};if(A(d),!b.exists())return void r.push("/student/exams");w({id:b.id,...b.data()}),c.exists()&&C(c.data());let g=(0,e.doc)(f.db,"exam_results",`${l}_${d.id}`),h=await (0,e.getDoc)(g);h.exists()?y(h.data()):y(null)}catch(a){console.error(a)}finally{u(!1)}};if(t)return(0,b.jsx)("div",{className:"flex justify-center p-20 text-[#E6F1FF]",children:(0,b.jsx)(i.Loader2,{className:"animate-spin"})});if(!v)return null;let E=(()=>{if(!x?.subjects)return{total:0,max:0,percentage:0};let a=0,b=0;return Object.values(x.subjects).forEach(c=>{let d=parseFloat(c.obtained),e=parseFloat(c.maxMarks);isNaN(d)||(a+=d),isNaN(e)||(b+=e)}),{total:a,max:b,percentage:b>0?a/b*100:0}})(),F=E.percentage>=35?"PASSED":"FAILED";return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 pb-10 print:max-w-none print:p-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 print:hidden",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>r.push("/student/exams"),className:"text-[#8892B0] hover:text-[#E6F1FF]",children:(0,b.jsx)(j.ArrowLeft,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-[#E6F1FF]",children:"Result Report"}),(0,b.jsx)("p",{className:"text-[#8892B0] text-sm",children:"Official Statement of Marks"})]}),(0,b.jsx)("div",{className:"ml-auto",children:(0,b.jsxs)(h.Button,{onClick:()=>window.print(),variant:"outline",className:"border-[#64FFDA]/30 text-[#64FFDA] hover:bg-[#64FFDA]/10 gap-2",children:[(0,b.jsx)(k.Download,{className:"w-4 h-4"})," Print / Download PDF"]})})]}),(0,b.jsxs)("div",{className:"bg-white text-black p-8 md:p-12 rounded-lg shadow-xl print:shadow-none print:p-0 relative overflow-hidden",children:[(0,b.jsxs)("div",{className:"text-center border-b-2 border-black/10 pb-8 mb-8 relative z-10",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 mb-4",children:[B?.schoolLogo&&(0,b.jsx)("img",{src:B.schoolLogo,alt:"School Logo",className:"h-24 object-contain"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-serif font-bold uppercase tracking-wide mb-2",children:"Spoorthy Concept School"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 font-medium tracking-widest uppercase",children:"Excellence in Education"})]})]}),(0,b.jsx)("div",{className:"mt-2 inline-block px-6 py-2 bg-black text-white text-sm font-bold uppercase tracking-widest rounded-full",children:"Statement of Marks"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-8 mb-8 text-sm relative z-10",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-black/50 font-bold uppercase text-[10px] tracking-widest mb-1",children:"Student Details"}),(0,b.jsx)("h3",{className:"text-xl font-bold",children:z?.studentName}),(0,b.jsxs)("p",{className:"font-mono mt-1",children:["ID: ",z?.schoolId]}),(0,b.jsxs)("p",{className:"font-medium mt-1",children:["Class: ",z?.className," - ",z?.sectionName]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-black/50 font-bold uppercase text-[10px] tracking-widest mb-1",children:"Examination"}),(0,b.jsx)("h3",{className:"text-xl font-bold",children:v.name}),(0,b.jsx)("p",{className:"mt-1",children:v.academicYear||"2025-26"}),(0,b.jsxs)("p",{className:"text-black/50 mt-1 text-xs",children:["Date: ",new Date(v.startDate).toLocaleDateString()]})]})]}),x?(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("table",{className:"w-full mb-8",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b-2 border-black",children:[(0,b.jsx)("th",{className:"py-3 text-left font-bold uppercase text-xs tracking-wider w-1/2",children:"Subject"}),(0,b.jsx)("th",{className:"py-3 text-center font-bold uppercase text-xs tracking-wider",children:"Max Marks"}),(0,b.jsx)("th",{className:"py-3 text-center font-bold uppercase text-xs tracking-wider",children:"Obtained"}),(0,b.jsx)("th",{className:"py-3 text-left pl-8 font-bold uppercase text-xs tracking-wider",children:"Remarks"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-black/10",children:Object.entries(x.subjects||{}).map(([a,c])=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"py-4 font-bold",children:s[a]?.name||a}),(0,b.jsx)("td",{className:"py-4 text-center font-mono text-black/60",children:c.maxMarks}),(0,b.jsx)("td",{className:"py-4 text-center font-bold text-lg",children:c.obtained}),(0,b.jsx)("td",{className:"py-4 pl-8 text-sm italic text-black/60",children:c.remarks||"-"})]},a))}),(0,b.jsx)("tfoot",{className:"border-t-2 border-black bg-black/5",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"py-4 pl-4 font-bold uppercase text-sm",children:"Grand Total"}),(0,b.jsx)("td",{className:"py-4 text-center font-bold",children:E.max}),(0,b.jsx)("td",{className:"py-4 text-center font-bold text-xl",children:E.total}),(0,b.jsxs)("td",{className:"py-4 pl-8 font-bold text-sm",children:[E.percentage.toFixed(1),"%"]})]})})]}),(0,b.jsxs)("div",{className:"flex justify-between items-end border-t border-black/10 pt-8 mt-12",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-black/50 font-bold uppercase text-[10px] tracking-widest mb-2",children:"Final Result"}),(0,b.jsxs)("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded border ${"PASSED"===F?"bg-green-500/10 border-green-500 text-green-700":"bg-red-500/10 border-red-500 text-red-700"}`,children:["PASSED"===F?(0,b.jsx)(m,{className:"w-5 h-5"}):(0,b.jsx)(n,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"font-bold tracking-widest",children:F})]})]}),(0,b.jsxs)("div",{className:"text-center flex flex-col items-center gap-2",children:[B?.principalSignature?(0,b.jsx)("img",{src:B.principalSignature,alt:"Principal Signature",className:"h-16 object-contain -mb-4"}):(0,b.jsx)("div",{className:"w-32 border-b border-black/20 h-16"}),(0,b.jsx)("div",{className:"w-32 border-b border-black/20"}),(0,b.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-black/40",children:"Principal Signature"})]})]}),(0,b.jsx)("div",{className:"mt-12 text-center text-[10px] text-black/30 font-mono",children:"Generated electronically from Spoorthy School System. Valid without signature for online verification."})]}):(0,b.jsxs)("div",{className:"text-center py-20 border border-dashed border-black/20 rounded-lg relative z-10",children:[(0,b.jsx)(o.AlertCircle,{className:"w-10 h-10 mx-auto text-black/20 mb-4"}),(0,b.jsx)("p",{className:"text-black/50 font-medium",children:"Results for this exam have not been uploaded for your profile yet."}),(0,b.jsx)("p",{className:"text-black/40 text-xs mt-2",children:"Please contact your class teacher."})]}),B?.schoolLogo&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-[0.03] pointer-events-none z-0",children:(0,b.jsx)("img",{src:B.schoolLogo,alt:"",className:"w-full max-w-lg object-contain grayscale"})})]})]})}a.s(["default",()=>q],56226)}];

//# sourceMappingURL=_98597c1d._.js.map