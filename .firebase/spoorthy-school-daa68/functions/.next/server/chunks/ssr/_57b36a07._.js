module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-white/60 font-medium",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},5784,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},14548,a=>{"use strict";let b=(0,a.i(70106).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},85767,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(69387);var d=a.i(60574),e=a.i(20237),f=a.i(99570),g=a.i(80701),h=a.i(91119),i=a.i(96221),j=a.i(14548),k=a.i(91410),l=a.i(56025);function m(){let{user:a}=(0,l.useAuth)(),{classes:m,subjects:n}=(0,k.useMasterData)(),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)("2025-2026"),s=Object.values(m).map(a=>({id:a.id,name:a.name,order:a.order||99})).sort((a,b)=>a.order-b.order),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)({}),[B,C]=(0,c.useState)(!1);(0,c.useEffect)(()=>{D()},[]),(0,c.useEffect)(()=>{u(Object.values(n||{}).filter(a=>!1!==a.isActive).sort((a,b)=>a.name.localeCompare(b.name)))},[n]),(0,c.useEffect)(()=>{x?E(x):A({})},[x]);let D=async()=>{try{let a=await (0,d.getDocs)((0,d.query)((0,d.collection)(e.db,"teachers"),(0,d.where)("status","==","ACTIVE")));w(a.docs.map(a=>({id:a.id,...a.data()})))}catch(a){console.error(a)}finally{p(!1)}},E=async a=>{p(!0);try{let b=await fetch(`/api/admin/timetable/assign?yearId=${q}&classId=${a}`),c=await b.json();c.success&&c.data&&A(c.data.assignments||{})}catch(a){console.error(a)}finally{p(!1)}},F=async()=>{if(x&&a){C(!0);try{let b=await a.getIdToken(),c=await fetch("/api/admin/timetable/assign",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({yearId:q,classId:x,assignments:z})}),d=await c.json();d.success?alert("Assignments Saved!"):alert("Error: "+d.error)}catch(a){alert("Error: "+a.message)}finally{C(!1)}}};return o&&0===s.length?(0,b.jsx)("div",{className:"p-10 flex justify-center",children:(0,b.jsx)(i.Loader2,{className:"animate-spin"})}):(0,b.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto p-6 animate-in fade-in",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-display font-bold",children:"Teaching Assignments"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Assign teachers to subjects for each class."})]}),(0,b.jsx)("div",{className:"w-[200px]",children:(0,b.jsxs)(g.Select,{value:x,onValueChange:y,children:[(0,b.jsx)(g.SelectTrigger,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(g.SelectValue,{placeholder:"Select Class"})}),(0,b.jsx)(g.SelectContent,{children:s.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id,children:a.name},a.id))})]})})]}),x?(0,b.jsxs)(h.Card,{className:"bg-black/20 border-white/10",children:[(0,b.jsxs)(h.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{children:["Subject Mapping for ",s.find(a=>a.id===x)?.name]}),(0,b.jsxs)(f.Button,{onClick:F,disabled:B,className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[B?(0,b.jsx)(i.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(j.Save,{className:"w-4 h-4 mr-2"}),"Save Assignments"]})]}),(0,b.jsx)(h.CardContent,{className:"space-y-4",children:(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(a=>(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded bg-blue-500/10 flex items-center justify-center text-blue-400 font-bold",children:a.code||a.name.substring(0,2).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.type||"Theory"})]})]}),(0,b.jsx)("div",{className:"w-[250px]",children:(0,b.jsxs)(g.Select,{value:z[a.id]||"unassigned",onValueChange:b=>{var c,d;return c=a.id,d="unassigned"===b?"":b,void A(a=>({...a,[c]:d}))},children:[(0,b.jsx)(g.SelectTrigger,{className:"bg-black/40 border-white/10 h-9",children:(0,b.jsx)(g.SelectValue,{placeholder:"Assign Teacher"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"unassigned",children:"-- Unassigned --"}),v.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id,children:a.name},a.id))]})]})})]},a.id))})})]}):(0,b.jsx)("div",{className:"text-center py-20 text-muted-foreground border border-dashed border-white/10 rounded-lg",children:"Please select a class to begin assignments."})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=_57b36a07._.js.map