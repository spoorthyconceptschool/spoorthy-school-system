module.exports=[41675,67937,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["default",()=>b],67937),a.s(["Calendar",()=>b],41675)},71931,a=>{"use strict";let b=(0,a.i(70106).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);a.s(["Printer",()=>b],71931)},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},5784,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},70430,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("label",{ref:e,className:(0,d.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...c}));e.displayName="Label",a.s(["Label",()=>e])},14574,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97942),e=a.i(33508),f=a.i(68114);let g=d.Root,h=d.Trigger,i=d.Portal;d.Close;let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(d.Overlay,{ref:e,className:(0,f.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c}));j.displayName=d.Overlay.displayName;let k=c.forwardRef(({className:a,children:c,...g},h)=>(0,b.jsxs)(i,{children:[(0,b.jsx)(j,{}),(0,b.jsxs)(d.Content,{ref:h,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...g,children:[c,(0,b.jsxs)(d.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,b.jsx)(e.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));k.displayName=d.Content.displayName;let l=({className:a,...c})=>(0,b.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...c});l.displayName="DialogHeader";let m=({className:a,...c})=>(0,b.jsx)("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...c});m.displayName="DialogFooter";let n=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(d.Title,{ref:e,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",a),...c}));n.displayName=d.Title.displayName;let o=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(d.Description,{ref:e,className:(0,f.cn)("text-sm text-muted-foreground",a),...c}));o.displayName=d.Description.displayName,a.s(["Dialog",()=>g,"DialogContent",()=>k,"DialogDescription",()=>o,"DialogFooter",()=>m,"DialogHeader",()=>l,"DialogTitle",()=>n,"DialogTrigger",()=>h])},6015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},89402,40737,a=>{"use strict";var b=a.i(87924),c=a.i(6015),d=a.i(68114),e=a.i(99570);let f=(0,a.i(70106).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.s(["MoreHorizontal",()=>f],40737);var g=a.i(35732);function h({data:a,columns:h,isLoading:i,onRowClick:j,actions:k}){return i?(0,b.jsx)("div",{className:"w-full h-48 flex items-center justify-center bg-white/5 rounded-xl animate-pulse",children:(0,b.jsx)("div",{className:"h-4 w-4 bg-accent/50 rounded-full animate-ping"})}):(0,b.jsxs)("div",{className:"w-full space-y-3",children:[(0,b.jsx)("div",{className:"overflow-x-auto rounded-xl md:rounded-2xl border border-white/10 bg-black/20 backdrop-blur-md custom-scrollbar",children:(0,b.jsxs)(c.Table,{className:"w-full",children:[(0,b.jsx)(c.TableHeader,{className:"bg-white/5",children:(0,b.jsxs)(c.TableRow,{className:"border-white/10 hover:bg-transparent",children:[h.map(a=>(0,b.jsx)(c.TableHead,{className:(0,d.cn)("text-muted-foreground font-black uppercase text-[7px] md:text-[10px] tracking-widest h-8 md:h-12 whitespace-nowrap px-2 md:px-6 italic",a.headerClassName),children:a.header},a.key)),k&&(0,b.jsx)(c.TableHead,{className:"w-[30px] md:w-[50px] whitespace-nowrap px-2 md:px-6"})]})}),(0,b.jsx)(c.TableBody,{children:0===a.length?(0,b.jsx)(c.TableRow,{children:(0,b.jsx)(c.TableCell,{colSpan:h.length+ +!!k,className:"h-24 md:h-32 text-center text-muted-foreground border-white/10 whitespace-nowrap text-[10px] md:text-sm italic",children:"No results found."})}):a.map((a,i)=>(0,b.jsxs)(c.TableRow,{className:(0,d.cn)("border-white/5 transition-all duration-300 hover:bg-[#64FFDA]/5 group cursor-default",j&&"cursor-pointer"),onClick:()=>j?.(a),children:[h.map(e=>(0,b.jsx)(c.TableCell,{className:(0,d.cn)("py-2 md:py-4 px-2 md:px-6 font-medium whitespace-nowrap text-[10px] md:text-sm",e.cellClassName),children:(0,b.jsx)("div",{className:"flex flex-col",children:e.render?e.render(a,i):(0,b.jsx)("span",{className:"text-white group-hover:text-accent transition-colors",children:a[e.key]})})},`${a.id}-${e.key}`)),k&&(0,b.jsx)(c.TableCell,{className:"px-2 md:px-6",children:(0,b.jsxs)(g.DropdownMenu,{children:[(0,b.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"ghost",className:"h-7 w-7 md:h-8 md:w-8 p-0 hover:bg-white/10 text-muted-foreground hover:text-white",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(f,{className:"h-3 w-3 md:h-4 md:w-4"})]})}),(0,b.jsxs)(g.DropdownMenuContent,{align:"end",className:"bg-[#0A192F] border-white/10 backdrop-blur-xl rounded-xl",children:[(0,b.jsx)(g.DropdownMenuLabel,{className:"text-[10px] uppercase font-black tracking-widest text-muted-foreground/60 p-3 italic",children:"Operations"}),(0,b.jsx)(g.DropdownMenuSeparator,{className:"bg-white/5"}),(0,b.jsx)("div",{className:"p-1",children:k(a)})]})]})})]},a.id||i))})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 md:py-4 px-3 md:px-6 bg-white/5 border border-white/10 rounded-xl md:rounded-2xl",children:[(0,b.jsxs)("div",{className:"text-[8px] md:text-xs font-black uppercase tracking-widest text-muted-foreground italic",children:["Scope: ",(0,b.jsxs)("span",{className:"text-white ml-1",children:[a.length," items"]})]}),(0,b.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Prev"}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Next"})]})]})]})}a.s(["DataTable",()=>h],89402)},67453,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},84505,a=>{"use strict";let b=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],84505)},24669,a=>{"use strict";let b=(0,a.i(70106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],24669)},41961,a=>{"use strict";let b=(0,a.i(70106).default)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);a.s(["Briefcase",()=>b],41961)},4334,a=>{"use strict";let b=(0,a.i(70106).default)("indian-rupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);a.s(["IndianRupee",()=>b],4334)},22520,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);a.s(["ArrowUpRight",()=>b],22520)},40064,a=>{"use strict";var b=a.i(87924);a.i(69387);var c=a.i(60574),d=a.i(20237),e=a.i(72131),f=a.i(14574),g=a.i(99570),h=a.i(66718),i=a.i(70430),j=a.i(15618),k=a.i(96221),l=a.i(67453),m=a.i(71931),n=a.i(80701),o=a.i(56025),p=a.i(91410),q=a.i(88110),r=a.i(64550);function s({onSuccess:a}){let{user:s}=(0,o.useAuth)(),{villages:t,classes:u,sections:v,classSections:w,branding:x,loading:y}=(0,p.useMasterData)(),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)(null),[F,G]=(0,e.useState)({studentName:"",parentName:"",parentPhone:"",villageId:"",classId:"",sectionId:"",transportRequired:!1}),H=Object.values(t||{}).map(a=>({id:a.id,name:a.name})).sort((a,b)=>a.name.localeCompare(b.name)),I=Object.values(u||{}).map(a=>({id:a.id,name:a.name,order:a.order||99})).sort((a,b)=>a.order-b.order),J=F.classId?Object.values(w||{}).filter(a=>a.classId===F.classId).map(a=>v[a.sectionId]).filter(Boolean).map(a=>({id:a.id,name:a.name})).sort((a,b)=>a.name.localeCompare(b.name)):[],K=async b=>{if(b.preventDefault(),!F.studentName||F.studentName.length<2)return(0,q.toast)({title:"Name Required",type:"error"});if(!/^\d{10}$/.test(F.parentPhone))return(0,q.toast)({title:"Invalid Mobile",type:"error"});if(!F.villageId||!F.classId)return(0,q.toast)({title:"Missing Fields",type:"error"});C(!0);try{let b=await s?.getIdToken(),c=H.find(a=>a.id===F.villageId)?.name||"",d=I.find(a=>a.id===F.classId)?.name||"",e=J.find(a=>a.id===F.sectionId)?.name||"",f={studentName:F.studentName.trim(),parentName:F.parentName.trim(),parentMobile:F.parentPhone,villageId:F.villageId,villageName:c,classId:F.classId,className:d,sectionId:F.sectionId,sectionName:e,transportRequired:F.transportRequired};console.log("Creating student with payload:",f);let g=await fetch("/api/admin/students/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(f)}),h=await g.json();if(!g.ok)throw Error(h.error);(0,q.toast)({title:"Admission Successful",type:"success"}),E({schoolId:h.data.schoolId,studentName:F.studentName,className:d||"N/A"}),G({studentName:"",parentName:"",parentPhone:"",villageId:"",classId:"",sectionId:"",transportRequired:!1}),a?.()}catch(a){(0,q.toast)({title:"Admission Failed",description:a.message,type:"error"})}finally{C(!1)}};return(0,b.jsxs)(f.Dialog,{open:z,onOpenChange:a=>{A(a),a||E(null)},children:[(0,b.jsx)(f.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{className:"gap-2 bg-accent text-accent-foreground",children:[(0,b.jsx)(j.Plus,{size:16})," Add Student"]})}),(0,b.jsxs)(f.DialogContent,{className:"sm:max-w-[500px] bg-black/95 border-white/10 text-white",children:[(0,b.jsx)(f.DialogHeader,{children:(0,b.jsx)(f.DialogTitle,{children:"Student Admission"})}),D?(0,b.jsxs)("div",{className:"py-10 flex flex-col items-center space-y-6",children:[(0,b.jsx)(l.CheckCircle2,{className:"w-12 h-12 text-emerald-500"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:"Admission Confirmed!"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[D.studentName," enrolled successfully."]})]}),(0,b.jsx)("div",{className:"flex flex-col w-full gap-2",children:(0,b.jsxs)(g.Button,{className:"w-full bg-emerald-500 hover:bg-emerald-600 gap-2 font-bold h-12",onClick:async()=>{C(!0);let a=(0,c.query)((0,c.collection)(d.db,"student_fee_ledgers"),(0,c.where)("studentId","==",D.schoolId)),b=await (0,c.getDocs)(a);if(!b.empty){let a=b.docs[0].data();(0,r.printStudentFeeStructure)({studentName:D.studentName,schoolId:D.schoolId,className:D.className,items:a.items||[],totalPaid:a.totalPaid||0,schoolLogo:x?.schoolLogo,schoolName:x?.schoolName})}C(!1)},children:[(0,b.jsx)(m.Printer,{size:18})," Print / View Fee Structure"]})}),(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>A(!1),children:"Done"})]}):(0,b.jsxs)("form",{onSubmit:K,className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Student Name"}),(0,b.jsx)(h.Input,{required:!0,value:F.studentName,onChange:a=>G({...F,studentName:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Parent Name"}),(0,b.jsx)(h.Input,{required:!0,value:F.parentName,onChange:a=>G({...F,parentName:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Parent Mobile"}),(0,b.jsx)(h.Input,{required:!0,maxLength:10,value:F.parentPhone,onChange:a=>G({...F,parentPhone:a.target.value.replace(/\D/g,"")})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Village"}),(0,b.jsxs)(n.Select,{onValueChange:a=>G({...F,villageId:a}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Select Village"})}),(0,b.jsx)(n.SelectContent,{children:H.map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,children:a.name},a.id))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Class"}),(0,b.jsxs)(n.Select,{onValueChange:a=>G({...F,classId:a,sectionId:""}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Select Class"})}),(0,b.jsx)(n.SelectContent,{children:I.map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Section"}),(0,b.jsxs)(n.Select,{value:F.sectionId,onValueChange:a=>G({...F,sectionId:a}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Section"})}),(0,b.jsx)(n.SelectContent,{children:J.map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,children:a.name},a.id))})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 py-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"transport",className:"w-4 h-4 rounded border-white/20 bg-black/50 accent-emerald-500",checked:F.transportRequired,onChange:a=>G({...F,transportRequired:a.target.checked})}),(0,b.jsx)(i.Label,{htmlFor:"transport",className:"cursor-pointer",children:"Transport Required?"})]}),(0,b.jsx)(g.Button,{type:"submit",disabled:B,className:"w-full bg-accent text-accent-foreground font-bold h-12",children:B?(0,b.jsx)(k.Loader2,{className:"animate-spin"}):"Confirm Admission"})]})]})]})}a.s(["AddStudentModal",()=>s])}];

//# sourceMappingURL=_152cdf9f._.js.map