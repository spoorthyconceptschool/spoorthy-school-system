module.exports=[71637,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025);a.i(69387);var e=a.i(60574),f=a.i(20237),g=a.i(99570),h=a.i(66718),i=a.i(91119),j=a.i(14574),k=a.i(70430),l=a.i(86304),m=a.i(60246);let n=(0,a.i(70106).default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var o=a.i(3314),p=a.i(15618),q=a.i(81560),r=a.i(99464),s=a.i(96221),t=a.i(71931),u=a.i(87532),v=a.i(33508),w=a.i(38632),x=a.i(91410);let y=[{name:"Red",value:"#ff4d4d",code:"RED"},{name:"Blue",value:"#4d79ff",code:"BLUE"},{name:"Green",value:"#00cc66",code:"GREEN"},{name:"Yellow",value:"#ffcc00",code:"YELLOW"},{name:"Purple",value:"#bf40bf",code:"PURPLE"},{name:"Orange",value:"#ff9933",code:"ORANGE"}];function z({open:a,onOpenChange:d,title:e,options:f,onSelect:i,multiSelect:k=!1,initialSelectedIds:l=[],searchPlaceholder:m="Search..."}){let[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(l),r=f.filter(a=>a.label.toLowerCase().includes(n.toLowerCase())||a.subtext?.toLowerCase().includes(n.toLowerCase()));return(0,b.jsx)(j.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(j.DialogContent,{className:"bg-slate-950 border-slate-800 text-white sm:max-w-[400px] flex flex-col max-h-[80vh] p-0 gap-0",children:[(0,b.jsxs)(j.DialogHeader,{className:"p-4 border-b border-slate-800 flex flex-row items-center justify-between",children:[(0,b.jsx)(j.DialogTitle,{children:e}),k&&(0,b.jsxs)(g.Button,{size:"sm",onClick:()=>{i(p),d(!1)},className:"h-7 text-xs bg-emerald-600 hover:bg-emerald-700",children:["Done (",p.length,")"]})]}),(0,b.jsx)("div",{className:"p-2 border-b border-slate-800",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(u.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-400"}),(0,b.jsx)(h.Input,{placeholder:m,value:n,onChange:a=>o(a.target.value),className:"bg-slate-900 border-slate-800 pl-9 focus-visible:ring-slate-700",autoFocus:!0})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-2 min-h-[300px]",children:(0,b.jsxs)("div",{className:"space-y-1",children:[!k&&(0,b.jsx)("button",{onClick:()=>{i("none"),d(!1)},className:"w-full text-left px-3 py-2 rounded text-slate-400 hover:bg-slate-800 hover:text-white transition-colors text-sm",children:"No assignment (Clear)"}),0===r.length?(0,b.jsx)("div",{className:"py-8 text-center text-slate-500 text-sm",children:"No results found"}):r.map(a=>{let c=p.includes(a.id);return(0,b.jsxs)("button",{onClick:()=>{var b;return b=a.id,void(k?q(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b]):(i(b),d(!1)))},className:`w-full text-left px-3 py-2 rounded transition-colors group flex justify-between items-center ${c?"bg-emerald-500/20 text-emerald-400":"hover:bg-slate-800"}`,children:[(0,b.jsxs)("div",{className:"overflow-hidden",children:[(0,b.jsx)("div",{className:`font-medium text-sm ${c?"text-emerald-400":"text-slate-200"}`,children:a.label}),a.subtext&&(0,b.jsx)("div",{className:"text-xs text-slate-500 truncate",children:a.subtext})]}),c&&(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})]},a.id)})]})})]})})}function A(){let{user:a}=(0,d.useAuth)(),{branding:A}=(0,x.useMasterData)(),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(""),[_,aa]=(0,c.useState)(""),[ab,ac]=(0,c.useState)(""),[ad,ae]=(0,c.useState)([]),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)(null),[al,am]=(0,c.useState)([]),[an,ao]=(0,c.useState)(!1),[ap,aq]=(0,c.useState)([]);(0,c.useEffect)(()=>{a&&(at(),av(),as())},[a]);let ar=async b=>{if(!b.target.files||!b.target.files[0])return;let c=b.target.files[0];if(c.size>2097152)return void alert("File size must be less than 2MB");if(!c.type.startsWith("image/"))return void alert("Only image files are allowed");ai(!0);try{let b=await a?.getIdToken(),d=new FormData;d.append("file",c),d.append("type","house_symbol");let e=await fetch("/api/admin/media/upload",{method:"POST",headers:{Authorization:`Bearer ${b}`},body:d}),f=await e.json();if(!e.ok||!f.success)throw Error(f.error||"Upload failed");$(f.url)}catch(a){console.error("Upload failed",a),alert("Failed to upload image: "+a.message)}finally{ai(!1)}},as=async()=>{M(!0);try{let a=await (0,e.getDocs)((0,e.collection)(f.db,"teachers")),b=[];a.forEach(a=>{let c=a.data();"active"===c.status&&b.push({id:a.id,name:c.name,email:c.email})}),b.sort((a,b)=>a.name.localeCompare(b.name)),K(b)}catch(a){console.error(a)}finally{M(!1)}},at=async()=>{E(!0);try{let a=await (0,e.getDocs)((0,e.collection)(f.db,"groups")),b=[];a.forEach(a=>b.push({id:a.id,...a.data()})),C(b)}catch(a){console.error(a)}finally{E(!1)}},au=async a=>{ao(!0);try{let b=(0,e.query)((0,e.collection)(f.db,"students"),(0,e.where)("groupId","==",a)),c=await (0,e.getDocs)(b),d=[];c.forEach(a=>d.push({id:a.id,...a.data()})),am(d)}catch(a){console.error(a)}finally{ao(!1)}},av=async()=>{I(!0);try{let a=await (0,e.getDocs)((0,e.collection)(f.db,"students")),b=[];a.forEach(a=>{let c=a.data();b.push({id:a.id,name:c.studentName,class:c.className,section:c.sectionName})}),b.sort((a,b)=>a.name.localeCompare(b.name)),G(b)}catch(a){console.error(a)}finally{I(!1)}},aw=async()=>{if(V&&X){ag(!0);try{await (0,e.addDoc)((0,e.collection)(f.db,"groups"),{name:V,color:X,symbolUrl:Z||null,createdAt:new Date}),O(!1),at(),az()}catch(a){alert("Error creating group")}finally{ag(!1)}}},ax=async()=>{if(R){ag(!0);try{let a={name:V,color:X,symbolUrl:Z||null};if(_&&"none"!==_){let b=F.find(a=>a.id===_);b&&(a.captainId=b.id,a.captainName=b.name)}else"none"===_&&(a.captainId=null,a.captainName=null);if(ab&&"none"!==ab){let b=F.find(a=>a.id===ab);b&&(a.viceCaptainId=b.id,a.viceCaptainName=b.name)}else"none"===ab&&(a.viceCaptainId=null,a.viceCaptainName=null);ad&&ad.length>0?a.incharges=J.filter(a=>ad.includes(a.id)).map(a=>({id:a.id,name:a.name})):a.incharges=[],await (0,e.updateDoc)((0,e.doc)(f.db,"groups",R.id),a),Q(!1),at(),az()}catch(a){console.error(a),alert("Error updating group")}finally{ag(!1)}}},ay=async a=>{if(confirm("Are you sure? This will remove the group but students will remain assigned to the deleted group ID until updated."))try{await (0,e.deleteDoc)((0,e.doc)(f.db,"groups",a)),at()}catch(a){alert("Error deleting group")}},az=()=>{W(""),Y(""),$(""),aa(""),ac(""),ae([]),S(null)},aA=Array.from(new Set(al.map(a=>a.className))).sort();if(D)return(0,b.jsx)("div",{className:"p-10 flex justify-center",children:(0,b.jsx)(s.Loader2,{className:"animate-spin text-white"})});let aB=F.map(a=>({id:a.id,label:a.name,subtext:`${a.class}-${a.section}`})),aC=J.map(a=>({id:a.id,label:a.name,subtext:a.email}));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("div",{className:"flex gap-2"}),(0,b.jsxs)(g.Button,{onClick:()=>O(!0),className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,b.jsx)(p.Plus,{className:"w-4 h-4 mr-2"})," New Group"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[B.map(a=>(0,b.jsxs)(i.Card,{className:"bg-slate-900/50 border-slate-800 flex flex-col hover:border-slate-700 transition-colors group",children:[(0,b.jsxs)(i.CardHeader,{className:"pb-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center shadow-lg bg-slate-800 overflow-hidden relative",style:{borderColor:a.color,borderWidth:2},children:a.symbolUrl?(0,b.jsx)("img",{src:a.symbolUrl,alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)(o.Shield,{className:"w-6 h-6 text-white mix-blend-overlay",style:{color:a.color}})}),(0,b.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-slate-800",onClick:()=>{ak(a),aq([]),au(a.id)},title:"View Members",children:(0,b.jsx)(m.Users,{className:"w-4 h-4 text-emerald-400"})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-slate-800",onClick:()=>{S(a),W(a.name),Y(a.color),$(a.symbolUrl||""),aa(a.captainId||""),ac(a.viceCaptainId||""),a.incharges&&Array.isArray(a.incharges)?ae(a.incharges.map(a=>a.id)):a.inchargeId?ae([a.inchargeId]):ae([]),Q(!0)},title:"Edit Group",children:(0,b.jsx)(r.Pencil,{className:"w-4 h-4 text-blue-400"})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-slate-800",onClick:()=>ay(a.id),children:(0,b.jsx)(q.Trash2,{className:"w-4 h-4 text-red-400"})})]})]}),(0,b.jsx)(i.CardTitle,{className:"text-xl mt-4 text-white",children:a.name})]}),(0,b.jsx)(i.CardContent,{className:"space-y-4 flex-1",children:(0,b.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded bg-slate-800/50 border border-slate-800",children:[(0,b.jsx)(n,{className:"w-4 h-4 text-yellow-500 shrink-0"}),(0,b.jsxs)("div",{className:"overflow-hidden",children:[(0,b.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Captain"}),(0,b.jsx)("p",{className:"text-sm font-medium text-slate-200 truncate",children:a.captainName||"Not Assigned"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded bg-slate-800/50 border border-slate-800",children:[(0,b.jsx)(n,{className:"w-4 h-4 text-slate-400 shrink-0"}),(0,b.jsxs)("div",{className:"overflow-hidden",children:[(0,b.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Vice Captain"}),(0,b.jsx)("p",{className:"text-sm font-medium text-slate-200 truncate",children:a.viceCaptainName||"Not Assigned"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 p-2 rounded bg-slate-800/50 border border-slate-800",children:[(0,b.jsx)(o.Shield,{className:"w-4 h-4 text-emerald-500 shrink-0 mt-1"}),(0,b.jsxs)("div",{className:"overflow-hidden",children:[(0,b.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Teachers Incharge"}),a.incharges&&a.incharges.length>0?(0,b.jsx)("div",{className:"text-sm font-medium text-slate-200 flex flex-col",children:a.incharges.map(a=>(0,b.jsx)("span",{className:"truncate",children:a.name},a.id))}):(0,b.jsx)("p",{className:"text-sm font-medium text-slate-200 truncate",children:a.inchargeName||"Not Assigned"})]})]})]})})]},a.id)),0===B.length&&(0,b.jsx)("div",{className:"col-span-full py-20 text-center border border-dashed border-slate-800 rounded-lg text-slate-500",children:"No groups defined. Create grouped houses or teams to get started."})]}),(0,b.jsx)(j.Dialog,{open:!!aj,onOpenChange:a=>!a&&ak(null),children:(0,b.jsxs)(j.DialogContent,{className:"bg-slate-950 border-slate-800 text-white sm:max-w-2xl max-h-[80vh] flex flex-col",children:[(0,b.jsxs)(j.DialogHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsxs)(j.DialogTitle,{className:"flex items-center gap-2",children:[aj?.symbolUrl&&(0,b.jsx)("img",{src:aj.symbolUrl,className:"w-8 h-8 object-contain"}),(0,b.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:aj?.color}}),"Members: ",aj?.name]}),(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",className:"mr-8 gap-2 border-slate-700 bg-slate-900 text-slate-300 hover:bg-slate-800",onClick:()=>{let a=window.open("","_blank");if(!a||!aj)return;let b=ap.length>0?al.filter(a=>ap.includes(a.className)):al,c={},d=Array.from(new Set(b.map(a=>a.className))).sort();d.forEach(a=>{c[a]=b.filter(b=>b.className===a).sort((a,b)=>a.studentName.localeCompare(b.studentName))});let e=aj.incharges?aj.incharges.map(a=>a.name).join(", "):aj.inchargeName||"Not Assigned",f=`
            <html>
            <head>
                <title>${aj.name} - Student List</title>
                <style>
                    body { font-family: 'Segoe UI', sans-serif; padding: 20px; }
                    .header { text-align: center; border-bottom: 2px solid ${aj.color}; padding-bottom: 20px; margin-bottom: 20px; position: relative; }
                    .header-content { display: flex; align-items: center; justify-content: center; gap: 40px; }
                    .logo-container { display: flex; flex-direction: column; align-items: center; gap: 5px; }
                    .school-logo { height: 70px; width: auto; }
                    .house-logo { height: 70px; width: auto; object-fit: contain; }
                    h1 { color: #333; margin: 0; font-size: 28px; }
                    h2 { color: ${aj.color}; margin: 5px 0 0 0; font-size: 18px; text-transform: uppercase; letter-spacing: 2px; }
                    .meta { text-align: center; margin-bottom: 20px; color: #666; font-size: 14px; }
                    .leadership { display: flex; gap: 20px; justify-content: space-around; margin-bottom: 30px; padding: 15px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 4px; }
                    .role { text-align: center; }
                    .role strong { display: block; font-size: 11px; text-transform: uppercase; color: #666; margin-bottom: 4px; }
                    .role span { font-size: 14px; font-weight: 600; color: #333; }
                    
                    .class-section { margin-bottom: 40px; page-break-inside: avoid; }
                    .class-header { font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #444; border-left: 4px solid ${aj.color}; padding-left: 10px; }
                    
                    table { w-full; border-collapse: collapse; width: 100%; }
                    th, td { border: 1px solid #ddd; padding: 10px; text-align: left; font-size: 13px; }
                    th { background-color: #f8f9fa; font-weight: bold; text-transform: uppercase; font-size: 11px; color: #555; }
                    tr:nth-child(even) { background-color: #fcfcfc; }
                    
                    .total { margin-top: 20px; font-weight: bold; text-align: right; border-top: 1px solid #eee; padding-top: 10px; }
                    
                    @media print {
                        .class-section { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <div class="header-content">
                        <div class="logo-container">
                            ${A?.schoolLogo?`<img src="${A.schoolLogo}" class="school-logo" />`:""}
                        </div>
                        <div style="text-align: center;">
                            <h1 style="margin: 0;">${A?.schoolName}</h1>
                            <h2>${aj.name} House</h2>
                        </div>
                        <div class="logo-container">
                            ${aj.symbolUrl?`<img src="${aj.symbolUrl}" class="house-logo" />`:""}
                        </div>
                    </div>
                </div>
                <div class="meta">
                    Generated on ${new Date().toLocaleDateString()} &bull; ${ap.length>0?"Fitered List":"Full House List"}
                </div>
                
                <div class="leadership">
                    <div class="role">
                        <strong>Teachers Incharge</strong>
                        <span>${e}</span>
                    </div>
                    <div class="role">
                        <strong>Captain</strong>
                        <span>${aj.captainName||"Not Assigned"}</span>
                    </div>
                    <div class="role">
                        <strong>Vice Captain</strong>
                        <span>${aj.viceCaptainName||"Not Assigned"}</span>
                    </div>
                </div>

                ${d.map(a=>`
                    <div class="class-section">
                        <div class="class-header">${a}</div>
                        <table>
                            <thead>
                                <tr>
                                    <th style="width: 40px">No.</th>
                                    <th>Student Name</th>
                                    <th>Section</th>
                                    <th>School ID</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${c[a].map((a,b)=>`
                                    <tr>
                                        <td style="text-align: center">${b+1}</td>
                                        <td style="font-weight: bold">${a.studentName}</td>
                                        <td>${a.sectionName}</td>
                                        <td>${a.schoolId||"-"}</td>
                                    </tr>
                                `).join("")}
                            </tbody>
                        </table>
                    </div>
                `).join("")}

                <div class="total">Total Listed Students: ${b.length}</div>
                <script>
                    window.onload = () => { window.print(); window.close(); };
                </script>
            </body>
            </html>
        `;a.document.write(f),a.document.close()},children:[(0,b.jsx)(t.Printer,{className:"w-4 h-4"})," Print List"]})]}),(0,b.jsxs)("div",{className:"px-6 py-2 border-b border-slate-800",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[aA.map(a=>(0,b.jsx)(l.Badge,{variant:ap.includes(a)?"default":"outline",className:`cursor-pointer select-none ${ap.includes(a)?"bg-emerald-600 hover:bg-emerald-700":"text-slate-400 hover:text-white border-slate-700"}`,onClick:()=>{aq(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},children:a},a)),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"h-6 text-[10px] text-slate-500 hover:text-white px-2",onClick:()=>aq([]),children:"Clear Filter"})]}),(0,b.jsx)("div",{className:"text-[10px] text-slate-500",children:"Select specific classes to filter the print list. Leave empty to print all."})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto py-4 px-6",children:an?(0,b.jsx)("div",{className:"flex justify-center p-8",children:(0,b.jsx)(s.Loader2,{className:"animate-spin"})}):0===al.length?(0,b.jsx)("div",{className:"text-center p-8 text-slate-500 border border-dashed border-slate-800 rounded",children:"No students assigned to this group yet."}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:(ap.length>0?al.filter(a=>ap.includes(a.className)):al).map(a=>(0,b.jsx)("div",{className:"p-3 bg-slate-900/50 border border-slate-800 rounded flex justify-between items-center",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-sm text-slate-200",children:a.studentName}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:[a.className," - ",a.sectionName," (",a.rollNo,")"]})]})},a.id))})}),(0,b.jsxs)("div",{className:"p-4 border-t border-slate-800 text-xs text-slate-500 flex justify-between items-center",children:[(0,b.jsx)("div",{children:ap.length>0&&(0,b.jsxs)("span",{className:"text-emerald-500",children:["Filtered: ",ap.join(", ")]})}),(0,b.jsxs)("div",{children:["Total Members: ",al.length]})]})]})}),(0,b.jsx)(j.Dialog,{open:N,onOpenChange:O,children:(0,b.jsxs)(j.DialogContent,{className:"bg-slate-950 border-slate-800 text-white",children:[(0,b.jsx)(j.DialogHeader,{children:(0,b.jsx)(j.DialogTitle,{children:"Create New Group"})}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Group Name"}),(0,b.jsx)(h.Input,{placeholder:"e.g. Red Dragons",value:V,onChange:a=>W(a.target.value),className:"bg-slate-900 border-slate-800"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Theme Color"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[y.map(a=>(0,b.jsx)("button",{onClick:()=>Y(a.value),className:`w-8 h-8 rounded-full border-2 transition-all ${X===a.value?"border-white scale-110":"border-transparent opacity-70 hover:opacity-100"}`,style:{backgroundColor:a.value},title:a.name},a.value)),(0,b.jsx)("input",{type:"color",value:X,onChange:a=>Y(a.target.value),className:"w-8 h-8 rounded-full overflow-hidden border-0 p-0 cursor-pointer"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Group Symbol"}),(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded border border-slate-700 bg-slate-900 flex items-center justify-center overflow-hidden",children:Z?(0,b.jsx)("img",{src:Z,className:"w-full h-full object-cover"}):(0,b.jsx)(w.Image,{className:"w-6 h-6 text-slate-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(h.Input,{type:"file",accept:"image/*",onChange:ar,disabled:ah,className:"bg-slate-900 border-slate-800 text-xs"}),ah&&(0,b.jsx)("p",{className:"text-[10px] text-emerald-500 mt-1",children:"Uploading..."})]})]})]})]}),(0,b.jsxs)(j.DialogFooter,{children:[(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>O(!1),children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:aw,disabled:af||!V||!X||ah,className:"bg-emerald-600 hover:bg-emerald-700",children:af?(0,b.jsx)(s.Loader2,{className:"animate-spin"}):"Create Group"})]})]})}),T&&(0,b.jsx)(z,{open:!!T,onOpenChange:a=>!a&&U(null),title:"captain"===T?"Select Captain":"viceCaptain"===T?"Select Vice Captain":"Select Teacher Incharges",multiSelect:"incharge"===T,initialSelectedIds:"incharge"===T?ad:"captain"===T?_?[_]:[]:"viceCaptain"===T&&ab?[ab]:[],options:"incharge"===T?aC:aB,onSelect:a=>{"captain"===T&&aa(a),"viceCaptain"===T&&ac(a),"incharge"===T&&ae(a)}}),(0,b.jsx)(j.Dialog,{open:P,onOpenChange:Q,children:(0,b.jsxs)(j.DialogContent,{className:"bg-slate-950 border-slate-800 text-white sm:max-w-lg",children:[(0,b.jsx)(j.DialogHeader,{children:(0,b.jsxs)(j.DialogTitle,{children:["Management: ",R?.name]})}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Group Name"}),(0,b.jsx)(h.Input,{value:V,onChange:a=>W(a.target.value),className:"bg-slate-900 border-slate-800"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Theme Color"}),(0,b.jsxs)("div",{className:"flex gap-2 items-center h-10 px-2 rounded bg-slate-900 border border-slate-800",children:[(0,b.jsx)("div",{className:"w-6 h-6 rounded-full border border-white/20",style:{backgroundColor:X}}),(0,b.jsx)("input",{type:"color",value:X,onChange:a=>Y(a.target.value),className:"w-full bg-transparent border-0 opacity-0 absolute inset-0 cursor-pointer"}),(0,b.jsx)("span",{className:"text-xs font-mono text-slate-400 ml-auto",children:X})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Group Symbol"}),(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded border border-slate-700 bg-slate-900 flex items-center justify-center overflow-hidden",children:Z?(0,b.jsx)("img",{src:Z,className:"w-full h-full object-cover"}):(0,b.jsx)(w.Image,{className:"w-6 h-6 text-slate-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(h.Input,{type:"file",accept:"image/*",onChange:ar,disabled:ah,className:"bg-slate-900 border-slate-800 text-xs"}),ah&&(0,b.jsx)("p",{className:"text-[10px] text-emerald-500 mt-1",children:"Uploading..."})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t border-slate-800",children:[(0,b.jsx)("h4",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Leadership"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(k.Label,{className:"flex items-center gap-2",children:[(0,b.jsx)(n,{className:"w-3 h-3 text-yellow-500"})," Captain"]}),(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full justify-between bg-slate-900 border-slate-800 hover:bg-slate-800 hover:text-white",onClick:()=>U("captain"),children:[(0,b.jsx)("span",{className:_&&"none"!==_?"text-slate-200":"text-slate-400",children:_&&"none"!==_?F.find(a=>a.id===_)?.name||"Unknown Student":"Select Captain"}),(0,b.jsx)(u.Search,{className:"h-4 w-4 opacity-50"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(k.Label,{className:"flex items-center gap-2",children:[(0,b.jsx)(n,{className:"w-3 h-3 text-slate-400"})," Vice Captain"]}),(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full justify-between bg-slate-900 border-slate-800 hover:bg-slate-800 hover:text-white",onClick:()=>U("viceCaptain"),children:[(0,b.jsx)("span",{className:ab&&"none"!==ab?"text-slate-200":"text-slate-400",children:ab&&"none"!==ab?F.find(a=>a.id===ab)?.name||"Unknown Student":"Select Vice Captain"}),(0,b.jsx)(u.Search,{className:"h-4 w-4 opacity-50"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(k.Label,{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Shield,{className:"w-3 h-3 text-emerald-500"})," Teachers Incharge"]}),(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full justify-between bg-slate-900 border-slate-800 hover:bg-slate-800 hover:text-white min-h-[44px] h-auto py-2",onClick:()=>U("incharge"),children:[(0,b.jsx)("span",{className:`text-left ${ad&&ad.length>0?"text-slate-200":"text-slate-400"}`,children:ad&&ad.length>0?`${ad.length} Selected`:"Select Teachers Incharge"}),(0,b.jsx)(u.Search,{className:"h-4 w-4 opacity-50 ml-2"})]}),ad.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:ad.map(a=>{let c=J.find(b=>b.id===a);return c?(0,b.jsxs)(l.Badge,{variant:"outline",className:"text-xs border-slate-700 bg-slate-800/50",children:[c.name,(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),ae(b=>b.filter(b=>b!==a))},className:"ml-2 hover:text-red-400",children:(0,b.jsx)(v.X,{className:"w-3 h-3"})})]},a):null})})]})]})]}),(0,b.jsxs)(j.DialogFooter,{children:[(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>Q(!1),children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:ax,disabled:af,className:"bg-blue-600 hover:bg-blue-700",children:af?(0,b.jsx)(s.Loader2,{className:"animate-spin"}):"Save Changes"})]})]})})]})}function B(){return(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-display font-bold text-white",children:"Student Groups"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage houses, teams, and student leadership roles."})]}),(0,b.jsx)(A,{})]})}a.s(["default",()=>B],71637)}];

//# sourceMappingURL=src_app_admin_groups_page_tsx_83b0f299._.js.map