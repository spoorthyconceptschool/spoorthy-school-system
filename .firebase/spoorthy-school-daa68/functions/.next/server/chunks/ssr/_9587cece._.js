module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-white/60 font-medium",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},5784,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},6015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},89402,40737,a=>{"use strict";var b=a.i(87924),c=a.i(6015),d=a.i(68114),e=a.i(99570);let f=(0,a.i(70106).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.s(["MoreHorizontal",()=>f],40737);var g=a.i(35732);function h({data:a,columns:h,isLoading:i,onRowClick:j,actions:k}){return i?(0,b.jsx)("div",{className:"w-full h-48 flex items-center justify-center bg-white/5 rounded-xl animate-pulse",children:(0,b.jsx)("div",{className:"h-4 w-4 bg-accent/50 rounded-full animate-ping"})}):(0,b.jsxs)("div",{className:"w-full space-y-3",children:[(0,b.jsx)("div",{className:"overflow-x-auto rounded-xl md:rounded-2xl border border-white/10 bg-black/20 backdrop-blur-md custom-scrollbar",children:(0,b.jsxs)(c.Table,{className:"w-full",children:[(0,b.jsx)(c.TableHeader,{className:"bg-white/5",children:(0,b.jsxs)(c.TableRow,{className:"border-white/10 hover:bg-transparent",children:[h.map(a=>(0,b.jsx)(c.TableHead,{className:(0,d.cn)("text-muted-foreground font-black uppercase text-[7px] md:text-[10px] tracking-widest h-8 md:h-12 whitespace-nowrap px-2 md:px-6 italic",a.headerClassName),children:a.header},a.key)),k&&(0,b.jsx)(c.TableHead,{className:"w-[30px] md:w-[50px] whitespace-nowrap px-2 md:px-6"})]})}),(0,b.jsx)(c.TableBody,{children:0===a.length?(0,b.jsx)(c.TableRow,{children:(0,b.jsx)(c.TableCell,{colSpan:h.length+ +!!k,className:"h-24 md:h-32 text-center text-muted-foreground border-white/10 whitespace-nowrap text-[10px] md:text-sm italic",children:"No results found."})}):a.map((a,i)=>(0,b.jsxs)(c.TableRow,{className:(0,d.cn)("border-white/5 transition-all duration-300 hover:bg-[#64FFDA]/5 group cursor-default",j&&"cursor-pointer"),onClick:()=>j?.(a),children:[h.map(e=>(0,b.jsx)(c.TableCell,{className:(0,d.cn)("py-2 md:py-4 px-2 md:px-6 font-medium whitespace-nowrap text-[10px] md:text-sm",e.cellClassName),children:(0,b.jsx)("div",{className:"flex flex-col",children:e.render?e.render(a,i):(0,b.jsx)("span",{className:"text-white group-hover:text-accent transition-colors",children:a[e.key]})})},`${a.id}-${e.key}`)),k&&(0,b.jsx)(c.TableCell,{className:"px-2 md:px-6",children:(0,b.jsxs)(g.DropdownMenu,{children:[(0,b.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"ghost",className:"h-7 w-7 md:h-8 md:w-8 p-0 hover:bg-white/10 text-muted-foreground hover:text-white",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(f,{className:"h-3 w-3 md:h-4 md:w-4"})]})}),(0,b.jsxs)(g.DropdownMenuContent,{align:"end",className:"bg-[#0A192F] border-white/10 backdrop-blur-xl rounded-xl",children:[(0,b.jsx)(g.DropdownMenuLabel,{className:"text-[10px] uppercase font-black tracking-widest text-muted-foreground/60 p-3 italic",children:"Operations"}),(0,b.jsx)(g.DropdownMenuSeparator,{className:"bg-white/5"}),(0,b.jsx)("div",{className:"p-1",children:k(a)})]})]})})]},a.id||i))})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 md:py-4 px-3 md:px-6 bg-white/5 border border-white/10 rounded-xl md:rounded-2xl",children:[(0,b.jsxs)("div",{className:"text-[8px] md:text-xs font-black uppercase tracking-widest text-muted-foreground italic",children:["Scope: ",(0,b.jsxs)("span",{className:"text-white ml-1",children:[a.length," items"]})]}),(0,b.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Prev"}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Next"})]})]})]})}a.s(["DataTable",()=>h],89402)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},74862,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(99570),f=a.i(66718),g=a.i(29246),h=a.i(80701),i=a.i(91119),j=a.i(86304),k=a.i(96221),l=a.i(81560);a.i(69387);var m=a.i(60574),n=a.i(20237),o=a.i(88110),p=a.i(89402);function q(){let{user:a}=(0,d.useAuth)(),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)("REGULAR"),[E,F]=(0,c.useState)("ALL");(0,c.useEffect)(()=>{let a=!0,b=w?(0,m.query)((0,m.collection)(n.db,"notices")):(0,m.query)((0,m.collection)(n.db,"notices"),(0,m.orderBy)("createdAt","desc")),c=(0,m.onSnapshot)(b,b=>{if(!a)return;let c=b.docs.map(a=>({id:a.id,...a.data()}));w&&(c=[...c].sort((a,b)=>(b.createdAt?.seconds||0)-(a.createdAt?.seconds||0))),r(c),t(!1)},b=>{a&&(b.message.includes("index")&&!w?(console.warn("Notices index missing, using fallback."),x(!0)):b.message.includes("index")||(console.error("Notice stream error:",b),t(!1)))});return()=>{a=!1,c()}},[w]);let G=async b=>{b.preventDefault(),v(!0);try{let b=await a?.getIdToken(),c=await fetch("/api/admin/notices/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({title:y,content:A,type:C,target:E})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to publish notice");(0,o.toast)({title:"Notice Published",description:"Your notice is now live and audience notified.",type:"success"}),z(""),B(""),D("REGULAR"),F("ALL")}catch(a){(0,o.toast)({title:"Failed",description:a.message||"Could not publish notice.",type:"error"})}finally{v(!1)}},H=async a=>{if(confirm("Delete this notice?"))try{await (0,m.deleteDoc)((0,m.doc)(n.db,"notices",a)),(0,o.toast)({title:"Deleted",description:"Notice removed.",type:"success"})}catch(a){(0,o.toast)({title:"Error",description:"Failed to delete notice.",type:"error"})}};return(0,b.jsxs)("div",{className:"space-y-4 md:space-y-6 max-w-none p-0 animate-in fade-in",children:[(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsx)("h1",{className:"text-xl md:text-3xl font-display font-bold text-white",children:"Notice Board"})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[(0,b.jsxs)(i.Card,{className:"bg-black/20 border-white/10 h-fit lg:col-span-1 shadow-xl backdrop-blur-sm",children:[(0,b.jsxs)(i.CardHeader,{className:"py-3 px-4 md:py-6",children:[(0,b.jsx)(i.CardTitle,{className:"text-sm md:text-xl font-bold text-accent italic",children:"Create Notice"}),(0,b.jsx)(i.CardDescription,{className:"text-[10px] md:text-xs",children:"Publish updates to the school."})]}),(0,b.jsx)(i.CardContent,{className:"px-4 pb-4 md:px-6 md:pb-6",children:(0,b.jsxs)("form",{onSubmit:G,className:"space-y-3 md:space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-[10px] md:text-xs font-black uppercase tracking-tighter text-muted-foreground",children:"Notice Type"}),(0,b.jsxs)(h.Select,{onValueChange:D,value:C,children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white/5 border-white/10 h-8 md:h-10 text-xs md:text-sm",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{className:"bg-[#0A192F] border-white/10",children:[(0,b.jsx)(h.SelectItem,{value:"REGULAR",children:"Regular Notice"}),(0,b.jsx)(h.SelectItem,{value:"HOLIDAY",children:"Holiday Notice"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-[10px] md:text-xs font-black uppercase tracking-tighter text-muted-foreground",children:"Target Audience"}),(0,b.jsxs)(h.Select,{onValueChange:F,value:E,children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white/5 border-white/10 h-8 md:h-10 text-xs md:text-sm",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{className:"bg-[#0A192F] border-white/10",children:[(0,b.jsx)(h.SelectItem,{value:"ALL",children:"Everyone"}),(0,b.jsx)(h.SelectItem,{value:"TEACHERS",children:"Teachers Only"}),(0,b.jsx)(h.SelectItem,{value:"STUDENTS",children:"Students Only"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Input,{required:!0,placeholder:"Title",value:y,onChange:a=>z(a.target.value),className:"bg-white/5 border-white/10 h-8 md:h-10 text-xs md:text-sm font-bold"}),(0,b.jsx)(g.Textarea,{required:!0,placeholder:"Notice content...",value:A,onChange:a=>B(a.target.value),className:"bg-white/5 border-white/10 min-h-[80px] md:min-h-[120px] text-xs md:text-sm resize-none"})]}),(0,b.jsx)(e.Button,{type:"submit",disabled:u,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold h-8 md:h-10 text-[10px] md:text-sm shadow-lg shadow-emerald-900/20",children:u?(0,b.jsx)(k.Loader2,{className:"animate-spin w-4 h-4"}):"Publish Notice"})]})})]}),(0,b.jsxs)(i.Card,{className:"bg-black/20 border-white/10 lg:col-span-2 shadow-xl backdrop-blur-sm",children:[(0,b.jsx)(i.CardHeader,{className:"py-3 px-4 md:py-6",children:(0,b.jsx)(i.CardTitle,{className:"text-sm md:text-xl font-bold text-accent italic",children:"Notice History"})}),(0,b.jsx)(i.CardContent,{className:"px-3 md:px-6 pb-4 md:pb-6",children:(0,b.jsx)(p.DataTable,{data:q,isLoading:s,columns:[{key:"title",header:"Notice Details",render:a=>(0,b.jsxs)("div",{className:"flex flex-col gap-1 max-w-[300px]",children:[(0,b.jsx)("span",{className:"font-bold text-sm text-white group-hover:text-accent transition-colors leading-tight",children:a.title}),(0,b.jsx)("p",{className:"text-[10px] md:text-xs text-white/40 line-clamp-2 leading-relaxed",children:a.content})]})},{key:"type",header:"Type & Target",render:a=>(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:["HOLIDAY"===a.type&&(0,b.jsx)(j.Badge,{className:"text-[7px] md:text-[8px] bg-yellow-500/20 text-yellow-500 border-none px-1.5 py-0 h-4 uppercase font-black",children:"Holiday"}),(0,b.jsx)(j.Badge,{variant:"secondary",className:"text-[7px] md:text-[8px] px-1.5 py-0 h-4 border-none bg-white/10 text-white/60 uppercase font-black",children:a.target})]})},{key:"meta",header:"Published",cellClassName:"hidden md:table-cell",headerClassName:"hidden md:table-cell",render:a=>(0,b.jsxs)("div",{className:"flex flex-col items-end",children:[(0,b.jsx)("span",{className:"text-[9px] font-black text-muted-foreground uppercase tracking-widest leading-none",children:a.senderName}),(0,b.jsx)("span",{className:"text-[8px] text-muted-foreground/40 mt-1 uppercase font-mono",children:a.createdAt?new Date(a.createdAt?.seconds*1e3).toLocaleDateString():"Just now"})]})}],actions:a=>(0,b.jsxs)(e.Button,{variant:"ghost",className:"w-full justify-start gap-2 h-9 text-xs font-bold uppercase tracking-tighter text-red-400 hover:text-white hover:bg-red-500/20",onClick:()=>H(a.id),children:[(0,b.jsx)(l.Trash2,{size:14})," Delete Notice"]})})})]})]})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=_9587cece._.js.map