{"version":3,"sources":["../../../../src/components/admin/add-teacher-modal.tsx","../../../../src/components/admin/add-staff-modal.tsx","../../../../src/components/admin/teachers-directory.tsx","../../../../src/components/admin/leaves-manager.tsx","../../../../src/components/admin/coverage-manager.tsx","../../../../src/app/admin/faculty/page.tsx","../../../../node_modules/lucide-react/src/icons/calendar-days.ts","../../../../node_modules/lucide-react/src/icons/user-plus.ts","../../../../node_modules/lucide-react/src/icons/rotate-ccw.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogFooter\r\n} from \"@/components/ui/dialog\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Loader2, Check } from \"lucide-react\";\r\nimport { collection, getDocs, query, orderBy } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { useMasterData } from \"@/context/MasterDataContext\";\r\nimport { toast } from \"@/lib/toast-store\";\r\nimport { rtdb } from \"@/lib/firebase\";\r\nimport { ref, get } from \"firebase/database\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { onSnapshot, doc } from \"firebase/firestore\";\r\n\r\ninterface AddTeacherModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n}\r\n\r\nexport function AddTeacherModal({ isOpen, onClose, onSuccess }: AddTeacherModalProps) {\r\n    const { user } = useAuth();\r\n    const { subjects: masterSubjects } = useMasterData();\r\n    const [subjects, setSubjects] = useState<any[]>([]);\r\n    const [role, setRole] = useState<string>(\"\");\r\n\r\n    useEffect(() => {\r\n        if (!user) return;\r\n        const unsub = onSnapshot(doc(db, \"users\", user.uid), (d) => {\r\n            if (d.exists()) setRole(d.data().role);\r\n        });\r\n        return () => unsub();\r\n    }, [user]);\r\n\r\n    // Form\r\n    const [form, setForm] = useState({\r\n        name: \"\",\r\n        mobile: \"\",\r\n        age: \"\",\r\n        address: \"\",\r\n        salary: \"\",\r\n        qualifications: \"\",\r\n        primarySubject: \"\",\r\n        secondarySubject: \"\",\r\n        classTeacherClass: \"\",\r\n        classTeacherSection: \"\"\r\n    });\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [result, setResult] = useState<{ teacherId: string, password: string } | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setResult(null);\r\n            setForm({\r\n                name: \"\",\r\n                mobile: \"\",\r\n                age: \"\",\r\n                address: \"\",\r\n                salary: \"\",\r\n                qualifications: \"\",\r\n                primarySubject: \"\",\r\n                secondarySubject: \"\",\r\n                classTeacherClass: \"\",\r\n                classTeacherSection: \"\"\r\n            });\r\n\r\n            // Populate subjects from Master Data context\r\n            const activeSubjects = Object.values(masterSubjects || {})\r\n                .filter((s: any) => s.isActive !== false)\r\n                .sort((a: any, b: any) => a.name.localeCompare(b.name));\r\n            setSubjects(activeSubjects);\r\n        }\r\n    }, [isOpen, masterSubjects]);\r\n\r\n    const fetchSubjects = async () => {\r\n        // No longer needed, using masterSubjects context\r\n    };\r\n\r\n\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setSubmitting(true);\r\n\r\n        try {\r\n            const selectedSubjects = [];\r\n            if (form.primarySubject) selectedSubjects.push(form.primarySubject);\r\n            if (form.secondarySubject && form.secondarySubject !== form.primarySubject) selectedSubjects.push(form.secondarySubject);\r\n\r\n            const res = await fetch(\"/api/admin/teachers/create\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    ...form,\r\n                    age: Number(form.age),\r\n                    salary: role === \"MANAGER\" ? 0 : Number(form.salary),\r\n                    subjects: selectedSubjects,\r\n                    classTeacherOf: form.classTeacherClass ? {\r\n                        classId: form.classTeacherClass,\r\n                        sectionId: form.classTeacherSection || \"A\"\r\n                    } : null\r\n                })\r\n            });\r\n\r\n            const data = await res.json();\r\n            if (!res.ok) throw new Error(data.error);\r\n\r\n            toast({\r\n                title: \"Teacher Created\",\r\n                description: `Successfully created account for ${form.name}`,\r\n                type: \"success\"\r\n            });\r\n\r\n            setResult({ teacherId: data.teacherId, password: form.mobile });\r\n            onSuccess();\r\n        } catch (err: any) {\r\n            toast({\r\n                title: \"Creation Failed\",\r\n                description: err.message || \"Could not create teacher account.\",\r\n                type: \"error\"\r\n            });\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onClose}>\r\n            <DialogContent className=\"bg-black/95 border-white/10 text-white sm:max-w-[600px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Add New Teacher</DialogTitle>\r\n                </DialogHeader>\r\n\r\n                {result ? (\r\n                    <div className=\"py-6 text-center space-y-6\">\r\n                        <div className=\"mx-auto w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center text-blue-500\">\r\n                            <Check className=\"w-8 h-8\" />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <h3 className=\"text-2xl font-bold text-blue-400\">Teacher Account Created</h3>\r\n                            <p className=\"text-muted-foreground\">The teacher can now login using these credentials.</p>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white/5 p-6 rounded-xl border border-white/10 max-w-sm mx-auto space-y-4\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <span className=\"text-muted-foreground text-sm uppercase tracking-wider\">Teacher ID</span>\r\n                                <span className=\"font-mono font-bold text-xl\">{result.teacherId}</span>\r\n                            </div>\r\n                            <div className=\"h-px bg-white/10\" />\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <span className=\"text-muted-foreground text-sm uppercase tracking-wider\">Password</span>\r\n                                <span className=\"font-mono font-bold text-xl\">{result.password}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <Button onClick={onClose} className=\"w-full bg-blue-600 hover:bg-blue-700 text-white\">\r\n                            Done\r\n                        </Button>\r\n                    </div>\r\n                ) : (\r\n                    <form onSubmit={handleSubmit} className=\"grid grid-cols-2 gap-4 py-2\">\r\n                        {/* Left Col */}\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Full Name</Label>\r\n                                <Input required value={form.name} onChange={e => setForm({ ...form, name: e.target.value })} className=\"bg-white/5 border-white/10\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Mobile (Login Password)</Label>\r\n                                <Input required type=\"tel\" maxLength={10} value={form.mobile} onChange={e => setForm({ ...form, mobile: e.target.value })} className=\"bg-white/5 border-white/10 font-mono\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Age</Label>\r\n                                <Input required type=\"number\" min=\"18\" value={form.age} onChange={e => setForm({ ...form, age: e.target.value })} className=\"bg-white/5 border-white/10\" />\r\n                            </div>\r\n                            {role !== \"MANAGER\" && (\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Monthly Salary (₹)</Label>\r\n                                    <Input required type=\"number\" value={form.salary} onChange={e => setForm({ ...form, salary: e.target.value })} className=\"bg-white/5 border-white/10\" />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Right Col */}\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Primary Subject</Label>\r\n                                <Select value={form.primarySubject} onValueChange={v => setForm({ ...form, primarySubject: v })}>\r\n                                    <SelectTrigger className=\"bg-white/5 border-white/10\"><SelectValue placeholder=\"Select\" /></SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {subjects.map(s => <SelectItem key={s.id} value={s.name || \"Unknown\"}>{s.name || \"Unknown\"} ({s.code || \"?\"})</SelectItem>)}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Secondary Subject (Optional)</Label>\r\n                                <Select value={form.secondarySubject} onValueChange={v => setForm({ ...form, secondarySubject: v })}>\r\n                                    <SelectTrigger className=\"bg-white/5 border-white/10\"><SelectValue placeholder=\"None\" /></SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value=\"NONE\">None</SelectItem>\r\n                                        {subjects.filter(s => s.name !== form.primarySubject).map(s => <SelectItem key={s.id} value={s.name || \"Unknown\"}>{s.name || \"Unknown\"} ({s.code || \"?\"})</SelectItem>)}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Address</Label>\r\n                                <Input required value={form.address} onChange={e => setForm({ ...form, address: e.target.value })} className=\"bg-white/5 border-white/10\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Qualifications</Label>\r\n                                <Input required value={form.qualifications} onChange={e => setForm({ ...form, qualifications: e.target.value })} className=\"bg-white/5 border-white/10\" placeholder=\"e.g. B.Ed, M.Sc\" />\r\n                            </div>\r\n\r\n                            <div className=\"pt-4 border-t border-white/10\">\r\n                                <Label className=\"text-xs text-muted-foreground uppercase mb-2 block\">Class Teacher Assignment</Label>\r\n                                <div className=\"grid grid-cols-2 gap-2\">\r\n                                    <Select value={form.classTeacherClass} onValueChange={v => setForm({ ...form, classTeacherClass: v })}>\r\n                                        <SelectTrigger className=\"bg-white/5 border-white/10 text-xs\"><SelectValue placeholder=\"Class\" /></SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"NONE\">None</SelectItem>\r\n                                            {Object.values(useMasterData().classes).sort((a: any, b: any) => a.order - b.order).map((c: any) => (\r\n                                                <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <Select value={form.classTeacherSection} onValueChange={v => setForm({ ...form, classTeacherSection: v })}>\r\n                                        <SelectTrigger className=\"bg-white/5 border-white/10 text-xs\"><SelectValue placeholder=\"Section\" /></SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {Object.values(useMasterData().sections).map((s: any) => (\r\n                                                <SelectItem key={s.id} value={s.id}>{s.name}</SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <DialogFooter className=\"col-span-2 mt-4\">\r\n                            <Button type=\"submit\" disabled={submitting} className=\"w-full bg-white text-black hover:bg-zinc-200\">\r\n                                {submitting ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : \"Create Teacher Account\"}\r\n                            </Button>\r\n                        </DialogFooter>\r\n                    </form>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogFooter\r\n} from \"@/components/ui/dialog\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Loader2, UserPlus } from \"lucide-react\";\r\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { toast } from \"@/lib/toast-store\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { onSnapshot, doc } from \"firebase/firestore\";\r\n\r\ninterface AddStaffModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n}\r\n\r\nexport function AddStaffModal({ isOpen, onClose, onSuccess }: AddStaffModalProps) {\r\n    const { user } = useAuth();\r\n    const [roles, setRoles] = useState<any[]>([]);\r\n    const [loadingRoles, setLoadingRoles] = useState(false);\r\n    const [role, setRole] = useState<string>(\"\");\r\n\r\n    useEffect(() => {\r\n        if (!user) return;\r\n        const unsub = onSnapshot(doc(db, \"users\", user.uid), (d) => {\r\n            if (d.exists()) setRole(d.data().role);\r\n        });\r\n        return () => unsub();\r\n    }, [user]);\r\n\r\n    // Form State\r\n    const [form, setForm] = useState({\r\n        roleId: \"\",\r\n        name: \"\",\r\n        mobile: \"\",\r\n        address: \"\"\r\n    });\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [createdId, setCreatedId] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setCreatedId(\"\");\r\n            setForm({ roleId: \"\", name: \"\", mobile: \"\", address: \"\" });\r\n            fetchRoles();\r\n        }\r\n    }, [isOpen]);\r\n\r\n\r\n\r\n    const fetchRoles = async () => {\r\n        setLoadingRoles(true);\r\n        try {\r\n            // Only non-login roles\r\n            const q = query(collection(db, \"master_staff_roles\"), where(\"hasLogin\", \"==\", false));\r\n            const snap = await getDocs(q);\r\n            setRoles(snap.docs.map(d => ({ id: d.id, ...d.data() })));\r\n        } catch (e) {\r\n            console.error(e);\r\n            toast({ title: \"Error\", description: \"Could not fetch roles.\", type: \"error\" });\r\n        } finally {\r\n            setLoadingRoles(false);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setSubmitting(true);\r\n\r\n        try {\r\n            const selectedRole = roles.find(r => r.id === form.roleId);\r\n            if (!selectedRole) throw new Error(\"Invalid Role\");\r\n\r\n            const res = await fetch(\"/api/admin/staff/create\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    roleId: form.roleId,\r\n                    roleName: selectedRole.name,\r\n                    roleCode: selectedRole.code,\r\n                    baseSalary: selectedRole.basicSalary,\r\n                    name: form.name,\r\n                    mobile: form.mobile,\r\n                    address: form.address\r\n                })\r\n            });\r\n\r\n            const data = await res.json();\r\n            if (!res.ok) throw new Error(data.error);\r\n\r\n            toast({\r\n                title: \"Staff Created\",\r\n                description: `Created staff record for ${form.name}`,\r\n                type: \"success\"\r\n            });\r\n\r\n            setCreatedId(data.staffId);\r\n            onSuccess();\r\n        } catch (err: any) {\r\n            toast({\r\n                title: \"Creation Failed\",\r\n                description: err.message || \"Something went wrong.\",\r\n                type: \"error\"\r\n            });\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const selectedRoleData = roles.find(r => r.id === form.roleId);\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onClose}>\r\n            <DialogContent className=\"bg-black/95 border-white/10 text-white sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Add Non-Teaching Staff</DialogTitle>\r\n                </DialogHeader>\r\n\r\n                {createdId ? (\r\n                    <div className=\"py-6 text-center space-y-4\">\r\n                        <div className=\"mx-auto w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center text-green-500\">\r\n                            <UserPlus className=\"w-6 h-6\" />\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-xl font-bold text-green-400\">Staff Created!</h3>\r\n                            <p className=\"text-muted-foreground mt-2\">Staff ID Generated:</p>\r\n                            <p className=\"text-2xl font-mono font-bold tracking-wider mt-1\">{createdId}</p>\r\n                        </div>\r\n                        <Button onClick={onClose} className=\"w-full bg-white text-black hover:bg-zinc-200\">\r\n                            Done\r\n                        </Button>\r\n                    </div>\r\n                ) : (\r\n                    <form onSubmit={handleSubmit} className=\"space-y-4 py-2\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Job Role</Label>\r\n                            <Select\r\n                                value={form.roleId}\r\n                                onValueChange={v => setForm({ ...form, roleId: v })}\r\n                                disabled={loadingRoles}\r\n                            >\r\n                                <SelectTrigger className=\"bg-white/5 border-white/10\">\r\n                                    <SelectValue placeholder={loadingRoles ? \"Loading roles...\" : \"Select Role\"} />\r\n                                </SelectTrigger>\r\n                                <SelectContent className=\"bg-black border-white/10 text-white\">\r\n                                    {roles.map(role => (\r\n                                        <SelectItem key={role.id} value={role.id}>\r\n                                            {role.name} ({role.code})\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Full Name</Label>\r\n                            <Input\r\n                                required\r\n                                value={form.name}\r\n                                onChange={e => setForm({ ...form, name: e.target.value })}\r\n                                className=\"bg-white/5 border-white/10\"\r\n                                placeholder=\"e.g. Ramesh Kumar\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Mobile Number</Label>\r\n                            <Input\r\n                                required\r\n                                type=\"tel\"\r\n                                pattern=\"[0-9]{10}\"\r\n                                value={form.mobile}\r\n                                onChange={e => setForm({ ...form, mobile: e.target.value })}\r\n                                className=\"bg-white/5 border-white/10 font-mono\"\r\n                                placeholder=\"e.g. 9876543210\"\r\n                                maxLength={10}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Address</Label>\r\n                            <Input\r\n                                required\r\n                                value={form.address}\r\n                                onChange={e => setForm({ ...form, address: e.target.value })}\r\n                                className=\"bg-white/5 border-white/10\"\r\n                                placeholder=\"Residential Address\"\r\n                            />\r\n                        </div>\r\n\r\n                        {selectedRoleData && role !== \"MANAGER\" && (\r\n                            <div className=\"p-3 rounded bg-white/5 border border-white/10 text-sm flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Standard Basic Salary:</span>\r\n                                <span className=\"font-mono font-bold\">₹{selectedRoleData.basicSalary?.toLocaleString()}</span>\r\n                            </div>\r\n                        )}\r\n\r\n                        <DialogFooter className=\"mt-4\">\r\n                            <Button type=\"submit\" disabled={submitting || !form.roleId} className=\"w-full bg-white text-black hover:bg-zinc-200\">\r\n                                {submitting ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : \"Create Staff Record\"}\r\n                            </Button>\r\n                        </DialogFooter>\r\n                    </form>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Plus, User, Briefcase, Search, MoreHorizontal, Key, Trash2, DollarSign, MapPin, Phone, ArrowRight } from \"lucide-react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { collection, query, orderBy, getDocs, where, doc, updateDoc, onSnapshot } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { AddTeacherModal } from \"@/components/admin/add-teacher-modal\";\r\nimport { AddStaffModal } from \"@/components/admin/add-staff-modal\";\r\nimport { AdminChangePasswordModal } from \"@/components/admin/admin-change-password-modal\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\r\nimport { DeleteUserModal } from \"@/components/admin/delete-user-modal\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { AdjustSalaryModal } from \"@/components/admin/adjust-salary-modal\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { DataTable } from \"@/components/ui/data-table\";\r\n\r\ninterface TeachersDirectoryProps {\r\n    hideHeader?: boolean;\r\n    onTabChange?: (tab: string) => void;\r\n}\r\n\r\nexport function TeachersDirectory({ hideHeader = false, onTabChange }: TeachersDirectoryProps) {\r\n    const router = useRouter();\r\n    const { user } = useAuth();\r\n    const [role, setRole] = useState<string>(\"\");\r\n\r\n    useEffect(() => {\r\n        if (!user) return;\r\n        const unsub = onSnapshot(doc(db, \"users\", user.uid), (d) => {\r\n            if (d.exists()) setRole(d.data().role);\r\n        });\r\n        return () => unsub();\r\n    }, [user]);\r\n\r\n    const [activeTab, setActiveTab] = useState(\"teachers\");\r\n\r\n    useEffect(() => {\r\n        onTabChange?.(activeTab);\r\n    }, [activeTab, onTabChange]);\r\n\r\n    // Data State\r\n    const [teachers, setTeachers] = useState<any[]>([]);\r\n    const [staff, setStaff] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Filter State\r\n    const [search, setSearch] = useState(\"\");\r\n    const [roleFilter, setRoleFilter] = useState(\"ALL\");\r\n\r\n    // Master Data for filters\r\n    const [roles, setRoles] = useState<any[]>([]);\r\n\r\n    // Modals\r\n    const [showTeacherModal, setShowTeacherModal] = useState(false);\r\n    const [showStaffModal, setShowStaffModal] = useState(false);\r\n    const [resetUser, setResetUser] = useState<{ uid: string, schoolId: string, name: string, role: string } | null>(null);\r\n    const [isResetModalOpen, setIsResetModalOpen] = useState(false);\r\n\r\n    // Delete Modal State\r\n    const [deleteUser, setDeleteUser] = useState<{ id: string, schoolId: string, name: string, role: \"teacher\" | \"admin\" | \"student\", uid?: string, collectionName: string } | null>(null);\r\n    const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n\r\n    // Salary Modal State\r\n    const [salaryUser, setSalaryUser] = useState<{ id: string, name: string, schoolId: string, role: \"TEACHER\" | \"STAFF\", currentSalary: number, roleCode?: string } | null>(null);\r\n    const [isSalaryModalOpen, setIsSalaryModalOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Real-time Teachers\r\n        const qT = query(collection(db, \"teachers\"), orderBy(\"schoolId\"));\r\n        const unsubscribeTeachers = onSnapshot(qT, (snap) => {\r\n            setTeachers(snap.docs.map(doc => ({ id: doc.id, ...doc.data() })));\r\n            setLoading(false);\r\n        });\r\n\r\n        // Real-time Staff\r\n        const qS = query(collection(db, \"staff\"), orderBy(\"schoolId\"));\r\n        const unsubscribeStaff = onSnapshot(qS, (snap) => {\r\n            setStaff(snap.docs.map(doc => ({ id: doc.id, ...doc.data() })));\r\n            setLoading(false);\r\n        });\r\n\r\n        // Real-time Roles\r\n        const qR = query(collection(db, \"master_staff_roles\"), orderBy(\"name\"));\r\n        const unsubscribeRoles = onSnapshot(qR, (snap) => {\r\n            const loadedRoles = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n            const uniqueRoles = Array.from(new Map(loadedRoles.map((item: any) => [item['code'], item])).values());\r\n            setRoles(uniqueRoles);\r\n        });\r\n\r\n        return () => {\r\n            unsubscribeTeachers();\r\n            unsubscribeStaff();\r\n            unsubscribeRoles();\r\n        };\r\n    }, []);\r\n\r\n    // Filter Logic\r\n    const filteredTeachers = teachers.filter(t =>\r\n        t.name?.toLowerCase().includes(search.toLowerCase()) ||\r\n        t.schoolId?.toLowerCase().includes(search.toLowerCase()) ||\r\n        t.mobile?.includes(search)\r\n    );\r\n\r\n    const filteredStaff = staff.filter(s => {\r\n        const matchesSearch = s.name?.toLowerCase().includes(search.toLowerCase()) ||\r\n            s.schoolId?.toLowerCase().includes(search.toLowerCase()) ||\r\n            s.mobile?.includes(search);\r\n        const matchesRole = roleFilter === \"ALL\" || s.roleCode === roleFilter;\r\n        return matchesSearch && matchesRole;\r\n    });\r\n\r\n    return (\r\n        <div className={cn(\"space-y-6 animate-in fade-in duration-500 max-w-7xl mx-auto pb-20\", !hideHeader ? \"p-4 md:p-0\" : \"p-0\")}>\r\n            {/* Header */}\r\n            {!hideHeader && (\r\n                <div className=\"flex flex-col md:flex-row md:items-center md:justify-between pt-2 md:pt-4 gap-4 md:gap-6 px-2 md:px-0\">\r\n                    <div className=\"space-y-0.5 md:space-y-1\">\r\n                        <h1 className=\"text-2xl md:text-5xl font-display font-bold bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent italic leading-tight\">\r\n                            Faculty Registry\r\n                        </h1>\r\n                        <p className=\"text-muted-foreground text-[10px] md:text-lg tracking-tight uppercase font-black opacity-50\">Managing <span className=\"text-white\">{teachers.length + staff.length} professional staff</span> members</p>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Button\r\n                            onClick={() => activeTab === 'teachers' ? setShowTeacherModal(true) : setShowStaffModal(true)}\r\n                            className=\"h-10 md:h-12 flex-1 md:flex-initial bg-white text-black hover:bg-zinc-200 rounded-xl font-black uppercase tracking-tighter px-4 md:px-6 shadow-lg shadow-white/10 text-xs md:text-sm\"\r\n                        >\r\n                            <Plus className=\"w-3.5 h-3.5 md:w-4 md:h-4 mr-2 stroke-[3]\" /> Add {activeTab === 'teachers' ? 'Teacher' : 'Staff'}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-4 md:space-y-6\">\r\n                <div className=\"px-2 md:px-0 space-y-3 md:space-y-4\">\r\n                    <TabsList className=\"bg-black/40 border border-white/10 p-1 h-auto rounded-xl md:rounded-2xl backdrop-blur-md w-full sm:w-fit grid grid-cols-2\">\r\n                        <TabsTrigger value=\"teachers\" className=\"data-[state=active]:bg-white data-[state=active]:text-black rounded-lg md:rounded-xl py-1.5 md:py-2.5 font-bold transition-all text-xs md:text-sm\">\r\n                            Teachers\r\n                        </TabsTrigger>\r\n                        <TabsTrigger value=\"staff\" className=\"data-[state=active]:bg-white data-[state=active]:text-black rounded-lg md:rounded-xl py-1.5 md:py-2.5 font-bold transition-all text-xs md:text-sm\">\r\n                            Staff\r\n                        </TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    {/* Filters */}\r\n                    <div className=\"bg-black/20 p-3 md:p-5 rounded-xl md:rounded-2xl border border-white/10 backdrop-blur-md space-y-3 md:space-y-4 shadow-2xl\">\r\n                        <div className=\"flex flex-col md:flex-row gap-2 md:gap-4\">\r\n                            <div className=\"relative flex-1\">\r\n                                <Search className=\"absolute left-3 md:left-4 top-1/2 -translate-y-1/2 w-3.5 h-3.5 md:w-4 md:h-4 text-muted-foreground\" />\r\n                                <Input\r\n                                    placeholder=\"Search name, ID, or mobile...\"\r\n                                    value={search}\r\n                                    onChange={(e) => setSearch(e.target.value)}\r\n                                    className=\"pl-9 md:pl-11 h-10 md:h-12 bg-white/5 border-white/10 rounded-lg md:rounded-xl focus:ring-accent/30 text-xs md:text-sm\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-2\">\r\n                                {activeTab === \"staff\" && (\r\n                                    <Select value={roleFilter} onValueChange={setRoleFilter}>\r\n                                        <SelectTrigger className=\"flex-1 md:w-[180px] h-10 md:h-12 bg-white/5 border-white/10 rounded-lg md:rounded-xl text-xs md:text-sm\">\r\n                                            <SelectValue placeholder=\"All Roles\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent className=\"bg-zinc-900 border-white/10 text-white\">\r\n                                            <SelectItem value=\"ALL\">All Roles</SelectItem>\r\n                                            {roles.filter(r => !r.hasLogin).map(r => (\r\n                                                <SelectItem key={r.code} value={r.code}>{r.name}</SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n\r\n                                {(search || roleFilter !== \"ALL\") && (\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        onClick={() => {\r\n                                            setSearch(\"\");\r\n                                            setRoleFilter(\"ALL\");\r\n                                        }}\r\n                                        className=\"h-10 md:h-12 px-3 md:px-6 text-[8px] md:text-[10px] font-black uppercase tracking-widest text-muted-foreground hover:text-white rounded-lg md:rounded-xl border border-dashed border-white/10 transition-all shrink-0\"\r\n                                    >\r\n                                        Clear\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <TabsContent value=\"teachers\" className=\"space-y-4 outline-none\">\r\n                    <DataTable\r\n                        data={filteredTeachers}\r\n                        isLoading={loading}\r\n                        onRowClick={(t) => router.push(`/admin/teachers/${t.id}`)}\r\n                        columns={[\r\n                            {\r\n                                key: \"name\",\r\n                                header: \"Faculty Info\",\r\n                                render: (t: any) => (\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center border border-white/5 group-hover:border-accent/30 transition-colors\">\r\n                                            <User size={16} className=\"text-white/40 group-hover:text-accent transition-colors\" />\r\n                                        </div>\r\n                                        <div className=\"flex flex-col\">\r\n                                            <span className=\"font-bold text-sm text-white group-hover:text-accent transition-colors leading-tight\">{t.name}</span>\r\n                                            <span className=\"text-[10px] font-mono text-white/40 tracking-tighter uppercase\">{t.schoolId}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            },\r\n                            {\r\n                                key: \"mobile\",\r\n                                header: \"Contact\",\r\n                                render: (t: any) => (\r\n                                    <div className=\"flex items-center gap-1.5 text-xs text-white/60\">\r\n                                        <Phone size={12} className=\"text-white/20\" />\r\n                                        <span className=\"font-mono\">{t.mobile}</span>\r\n                                    </div>\r\n                                )\r\n                            },\r\n                            {\r\n                                key: \"password\",\r\n                                header: \"Secret Key\",\r\n                                render: (t: any) => (\r\n                                    <div className=\"flex items-center gap-1.5 text-[10px] text-amber-500/80 bg-amber-500/5 px-2 py-1 rounded border border-amber-500/10 w-fit\">\r\n                                        <Key size={10} className=\"text-amber-500\" />\r\n                                        <span className=\"font-mono tracking-wider font-bold\">{t.recoveryPassword || t.mobile}</span>\r\n                                    </div>\r\n                                )\r\n                            },\r\n                            {\r\n                                key: \"salary\",\r\n                                header: \"Base Salary\",\r\n                                headerClassName: \"text-right\",\r\n                                cellClassName: \"text-right\",\r\n                                render: (t: any) => role === \"MANAGER\" ? <span className=\"text-white/20\">••••••</span> : <span className=\"font-mono font-black text-sm text-emerald-400\">₹{t.salary?.toLocaleString() || '0'}</span>\r\n                            },\r\n                            {\r\n                                key: \"status\",\r\n                                header: \"Status\",\r\n                                headerClassName: \"text-center\",\r\n                                cellClassName: \"text-center\",\r\n                                render: (t: any) => (\r\n                                    <Badge className={cn(\r\n                                        \"text-[9px] font-black uppercase tracking-tighter py-0 h-5 border-none transition-all\",\r\n                                        t.status === 'ACTIVE' ? \"bg-emerald-500/10 text-emerald-400\" : \"bg-red-500/10 text-red-400\"\r\n                                    )}>\r\n                                        {t.status}\r\n                                    </Badge>\r\n                                )\r\n                            }\r\n                        ]}\r\n                        actions={(t) => (\r\n                            <div className=\"flex flex-col gap-1\">\r\n                                <DropdownMenuItem onClick={() => {\r\n                                    if (!t.uid) { alert(\"UID Missing\"); return; }\r\n                                    setResetUser({ uid: t.uid, schoolId: t.schoolId, name: t.name, role: \"TEACHER\" });\r\n                                    setIsResetModalOpen(true);\r\n                                }} className=\"rounded-lg gap-2 text-xs font-bold text-amber-500 hover:text-amber-400 transition-colors\">\r\n                                    <Key size={14} /> Reset Password\r\n                                </DropdownMenuItem>\r\n                                {role !== \"MANAGER\" && (\r\n                                    <>\r\n                                        <DropdownMenuItem onClick={() => {\r\n                                            setSalaryUser({\r\n                                                id: t.id,\r\n                                                name: t.name,\r\n                                                schoolId: t.schoolId,\r\n                                                role: \"TEACHER\",\r\n                                                currentSalary: t.salary || 0\r\n                                            });\r\n                                            setIsSalaryModalOpen(true);\r\n                                        }} className=\"rounded-lg gap-2 text-xs font-bold text-emerald-500 hover:text-emerald-400 transition-colors\">\r\n                                            <DollarSign size={14} /> Adjust Salary\r\n                                        </DropdownMenuItem>\r\n                                        <DropdownMenuItem onClick={() => {\r\n                                            setDeleteUser({ id: t.id, schoolId: t.schoolId, name: t.name, role: \"teacher\", uid: t.uid, collectionName: \"teachers\" });\r\n                                            setIsDeleteModalOpen(true);\r\n                                        }} className=\"rounded-lg gap-2 text-xs font-bold text-red-500 hover:text-red-400 transition-colors\">\r\n                                            <Trash2 size={14} /> Remove Faculty\r\n                                        </DropdownMenuItem>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    />\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"staff\" className=\"space-y-4 outline-none\">\r\n                    <DataTable\r\n                        data={filteredStaff}\r\n                        isLoading={loading}\r\n                        onRowClick={(s) => router.push(`/admin/staff/${s.id}`)}\r\n                        columns={[\r\n                            {\r\n                                key: \"name\",\r\n                                header: \"Staff Info\",\r\n                                render: (s: any) => (\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center border border-white/5 group-hover:border-blue-400/30 transition-colors\">\r\n                                            <Briefcase size={16} className=\"text-white/40 group-hover:text-blue-400 transition-colors\" />\r\n                                        </div>\r\n                                        <div className=\"flex flex-col\">\r\n                                            <span className=\"font-bold text-sm text-white group-hover:text-blue-400 transition-colors leading-tight\">{s.name}</span>\r\n                                            <span className=\"text-[10px] font-mono text-white/40 tracking-tighter uppercase\">{s.schoolId}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            },\r\n                            {\r\n                                key: \"role\",\r\n                                header: \"Role & Placement\",\r\n                                render: (s: any) => {\r\n                                    const role = roles.find(r => r.code === s.roleCode);\r\n                                    return (\r\n                                        <div className=\"flex flex-col gap-1\">\r\n                                            <span className=\"text-[10px] uppercase font-black text-muted-foreground tracking-tighter bg-white/5 px-2 py-0.5 rounded border border-white/5 w-fit lowercase\">{role?.name || s.roleCode || \"Staff\"}</span>\r\n                                            <div className=\"flex items-center gap-1.5 text-[10px] text-white/30\">\r\n                                                <Phone size={10} className=\"opacity-40\" />\r\n                                                <span className=\"font-mono\">{s.mobile}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                }\r\n                            },\r\n                            {\r\n                                key: \"baseSalary\",\r\n                                header: \"Base Salary\",\r\n                                headerClassName: \"text-right\",\r\n                                cellClassName: \"text-right\",\r\n                                render: (s: any) => role === \"MANAGER\" ? <span className=\"text-white/20\">••••••</span> : <span className=\"font-mono font-black text-sm text-emerald-400\">₹{s.baseSalary?.toLocaleString() || \"0\"}</span>\r\n                            },\r\n                            {\r\n                                key: \"status\",\r\n                                header: \"Status\",\r\n                                headerClassName: \"text-center\",\r\n                                cellClassName: \"text-center\",\r\n                                render: (s: any) => (\r\n                                    <Badge className={cn(\r\n                                        \"text-[9px] font-black uppercase tracking-tighter py-0 h-5 border-none transition-all\",\r\n                                        s.status === 'ACTIVE' ? \"bg-emerald-500/10 text-emerald-400\" : \"bg-red-500/10 text-red-400\"\r\n                                    )}>\r\n                                        {s.status}\r\n                                    </Badge>\r\n                                )\r\n                            }\r\n                        ]}\r\n                        actions={(s) => (\r\n                            <div className=\"flex flex-col gap-1\">\r\n                                <DropdownMenuItem onClick={() => {\r\n                                    if (!s.uid) { alert(\"UID Missing\"); return; }\r\n                                    setResetUser({ uid: s.uid, schoolId: s.schoolId, name: s.name, role: \"STAFF\" });\r\n                                    setIsResetModalOpen(true);\r\n                                }} className=\"rounded-lg gap-2 text-xs font-bold text-amber-500 hover:text-amber-400 transition-colors\">\r\n                                    <Key size={14} /> Reset Password\r\n                                </DropdownMenuItem>\r\n                                {role !== \"MANAGER\" && (\r\n                                    <>\r\n                                        <DropdownMenuItem onClick={() => {\r\n                                            setSalaryUser({\r\n                                                id: s.id,\r\n                                                name: s.name,\r\n                                                schoolId: s.schoolId,\r\n                                                role: \"STAFF\",\r\n                                                currentSalary: s.baseSalary || 0,\r\n                                                roleCode: s.roleCode\r\n                                            });\r\n                                            setIsSalaryModalOpen(true);\r\n                                        }} className=\"rounded-lg gap-2 text-xs font-bold text-emerald-500 hover:text-emerald-400 transition-colors\">\r\n                                            <DollarSign size={14} /> Adjust Salary\r\n                                        </DropdownMenuItem>\r\n                                        <DropdownMenuItem onClick={() => {\r\n                                            setDeleteUser({ id: s.id, schoolId: s.schoolId, name: s.name, role: \"admin\", uid: s.uid, collectionName: \"staff\" });\r\n                                            setIsDeleteModalOpen(true);\r\n                                        }} className=\"rounded-lg gap-2 text-xs font-bold text-red-500 hover:text-red-400 transition-colors\">\r\n                                            <Trash2 size={14} /> Remove Staff\r\n                                        </DropdownMenuItem>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    />\r\n                </TabsContent>\r\n            </Tabs>\r\n\r\n            <AddTeacherModal isOpen={showTeacherModal} onClose={() => setShowTeacherModal(false)} onSuccess={() => { /* Real-time update */ }} />\r\n            <AddStaffModal isOpen={showStaffModal} onClose={() => setShowStaffModal(false)} onSuccess={() => { /* Real-time update */ }} />\r\n\r\n            <AdminChangePasswordModal\r\n                isOpen={isResetModalOpen}\r\n                onClose={() => setIsResetModalOpen(false)}\r\n                user={resetUser}\r\n                onSuccess={() => { /* Real-time update */ }}\r\n            />\r\n\r\n            <AdjustSalaryModal\r\n                isOpen={isSalaryModalOpen}\r\n                onClose={() => setIsSalaryModalOpen(false)}\r\n                person={salaryUser}\r\n                onSuccess={() => { /* Real-time update */ }}\r\n            />\r\n\r\n            {deleteUser && (\r\n                <DeleteUserModal\r\n                    isOpen={isDeleteModalOpen}\r\n                    onClose={() => { setIsDeleteModalOpen(false); setDeleteUser(null); }}\r\n                    user={deleteUser}\r\n                    checkEligibility={async () => ({ canDelete: true })}\r\n                    onDeactivate={async (reason) => {\r\n                        try {\r\n                            await updateDoc(doc(db, deleteUser.collectionName, deleteUser.id), {\r\n                                status: \"INACTIVE\",\r\n                                deactivationReason: reason,\r\n                                updatedAt: new Date().toISOString()\r\n                            });\r\n                        } catch (e: any) {\r\n                            console.error(e);\r\n                            throw e;\r\n                        }\r\n                    }}\r\n                    onDelete={async (reason) => {\r\n                        if (!user) { alert(\"Not authenticated\"); return; }\r\n                        const token = await user.getIdToken();\r\n                        const res = await fetch(\"/api/admin/users/delete\", {\r\n                            method: \"POST\",\r\n                            headers: {\r\n                                \"Content-Type\": \"application/json\",\r\n                                \"Authorization\": `Bearer ${token}`\r\n                            },\r\n                            body: JSON.stringify({\r\n                                targetUid: deleteUser.uid,\r\n                                schoolId: deleteUser.schoolId,\r\n                                role: deleteUser.role.toUpperCase(),\r\n                                collectionName: deleteUser.collectionName\r\n                            })\r\n                        });\r\n                        const data = await res.json();\r\n                        if (!data.success) throw new Error(data.error);\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { collection, query, where, orderBy, getDocs, doc, getDoc, limit, onSnapshot } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { DataTable } from \"@/components/ui/data-table\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Loader2, Check, X, RotateCcw, CalendarDays, BookOpen } from \"lucide-react\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { formatDateToDDMMYYYY } from \"@/lib/date-utils\";\r\n\r\nexport function LeavesManager() {\r\n    const { user } = useAuth();\r\n    const [leaves, setLeaves] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [actioning, setActioning] = useState<string | null>(null);\r\n\r\n    // Impact View\r\n    const [selectedLeave, setSelectedLeave] = useState<any>(null);\r\n    const [schedule, setSchedule] = useState<any>(null);\r\n    const [loadingImpact, setLoadingImpact] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const q = query(collection(db, \"leave_requests\"), orderBy(\"createdAt\", \"desc\"));\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            setLeaves(snapshot.docs.map(d => ({ id: d.id, ...d.data() })));\r\n            setLoading(false);\r\n        }, (error) => {\r\n            console.error(\"Leaves Listener Error:\", error);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const fetchImpact = async (leave: any) => {\r\n        setSelectedLeave(leave);\r\n        setLoadingImpact(true);\r\n        setSchedule(null);\r\n        try {\r\n            const yearId = \"2025-2026\";\r\n            const tQuery = query(collection(db, \"teachers\"), where(\"uid\", \"==\", leave.teacherId), limit(1));\r\n            const tSnap = await getDocs(tQuery);\r\n\r\n            if (!tSnap.empty) {\r\n                const teacherData = tSnap.docs[0].data();\r\n                const teacherIdRes = teacherData.schoolId || teacherData.teacherId || teacherData.id || tSnap.docs[0].id;\r\n\r\n                const snap = await getDoc(doc(db, \"teacher_schedules\", `${yearId}_${teacherIdRes}`));\r\n                if (snap.exists()) {\r\n                    setSchedule(snap.data().schedule || {});\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Impact Fetch Error\", e);\r\n        } finally {\r\n            setLoadingImpact(false);\r\n        }\r\n    };\r\n\r\n    const handleAction = async (leaveId: string, action: \"APPROVE\" | \"REJECT\" | \"REVERT\") => {\r\n        if (!user) {\r\n            alert(\"System is Verifying your identity... Please try again.\");\r\n            return;\r\n        }\r\n\r\n        const confirmMsg = action === \"REVERT\"\r\n            ? \"This will remove all coverage assignments for this leave. Move back to Pending?\"\r\n            : `Are you sure you want to ${action.toLowerCase()} this leave?`;\r\n\r\n        if (!confirm(confirmMsg)) return;\r\n\r\n        setActioning(leaveId);\r\n        try {\r\n            const token = await user.getIdToken();\r\n            const res = await fetch(\"/api/admin/leaves/approve\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({ leaveId, action })\r\n            });\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                // onSnapshot will update the list automatically\r\n            } else {\r\n                alert(\"Error: \" + data.error);\r\n            }\r\n        } catch (e: any) { alert(e.message); }\r\n        finally { setActioning(null); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-3 md:space-y-6 max-w-none p-0 animate-in fade-in\">\r\n            <div className=\"mobile-dense-table overflow-hidden\">\r\n                <DataTable\r\n                    data={leaves}\r\n                    isLoading={loading}\r\n                    columns={[\r\n                        {\r\n                            key: \"teacherName\",\r\n                            header: \"Staff\",\r\n                            render: (leave: any) => (\r\n                                <div className=\"font-bold text-white truncate max-w-[60px] md:max-w-none text-[9px] md:text-sm\">\r\n                                    {leave.teacherName}\r\n                                </div>\r\n                            )\r\n                        },\r\n                        {\r\n                            key: \"dates\",\r\n                            header: \"Term\",\r\n                            render: (leave: any) => (\r\n                                <div className=\"text-white/70 leading-tight\">\r\n                                    <div className=\"text-[8px] md:text-sm whitespace-nowrap\">\r\n                                        {leave.fromDate === leave.toDate\r\n                                            ? formatDateToDDMMYYYY(leave.fromDate)\r\n                                            : `${formatDateToDDMMYYYY(leave.fromDate).split('/').slice(0, 2).join('/')}..`}\r\n                                    </div>\r\n                                    <Badge variant=\"outline\" className=\"h-3 md:h-4 text-[7px] md:text-[10px] border-white/10 text-white/40 px-1 py-0 px-0.5\">\r\n                                        {leave.type.slice(0, 4)}\r\n                                    </Badge>\r\n                                </div>\r\n                            )\r\n                        },\r\n                        {\r\n                            key: \"reason\",\r\n                            header: \"Cause\",\r\n                            render: (leave: any) => (\r\n                                <div className=\"text-[8px] md:text-sm max-w-[50px] md:max-w-xs truncate text-white/50 italic\" title={leave.reason}>\r\n                                    {leave.reason}\r\n                                </div>\r\n                            )\r\n                        },\r\n                        {\r\n                            key: \"status\",\r\n                            header: \"Status\",\r\n                            render: (leave: any) => (\r\n                                <div className=\"scale-[0.8] md:scale-100 origin-left\">\r\n                                    {leave.status === \"PENDING\" && <Badge className=\"bg-yellow-500/10 text-yellow-500 border border-yellow-500/20 py-0 px-1 text-[8px] md:text-xs\">Pend</Badge>}\r\n                                    {leave.status === \"APPROVED\" && <Badge className=\"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 py-0 px-1 text-[8px] md:text-xs\">Appr</Badge>}\r\n                                    {leave.status === \"REJECTED\" && <Badge className=\"bg-red-500/10 text-red-400 border border-red-500/20 py-0 px-1 text-[8px] md:text-xs\">Rej</Badge>}\r\n                                </div>\r\n                            )\r\n                        }\r\n                    ]}\r\n                    actions={(leave: any) => (\r\n                        <div className=\"flex flex-col gap-1 p-1\">\r\n                            <Dialog>\r\n                                <DialogTrigger asChild>\r\n                                    <Button\r\n                                        size=\"sm\"\r\n                                        variant=\"ghost\"\r\n                                        className=\"w-full justify-start gap-2 h-8 hover:bg-zinc-800 text-white/70\"\r\n                                        onClick={() => fetchImpact(leave)}\r\n                                    >\r\n                                        <CalendarDays className=\"w-4 h-4\" /> Impact Analysis\r\n                                    </Button>\r\n                                </DialogTrigger>\r\n                                <DialogContent className=\"bg-[#0A192F] border-white/10 text-white max-w-md\">\r\n                                    <DialogHeader>\r\n                                        <DialogTitle className=\"flex items-center gap-2\">\r\n                                            <BookOpen className=\"w-5 h-5 text-accent\" />\r\n                                            Classes Affected\r\n                                        </DialogTitle>\r\n                                        <DialogDescription className=\"text-white/60\">\r\n                                            Teacher schedule for this leave period.\r\n                                        </DialogDescription>\r\n                                    </DialogHeader>\r\n\r\n                                    <div className=\"space-y-4 py-4\">\r\n                                        {loadingImpact ? (\r\n                                            <div className=\"flex justify-center p-8\"><Loader2 className=\"animate-spin text-accent\" /></div>\r\n                                        ) : !schedule || Object.keys(schedule).length === 0 ? (\r\n                                            <div className=\"text-center p-8 text-white/40 italic\">No classes scheduled for this teacher.</div>\r\n                                        ) : (\r\n                                            <div className=\"space-y-4 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                                                {[\"MONDAY\", \"TUESDAY\", \"WEDNESDAY\", \"THURSDAY\", \"FRIDAY\", \"SATURDAY\"].map(day => {\r\n                                                    const dayClasses = schedule[day];\r\n                                                    if (!dayClasses || Object.keys(dayClasses).length === 0) return null;\r\n\r\n                                                    return (\r\n                                                        <div key={day} className=\"space-y-2\">\r\n                                                            <Badge variant=\"outline\" className=\"border-accent/20 text-accent text-[10px] uppercase tracking-wider\">{day}</Badge>\r\n                                                            <div className=\"grid gap-2\">\r\n                                                                {Object.entries(dayClasses).map(([slotId, info]: [string, any]) => (\r\n                                                                    <div key={slotId} className=\"flex items-center justify-between p-2 rounded bg-white/5 border border-white/10\">\r\n                                                                        <div className=\"text-xs font-mono text-white/50\">Period {slotId}</div>\r\n                                                                        <div className=\"text-sm font-bold text-white\">Class {info.classId}</div>\r\n                                                                    </div>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    );\r\n                                                })}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </DialogContent>\r\n                            </Dialog>\r\n\r\n                            {leave.status === \"PENDING\" ? (\r\n                                <>\r\n                                    <Button\r\n                                        size=\"sm\"\r\n                                        variant=\"ghost\"\r\n                                        className=\"w-full justify-start gap-2 h-8 hover:bg-emerald-500/10 text-emerald-400 font-bold\"\r\n                                        onClick={() => handleAction(leave.id, \"APPROVE\")}\r\n                                        disabled={actioning === leave.id}\r\n                                    >\r\n                                        {actioning === leave.id ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Check className=\"w-4 h-4\" />}\r\n                                        Approve Leave\r\n                                    </Button>\r\n                                    <Button\r\n                                        size=\"sm\"\r\n                                        variant=\"ghost\"\r\n                                        className=\"w-full justify-start gap-2 h-8 hover:bg-red-500/10 text-red-400 font-bold\"\r\n                                        onClick={() => handleAction(leave.id, \"REJECT\")}\r\n                                        disabled={actioning === leave.id}\r\n                                    >\r\n                                        <X className=\"w-4 h-4\" /> Reject Leave\r\n                                    </Button>\r\n                                </>\r\n                            ) : (\r\n                                <Button\r\n                                    size=\"sm\"\r\n                                    variant=\"ghost\"\r\n                                    className=\"w-full justify-start gap-2 h-8 text-white/40 hover:text-white\"\r\n                                    onClick={() => handleAction(leave.id, \"REVERT\")}\r\n                                    disabled={actioning === leave.id}\r\n                                >\r\n                                    {actioning === leave.id ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <RotateCcw className=\"w-3 h-3\" />}\r\n                                    Revert Status\r\n                                </Button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                />\r\n\r\n                {leaves.length === 0 && !loading && (\r\n                    <div className=\"text-center py-12 text-white/30 italic bg-black/10 rounded-xl border border-dashed border-white/10 text-sm\">\r\n                        No leave requests found.\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { collection, query, where, getDocs, orderBy, getDoc, doc, limit, onSnapshot } from \"firebase/firestore\";\r\nimport { db, auth } from \"@/lib/firebase\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Loader2, CheckCircle, Coffee, UserPlus } from \"lucide-react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogFooter, DialogDescription } from \"@/components/ui/dialog\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface CoverageTask {\r\n    id: string;\r\n    date: string;\r\n    day: string;\r\n    slotId: number;\r\n    classId: string;\r\n    originalTeacherId: string;\r\n    status: \"PENDING\" | \"RESOLVED\";\r\n    suggestedSubstituteId?: string;\r\n    suggestedType?: string;\r\n    resolution?: {\r\n        type: \"SUBSTITUTION\" | \"LEISURE\";\r\n        substituteTeacherId: string | null;\r\n    };\r\n}\r\n\r\nexport function CoverageManager() {\r\n    const [tasks, setTasks] = useState<CoverageTask[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [teachers, setTeachers] = useState<any[]>([]);\r\n    const [showResolved, setShowResolved] = useState(false);\r\n\r\n    // Resolve Modal\r\n    const [selectedTask, setSelectedTask] = useState<CoverageTask | null>(null);\r\n    const [resolveType, setResolveType] = useState<\"SUBSTITUTE\" | \"LEISURE\">(\"SUBSTITUTE\");\r\n    const [substituteId, setSubstituteId] = useState(\"\");\r\n    const [resolving, setResolving] = useState(false);\r\n\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        // Real-time Tasks\r\n        const q = query(collection(db, \"coverage_tasks\"), orderBy(\"createdAt\", \"desc\"), limit(100));\r\n        const unsubscribeTasks = onSnapshot(q, (snapshot) => {\r\n            setTasks(snapshot.docs.map(d => ({ id: d.id, ...d.data() } as CoverageTask)));\r\n            setLoading(false);\r\n        }, (err) => {\r\n            console.warn(\"Task Listener Error, falling back...\", err);\r\n            // Fallback for missing index\r\n            const qFallback = query(collection(db, \"coverage_tasks\"), limit(100));\r\n            onSnapshot(qFallback, (snap) => {\r\n                setTasks(snap.docs.map(d => ({ id: d.id, ...d.data() } as CoverageTask)));\r\n                setLoading(false);\r\n            });\r\n        });\r\n\r\n        // Real-time Teachers\r\n        const qT = query(collection(db, \"teachers\"), where(\"status\", \"==\", \"ACTIVE\"));\r\n        const unsubscribeTeachers = onSnapshot(qT, (snapshot) => {\r\n            setTeachers(snapshot.docs.map(d => ({ id: d.id, ...d.data() })));\r\n        });\r\n\r\n        return () => {\r\n            unsubscribeTasks();\r\n            unsubscribeTeachers();\r\n        };\r\n    }, []);\r\n\r\n    const getTeacherName = (tid: string) => {\r\n        if (!tid) return \"N/A\";\r\n        const t = teachers.find(t => t.id === tid || t.schoolId === tid || t.uid === tid);\r\n        return t?.name || tid;\r\n    };\r\n\r\n    const handleResolve = async () => {\r\n        if (!selectedTask) return;\r\n        setResolving(true);\r\n        try {\r\n            const res = await fetch(\"/api/admin/timetable/coverage/resolve\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${await auth.currentUser?.getIdToken()}`\r\n                },\r\n                body: JSON.stringify({\r\n                    taskId: selectedTask.id,\r\n                    resolutionType: resolveType,\r\n                    substituteTeacherId: resolveType === \"SUBSTITUTE\" ? substituteId : null\r\n                })\r\n            });\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                setSelectedTask(null);\r\n            } else {\r\n                alert(data.error);\r\n            }\r\n        } catch (e: any) { alert(e.message); }\r\n        finally { setResolving(false); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4 md:space-y-6 max-w-none p-0 animate-in fade-in pb-20\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1\">\r\n                <div className=\"flex items-center gap-2 w-full md:w-auto\">\r\n                    <div className=\"flex items-center gap-1 bg-white/5 p-1 rounded-xl border border-white/10 backdrop-blur-md\">\r\n                        <Button\r\n                            variant={!showResolved ? \"default\" : \"ghost\"}\r\n                            size=\"sm\"\r\n                            onClick={() => setShowResolved(false)}\r\n                            className={cn(\r\n                                \"text-[10px] h-8 px-4 font-black uppercase tracking-widest transition-all rounded-lg\",\r\n                                !showResolved ? \"bg-accent text-black\" : \"text-white/40 hover:text-white\"\r\n                            )}\r\n                        >\r\n                            Pending\r\n                        </Button>\r\n                        <Button\r\n                            variant={showResolved ? \"default\" : \"ghost\"}\r\n                            size=\"sm\"\r\n                            onClick={() => setShowResolved(true)}\r\n                            className={cn(\r\n                                \"text-[10px] h-8 px-4 font-black uppercase tracking-widest transition-all rounded-lg\",\r\n                                showResolved ? \"bg-accent text-black\" : \"text-white/40 hover:text-white\"\r\n                            )}\r\n                        >\r\n                            Resolved\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {error && (\r\n                <div className=\"p-4 bg-red-500/10 border border-red-500/20 text-red-500 rounded-xl text-sm mb-6\">\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            {loading ? <div className=\"p-10 flex justify-center\"><Loader2 className=\"animate-spin text-blue-500\" /></div> : (\r\n                <div className=\"grid grid-cols-1 gap-3\">\r\n                    {tasks.filter(t => showResolved ? t.status === \"RESOLVED\" : t.status === \"PENDING\").length === 0 ? (\r\n                        <div className=\"py-20 text-center border border-dashed border-white/10 rounded-xl bg-white/5\">\r\n                            <Coffee className=\"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-20\" />\r\n                            <p className=\"text-muted-foreground\">No {showResolved ? \"resolved\" : \"pending\"} coverage tasks {showResolved ? \"yet\" : \"at the moment\"}.</p>\r\n                        </div>\r\n                    ) : (\r\n                        tasks\r\n                            .filter(t => showResolved ? t.status === \"RESOLVED\" : t.status === \"PENDING\")\r\n                            .map(task => {\r\n                                const teacherId = task.originalTeacherId;\r\n                                const displayDay = task.day || (task.date ? new Date(task.date).toLocaleDateString('en-US', { weekday: 'long' }).toUpperCase() : \"N/A\");\r\n\r\n                                return (\r\n                                    <Card key={task.id} className=\"bg-black/20 border-white/10 overflow-hidden hover:bg-white/5 transition-all group backdrop-blur-md rounded-2xl relative\">\r\n                                        <div className=\"flex flex-col md:flex-row items-center justify-between p-3 md:p-5 gap-4\">\r\n                                            <div className=\"flex items-center gap-4 w-full md:w-auto\">\r\n                                                <div className=\"w-10 h-10 md:w-12 md:h-12 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center justify-center text-red-400 font-black text-[10px] flex-col shrink-0 italic shadow-inner\">\r\n                                                    <span>{task.date?.split('-')?.[1] || \"??\"}/{task.date?.split('-')?.[2] || \"??\"}</span>\r\n                                                </div>\r\n                                                <div className=\"min-w-0\">\r\n                                                    <h4 className=\"font-bold text-sm md:text-lg text-white group-hover:text-accent transition-colors leading-tight truncate\">\r\n                                                        {getTeacherName(teacherId)}\r\n                                                    </h4>\r\n                                                    <div className=\"flex items-center gap-2 text-[10px] text-muted-foreground flex-wrap font-bold uppercase tracking-widest opacity-60\">\r\n                                                        <span className=\"text-accent/60\">{displayDay}</span>\r\n                                                        <span className=\"w-1 h-1 rounded-full bg-white/20\" />\r\n                                                        <span>Period {task.slotId}</span>\r\n                                                        <span className=\"w-1 h-1 rounded-full bg-white/20\" />\r\n                                                        <span>{task.classId}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div className=\"flex items-center justify-between md:justify-end w-full md:w-auto gap-3 border-t md:border-t-0 border-white/5 pt-3 md:pt-0\">\r\n                                                {task.status === \"PENDING\" && task.suggestedSubstituteId && (\r\n                                                    <div className=\"text-left md:text-right md:mr-2 md:border-r border-white/10 md:pr-4\">\r\n                                                        <div className=\"text-[8px] text-blue-400 uppercase font-black tracking-widest mb-0.5\">Recommendation</div>\r\n                                                        <div className=\"text-xs font-bold text-white/90\">\r\n                                                            {task.suggestedType === \"LEISURE\" ? \"Leisure\" : getTeacherName(task.suggestedSubstituteId)}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n\r\n                                                {task.status === \"RESOLVED\" && (\r\n                                                    <div className=\"text-left md:text-right md:mr-2\">\r\n                                                        <div className=\"text-[8px] text-muted-foreground uppercase font-black tracking-widest mb-0.5 opacity-40\">Resolved Status</div>\r\n                                                        <div className=\"text-xs font-bold text-emerald-400 flex items-center gap-1.5\">\r\n                                                            <CheckCircle className=\"w-3 h-3\" />\r\n                                                            {task.resolution?.type === \"LEISURE\" ? \"Leisure Mode\" : `Covered By ${getTeacherName(task.resolution?.substituteTeacherId || \"\")}`}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n\r\n                                                <Dialog open={selectedTask?.id === task.id} onOpenChange={(o) => !o && setSelectedTask(null)}>\r\n                                                    <DialogTrigger asChild>\r\n                                                        <Button\r\n                                                            size=\"sm\"\r\n                                                            onClick={() => {\r\n                                                                setSelectedTask(task);\r\n                                                                if (task.status === \"RESOLVED\" && task.resolution) {\r\n                                                                    setResolveType(task.resolution.type === \"SUBSTITUTION\" ? \"SUBSTITUTE\" : \"LEISURE\");\r\n                                                                    setSubstituteId(task.resolution.substituteTeacherId || \"\");\r\n                                                                } else {\r\n                                                                    setResolveType((task.suggestedType as any) || \"SUBSTITUTE\");\r\n                                                                    setSubstituteId(task.suggestedSubstituteId || \"\");\r\n                                                                }\r\n                                                            }}\r\n                                                            className={cn(\r\n                                                                \"h-9 px-4 text-[10px] font-black uppercase tracking-widest rounded-xl transition-all\",\r\n                                                                task.status === \"RESOLVED\"\r\n                                                                    ? \"bg-white/5 text-white/40 hover:text-white border border-white/10\"\r\n                                                                    : \"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-900/20\"\r\n                                                            )}\r\n                                                        >\r\n                                                            {task.status === \"RESOLVED\" ? \"Manage\" : \"Action\"}\r\n                                                        </Button>\r\n                                                    </DialogTrigger>\r\n                                                    <DialogContent className=\"bg-[#0A192F] border-white/10 text-white rounded-2xl shadow-2xl shadow-black/50\">\r\n                                                        <DialogHeader>\r\n                                                            <DialogTitle className=\"text-xl font-bold flex items-center gap-2 italic\">\r\n                                                                <UserPlus className=\"text-accent\" /> Resolve Coverage\r\n                                                            </DialogTitle>\r\n                                                            <DialogDescription className=\"text-[10px] text-muted-foreground uppercase font-black tracking-widest opacity-60\">Choose how to handle this academic period.</DialogDescription>\r\n                                                        </DialogHeader>\r\n\r\n                                                        <div className=\"space-y-4 py-4\">\r\n                                                            <div className=\"flex gap-2 p-1 bg-white/5 rounded-xl border border-white/10\">\r\n                                                                <Button\r\n                                                                    variant={resolveType === \"SUBSTITUTE\" ? \"default\" : \"outline\"}\r\n                                                                    onClick={() => setResolveType(\"SUBSTITUTE\")}\r\n                                                                    className={cn(\r\n                                                                        \"flex-1 h-10 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all\",\r\n                                                                        resolveType === 'SUBSTITUTE' ? 'bg-accent text-black hover:bg-accent/90' : 'bg-transparent text-white/40 border-none hover:text-white hover:bg-white/5'\r\n                                                                    )}\r\n                                                                >\r\n                                                                    <UserPlus className=\"w-3.5 h-3.5 mr-2\" /> Substitute\r\n                                                                </Button>\r\n                                                                <Button\r\n                                                                    variant={resolveType === \"LEISURE\" ? \"default\" : \"outline\"}\r\n                                                                    onClick={() => setResolveType(\"LEISURE\")}\r\n                                                                    className={cn(\r\n                                                                        \"flex-1 h-10 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all\",\r\n                                                                        resolveType === 'LEISURE' ? 'bg-accent text-black hover:bg-accent/90' : 'bg-transparent text-white/40 border-none hover:text-white hover:bg-white/5'\r\n                                                                    )}\r\n                                                                >\r\n                                                                    <Coffee className=\"w-3.5 h-3.5 mr-2\" /> Leisure\r\n                                                                </Button>\r\n                                                            </div>\r\n\r\n                                                            {resolveType === \"SUBSTITUTE\" && (\r\n                                                                <div className=\"space-y-4 pt-2\">\r\n                                                                    <div className=\"flex justify-between items-center mb-1\">\r\n                                                                        <label className=\"text-[10px] font-black text-muted-foreground uppercase tracking-widest ml-1\">Select Substitute Teacher</label>\r\n                                                                        <div className=\"text-[8px] px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-400 border border-blue-500/20 font-black uppercase tracking-tighter\">Recommended: {getTeacherName(task.suggestedSubstituteId || \"\")}</div>\r\n                                                                    </div>\r\n                                                                    <Select value={substituteId} onValueChange={setSubstituteId}>\r\n                                                                        <SelectTrigger className=\"h-12 bg-black/40 border-white/10 rounded-xl font-bold focus:ring-accent/20\">\r\n                                                                            <SelectValue placeholder=\"Choose Teacher\" />\r\n                                                                        </SelectTrigger>\r\n                                                                        <SelectContent className=\"bg-[#0A192F] border-white/10 text-white\">\r\n                                                                            {teachers\r\n                                                                                .filter(t => (t.schoolId || t.id) !== task.originalTeacherId)\r\n                                                                                .map(t => (\r\n                                                                                    <SelectItem key={t.id} value={t.schoolId || t.id} className=\"focus:bg-accent focus:text-black font-bold text-xs\">{t.name}</SelectItem>\r\n                                                                                ))}\r\n                                                                        </SelectContent>\r\n                                                                    </Select>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n\r\n                                                        <DialogFooter className=\"pt-2\">\r\n                                                            <Button onClick={handleResolve} disabled={resolving || (resolveType === \"SUBSTITUTE\" && !substituteId)} className=\"w-full h-12 bg-accent text-black hover:bg-accent/90 font-black uppercase tracking-widest text-xs rounded-xl shadow-lg shadow-accent/20\">\r\n                                                                {resolving ? <Loader2 className=\"animate-spin w-4 h-4\" /> : \"Finalize Resolution\"}\r\n                                                            </Button>\r\n                                                        </DialogFooter>\r\n                                                    </DialogContent>\r\n                                                </Dialog>\r\n                                            </div>\r\n                                        </div>\r\n                                    </Card>\r\n                                );\r\n                            })\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect, Suspense } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { TeachersDirectory } from \"@/components/admin/teachers-directory\";\r\nimport { LeavesManager } from \"@/components/admin/leaves-manager\";\r\nimport { CoverageManager } from \"@/components/admin/coverage-manager\";\r\nimport { AddTeacherModal } from \"@/components/admin/add-teacher-modal\";\r\nimport { AddStaffModal } from \"@/components/admin/add-staff-modal\";\r\nimport { Users, Calendar, ShieldAlert, Loader2, Plus } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nfunction FacultyManagementContent() {\r\n    const searchParams = useSearchParams();\r\n    const [activeTab, setActiveTab] = useState(searchParams.get(\"tab\") || \"directory\");\r\n    const [directoryTab, setDirectoryTab] = useState(\"teachers\"); // Track if we are on Teachers or Staff\r\n\r\n    // Modal States\r\n    const [showTeacherModal, setShowTeacherModal] = useState(false);\r\n    const [showStaffModal, setShowStaffModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const tab = searchParams.get(\"tab\");\r\n        if (tab) setActiveTab(tab);\r\n    }, [searchParams]);\r\n\r\n    return (\r\n        <div className=\"space-y-6 md:space-y-10 animate-in fade-in duration-500 pb-20\">\r\n            {/* Unified Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 px-2 md:px-0\">\r\n                <div className=\"space-y-1\">\r\n                    <h1 className=\"text-2xl md:text-5xl font-display font-bold bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent italic leading-tight\">\r\n                        Faculty & HR\r\n                    </h1>\r\n                    <p className=\"text-muted-foreground text-[10px] md:text-sm tracking-tight uppercase font-black opacity-50\">\r\n                        Consolidated Management: <span className=\"text-accent\">Directory • Leaves • Coverage</span>\r\n                    </p>\r\n                </div>\r\n\r\n                {activeTab === \"directory\" && (\r\n                    <Button\r\n                        onClick={() => directoryTab === 'teachers' ? setShowTeacherModal(true) : setShowStaffModal(true)}\r\n                        className=\"h-10 md:h-12 bg-white text-black hover:bg-zinc-200 rounded-xl font-black uppercase tracking-tighter px-4 md:px-6 shadow-lg shadow-white/10 text-xs md:text-sm\"\r\n                    >\r\n                        <Plus className=\"w-3.5 h-3.5 md:w-4 md:h-4 mr-2 stroke-[3]\" /> Add {directoryTab === 'teachers' ? 'Teacher' : 'Staff'}\r\n                    </Button>\r\n                )}\r\n            </div>\r\n\r\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\r\n                <div className=\"px-2 md:px-0 bg-black/20 p-1 rounded-2xl border border-white/5 backdrop-blur-md sticky top-0 z-10 mx-2 md:mx-0\">\r\n                    <TabsList className=\"bg-transparent h-auto w-full grid grid-cols-3 gap-1\">\r\n                        <TabsTrigger\r\n                            value=\"directory\"\r\n                            className=\"data-[state=active]:bg-white data-[state=active]:text-black rounded-xl py-2 md:py-3 font-bold transition-all text-[10px] md:text-sm flex flex-col md:flex-row items-center gap-1 md:gap-2\"\r\n                        >\r\n                            <Users size={14} className=\"md:w-4 md:h-4\" />\r\n                            <span>Directory</span>\r\n                        </TabsTrigger>\r\n                        <TabsTrigger\r\n                            value=\"leaves\"\r\n                            className=\"data-[state=active]:bg-white data-[state=active]:text-black rounded-xl py-2 md:py-3 font-bold transition-all text-[10px] md:text-sm flex flex-col md:flex-row items-center gap-1 md:gap-2\"\r\n                        >\r\n                            <Calendar size={14} className=\"md:w-4 md:h-4\" />\r\n                            <span>Leaves</span>\r\n                        </TabsTrigger>\r\n                        <TabsTrigger\r\n                            value=\"coverage\"\r\n                            className=\"data-[state=active]:bg-white data-[state=active]:text-black rounded-xl py-2 md:py-3 font-bold transition-all text-[10px] md:text-sm flex flex-col md:flex-row items-center gap-1 md:gap-2\"\r\n                        >\r\n                            <ShieldAlert size={14} className=\"md:w-4 md:h-4\" />\r\n                            <span>Coverage</span>\r\n                        </TabsTrigger>\r\n                    </TabsList>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    <TabsContent value=\"directory\" className=\"outline-none m-0\">\r\n                        {/* Directory has its own internal tabs and header, so we just wrap it */}\r\n                        <div className=\"bg-transparent\">\r\n                            <TeachersDirectory hideHeader={true} onTabChange={setDirectoryTab} />\r\n                        </div>\r\n                    </TabsContent>\r\n\r\n                    <TabsContent value=\"leaves\" className=\"outline-none m-0 px-2 md:px-0\">\r\n                        <LeavesManager />\r\n                    </TabsContent>\r\n\r\n                    <TabsContent value=\"coverage\" className=\"outline-none m-0 px-2 md:px-0\">\r\n                        <CoverageManager />\r\n                    </TabsContent>\r\n                </div>\r\n            </Tabs>\r\n\r\n            <AddTeacherModal isOpen={showTeacherModal} onClose={() => setShowTeacherModal(false)} onSuccess={() => { }} />\r\n            <AddStaffModal isOpen={showStaffModal} onClose={() => setShowStaffModal(false)} onSuccess={() => { }} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function FacultyManagementPage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"flex items-center justify-center h-screen\"><Loader2 className=\"animate-spin text-accent\" /></div>}>\r\n            <FacultyManagementContent />\r\n        </Suspense>\r\n    );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M8 2v4', key: '1cmpym' }],\n  ['path', { d: 'M16 2v4', key: '4m81vk' }],\n  ['rect', { width: '18', height: '18', x: '3', y: '4', rx: '2', key: '1hopcy' }],\n  ['path', { d: 'M3 10h18', key: '8toen8' }],\n  ['path', { d: 'M8 14h.01', key: '6423bh' }],\n  ['path', { d: 'M12 14h.01', key: '1etili' }],\n  ['path', { d: 'M16 14h.01', key: '1gbofw' }],\n  ['path', { d: 'M8 18h.01', key: 'lrp35t' }],\n  ['path', { d: 'M12 18h.01', key: 'mhygvu' }],\n  ['path', { d: 'M16 18h.01', key: 'kzsmim' }],\n];\n\n/**\n * @component @name CalendarDays\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOCAydjQiIC8+CiAgPHBhdGggZD0iTTE2IDJ2NCIgLz4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjQiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik0zIDEwaDE4IiAvPgogIDxwYXRoIGQ9Ik04IDE0aC4wMSIgLz4KICA8cGF0aCBkPSJNMTIgMTRoLjAxIiAvPgogIDxwYXRoIGQ9Ik0xNiAxNGguMDEiIC8+CiAgPHBhdGggZD0iTTggMThoLjAxIiAvPgogIDxwYXRoIGQ9Ik0xMiAxOGguMDEiIC8+CiAgPHBhdGggZD0iTTE2IDE4aC4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/calendar-days\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CalendarDays = createLucideIcon('calendar-days', __iconNode);\n\nexport default CalendarDays;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['line', { x1: '19', x2: '19', y1: '8', y2: '14', key: '1bvyxn' }],\n  ['line', { x1: '22', x2: '16', y1: '11', y2: '11', key: '1shjgl' }],\n];\n\n/**\n * @component @name UserPlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8bGluZSB4MT0iMTkiIHgyPSIxOSIgeTE9IjgiIHkyPSIxNCIgLz4KICA8bGluZSB4MT0iMjIiIHgyPSIxNiIgeTE9IjExIiB5Mj0iMTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UserPlus = createLucideIcon('user-plus', __iconNode);\n\nexport default UserPlus;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '1357e3' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n];\n\n/**\n * @component @name RotateCcw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAxIDAgOS05IDkuNzUgOS43NSAwIDAgMC02Ljc0IDIuNzRMMyA4IiAvPgogIDxwYXRoIGQ9Ik0zIDN2NWg1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/rotate-ccw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RotateCcw = createLucideIcon('rotate-ccw', __iconNode);\n\nexport default RotateCcw;\n"],"names":[],"mappings":"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","ignoreList":[6,7,8]}