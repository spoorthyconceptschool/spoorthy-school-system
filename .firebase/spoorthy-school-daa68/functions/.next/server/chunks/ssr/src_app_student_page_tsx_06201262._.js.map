{"version":3,"sources":["../../../../src/app/student/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { CheckCircle, Clock } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { CreditCard, Wallet, Calendar, Info, BookOpen, User, Bookmark, Loader2 } from \"lucide-react\";\r\nimport { collection, query, where, onSnapshot, orderBy, limit } from \"firebase/firestore\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nexport default function StudentDashboard() {\r\n    const { user } = useAuth();\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [profile, setProfile] = useState<any>(null);\r\n    const [ledger, setLedger] = useState<any>(null);\r\n    const [config, setConfig] = useState<{ keyId: string } | null>(null);\r\n    const [paymentStatus, setPaymentStatus] = useState<\"pending\" | \"paid\">(\"pending\");\r\n\r\n    // Selection & Partial Payment State\r\n    const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());\r\n    const [paymentAmounts, setPaymentAmounts] = useState<{ [key: string]: string }>({});\r\n    const [useHomeworkFallback, setUseHomeworkFallback] = useState(false);\r\n    const [recentHomework, setRecentHomework] = useState<any[]>([]);\r\n\r\n    const schoolId = user?.email?.split('@')[0].toUpperCase();\r\n\r\n    useEffect(() => {\r\n        // Load Razorpay Script\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\r\n        script.async = true;\r\n        document.body.appendChild(script);\r\n\r\n        const fetchData = async () => {\r\n            if (!schoolId) return;\r\n            try {\r\n                const [configSnap, profileSnap, ledgerSnap] = await Promise.all([\r\n                    getDoc(doc(db, \"config\", \"razorpay\")),\r\n                    getDoc(doc(db, \"students\", schoolId)),\r\n                    getDoc(doc(db, \"student_fee_ledgers\", `${schoolId}_2025-2026`))\r\n                ]);\r\n\r\n                if (configSnap.exists()) setConfig(configSnap.data() as { keyId: string });\r\n                if (profileSnap.exists()) setProfile(profileSnap.data());\r\n\r\n                if (ledgerSnap.exists()) {\r\n                    const lData = ledgerSnap.data();\r\n                    setLedger(lData);\r\n                    setPaymentStatus(lData.status === \"PAID\" ? \"paid\" : \"pending\");\r\n\r\n                    // Default Selection Logic\r\n                    const initialSelected = new Set<string>();\r\n                    const initialAmounts: { [key: string]: string } = {};\r\n\r\n                    const rawItems = lData.items || [];\r\n                    const totalReduction = rawItems.filter((i: any) => i.amount < 0).reduce((s: number, i: any) => s + Math.abs(i.amount - (i.paidAmount || 0)), 0);\r\n                    let reductionRemaining = totalReduction;\r\n\r\n                    rawItems.filter((i: any) => i.amount > 0).forEach((item: any) => {\r\n                        const remaining = item.amount - (item.paidAmount || 0);\r\n                        const discountForThisItem = Math.min(remaining, reductionRemaining);\r\n                        const netRemaining = remaining - discountForThisItem;\r\n                        reductionRemaining -= discountForThisItem;\r\n\r\n                        if (netRemaining > 0) {\r\n                            initialSelected.add(item.id);\r\n                            initialAmounts[item.id] = netRemaining.toString();\r\n                        }\r\n                    });\r\n\r\n                    setSelectedItems(initialSelected);\r\n                    setPaymentAmounts(initialAmounts);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Dashboard Fetch Error\", err);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n\r\n        return () => {\r\n            if (script && document.body.contains(script)) {\r\n                document.body.removeChild(script);\r\n            }\r\n        };\r\n    }, [schoolId]);\r\n\r\n    // Homework Real-time Listener for Dashboard\r\n    useEffect(() => {\r\n        if (!profile?.classId) return;\r\n\r\n        let isMounted = true;\r\n\r\n        console.log(\"[Dashboard] Listening for homework targeting:\", { classId: profile.classId, sectionId: profile.sectionId });\r\n\r\n        const hQ = useHomeworkFallback\r\n            ? query(collection(db, \"homework\"), where(\"classId\", \"==\", profile.classId), limit(10))\r\n            : query(collection(db, \"homework\"), where(\"classId\", \"==\", profile.classId), orderBy(\"createdAt\", \"desc\"), limit(10));\r\n\r\n        const unsubscribe = onSnapshot(hQ, (snapshot) => {\r\n            if (!isMounted) return;\r\n            let list = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));\r\n\r\n            // Filter by section if student has one, otherwise show all for class\r\n            let filtered = profile.sectionId\r\n                ? list.filter((hw: any) => !hw.sectionId || hw.sectionId === profile.sectionId || hw.sectionId === \"ALL\" || hw.sectionId === \"GENERAL\")\r\n                : list;\r\n\r\n            if (useHomeworkFallback) {\r\n                filtered = [...filtered].sort((a: any, b: any) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0));\r\n            }\r\n\r\n            console.log(\"[Dashboard] Homework received/filtered:\", filtered.length);\r\n            setRecentHomework(filtered.slice(0, 3));\r\n        }, (err) => {\r\n            if (!isMounted) return;\r\n            if (err.message.includes('index') && !useHomeworkFallback) {\r\n                console.warn(\"[Dashboard] Index missing, switching to fallback query.\");\r\n                setUseHomeworkFallback(true);\r\n            } else if (!err.message.includes('index')) {\r\n                console.error(\"[Dashboard] Homework Sync Error:\", err);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            isMounted = false;\r\n            unsubscribe();\r\n        };\r\n    }, [profile?.classId, profile?.sectionId, useHomeworkFallback]);\r\n\r\n    const handleToggleItem = (itemId: string, remaining: number) => {\r\n        // Reductions (negative balance) cannot be unselected\r\n        if (remaining < 0) return;\r\n\r\n        const next = new Set(selectedItems);\r\n        if (next.has(itemId)) {\r\n            next.delete(itemId);\r\n            const nextAmounts = { ...paymentAmounts };\r\n            delete nextAmounts[itemId];\r\n            setPaymentAmounts(nextAmounts);\r\n        } else {\r\n            next.add(itemId);\r\n            setPaymentAmounts({ ...paymentAmounts, [itemId]: remaining.toString() });\r\n        }\r\n        setSelectedItems(next);\r\n    };\r\n\r\n    const handleAmountChange = (itemId: string, val: string, max: number) => {\r\n        // Allow leading minus sign and decimals\r\n        const numeric = val.replace(/[^0-9.-]/g, '');\r\n\r\n        // If it's a reduction (max < 0), we want to allow negative values up to that max\r\n        if (max < 0) {\r\n            if (Number(numeric) < max) return;\r\n            if (Number(numeric) > 0) return; // Can't pay 'positive' on a reduction\r\n        } else {\r\n            if (Number(numeric) > max) return;\r\n            if (Number(numeric) < 0) return; // Can't pay 'negative' on a normal fee\r\n        }\r\n\r\n        setPaymentAmounts({ ...paymentAmounts, [itemId]: numeric });\r\n    };\r\n\r\n    // 1. Transaction-specific total (What the user is paying right now)\r\n    const totalToPay = Array.from(selectedItems).reduce((sum, id) => {\r\n        // Find the item to check if it's a reduction\r\n        const item = ledger?.items?.find((i: any) => i.id === id);\r\n        // Only sum if it's a positive fee item\r\n        const amt = Number(paymentAmounts[id]) || 0;\r\n        return sum + (item && item.amount > 0 ? amt : 0);\r\n    }, 0);\r\n\r\n    // 2. Ledger-wide historical totals (The full picture)\r\n    const ledgerTotalFee = ledger?.items?.reduce((sum: number, i: any) => sum + (i.amount > 0 ? i.amount : 0), 0) || 0;\r\n    const ledgerTotalReductions = ledger?.items?.reduce((sum: number, i: any) => sum + (i.amount < 0 ? Math.abs(i.amount) : 0), 0) || 0;\r\n    const ledgerPendingFee = Math.max(0, ledgerTotalFee - (ledger?.totalPaid || 0) - ledgerTotalReductions);\r\n\r\n    const feeCurrency = \"INR\";\r\n\r\n    const handlePayment = () => {\r\n        const hasPositiveSelection = Array.from(selectedItems).some(id => {\r\n            const item = ledger?.items?.find((i: any) => i.id === id);\r\n            return item && item.amount > 0 && (Number(paymentAmounts[id]) || 0) > 0;\r\n        });\r\n\r\n        if (totalToPay <= 0 && hasPositiveSelection) {\r\n            alert(\"This selection is fully covered by your scholarship/benefits. No payment is required.\");\r\n            return;\r\n        }\r\n\r\n        if (totalToPay <= 0) {\r\n            alert(\"Please select at least one item and enter a valid amount.\");\r\n            return;\r\n        }\r\n\r\n        if (!config?.keyId) {\r\n            alert(\"Payment gateway not configured. Please contact admin.\");\r\n            return;\r\n        }\r\n\r\n        const options = {\r\n            key: config.keyId,\r\n            amount: Math.round(totalToPay * 100), // Amount in paise\r\n            currency: feeCurrency,\r\n            name: \"Spoorthy Concept School\",\r\n            description: `Fee Payment - ${profile?.studentName}`,\r\n            handler: function (response: any) {\r\n                console.log(response);\r\n                alert(`Payment Successful! (Demo Mode)\\nPayment ID: ${response.razorpay_payment_id}\\nAmount: â‚¹${totalToPay}`);\r\n                // In production, sync with backend here\r\n            },\r\n            prefill: {\r\n                name: profile?.studentName,\r\n                email: user?.email,\r\n                contact: profile?.parentMobile\r\n            },\r\n            theme: { color: \"#d4af37\" }\r\n        };\r\n\r\n        const rzp = new (window as any).Razorpay(options);\r\n        rzp.open();\r\n    };\r\n\r\n    const termFees = ledger?.items?.filter((i: any) => i.type === \"TERM\" && (i.amount - (i.paidAmount || 0)) >= 0) || [];\r\n    const customFees = ledger?.items?.filter((i: any) => i.type === \"CUSTOM\" && (i.amount - (i.paidAmount || 0)) >= 0) || [];\r\n    const reductions = ledger?.items?.filter((i: any) => (i.amount - (i.paidAmount || 0)) < 0) || [];\r\n\r\n    return (\r\n        <div className=\"space-y-6 md:space-y-8 pb-12\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 px-2 md:px-0\">\r\n                <div>\r\n                    <h1 className=\"font-display text-3xl md:text-5xl font-bold bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent italic\">\r\n                        My Dashboard\r\n                    </h1>\r\n                    <p className=\"text-muted-foreground flex items-center gap-2\">\r\n                        <Calendar className=\"w-4 h-4 text-accent\" />\r\n                        Academic Year {ledger?.academicYearId || \"2025-2026\"}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Quick Stats / Homework Alert */}\r\n            {isLoading ? <Skeleton className=\"h-32 w-full rounded-3xl\" /> : (\r\n                recentHomework.length > 0 && (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-top duration-700\">\r\n                        <div className=\"md:col-span-3 glass-panel p-6 rounded-3xl border-accent/20 bg-accent/5 flex flex-col md:flex-row items-center justify-between gap-6\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"w-12 h-12 rounded-2xl bg-accent/10 flex items-center justify-center border border-accent/20\">\r\n                                    <BookOpen className=\"w-6 h-6 text-accent\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"font-bold text-lg italic\">New Assignments Received</h3>\r\n                                    <p className=\"text-xs text-muted-foreground font-medium uppercase tracking-widest\">\r\n                                        {recentHomework.length} items requiring your attention\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex -space-x-4 overflow-hidden\">\r\n                                {recentHomework.map((hw, i) => (\r\n                                    <div key={hw.id} className=\"inline-block h-8 w-8 rounded-full ring-2 ring-black bg-neutral-800 flex items-center justify-center text-[10px] font-black uppercase\" title={hw.title}>\r\n                                        {hw.subjectId?.substring(0, 1)}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <Button variant=\"outline\" className=\"rounded-xl border-accent/20 text-accent hover:bg-accent hover:text-accent-foreground font-bold italic h-12 px-8\" onClick={() => window.location.href = '/student/homework'}>\r\n                                View Homework Feed\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* Left Column: Profile & Detailed Selection */}\r\n                <div className=\"lg:col-span-2 space-y-8\">\r\n                    {/* Profile Card */}\r\n                    {isLoading ? <Skeleton className=\"h-64 w-full rounded-3xl\" /> : (\r\n                        <div className=\"glass-panel p-8 rounded-3xl relative overflow-hidden group\">\r\n                            <div className=\"absolute top-0 right-0 w-32 h-32 bg-accent/5 rounded-full -mr-16 -mt-16 blur-3xl group-hover:bg-accent/10 transition-colors\" />\r\n                            <h2 className=\"text-xl font-bold mb-6 flex items-center gap-3\">\r\n                                <Info className=\"w-5 h-5 text-accent\" />\r\n                                Student Profile\r\n                            </h2>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm\">\r\n                                <div className=\"space-y-1\">\r\n                                    <span className=\"text-muted-foreground uppercase text-[10px] tracking-widest font-bold\">Full Name</span>\r\n                                    <p className=\"text-lg font-semibold text-accent\">{profile?.studentName || \"...\"}</p>\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    <span className=\"text-muted-foreground uppercase text-[10px] tracking-widest font-bold\">School ID</span>\r\n                                    <p className=\"text-lg font-mono font-bold\">{schoolId}</p>\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    <span className=\"text-muted-foreground uppercase text-[10px] tracking-widest font-bold\">Grade / Class</span>\r\n                                    <p className=\"text-lg font-semibold\">{profile?.className || \"...\"} {profile?.sectionName ? `(${profile.sectionName})` : \"\"}</p>\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    <span className=\"text-muted-foreground uppercase text-[10px] tracking-widest font-bold\">Parent Contact</span>\r\n                                    <p className=\"text-lg font-semibold\">{profile?.parentName || \"...\"} - {profile?.parentMobile || \"...\"}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Detailed Fee Selection */}\r\n                    <div className=\"space-y-6\">\r\n                        <h2 className=\"text-2xl font-bold flex items-center gap-3 italic\">\r\n                            <Wallet className=\"w-6 h-6 text-accent\" />\r\n                            Fee Breakdown & Selection\r\n                        </h2>\r\n\r\n                        {/* Applied Benefits Header (Non-selectable) */}\r\n                        {reductions.length > 0 && (\r\n                            <div className=\"glass-panel rounded-3xl overflow-hidden border-green-500/20 bg-green-500/5\">\r\n                                <div className=\"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"bg-green-500/20 p-2 rounded-xl\">\r\n                                            <CheckCircle className=\"w-5 h-5 text-green-400\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h3 className=\"font-bold text-green-400 text-sm italic uppercase tracking-widest\">Active Scholarships & Credits</h3>\r\n                                            <p className=\"text-[10px] text-green-400/60 font-bold uppercase\">These benefits are automatically deducted from your term fees below.</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <p className=\"text-[10px] text-green-500/50 uppercase font-black\">Total Benefit Value</p>\r\n                                        <p className=\"text-2xl font-black text-green-400\">- â‚¹{ledgerTotalReductions.toLocaleString()}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {isLoading ? <Skeleton className=\"h-96 w-full rounded-3xl\" /> : (\r\n                            <>\r\n                                {/* Term Fees */}\r\n                                <div className=\"glass-panel rounded-3xl overflow-hidden border-white/5 shadow-2xl\">\r\n                                    <div className=\"bg-white/5 px-6 py-4 flex justify-between items-center border-b border-white/10\">\r\n                                        <h3 className=\"font-bold text-accent tracking-wide uppercase text-xs\">Term Fees</h3>\r\n                                        <span className=\"text-[10px] text-muted-foreground bg-white/5 px-2 py-1 rounded\">MANDATORY</span>\r\n                                    </div>\r\n                                    <div className=\"p-2\">\r\n                                        {(() => {\r\n                                            let rollingReduction = ledgerTotalReductions;\r\n                                            return termFees.length > 0 ? termFees.map((item: any) => {\r\n                                                const remaining = item.amount - (item.paidAmount || 0);\r\n                                                const discountForThisItem = Math.min(remaining, rollingReduction);\r\n                                                const netRemaining = remaining - discountForThisItem;\r\n                                                rollingReduction -= discountForThisItem;\r\n\r\n                                                const isSelected = selectedItems.has(item.id);\r\n\r\n                                                return (\r\n                                                    <div key={item.id} className={`flex flex-col md:flex-row md:items-center justify-between p-4 rounded-2xl mb-2 transition-all ${isSelected ? 'bg-accent/10 border border-accent/20' : 'hover:bg-white/5 border border-transparent'} ${netRemaining === 0 ? 'opacity-60 grayscale-[0.5]' : ''}`}>\r\n                                                        <div className=\"flex items-center gap-4\">\r\n                                                            {netRemaining === 0 ? (\r\n                                                                <div className=\"w-5 h-5 flex items-center justify-center bg-green-500 rounded-md\">\r\n                                                                    <CheckCircle className=\"w-4 h-4 text-white\" />\r\n                                                                </div>\r\n                                                            ) : (\r\n                                                                <Checkbox\r\n                                                                    checked={isSelected}\r\n                                                                    onCheckedChange={() => handleToggleItem(item.id, netRemaining)}\r\n                                                                />\r\n                                                            )}\r\n                                                            <div>\r\n                                                                <p className=\"font-bold flex items-center gap-2\">\r\n                                                                    {item.name}\r\n                                                                    {discountForThisItem > 0 && (\r\n                                                                        <span className=\"text-[9px] bg-green-500/20 text-green-400 px-1.5 py-0.5 rounded-full font-black uppercase tracking-tighter\">\r\n                                                                            â‚¹{discountForThisItem.toLocaleString()} DEDUCTED\r\n                                                                        </span>\r\n                                                                    )}\r\n                                                                </p>\r\n                                                                <p className=\"text-[10px] text-muted-foreground flex items-center gap-1 uppercase tracking-tighter\">\r\n                                                                    <Clock className=\"w-3 h-3\" /> Originally â‚¹{item.amount.toLocaleString()} â€¢ Due: {item.dueDate}\r\n                                                                </p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"flex items-center gap-6 mt-4 md:mt-0\">\r\n                                                            <div className=\"text-right hidden md:block\">\r\n                                                                <p className={`text-[10px] uppercase tracking-widest font-bold ${netRemaining === 0 ? 'text-green-500' : 'text-muted-foreground'}`}>\r\n                                                                    {netRemaining === 0 ? 'PAID / COVERED' : 'Net Balance'}\r\n                                                                </p>\r\n                                                                <p className={`font-bold text-lg ${netRemaining === 0 ? 'text-green-400' : 'text-white'}`}>\r\n                                                                    â‚¹{netRemaining.toLocaleString()}\r\n                                                                </p>\r\n                                                            </div>\r\n                                                            <div className={`w-32 bg-black/40 rounded-xl border border-white/10 p-1 flex items-center px-3 gap-1 ${netRemaining === 0 ? 'opacity-20 cursor-not-allowed' : ''}`}>\r\n                                                                <span className=\"text-xs text-muted-foreground\">â‚¹</span>\r\n                                                                <input\r\n                                                                    type=\"text\"\r\n                                                                    value={paymentAmounts[item.id] || \"\"}\r\n                                                                    onChange={(e) => handleAmountChange(item.id, e.target.value, netRemaining)}\r\n                                                                    className=\"bg-transparent border-none outline-none text-sm font-bold w-full text-white\"\r\n                                                                    placeholder=\"0\"\r\n                                                                    disabled={!isSelected || netRemaining === 0}\r\n                                                                />\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                );\r\n                                            }) : <p className=\"p-8 text-center text-muted-foreground text-sm\">No term fees assigned or all paid.</p>;\r\n                                        })()}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Custom Fees */}\r\n                                {customFees.length > 0 && (\r\n                                    <div className=\"glass-panel rounded-3xl overflow-hidden border-white/5 shadow-2xl\">\r\n                                        <div className=\"bg-white/5 px-6 py-4 flex justify-between items-center border-b border-white/10\">\r\n                                            <h3 className=\"font-bold text-amber-500 tracking-wide uppercase text-xs\">Special & Custom Fees</h3>\r\n                                        </div>\r\n                                        <div className=\"p-2\">\r\n                                            {customFees.map((item: any) => {\r\n                                                const remaining = item.amount - (item.paidAmount || 0);\r\n                                                const isSelected = selectedItems.has(item.id);\r\n                                                return (\r\n                                                    <div key={item.id} className={`flex flex-col md:flex-row md:items-center justify-between p-4 rounded-2xl mb-2 transition-all ${isSelected ? 'bg-amber-500/10 border border-amber-500/20' : 'hover:bg-white/5 border border-transparent'}`}>\r\n                                                        <div className=\"flex items-center gap-4\">\r\n                                                            <Checkbox\r\n                                                                checked={isSelected}\r\n                                                                onCheckedChange={() => handleToggleItem(item.id, remaining)}\r\n                                                                disabled={remaining === 0}\r\n                                                                className=\"data-[state=checked]:bg-amber-500 data-[state=checked]:border-amber-500\"\r\n                                                            />\r\n                                                            <div>\r\n                                                                <p className=\"font-bold\">{item.name}</p>\r\n                                                                <p className=\"text-[10px] text-muted-foreground uppercase tracking-tighter\">Event / Special Fee</p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"flex items-center gap-6 mt-4 md:mt-0\">\r\n                                                            <div className=\"text-right hidden md:block\">\r\n                                                                <p className=\"text-[10px] text-muted-foreground uppercase tracking-widest\">Balance</p>\r\n                                                                <p className=\"font-bold text-lg\">â‚¹{remaining.toLocaleString()}</p>\r\n                                                            </div>\r\n                                                            <div className=\"w-32 bg-black/40 rounded-xl border border-white/10 p-1 flex items-center px-3 gap-1\">\r\n                                                                <span className=\"text-xs text-muted-foreground\">â‚¹</span>\r\n                                                                <input\r\n                                                                    type=\"text\"\r\n                                                                    value={paymentAmounts[item.id] || \"\"}\r\n                                                                    onChange={(e) => handleAmountChange(item.id, e.target.value, remaining)}\r\n                                                                    className=\"bg-transparent border-none outline-none text-sm font-bold w-full text-white\"\r\n                                                                    placeholder=\"0\"\r\n                                                                    disabled={!isSelected}\r\n                                                                />\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                );\r\n                                            })}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Right Column: Checkout Summary */}\r\n                <div className=\"lg:col-span-1\">\r\n                    {isLoading ? <Skeleton className=\"h-96 w-full rounded-3xl\" /> : (\r\n                        <div className=\"sticky top-8 space-y-6\">\r\n                            <div className=\"glass-panel p-8 rounded-3xl border-accent/20 shadow-[0_20px_50px_rgba(212,175,55,0.1)] relative overflow-hidden\">\r\n                                <div className=\"absolute -top-10 -left-10 w-40 h-40 bg-accent/10 rounded-full blur-3xl\" />\r\n\r\n                                <h2 className=\"text-xl font-bold mb-6 flex items-center gap-2\">\r\n                                    <CreditCard className=\"w-5 h-5 text-accent\" />\r\n                                    Payment Summary\r\n                                </h2>\r\n\r\n                                <div className=\"space-y-4 mb-8\">\r\n                                    <div className=\"space-y-2 p-4 bg-white/5 rounded-2xl border border-white/10\">\r\n                                        <div className=\"flex justify-between items-center text-[10px] text-muted-foreground uppercase tracking-widest font-bold\">\r\n                                            <span>Full Year Tuition</span>\r\n                                            <span>â‚¹{ledgerTotalFee.toLocaleString()}</span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between items-center text-[10px] text-green-400 uppercase tracking-widest font-bold\">\r\n                                            <span>Scholarship Applied</span>\r\n                                            <span>- â‚¹{ledgerTotalReductions.toLocaleString()}</span>\r\n                                        </div>\r\n                                        <div className=\"h-px bg-white/10 my-1\" />\r\n                                        <div className=\"flex justify-between items-center text-xs font-bold text-accent\">\r\n                                            <span>TOTAL PENDING FEE</span>\r\n                                            <span className=\"text-sm\">â‚¹{ledgerPendingFee.toLocaleString()}</span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"h-px bg-white/5 w-full\" />\r\n\r\n                                    <div className=\"space-y-2 pt-2\">\r\n                                        <p className=\"text-[10px] text-muted-foreground uppercase tracking-[0.2em] font-bold\">\r\n                                            {totalToPay > 0 ? \"Amount to Pay Now\" : \"Select items to pay\"}\r\n                                        </p>\r\n                                        <div className=\"flex items-baseline gap-2\">\r\n                                            <span className=\"text-xl font-medium text-accent\">â‚¹</span>\r\n                                            <p className=\"text-5xl font-bold font-display drop-shadow-2xl text-white\">\r\n                                                {Math.max(0, totalToPay).toLocaleString()}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <Button\r\n                                    onClick={handlePayment}\r\n                                    className=\"w-full h-16 bg-accent text-accent-foreground hover:bg-accent/90 rounded-2xl font-black text-xl shadow-[0_10px_30px_rgba(212,175,55,0.3)] group transition-all transform hover:-translate-y-1\"\r\n                                    disabled={totalToPay === 0 || isLoading}\r\n                                >\r\n                                    {isLoading ? (\r\n                                        <span className=\"animate-pulse\">PROCESSING...</span>\r\n                                    ) : (\r\n                                        <>\r\n                                            <CreditCard className=\"mr-2 group-hover:scale-125 transition-transform\" />\r\n                                            PROCEED TO PAY\r\n                                        </>\r\n                                    )}\r\n                                </Button>\r\n\r\n                                <p className=\"text-[9px] text-center text-muted-foreground mt-4 font-bold tracking-widest uppercase opacity-50\">\r\n                                    ðŸ”’ Secure Payment powered by Razorpay\r\n                                </p>\r\n                            </div>\r\n\r\n                            {/* Status Legend */}\r\n                            <div className=\"glass-panel p-6 rounded-3xl border-white/5 space-y-4\">\r\n                                <h3 className=\"text-xs font-bold text-muted-foreground uppercase tracking-widest\">Ledger Status</h3>\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <span className=\"text-sm font-medium\">Overall Status</span>\r\n                                    {paymentStatus === \"paid\" ? (\r\n                                        <div className=\"flex items-center gap-2 text-green-500 font-bold bg-green-500/10 px-4 py-2 rounded-xl text-xs\">\r\n                                            <CheckCircle className=\"w-4 h-4\" /> CLEAR\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"flex items-center gap-2 text-yellow-500 font-bold bg-yellow-500/10 px-4 py-2 rounded-xl text-xs\">\r\n                                            <Clock className=\"w-4 h-4\" /> PENDING\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}