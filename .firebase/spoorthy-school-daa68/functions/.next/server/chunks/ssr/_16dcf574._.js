module.exports=[99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(68114);let f=c.forwardRef(({className:a,variant:c="default",size:f="default",asChild:g=!1,...h},i)=>{let j=g?d.Slot:"button";return(0,b.jsx)(j,{className:(0,e.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===c,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===c,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===c,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===c,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===c,"text-primary underline-offset-4 hover:underline":"link"===c,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===c,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===c,"h-10 px-6 py-2":"default"===f,"h-9 px-4 text-xs":"sm"===f,"h-12 px-8 text-base":"lg"===f,"h-14 px-10 text-lg":"xl"===f,"h-10 w-10":"icon"===f},a),ref:i,...h})});f.displayName="Button",a.s(["Button",()=>f])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-white/60 font-medium",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},32860,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],32860)},25910,a=>{"use strict";let b=(0,a.i(70106).default)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);a.s(["PieChart",()=>b],25910)},25173,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(20237);a.i(69387);var f=a.i(60574),g=a.i(91119),h=a.i(96221),i=a.i(41675),j=a.i(25910),k=a.i(210),l=a.i(32860),m=a.i(99570),n=a.i(74016),o=a.i(77057),p=a.i(42724),q=a.i(56711),r=a.i(67638);function s(a,b,c){let d=(0,n.toDate)(a,c?.in);if(isNaN(b))return(0,p.constructFrom)(c?.in||a,NaN);if(!b)return d;let e=d.getDate(),f=(0,p.constructFrom)(c?.in||a,d.getTime());return(f.setMonth(d.getMonth()+b+1,0),e>=f.getDate())?f:(d.setFullYear(f.getFullYear(),f.getMonth(),e),d)}var t=a.i(46271);function u(){let a,u,v,{user:w}=(0,d.useAuth)(),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)({total:0,present:0,absent:0,percentage:0}),[B,C]=(0,c.useState)({}),[D,E]=(0,c.useState)(new Date);if((0,c.useEffect)(()=>{w&&(async()=>{try{let a=(0,f.query)((0,f.collection)(e.db,"students"),(0,f.where)("uid","==",w.uid)),b=await (0,f.getDocs)(a);if(b.empty){console.error("Student profile not found"),y(!1);return}let c=b.docs[0].data(),d=c.schoolId||b.docs[0].id,g=c.classId,h=c.sectionId;if(!g)return void y(!1);let i=(0,f.query)((0,f.collection)(e.db,"attendance"),(0,f.where)("classId","==",g),(0,f.where)("sectionId","==",h)),j=await (0,f.getDocs)(i),k={},l=0,m=0,n=0;j.forEach(a=>{let b=a.data(),c=b.records?.[d];c&&(k[b.date]=c,n++,"P"===c?l++:"A"===c&&m++)}),C(k),A({total:n,present:l,absent:m,percentage:n>0?Math.round(l/n*100):0})}catch(a){console.error(a)}finally{y(!1)}})()},[w]),x)return(0,b.jsx)("div",{className:"flex h-[50vh] items-center justify-center",children:(0,b.jsx)(h.Loader2,{className:"w-8 h-8 animate-spin text-emerald-500"})});let F=2*Math.PI*50,G=F-z.percentage/100*F,H=((a=(0,n.toDate)(D,void 0)).setDate(1),a.setHours(0,0,0,0),a),I=function(a,b){let{start:c,end:d}=function(a,b){let[c,d]=(0,o.normalizeDates)(a,b.start,b.end);return{start:c,end:d}}(void 0,a),e=+c>+d,f=e?+c:+d,g=e?d:c;g.setHours(0,0,0,0);let h=(void 0)??1;if(!h)return[];h<0&&(h=-h,e=!e);let i=[];for(;+g<=f;)i.push((0,p.constructFrom)(c,g)),g.setDate(g.getDate()+h),g.setHours(0,0,0,0);return e?i.reverse():i}({start:H,end:(v=(u=(0,n.toDate)(D,void 0)).getMonth(),u.setFullYear(u.getFullYear(),v+1,0),u.setHours(23,59,59,999),u)}),J=Array((0,n.toDate)(H,void 0).getDay()).fill(null);return(0,b.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 animate-in fade-in duration-500 pb-10",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-blue-500",children:"My Attendance"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track your comprehensive attendance record."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsxs)(g.Card,{className:"bg-white/5 border-white/10 backdrop-blur-sm",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-muted-foreground uppercase tracking-widest",children:"Attendance Rate"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"text-4xl font-bold text-white flex items-baseline gap-2",children:[z.percentage,"%",(0,b.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:"Total"})]})})]}),(0,b.jsxs)(g.Card,{className:"bg-white/5 border-white/10 backdrop-blur-sm",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-emerald-400 uppercase tracking-widest",children:"Present Days"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"text-4xl font-bold text-white",children:z.present})})]}),(0,b.jsxs)(g.Card,{className:"bg-white/5 border-white/10 backdrop-blur-sm",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-red-400 uppercase tracking-widest",children:"Absent Days"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"text-4xl font-bold text-white",children:z.absent})})]}),(0,b.jsxs)(g.Card,{className:"bg-white/5 border-white/10 backdrop-blur-sm",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-blue-400 uppercase tracking-widest",children:"Total Working Days"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"text-4xl font-bold text-white",children:z.total})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)(g.Card,{className:"lg:col-span-2 bg-black/40 border-white/10 backdrop-blur-md",children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between pb-4",children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Calendar,{className:"w-5 h-5 text-emerald-400"}),(0,q.format)(D,"MMMM yyyy")]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(m.Button,{variant:"outline",size:"icon",onClick:()=>E(s(D,-1,void 0)),className:"h-8 w-8 bg-black/50 border-white/20 hover:bg-white/10",children:(0,b.jsx)(k.ArrowLeft,{className:"w-4 h-4"})}),(0,b.jsx)(m.Button,{variant:"outline",size:"icon",onClick:()=>E(s(D,1)),className:"h-8 w-8 bg-black/50 border-white/20 hover:bg-white/10",children:(0,b.jsx)(l.ArrowRight,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"grid grid-cols-7 mb-2 text-center",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,b.jsx)("div",{className:"text-[10px] uppercase font-bold text-muted-foreground py-2",children:a},a))}),(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[J.map((a,c)=>(0,b.jsx)("div",{className:"aspect-square"},`empty-${c}`)),I.map(a=>{let c=(0,q.format)(a,"yyyy-MM-dd"),d=B[c],e=function(a,b,c){let[d,e]=(0,o.normalizeDates)(void 0,a,b);return+(0,r.startOfDay)(d)==+(0,r.startOfDay)(e)}(a,new Date);return(0,b.jsxs)("div",{className:`
                                            aspect-square rounded-lg flex items-center justify-center text-sm font-bold relative group border transition-all
                                            ${"P"===d?"bg-emerald-500/10 border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/20":"A"===d?"bg-red-500/10 border-red-500/30 text-red-400 hover:bg-red-500/20":"bg-white/5 border-white/5 text-muted-foreground hover:bg-white/10"}
                                            ${e?"ring-2 ring-blue-500 ring-offset-2 ring-offset-black":""}
                                        `,children:[(0,q.format)(a,"d"),d&&(0,b.jsx)("div",{className:"absolute inset-x-0 -bottom-8 bg-black/90 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none text-center border border-white/10",children:"P"===d?"Present":"Absent"})]},c)})]})]})]}),(0,b.jsxs)(g.Card,{className:"bg-black/40 border-white/10 backdrop-blur-md flex flex-col",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.PieChart,{className:"w-5 h-5 text-purple-400"})," Check Analytics"]})}),(0,b.jsxs)(g.CardContent,{className:"flex-1 flex flex-col items-center justify-center py-8",children:[(0,b.jsxs)("div",{className:"relative w-64 h-64",children:[(0,b.jsxs)("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 120 120",children:[(0,b.jsx)("circle",{cx:"60",cy:"60",r:50,fill:"transparent",stroke:"rgba(239, 68, 68, 0.2)",strokeWidth:"12"}),(0,b.jsx)(t.motion.circle,{cx:"60",cy:"60",r:50,fill:"transparent",stroke:"#10b981",strokeWidth:"12",strokeDasharray:F,strokeDashoffset:G,strokeLinecap:"round",initial:{strokeDashoffset:F},animate:{strokeDashoffset:G},transition:{duration:1.5,ease:"easeOut"}})]}),(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,b.jsxs)("span",{className:"text-4xl font-bold text-white",children:[z.percentage,"%"]}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:"Attendance"})]})]}),(0,b.jsxs)("div",{className:"mt-8 grid grid-cols-2 gap-4 w-full px-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground uppercase",children:"Present"}),(0,b.jsxs)("div",{className:"font-bold text-emerald-400",children:[z.present," Days"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground uppercase",children:"Absent"}),(0,b.jsxs)("div",{className:"font-bold text-red-400",children:[z.absent," Days"]})]})]})]})]})]})]})]})}a.s(["default",()=>u],25173)}];

//# sourceMappingURL=_16dcf574._.js.map