module.exports=[98189,a=>{"use strict";var b=a.i(87924),c=a.i(31626),d=a.i(72131),e=a.i(56025);a.i(69387);var f=a.i(60574),g=a.i(20237),h=a.i(91410),i=a.i(99570),j=a.i(96221),k=a.i(71931),l=a.i(73570);function m({params:a}){let{id:m}=(0,d.use)(a),{user:n}=(0,e.useAuth)(),{classes:o,subjects:p,branding:q}=(0,h.useMasterData)(),[r,s]=(0,d.useState)(!0),[t,u]=(0,d.useState)(!1),[v,w]=(0,d.useState)(null);(0,d.useEffect)(()=>{n&&x()},[n,m]);let x=async()=>{try{if(!n?.uid)return;let a=(0,f.query)((0,f.collection)(g.db,"students"),(0,f.where)("uid","==",n.uid)),b=await (0,f.getDocs)(a);if(b.empty)return void s(!1);let c={id:b.docs[0].id,...b.docs[0].data()},d=c.schoolId||c.id,e=(0,f.doc)(g.db,"student_fee_ledgers",`${d}_2025-2026`),h=await (0,f.getDoc)(e),i=0;if(h.exists()&&(i=(h.data().items||[]).reduce((a,b)=>a+(b.amount-(b.paidAmount||0)),0)),i>0){u(!0),s(!1);return}let j=await (0,f.getDoc)((0,f.doc)(g.db,"exams",m));if(!j.exists())return void s(!1);let k={id:j.id,...j.data()},l=c.classId,o=k.timetables?.[l]||{},p=Object.entries(o).map(([a,b])=>({subId:a,...b})).filter(a=>a.date&&a.startTime).sort((a,b)=>new Date(a.date+"T"+a.startTime).getTime()-new Date(b.date+"T"+b.startTime).getTime());w({exam:k,student:c,schedule:p}),document.title=`HallTicket_${c.studentName}_${k.name}`.replace(/\s+/g,"_")}catch(a){console.error(a)}finally{s(!1)}};if(r)return(0,b.jsx)("div",{className:"flex justify-center h-screen items-center bg-gray-50",children:(0,b.jsx)(j.Loader2,{className:"animate-spin text-blue-600 w-8 h-8"})});if(t)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-50 text-center p-8",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center text-red-500 mb-4",children:(0,b.jsx)(l.AlertTriangle,{className:"w-8 h-8"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Access Denied"}),(0,b.jsx)("p",{className:"text-gray-500 mt-2 max-w-md",children:"Hall Ticket access is restricted due to pending fee dues. Please clear your outstanding balance to download your hall ticket."}),(0,b.jsx)(i.Button,{className:"mt-6",variant:"outline",onClick:()=>window.close(),children:"Close Window"})]});if(!v)return(0,b.jsx)("div",{className:"p-10 text-center",children:"Exam not found or schedule not released."});let{exam:y,student:z,schedule:A}=v,B=o[z.classId]?.name||`Class ${z.classId}`;return(0,b.jsxs)("div",{className:"jsx-36169a6672643368 bg-gray-100 min-h-screen py-4 md:py-8 print:bg-white print:p-0 font-sans",children:[(0,b.jsxs)("div",{className:"jsx-36169a6672643368 max-w-5xl mx-auto px-0 md:px-4",children:[(0,b.jsxs)("div",{className:"jsx-36169a6672643368 print:hidden p-4 border-b flex flex-col md:flex-row justify-between items-center bg-white rounded-t-xl gap-4 sticky top-0 z-50 shadow-sm mx-4 md:mx-0",children:[(0,b.jsxs)("div",{className:"jsx-36169a6672643368 text-center md:text-left",children:[(0,b.jsx)("div",{className:"jsx-36169a6672643368 font-bold text-gray-800 text-lg md:text-xl",children:"Hall Ticket Preview"}),(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[10px] uppercase font-black tracking-widest text-blue-600/60 md:hidden mt-0.5",children:"Swipe left/right to view full ticket"})]}),(0,b.jsxs)(i.Button,{onClick:()=>window.print(),className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/20 font-bold px-8 h-11",children:[(0,b.jsx)(k.Printer,{className:"mr-2 h-5 w-5"})," PRINT NOW"]})]}),(0,b.jsx)("div",{className:"jsx-36169a6672643368 overflow-x-auto pb-10 pt-4 md:pt-0",children:(0,b.jsx)("div",{className:"jsx-36169a6672643368 min-w-[850px] md:min-w-0 md:max-w-[210mm] mx-auto bg-white shadow-2xl print:shadow-none mb-8 print:mb-0 relative border-[1pt] border-gray-200 print:border-none",children:(0,b.jsx)("div",{className:"jsx-36169a6672643368 p-8 print:p-0 min-h-[297mm] flex flex-col",children:(0,b.jsxs)("div",{className:"jsx-36169a6672643368 flex-1 relative border-[3pt] border-double border-[#1e40af] p-8 flex flex-col bg-white overflow-hidden shadow-sm",children:[(0,b.jsx)("div",{className:"jsx-36169a6672643368 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-[0.03] pointer-events-none rotate-[-35deg] select-none z-0",children:(0,b.jsx)("h1",{className:"jsx-36169a6672643368 text-[120pt] font-black uppercase text-[#1e40af]",children:"OFFICIAL"})}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368 relative z-10 flex items-center gap-8 border-b-[1.5pt] border-[#1e40af] pb-6 mb-8",children:[(0,b.jsx)("div",{className:"jsx-36169a6672643368 w-24 h-24 flex items-center justify-center",children:q?.schoolLogo?(0,b.jsx)("img",{src:q.schoolLogo,alt:"Logo",className:"jsx-36169a6672643368 max-h-full max-w-full object-contain"}):(0,b.jsx)("div",{className:"jsx-36169a6672643368 w-full h-full bg-gray-50 border border-dashed border-gray-300 flex items-center justify-center text-[10px] text-gray-400",children:"LOGO"})}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368 flex-1",children:[(0,b.jsx)("h1",{className:"jsx-36169a6672643368 text-[24pt] font-black uppercase tracking-tight text-[#1e3a8a] leading-none mb-1",children:q?.schoolName||"SPOORTHY CONCEPT SCHOOL"}),(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[9pt] font-bold uppercase tracking-[2px] text-blue-900/60 mb-3",children:"Recognition of Govt. of Telangana (Affiliated)"}),(0,b.jsx)("div",{className:"jsx-36169a6672643368 inline-flex items-center gap-2 bg-[#1e40af] text-white px-6 py-1.5 rounded-sm font-black text-xs uppercase tracking-widest shadow-lg",children:y.name})]}),(0,b.jsx)("div",{className:"jsx-36169a6672643368 w-28 h-32 border border-[#1e40af]/20 bg-gray-50 rounded-sm overflow-hidden flex items-center justify-center",children:z.photoUrl?(0,b.jsx)("img",{src:z.photoUrl,alt:"Photo",className:"jsx-36169a6672643368 w-full h-full object-cover"}):(0,b.jsxs)("div",{className:"jsx-36169a6672643368 flex flex-col items-center gap-1",children:[(0,b.jsx)("div",{className:"jsx-36169a6672643368 w-8 h-8 rounded-full bg-gray-200 border border-gray-300"}),(0,b.jsx)("span",{className:"jsx-36169a6672643368 text-[8px] font-bold text-gray-400",children:"PASTE PHOTO"})]})})]}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368 relative z-10 grid grid-cols-3 gap-6 mb-8 bg-gray-50/50 p-6 rounded-lg border border-gray-100",children:[(0,b.jsxs)("div",{className:"jsx-36169a6672643368 col-span-2 grid grid-cols-2 gap-y-4 gap-x-8",children:[(0,b.jsxs)("div",{className:"jsx-36169a6672643368",children:[(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[8pt] font-black uppercase tracking-widest text-slate-500 mb-0.5",children:"Full Name"}),(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[13pt] font-black text-slate-900 border-b border-slate-200 pb-1",children:z.studentName.toUpperCase()})]}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368",children:[(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[8pt] font-black uppercase tracking-widest text-slate-500 mb-0.5",children:"School Code / UID"}),(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[13pt] font-black text-slate-900 border-b border-slate-200 pb-1",children:z.schoolId})]}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368",children:[(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[8pt] font-black uppercase tracking-widest text-slate-500 mb-0.5",children:"Class Designation"}),(0,b.jsxs)("p",{className:"jsx-36169a6672643368 text-[13pt] font-black text-slate-900 border-b border-slate-200 pb-1",children:[B," ",z.sectionId?`(${z.sectionId})`:""]})]}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368",children:[(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[8pt] font-black uppercase tracking-widest text-slate-500 mb-0.5",children:"Roll Identity"}),(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[13pt] font-black text-slate-900 border-b border-slate-200 pb-1",children:z.rollNo||"___"})]})]}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368 border-l border-slate-200 pl-6 flex flex-col justify-center gap-3",children:[(0,b.jsxs)("div",{className:"jsx-36169a6672643368 bg-white p-3 border border-slate-100 rounded shadow-sm",children:[(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[7pt] font-black uppercase tracking-widest text-slate-400",children:"Exam Center"}),(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-sm font-bold text-slate-800",children:"SCS-Siddipet Node"})]}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"jsx-36169a6672643368 flex-1 h-8 bg-white border border-slate-100 rounded flex items-center justify-center",children:(0,b.jsx)("div",{className:"jsx-36169a6672643368 w-full h-full opacity-20 bg-repeat-x flex items-center gap-1 overflow-hidden px-2",children:Array.from({length:20}).map((a,c)=>(0,b.jsx)("div",{className:"jsx-36169a6672643368 w-1 h-6 bg-black flex-shrink-0"},c))})}),(0,b.jsx)("span",{className:"jsx-36169a6672643368 text-[7pt] font-black text-slate-400 rotate-90",children:"ID-AUTH"})]})]})]}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368 relative z-10 flex-1 mb-8",children:[(0,b.jsxs)("div",{className:"jsx-36169a6672643368 flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"jsx-36169a6672643368 h-[1pt] bg-slate-200 flex-1"}),(0,b.jsx)("span",{className:"jsx-36169a6672643368 text-[8pt] font-black uppercase tracking-[3px] text-slate-400",children:"Examination Schedule"}),(0,b.jsx)("div",{className:"jsx-36169a6672643368 h-[1pt] bg-slate-200 flex-1"})]}),(0,b.jsxs)("table",{className:"jsx-36169a6672643368 w-full border-collapse rounded-xl overflow-hidden border border-slate-200",children:[(0,b.jsx)("thead",{className:"jsx-36169a6672643368",children:(0,b.jsxs)("tr",{className:"jsx-36169a6672643368 bg-slate-900 text-white",children:[(0,b.jsx)("th",{className:"jsx-36169a6672643368 p-3 text-xs font-black uppercase tracking-widest w-32 border-r border-white/10",children:"Date"}),(0,b.jsx)("th",{className:"jsx-36169a6672643368 p-3 text-xs font-black uppercase tracking-widest w-24 border-r border-white/10",children:"Day"}),(0,b.jsx)("th",{className:"jsx-36169a6672643368 p-3 text-xs font-black uppercase tracking-widest w-40 border-r border-white/10",children:"Session Time"}),(0,b.jsx)("th",{className:"jsx-36169a6672643368 p-3 text-xs font-black uppercase tracking-widest text-left pl-6",children:"Subject Code & Particulars"}),(0,b.jsx)("th",{className:"jsx-36169a6672643368 p-3 text-xs font-black uppercase tracking-widest w-32",children:"Invig-Auth"})]})}),(0,b.jsxs)("tbody",{className:"jsx-36169a6672643368 bg-white",children:[A.map((a,c)=>{let d=new Date(a.date),e=d.toLocaleDateString("en-US",{weekday:"long"});return(0,b.jsxs)("tr",{className:"jsx-36169a6672643368 "+((c%2==0?"bg-white":"bg-slate-50/50")||""),children:[(0,b.jsx)("td",{className:"jsx-36169a6672643368 p-3 border-r border-slate-100 text-center font-black text-sm text-slate-900",children:d.toLocaleDateString()}),(0,b.jsx)("td",{className:"jsx-36169a6672643368 p-3 border-r border-slate-100 text-center uppercase text-[9px] font-black text-slate-500",children:e}),(0,b.jsxs)("td",{className:"jsx-36169a6672643368 p-3 border-r border-slate-100 text-center font-bold text-xs text-slate-700",children:[a.startTime," - ",a.endTime]}),(0,b.jsx)("td",{className:"jsx-36169a6672643368 p-3 pl-6 border-r border-slate-100",children:(0,b.jsxs)("div",{className:"jsx-36169a6672643368 flex flex-col",children:[(0,b.jsx)("span",{className:"jsx-36169a6672643368 text-xs font-black text-[#1e3a8a] uppercase",children:p[a.subId]?.name||a.subId}),(0,b.jsxs)("span",{className:"jsx-36169a6672643368 text-[8px] font-bold text-slate-400 tracking-wider",children:["CODE: ",a.subId.substring(0,6).toUpperCase()]})]})}),(0,b.jsx)("td",{className:"jsx-36169a6672643368 p-0 border-slate-100",children:(0,b.jsx)("div",{className:"jsx-36169a6672643368 h-10 w-full flex items-center justify-center opacity-10",children:(0,b.jsx)("span",{className:"jsx-36169a6672643368 text-[6pt] italic font-serif",children:"Verification Pending"})})})]},a.subId)}),0===A.length&&(0,b.jsx)("tr",{className:"jsx-36169a6672643368",children:(0,b.jsx)("td",{colSpan:5,className:"jsx-36169a6672643368 p-12 text-center italic text-slate-400 font-bold bg-slate-50/30",children:"No official schedule detected for this class assignment."})})]})]})]}),(0,b.jsxs)("div",{className:"jsx-36169a6672643368 relative z-10 pt-8 border-t-2 border-[#1e40af] flex justify-between items-end gap-10",children:[(0,b.jsxs)("div",{className:"jsx-36169a6672643368 flex-1 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,b.jsxs)("h4",{className:"jsx-36169a6672643368 text-[9pt] font-black uppercase tracking-wider text-slate-900 mb-2 border-b border-slate-300 pb-1 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"jsx-36169a6672643368 w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),"Administrative Protocol"]}),(0,b.jsxs)("ul",{className:"jsx-36169a6672643368 text-[8pt] text-slate-600 font-medium space-y-1.5 leading-tight",children:[(0,b.jsxs)("li",{className:"jsx-36169a6672643368 flex gap-2",children:[(0,b.jsx)("span",{className:"jsx-36169a6672643368",children:"1."}),(0,b.jsx)("span",{className:"jsx-36169a6672643368",children:"Official Hall Ticket must be presented for authentication at the exam portal."})]}),(0,b.jsxs)("li",{className:"jsx-36169a6672643368 flex gap-2",children:[(0,b.jsx)("span",{className:"jsx-36169a6672643368",children:"2."}),(0,b.jsx)("span",{className:"jsx-36169a6672643368",children:"Candidates must report to the tactical center 15 minutes before launch."})]}),(0,b.jsxs)("li",{className:"jsx-36169a6672643368 flex gap-2",children:[(0,b.jsx)("span",{className:"jsx-36169a6672643368",children:"3."}),(0,b.jsx)("span",{className:"jsx-36169a6672643368",children:"Unauthorized electronic hardware or communication nodes are prohibited."})]}),(0,b.jsxs)("li",{className:"jsx-36169a6672643368 flex gap-2",children:[(0,b.jsx)("span",{className:"jsx-36169a6672643368",children:"4."}),(0,b.jsx)("span",{className:"jsx-36169a6672643368",children:"Any breach of protocol will result in immediate session termination."})]})]})]}),(0,b.jsx)("div",{className:"jsx-36169a6672643368 w-[200px] flex flex-col items-center gap-4",children:(0,b.jsxs)("div",{className:"jsx-36169a6672643368 relative w-full flex flex-col items-center",children:[q?.principalSignature&&(0,b.jsx)("img",{src:q.principalSignature,alt:"Sign",className:"jsx-36169a6672643368 h-14 absolute -top-10 object-contain pointer-events-none"}),(0,b.jsx)("div",{className:"jsx-36169a6672643368 w-full h-[1pt] bg-slate-900 mb-2 shadow-sm"}),(0,b.jsx)("p",{className:"jsx-36169a6672643368 font-black text-[9pt] uppercase tracking-[2px] text-slate-900",children:"Principal Signature"}),(0,b.jsx)("p",{className:"jsx-36169a6672643368 text-[6pt] font-black text-slate-400 mt-0.5 uppercase tracking-widest",children:"Spoorthy Academic Node"})]})})]})]})})})})]}),(0,b.jsx)(c.default,{id:"36169a6672643368",children:"@media print{@page{margin:0;size:A4}body{-webkit-print-color-adjust:exact;print-color-adjust:exact;background:#fff}.print\\\\:hidden{display:none!important}.print\\\\:p-0{padding:0!important}.print\\\\:mb-0{margin-bottom:0!important}.print\\\\:shadow-none{box-shadow:none!important}}"})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=src_app_student_exams_%5Bid%5D_hall-ticket_page_tsx_4eb4d312._.js.map