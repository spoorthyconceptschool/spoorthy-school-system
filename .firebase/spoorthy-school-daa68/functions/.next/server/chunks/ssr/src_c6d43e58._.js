module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-white/60 font-medium",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},62594,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(91119);a.i(69387);var f=a.i(60574),g=a.i(20237);function h(){let{user:a}=(0,d.useAuth)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{a?.uid&&(async()=>{try{let b=(0,f.collection)(g.db,"students"),c=(0,f.query)(b,(0,f.where)("uid","==",a.uid)),d=await (0,f.getDocs)(c);d.empty||k(d.docs[0].data().classId||"NONE")}catch(a){console.error("Error fetching student profile:",a)}})()},[a]),(0,c.useEffect)(()=>{if(!a?.uid||null===j)return;let b=!0,c=l?(0,f.query)((0,f.collection)(g.db,"notices"),(0,f.where)("target","in",["ALL","STUDENTS",j])):(0,f.query)((0,f.collection)(g.db,"notices"),(0,f.where)("target","in",["ALL","STUDENTS",j]),(0,f.orderBy)("createdAt","desc")),d=(0,f.onSnapshot)(c,a=>{if(!b)return;let c=Date.now(),d=a.docs.map(a=>({id:a.id,...a.data()})).filter(a=>!a.expiresAt||1e3*a.expiresAt.seconds>c);l&&(d=d.sort((a,b)=>(b.createdAt?.seconds||0)-(a.createdAt?.seconds||0))),i(d)},a=>{b&&(a.message.includes("index")&&!l?(console.warn("[Notices] Index missing, switching to fallback query."),m(!0)):a.message.includes("index")||console.error("Notice listener error:",a))});return()=>{b=!1,d()}},[a,j,l]),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6 animate-in fade-in",children:[(0,b.jsx)("h1",{className:"text-3xl font-display font-bold",children:"Inbox"}),(0,b.jsx)("div",{className:"space-y-4",children:0===h.length?(0,b.jsx)("p",{className:"text-muted-foreground",children:"No active notices."}):h.map(a=>(0,b.jsx)(e.Card,{className:"bg-black/20 border-white/10",children:(0,b.jsxs)(e.CardContent,{className:"p-5",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsx)("div",{className:"space-y-1",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"font-bold text-lg",children:a.title}),"HOLIDAY"===a.type&&(0,b.jsx)("span",{className:"text-[10px] bg-yellow-500/20 text-yellow-500 px-2 py-0.5 rounded-full font-bold",children:"HOLIDAY"})]})}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:(a=>{if(!a)return"";let b=new Date(1e3*a.seconds),c=Date.now()-b.getTime();if(c<6e4)return"Just now";if(c<36e5){let a=Math.floor(c/6e4);return`${a} min ago`}if(c<864e5){let a=Math.floor(c/36e5);return`${a} hour${a>1?"s":""} ago`}return b.toLocaleDateString()})(a.createdAt)})]}),(0,b.jsx)("p",{className:"text-sm leading-relaxed",children:a.content}),(0,b.jsxs)("div",{className:"mt-3 text-xs text-muted-foreground",children:["From: ",a.senderName," (",a.senderRole,")"]})]})},a.id))})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=src_c6d43e58._.js.map