module.exports=[54253,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(80701);a.i(69387);var g=a.i(60574),h=a.i(20237),i=a.i(96221),j=a.i(84505),k=a.i(87532),l=a.i(67453),m=a.i(14574),n=a.i(70430),o=a.i(29246),p=a.i(90166),q=a.i(56025);function r({isOpen:a,onClose:g,employee:h,payment:j,paidAmount:k=0,leavesCount:l=0,defaultMonth:r,defaultYear:s,onSuccess:t}){let{user:u}=(0,q.useAuth)(),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)({month:new Date().toLocaleString("default",{month:"long"}),year:new Date().getFullYear().toString(),amount:"",deductions:"",bonuses:"",method:"CASH",notes:"",type:"SALARY"}),[z,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(h&&a)if(j)y({month:j.month,year:j.year,amount:j.baseAmount?.toString()||j.amount?.toString()||"",deductions:j.deductions?.toString()||"0",bonuses:j.bonuses?.toString()||"0",method:j.method||"CASH",notes:j.notes||"",type:j.type||"SALARY"});else{let a=Math.max(0,(h.baseSalary||0)-k);y({month:r||new Date().toLocaleString("default",{month:"long"}),year:s||new Date().getFullYear().toString(),amount:a>0?a.toString():"",deductions:"",bonuses:"",method:"CASH",notes:"",type:"SALARY"})}},[h,j,k,a,r,s]);let B=async()=>{if(h){w(!0);try{let a=Number(x.amount);if(!a&&0!==a)throw Error("Base Amount is required");let b=await u?.getIdToken(),c=await fetch("/api/admin/payroll/process",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({paymentId:j?.id,personId:h.id,personType:h.personType,...x,amount:a,deductions:Number(x.deductions)||0,bonuses:Number(x.bonuses)||0,leavesCount:l})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to process payment");alert(j?"Payment Updated Successfully!":"Payment Recorded Successfully!"),t(),g()}catch(a){console.error(a),alert(a.message)}finally{w(!1)}}},C=async()=>{if(j?.id&&confirm("Are you sure you want to delete this payment record?")){A(!0);try{let a=await u?.getIdToken();if(!(await fetch("/api/admin/payroll/delete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({paymentId:j.id})})).ok)throw Error("Failed to delete payment");alert("Payment Record Deleted"),t(),g()}catch(a){alert(a.message)}finally{A(!1)}}};if(!h)return null;let D=Number(x.amount)||0,E=Number(x.deductions)||0,F=Number(x.bonuses)||0;return(0,b.jsx)(m.Dialog,{open:a,onOpenChange:a=>{a||g()},children:(0,b.jsxs)(m.DialogContent,{className:"bg-black/95 border-white/10 text-white sm:max-w-[500px]",children:[(0,b.jsx)(m.DialogHeader,{className:"pb-2 border-b border-white/5",children:(0,b.jsxs)(m.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-emerald-500/20 flex items-center justify-center",children:(0,b.jsx)(p.DollarSign,{className:"w-4 h-4 text-emerald-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{children:j?"Edit Payment":"Add Payment"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground font-normal",children:h.name})]})]})}),(0,b.jsx)("div",{className:"max-h-[70vh] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-white/10",children:(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsx)("div",{className:"flex bg-black/40 p-1 rounded-lg border border-white/10 items-center gap-1",children:["SALARY","BONUS","ADVANCE","ADJUSTMENT"].map(a=>(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>y({...x,type:a}),className:`flex-1 text-[10px] h-7 px-1 ${x.type===a?"bg-emerald-500/20 text-emerald-400":"text-muted-foreground hover:bg-white/5"}`,children:a},a))}),!j&&(0,b.jsx)("div",{className:"bg-gradient-to-br from-emerald-500/10 to-blue-500/10 p-4 rounded-xl border border-white/10 shadow-inner",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-y-2 text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Base Salary"}),(0,b.jsxs)("span",{className:"text-right font-mono",children:["₹",Number(h.baseSalary||0).toLocaleString()]}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"Already Paid"}),(0,b.jsxs)("span",{className:"text-right font-mono text-emerald-400",children:["- ₹",k.toLocaleString()]}),(0,b.jsxs)("div",{className:"col-span-2 pt-2 mt-1 border-t border-white/10 flex justify-between items-end",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Remaining"}),(0,b.jsxs)("span",{className:"text-lg font-bold text-orange-400 leading-tight",children:["₹",Math.max(0,(h.baseSalary||0)-k).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"text-right flex flex-col items-end",children:[(0,b.jsxs)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:["Leaves (",x.month,")"]}),(0,b.jsxs)("span",{className:`text-sm font-bold ${l>0?"text-red-400":"text-emerald-400"}`,children:[l," Days"]})]})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Month"}),(0,b.jsxs)(f.Select,{value:x.month,onValueChange:a=>y({...x,month:a}),children:[(0,b.jsx)(f.SelectTrigger,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Year"}),(0,b.jsx)(e.Input,{value:x.year,onChange:a=>y({...x,year:a.target.value}),className:"bg-white/5 border-white/10"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Base Salary Amount (₹)"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(p.DollarSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(e.Input,{type:"number",value:x.amount,onChange:a=>y({...x,amount:a.target.value}),className:"pl-9 bg-white/5 border-white/10",placeholder:h.baseSalary?h.baseSalary.toString():"0"})]}),h.baseSalary?(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Default Base: ₹",h.baseSalary.toLocaleString()]}):null]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{className:"text-red-400",children:"Deductions (₹)"}),(0,b.jsx)(e.Input,{type:"number",value:x.deductions,onChange:a=>y({...x,deductions:a.target.value}),className:"bg-white/5 border-white/10 text-red-400",placeholder:"0"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{className:"text-emerald-400",children:"Bonuses / Adds (₹)"}),(0,b.jsx)(e.Input,{type:"number",value:x.bonuses,onChange:a=>y({...x,bonuses:a.target.value}),className:"bg-white/5 border-white/10 text-emerald-400",placeholder:"0"})]})]}),(0,b.jsx)("div",{className:"space-y-2 bg-slate-900 border border-slate-800 p-3 rounded",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-xs uppercase text-slate-400",children:"Net Pay"}),(0,b.jsxs)("span",{className:"text-xl font-bold font-mono",children:["₹",(D-E+F).toLocaleString()]})]})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Payment Mode"}),(0,b.jsxs)(f.Select,{value:x.method,onValueChange:a=>y({...x,method:a}),children:[(0,b.jsx)(f.SelectTrigger,{className:"bg-white/5 border-white/10",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"CASH",children:"Cash"}),(0,b.jsx)(f.SelectItem,{value:"UPI",children:"UPI / Online"}),(0,b.jsx)(f.SelectItem,{value:"CHEQUE",children:"Cheque"}),(0,b.jsx)(f.SelectItem,{value:"BANK_TRANSFER",children:"Bank Transfer"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{className:"text-xs text-muted-foreground",children:"Notes (Reason for adjustments)"}),(0,b.jsx)(o.Textarea,{value:x.notes,onChange:a=>y({...x,notes:a.target.value}),className:"bg-white/5 border-white/10 h-16 text-sm",placeholder:"e.g. Overtime adjustment, Leave deduction..."})]})]})}),(0,b.jsxs)(m.DialogFooter,{className:"pt-4 border-t border-white/5 flex flex-row items-center justify-between gap-2",children:[j?(0,b.jsxs)(d.Button,{variant:"destructive",size:"sm",onClick:C,disabled:z||v,className:"bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white border-red-500/20",children:[z&&(0,b.jsx)(i.Loader2,{className:"w-3 h-3 mr-2 animate-spin"}),"Delete"]}):(0,b.jsx)("div",{}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(d.Button,{onClick:g,variant:"ghost",className:"text-muted-foreground hover:text-white",children:"Cancel"}),(0,b.jsxs)(d.Button,{onClick:B,disabled:v||z,className:"bg-green-600 hover:bg-green-700 text-white",children:[v&&(0,b.jsx)(i.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),j?"Update Payment":"Confirm Payment"]})]})]})]})})}var s=a.i(89402),t=a.i(86304),u=a.i(91410),v=a.i(68114);function w(){let{branding:a}=(0,u.useMasterData)(),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)([]),[q,w]=(0,c.useState)([]),[x,y]=(0,c.useState)({}),[z,A]=(0,c.useState)(new Date().toLocaleString("default",{month:"long"})),[B,C]=(0,c.useState)(new Date().getFullYear().toString()),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)("ALL"),[H,I]=(0,c.useState)("ALL"),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(0),[P,Q]=(0,c.useState)(!1);(0,c.useEffect)(()=>{R()},[z,B]);let R=async()=>{n(!0);try{let a=(await (0,g.getDocs)((0,g.query)((0,g.collection)(h.db,"teachers"),(0,g.where)("status","==","ACTIVE")))).docs.map(a=>{let b=a.data();return{id:a.id,...b,personType:"TEACHER",roleDisplay:"Teacher",baseSalary:b.baseSalary||b.salary}}),b=(await (0,g.getDocs)((0,g.collection)(h.db,"staff"))).docs.map(a=>{let b=a.data();return{id:a.id,...b,personType:"STAFF",roleDisplay:b.roleName||"Staff",baseSalary:b.baseSalary||b.salary}}),c=[...a,...b].sort((a,b)=>a.name.localeCompare(b.name));p(c);let d=(0,g.query)((0,g.collection)(h.db,"salary_payments"),(0,g.where)("month","==",z),(0,g.where)("year","==",B)),e=(await (0,g.getDocs)(d)).docs.map(a=>({id:a.id,...a.data()}));w(e);let f=new Date(`${z} 1, 2000`).getMonth()+1,i=String(f).padStart(2,"0"),j=`${B}-${i}-01`,k=`${B}-${i}-31`,l=(0,g.query)((0,g.collection)(h.db,"attendance"),(0,g.where)((0,g.documentId)(),">=",`TEACHERS_${j}`),(0,g.where)((0,g.documentId)(),"<=",`TEACHERS_${k}`)),m=await (0,g.getDocs)(l),n={};m.forEach(a=>{let b=a.data();b.records&&Object.entries(b.records).forEach(([a,b])=>{"A"===b&&(n[a]=(n[a]||0)+1)})});let o=(0,g.query)((0,g.collection)(h.db,"attendance"),(0,g.where)((0,g.documentId)(),">=",`STAFF_${j}`),(0,g.where)((0,g.documentId)(),"<=",`STAFF_${k}`));(await (0,g.getDocs)(o)).forEach(a=>{let b=a.data();b.records&&Object.entries(b.records).forEach(([a,b])=>{"A"===b&&(n[a]=(n[a]||0)+1)})}),y(n)}catch(a){console.error("Error fetching payroll data:",a)}finally{n(!1)}},S=a=>q.filter(b=>b.personId===a),T=(a,b,c=0)=>{K(a),M(b||null),O(c),Q(!0)},U=o.filter(a=>{let b=a.name.toLowerCase().includes(D.toLowerCase())||a.schoolId&&a.schoolId.toLowerCase().includes(D.toLowerCase()),c="ALL"===F||a.personType===F,d=S(a.id),e=d.reduce((a,b)=>a+(Number(b.amount)||0),0),f=d.reduce((a,b)=>a+(Number(b.deductions)||0),0),g=(a.baseSalary||0)>0&&e+f>=(a.baseSalary||0),h="ALL"===H||"PAID"===H&&g||"UNPAID"===H&&!g;return b&&c&&h}),V=q.reduce((a,b)=>a+(Number(b.amount)||0),0),W=0;o.forEach(a=>{let b=S(a.id),c=b.reduce((a,b)=>a+(Number(b.amount)||0),0),d=b.reduce((a,b)=>a+(Number(b.deductions)||0),0);(a.baseSalary||0)>0&&c+d>=(a.baseSalary||0)&&W++});let X=o.length-W;return(0,b.jsxs)("div",{className:"space-y-4 md:space-y-6 animate-in fade-in duration-500 max-w-none p-0 pb-20",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between pt-2 md:pt-4 gap-4 md:gap-6 px-1 md:px-0",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl md:text-5xl font-display font-bold bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent italic leading-tight",children:"Payroll Center"}),(0,b.jsxs)("p",{className:"text-muted-foreground text-sm md:text-lg tracking-tight",children:["Managing staff disbursements for ",(0,b.jsxs)("span",{className:"text-white font-bold",children:[z," ",B]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3",children:[(0,b.jsxs)(f.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[120px] md:w-[140px] bg-black/40 border-white/10 rounded-xl h-9 md:h-11 text-xs md:text-sm",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))})]}),(0,b.jsx)(e.Input,{value:B,onChange:a=>C(a.target.value),className:"w-[80px] md:w-[100px] bg-black/40 border-white/10 text-center rounded-xl h-9 md:h-11 font-mono font-bold text-xs md:text-sm"}),(0,b.jsxs)(d.Button,{variant:"outline",className:"h-9 md:h-11 gap-2 border-white/10 bg-white/5 rounded-xl hover:bg-white/10 px-3 md:px-4 text-xs md:text-sm",onClick:()=>{let b=`
            <html>
                <head>
                    <title>Payroll Report - ${z} ${B}</title>
                    <style>
                        body { font-family: sans-serif; padding: 20px; }
                        table { width: 100%; border-collapse: collapse; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 12px; }
                        th { background-color: #f2f2f2; font-weight: bold; }
                        .status-paid { color: green; font-weight: bold; }
                        .status-unpaid { color: orange; font-weight: bold; }
                        .header-row { border: none !important; background: white !important; }
                        .header-cell { border: none !important; padding: 20px 0; text-align: center; }
                        .print-header { display: flex; align-items: center; justify-content: center; gap: 20px; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 10px; }
                        .school-logo { height: 80px; width: auto; object-fit: contain; }
                        .school-details { text-align: left; }
                        @media print {
                            thead { display: table-header-group; }
                            tr { page-break-inside: avoid; }
                        }
                    </style>
                </head>
                <body>
                    <table>
                        <thead>
                            <tr class="header-row">
                                <th colspan="9" class="header-cell">
                                    <div class="print-header">
                                        ${a?.schoolLogo?`<img src="${a.schoolLogo}" class="school-logo" onload="window.print();" onerror="window.print();" />`:""}
                                        <div class="school-details">
                                            <h1 style="margin: 0; font-size: 24px; text-transform: uppercase;">${a?.schoolName||"Payroll Report"}</h1>
                                            ${a?.address?`<div style="font-size: 14px; color: #666; margin-top: 5px;">${a.address}</div>`:""}
                                            <h2 style="margin: 10px 0 0 0; font-size: 18px; color: #444;">Monthly Payroll - ${z} ${B}</h2>
                                        </div>
                                    </div>
                                </th>
                            </tr>
                            <tr>
                                <th>Name</th>
                                <th>ID</th>
                                <th>Role</th>
                                <th>Leaves</th>
                                <th>Base Salary</th>
                                <th>Deductions</th>
                                <th>Bonuses</th>
                                <th>Paid Amount (Net)</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${U.map(a=>{let b=S(a.id),c=b.reduce((a,b)=>a+(Number(b.amount)||0),0),d=b.reduce((a,b)=>a+(Number(b.deductions)||0),0),e=(a.baseSalary||0)>0&&c+d>=(a.baseSalary||0),f=x[a.schoolId]||0;return`
                                    <tr>
                                        <td>${a.name}</td>
                                        <td>${a.schoolId}</td>
                                        <td>${a.roleDisplay}</td>
                                        <td>${f}</td>
                                        <td>${a.baseSalary||"-"}</td>
                                        <td>${b.reduce((a,b)=>a+(b.deductions||0),0)||"-"}</td>
                                        <td>${b.reduce((a,b)=>a+(b.bonuses||0),0)||"-"}</td>
                                        <td style="font-weight: bold;">${c?"₹"+Number(c).toLocaleString():"-"}</td>
                                        <td class="${e?"status-paid":"status-unpaid"}">${e?"PAID":"PENDING"}</td>
                                    </tr>
                                `}).join("")}
                        </tbody>
                    </table>
                    <script>
                        // Fallback in case image onload doesn't fire or no image
                        if (!document.querySelector('img')) {
                            window.print();
                        } else {
                            setTimeout(() => {
                                // If print hasn't happened yet (e.g. image stuck)
                                // We can't easily detect if print dialog opened, but this is a safety net
                                // Actually, simpler to just rely on onload/onerror for image
                            }, 2000);
                        }
                    </script>
                </body>
            </html>
        `,c=window.open("","","width=900,height=700");c&&(c.document.write(b),c.document.close())},children:[(0,b.jsx)(j.Download,{size:14,className:"md:w-4 md:h-4"})," ",(0,b.jsx)("span",{className:"hidden sm:inline",children:"Print Report"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Print"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4 px-2 md:px-0",children:[(0,b.jsxs)("div",{className:"bg-emerald-500/5 border border-emerald-500/10 p-4 md:p-5 rounded-2xl backdrop-blur-sm shadow-xl flex sm:flex-col justify-between items-center sm:items-start",children:[(0,b.jsx)("p",{className:"text-xs md:text-[10px] font-black uppercase tracking-widest text-emerald-400 italic",children:"Total Disbursed"}),(0,b.jsxs)("div",{className:"text-2xl md:text-3xl font-mono font-black text-white",children:["₹",V.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"bg-blue-500/5 border border-blue-500/10 p-4 md:p-5 rounded-2xl backdrop-blur-sm shadow-xl flex sm:flex-col justify-between items-center sm:items-start",children:[(0,b.jsx)("p",{className:"text-xs md:text-[10px] font-black uppercase tracking-widest text-blue-400 italic",children:"Accounts Paid"}),(0,b.jsxs)("div",{className:"text-2xl md:text-3xl font-mono font-black text-white",children:[W," ",(0,b.jsx)("span",{className:"text-xs md:text-xs text-blue-400/50",children:"Staff"})]})]}),(0,b.jsxs)("div",{className:"bg-orange-500/5 border border-orange-500/10 p-4 md:p-5 rounded-2xl backdrop-blur-sm shadow-xl flex sm:flex-col justify-between items-center sm:items-start",children:[(0,b.jsx)("p",{className:"text-xs md:text-[10px] font-black uppercase tracking-widest text-orange-400 italic",children:"Outstanding"}),(0,b.jsxs)("div",{className:"text-2xl md:text-3xl font-mono font-black text-white",children:[X," ",(0,b.jsx)("span",{className:"text-xs md:text-xs text-orange-400/50",children:"Pending"})]})]})]}),(0,b.jsx)("div",{className:"bg-black/20 p-3 md:p-5 rounded-2xl border border-white/10 backdrop-blur-md space-y-3 md:space-y-4 shadow-2xl mx-2 md:mx-0",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(k.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-3.5 h-3.5 md:w-4 md:h-4 text-muted-foreground"}),(0,b.jsx)(e.Input,{value:D,onChange:a=>E(a.target.value),placeholder:"Find by name or staff ID...",className:"pl-10 md:pl-11 h-10 md:h-12 bg-white/5 border-white/10 rounded-xl focus:ring-accent/30 text-xs md:text-sm"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:flex gap-2",children:[(0,b.jsxs)(f.Select,{value:F,onValueChange:G,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full md:w-[150px] h-10 md:h-12 bg-white/5 border-white/10 rounded-xl text-xs md:text-sm",children:(0,b.jsx)(f.SelectValue,{placeholder:"All Roles"})}),(0,b.jsxs)(f.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,b.jsx)(f.SelectItem,{value:"ALL",children:"All Roles"}),(0,b.jsx)(f.SelectItem,{value:"TEACHER",children:"Teachers"}),(0,b.jsx)(f.SelectItem,{value:"STAFF",children:"Helpers"})]})]}),(0,b.jsxs)(f.Select,{value:H,onValueChange:I,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full md:w-[150px] h-10 md:h-12 bg-white/5 border-white/10 rounded-xl text-xs md:text-sm",children:(0,b.jsx)(f.SelectValue,{placeholder:"All Status"})}),(0,b.jsxs)(f.SelectContent,{className:"bg-zinc-900 border-white/10 text-white",children:[(0,b.jsx)(f.SelectItem,{value:"ALL",children:"All Status"}),(0,b.jsx)(f.SelectItem,{value:"PAID",children:"Disbursed"}),(0,b.jsx)(f.SelectItem,{value:"UNPAID",children:"Pending"})]})]})]})]})}),m?(0,b.jsx)("div",{className:"flex justify-center p-20 animate-pulse",children:(0,b.jsx)(i.Loader2,{className:"w-12 h-12 animate-spin text-accent"})}):(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsx)(s.DataTable,{data:U,isLoading:m,columns:[{key:"employeeInfo",header:"Employee Info",render:a=>(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-bold text-[13px] md:text-sm text-white group-hover:text-accent transition-colors leading-tight",children:a.name}),(0,b.jsx)("span",{className:"text-[9px] md:text-[10px] font-mono text-white/60 tracking-tighter uppercase",children:a.schoolId}),(0,b.jsxs)("span",{className:"text-[7px] md:text-[8px] text-white/50 mt-0.5 md:mt-1 uppercase font-black",children:["Base: ₹",Number(a.baseSalary||0).toLocaleString()]})]})},{key:"role",header:"Role",render:a=>(0,b.jsx)("span",{className:"text-[9px] md:text-[10px] uppercase font-black text-muted-foreground tracking-tighter bg-white/5 px-2 py-0.5 rounded border border-white/5",children:a.roleDisplay})},{key:"absents",header:"Absents",cellClassName:"text-center",render:a=>{let c=x[a.schoolId]||0;return(0,b.jsx)("span",{className:(0,v.cn)("font-black text-xs md:text-sm",c>0?"text-orange-400":"text-emerald-400/30"),children:c})}},{key:"payments",header:"Month Payments",render:a=>{let c=S(a.id),e=c.reduce((a,b)=>a+(Number(b.amount)||0),0),f=c.reduce((a,b)=>a+(Number(b.deductions)||0),0),g=(a.baseSalary||0)>0&&e+f>=(a.baseSalary||0);return(0,b.jsxs)("div",{className:"flex flex-wrap gap-1 md:gap-1.5 min-w-[120px] md:min-w-[140px]",children:[c.map(c=>(0,b.jsxs)(t.Badge,{variant:"outline",className:"cursor-pointer hover:bg-white/10 transition-colors gap-1 px-1.5 md:px-2 border-white/10 bg-white/5 py-0 md:py-0.5",onClick:()=>T(a,c),children:[(0,b.jsxs)("span",{className:"text-[8px] md:text-[9px] font-bold text-emerald-400",children:["₹",c.amount]}),(0,b.jsx)("span",{className:"text-[6px] md:text-[7px] opacity-40 uppercase font-black",children:c.type||"S"})]},c.id)),!g&&(0,b.jsx)(d.Button,{size:"sm",variant:"ghost",className:"h-5 md:h-6 px-2 md:px-3 text-[8px] md:text-[9px] rounded-lg bg-[#64FFDA]/10 text-[#64FFDA] hover:bg-[#64FFDA] hover:text-[#0A192F] font-black uppercase tracking-tighter transition-all",onClick:()=>T(a,void 0,e),children:"Pay Now"})]})}},{key:"disbursement",header:"Net Disbursement",cellClassName:"text-right",render:a=>{let c=S(a.id),d=c.reduce((a,b)=>a+(Number(b.amount)||0),0),e=c.reduce((a,b)=>a+(Number(b.deductions)||0),0),f=(a.baseSalary||0)>0&&d+e>=(a.baseSalary||0);return(0,b.jsxs)("div",{className:"flex flex-col items-end",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-2",children:[(0,b.jsxs)("span",{className:(0,v.cn)("font-mono font-black text-base md:text-lg transition-colors",f?"text-emerald-400":d>0?"text-blue-400 font-bold":"text-white/20"),children:["₹",Number(d).toLocaleString()]}),f&&(0,b.jsx)(l.CheckCircle2,{className:"w-3 md:w-3.5 h-3 md:h-3.5 text-emerald-500",strokeWidth:3})]}),!f&&a.baseSalary&&(d>0||e>0)&&(0,b.jsxs)("span",{className:"text-[8px] md:text-[9px] font-black text-orange-500 uppercase italic",children:["Due: ₹",Number(Math.max(0,a.baseSalary-d-e)).toLocaleString()]})]})}}]})}),(0,b.jsx)(r,{isOpen:P,onClose:()=>Q(!1),employee:J,payment:L,paidAmount:N,leavesCount:J&&x[J.schoolId]||0,defaultMonth:z,defaultYear:B,onSuccess:()=>R()})]})}a.s(["default",()=>w],54253)}];

//# sourceMappingURL=src_app_admin_salary_page_tsx_b7b25ce8._.js.map