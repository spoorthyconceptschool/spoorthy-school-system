{"version":3,"sources":["../../../../src/components/admin/declare-holiday-modal.tsx","../../../../src/components/admin/bulk-print-timetable-modal.tsx","../../../../src/app/admin/timetable/manage/page.tsx","../../../../node_modules/lucide-react/src/icons/layout-grid.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { format } from \"date-fns\";\r\nimport { CalendarIcon, Loader2 } from \"lucide-react\";\r\nimport { Timestamp, collection, addDoc } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { toast } from \"@/lib/toast-store\";\r\n\r\nexport function DeclareHolidayModal() {\r\n    const { user } = useAuth();\r\n    const [open, setOpen] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [title, setTitle] = useState(\"\");\r\n    const [date, setDate] = useState<Date | undefined>(new Date());\r\n    const [description, setDescription] = useState(\"\");\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!title || !date) return;\r\n        setLoading(true);\r\n\r\n        try {\r\n            const start = new Date(date);\r\n            start.setHours(0, 0, 0, 0);\r\n\r\n            const end = new Date(date);\r\n            end.setHours(23, 59, 59, 999);\r\n\r\n            await addDoc(collection(db, \"notices\"), {\r\n                title: `Holiday: ${title}`,\r\n                content: description || \"No classes due to holiday.\",\r\n                type: \"HOLIDAY\",\r\n                target: \"ALL\",\r\n                date: Timestamp.fromDate(start),\r\n                createdAt: Timestamp.now(),\r\n                expiresAt: Timestamp.fromDate(end),\r\n                senderId: user?.uid,\r\n                senderName: user?.displayName || \"Admin\",\r\n                senderRole: \"ADMIN\",\r\n                status: 'ACTIVE'\r\n            });\r\n\r\n            toast({ title: \"Holiday Declared\", description: `Holiday '${title}' on ${format(date, \"PPP\")} added.`, type: \"success\" });\r\n            setOpen(false);\r\n            setTitle(\"\");\r\n            setDescription(\"\");\r\n        } catch (error: any) {\r\n            console.error(error);\r\n            toast({ title: \"Error\", description: error.message, type: \"error\" });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button variant=\"destructive\" className=\"ml-2 gap-2\">\r\n                    <CalendarIcon className=\"w-4 h-4\" />\r\n                    Declare Holiday\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"sm:max-w-[425px] bg-black/90 border-white/10 text-white\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Declare Holiday</DialogTitle>\r\n                    <DialogDescription>\r\n                        Adding a holiday will block the timetable for the chosen date and notify all users.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Holiday Name</Label>\r\n                        <Input\r\n                            value={title}\r\n                            onChange={(e) => setTitle(e.target.value)}\r\n                            placeholder=\"e.g. Festival, Weather Alert\"\r\n                            className=\"bg-white/5 border-white/10\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Date</Label>\r\n                        <Input\r\n                            type=\"date\"\r\n                            value={date ? format(date, \"yyyy-MM-dd\") : \"\"}\r\n                            onChange={(e) => setDate(e.target.value ? new Date(e.target.value) : undefined)}\r\n                            className=\"bg-white/5 border-white/10\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Description / Note</Label>\r\n                        <Textarea\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                            placeholder=\"Optional details...\"\r\n                            className=\"bg-white/5 border-white/10\"\r\n                        />\r\n                    </div>\r\n\r\n                    <Button type=\"submit\" disabled={loading} className=\"w-full bg-red-600 hover:bg-red-700 text-white\">\r\n                        {loading ? <Loader2 className=\"w-4 h-4 animate-spin mr-2\" /> : \"Declare Holiday\"}\r\n                    </Button>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Printer, Loader2, Check, X } from \"lucide-react\";\r\nimport { useMasterData } from \"@/context/MasterDataContext\";\r\nimport { doc, getDoc, getDocs, query, collection, where } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function BulkPrintTimetableModal() {\r\n    const { classes: classesData, sections: sectionsData, classSections, subjects: masterSubjects, branding } = useMasterData();\r\n    const [open, setOpen] = useState(false);\r\n    const [selectedIds, setSelectedIds] = useState<string[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Convert and sort classes\r\n    const classes = Object.values(classesData).sort((a, b) => (a.order || 0) - (b.order || 0));\r\n    const sections = Object.values(sectionsData);\r\n    const subjectsList = Object.values(masterSubjects);\r\n\r\n    const toggleSelection = (id: string) => {\r\n        setSelectedIds(prev =>\r\n            prev.includes(id) ? prev.filter(i => i !== id) : [...prev, id]\r\n        );\r\n    };\r\n\r\n    const selectAll = () => {\r\n        const allIds = Object.keys(classSections);\r\n        setSelectedIds(selectedIds.length === allIds.length ? [] : allIds);\r\n    };\r\n\r\n    const handleBulkPrint = async () => {\r\n        if (selectedIds.length === 0) return;\r\n        setLoading(true);\r\n\r\n        try {\r\n            const printData = [];\r\n\r\n            // Get Day Template (Assuming same for all, fetched from global_settings)\r\n            const settingsSnap = await getDoc(doc(db, \"timetable_settings\", \"global_settings\"));\r\n            const dayTemplate = settingsSnap.exists() && settingsSnap.data().dayTemplates?.[\"MONDAY\"]\r\n                ? settingsSnap.data().dayTemplates[\"MONDAY\"].slots\r\n                : [];\r\n\r\n            if (dayTemplate.length === 0) {\r\n                alert(\"Day structure template not found. Please configure the global structure first.\");\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // Fetch teachers (Need them for names)\r\n            const tSnap = await getDocs(query(collection(db, \"teachers\"), where(\"status\", \"==\", \"ACTIVE\")));\r\n            const allTeachers = tSnap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n\r\n            // Fetch selected timetables\r\n            for (const id of selectedIds) {\r\n                const [cId, sId] = id.split('_');\r\n                const docRef = doc(db, \"timetables\", `2025-2026_${cId}_${sId}`);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (docSnap.exists()) {\r\n                    const classInfo = classesData[cId];\r\n                    const sectionInfo = sectionsData[sId];\r\n                    printData.push({\r\n                        className: classInfo?.name || \"Unknown Class\",\r\n                        sectionName: sectionInfo?.name || \"Unknown Section\",\r\n                        schedule: docSnap.data().schedule || {},\r\n                        dayTemplate\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (printData.length === 0) {\r\n                alert(\"No published timetables found for selected classes.\");\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            generatePrintWindow(printData, allTeachers);\r\n        } catch (e) {\r\n            console.error(e);\r\n            alert(\"Failed to prepare print job.\");\r\n        } finally {\r\n            setLoading(false);\r\n            setOpen(false);\r\n        }\r\n    };\r\n\r\n    const generatePrintWindow = (data: any[], allTeachers: any[]) => {\r\n        const printWindow = window.open('', '_blank');\r\n        if (!printWindow) return;\r\n\r\n        const html = `\r\n            <html>\r\n                <head>\r\n                    <title>Bulk Timetable Print</title>\r\n                    <style>\r\n                        body { font-family: sans-serif; color: #333; margin: 0; padding: 0; }\r\n                        .page { padding: 40px; page-break-after: always; min-height: 100vh; display: flex; flex-direction: column; }\r\n                        .header { text-align: center; margin-bottom: 30px; }\r\n                        .header img { height: 60px; margin-bottom: 10px; }\r\n                        .header h1 { margin: 0; color: #1a365d; font-size: 24px; text-transform: uppercase; }\r\n                        .header p { margin: 5px 0; color: #718096; font-size: 14px; text-transform: uppercase; font-weight: bold; }\r\n                        table { width: 100%; border-collapse: collapse; margin-top: 20px; table-layout: fixed; }\r\n                        th, td { border: 1px solid #e2e8f0; padding: 8px; text-align: center; font-size: 10px; height: 50px; word-wrap: break-word; }\r\n                        th { background-color: #f8fafc; color: #4a5568; font-weight: bold; text-transform: uppercase; letter-spacing: 0.05em; font-size: 9px; height: auto; }\r\n                        .day-col { background-color: #f8fafc; font-weight: bold; width: 60px; text-transform: uppercase; }\r\n                        .period-info { font-size: 8px; color: #a0aec0; margin-bottom: 2px; }\r\n                        .subject { font-weight: bold; color: #2d3748; display: block; margin-bottom: 1px; }\r\n                        .teacher { font-size: 8px; color: #718096; line-height: 1.1; }\r\n                        .break { background-color: #f1f5f9; color: #94a3b8; font-weight: bold; font-style: italic; letter-spacing: 0.2em; }\r\n                        .leisure { color: #cbd5e0; font-style: italic; }\r\n                        @media print {\r\n                            .page { padding: 0; }\r\n                            @page { margin: 1cm; orientation: landscape; }\r\n                        }\r\n                    </style>\r\n                </head>\r\n                <body>\r\n                    ${data.map(item => `\r\n                        <div class=\"page\">\r\n                            <div class=\"header\">\r\n                                ${branding.schoolLogo ? `<img src=\"${branding.schoolLogo}\" />` : ''}\r\n                                <h1>${branding.schoolName || 'SPOORTHY CONCEPT SCHOOL'}</h1>\r\n                                <p>Academic Timetable: ${item.className} - ${item.sectionName}</p>\r\n                            </div>\r\n                            <table>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th class=\"day-col\">Day</th>\r\n                                        ${item.dayTemplate.map((slot: any) => `\r\n                                            <th>\r\n                                                <div class=\"period-info\">${slot.startTime} - ${slot.endTime}</div>\r\n                                                <div>${slot.name}</div>\r\n                                            </th>\r\n                                        `).join('')}\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    ${[\"MONDAY\", \"TUESDAY\", \"WEDNESDAY\", \"THURSDAY\", \"FRIDAY\", \"SATURDAY\"].map(day => `\r\n                                        <tr>\r\n                                            <td class=\"day-col\">${day.substring(0, 3)}</td>\r\n                                            ${item.dayTemplate.map((slot: any) => {\r\n            if (slot.type === \"BREAK\") return `<td class=\"break\">BREAK</td>`;\r\n            const cell = item.schedule[day]?.[slot.id] || {};\r\n            if (!cell.subjectId) return `<td>-</td>`;\r\n            if (cell.subjectId === \"leisure\") return `<td class=\"leisure\">Leisure</td>`;\r\n\r\n            const subject = subjectsList.find((s: any) => s.id === cell.subjectId);\r\n            const teacher = allTeachers.find((t: any) => (t.schoolId || t.id) === cell.teacherId);\r\n\r\n            return `\r\n                                                    <td>\r\n                                                        <span class=\"subject\">${subject?.name || 'Subject'}</span>\r\n                                                        <span class=\"teacher\">${teacher?.name || ''}</span>\r\n                                                    </td>\r\n                                                `;\r\n        }).join('')}\r\n                                        </tr>\r\n                                    `).join('')}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    `).join('')}\r\n                    <script>window.onload = () => { window.print(); window.close(); };</script>\r\n                </body>\r\n            </html>\r\n        `;\r\n\r\n        printWindow.document.write(html);\r\n        printWindow.document.close();\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button variant=\"outline\" className=\"gap-2 border-white/10 bg-white/5 text-white hover:bg-white/10 rounded-xl font-black uppercase tracking-widest text-[10px]\">\r\n                    <Printer className=\"w-4 h-4\" /> Bulk Print\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"max-w-2xl bg-[#0A192F] border-white/10 text-white max-h-[80vh] flex flex-col\">\r\n                <DialogHeader>\r\n                    <DialogTitle className=\"text-xl font-bold flex items-center gap-2\">\r\n                        <Printer className=\"text-accent\" /> Bulk Print Timetables\r\n                    </DialogTitle>\r\n                    <DialogDescription className=\"text-muted-foreground uppercase text-[10px] font-bold tracking-widest\">\r\n                        Select multiple class-sections to generate a combined print report.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"flex-1 overflow-y-auto px-1 py-4 space-y-4 custom-scrollbar\">\r\n                    <div className=\"flex justify-between items-center bg-white/5 p-3 rounded-xl border border-white/10\">\r\n                        <span className=\"text-xs font-bold uppercase tracking-widest opacity-60\">Selection Actions</span>\r\n                        <Button variant=\"ghost\" size=\"sm\" onClick={selectAll} className=\"text-[10px] uppercase font-black text-accent hover:bg-accent/10\">\r\n                            {selectedIds.length === Object.keys(classSections).length ? \"Deselect All\" : \"Select All Available\"}\r\n                        </Button>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                        {classes.map(cls => {\r\n                            const classSecs = Object.values(classSections).filter((cs: any) => cs.classId === cls.id);\r\n                            if (classSecs.length === 0) return null;\r\n\r\n                            return (\r\n                                <div key={cls.id} className=\"space-y-2\">\r\n                                    <h4 className=\"text-[10px] font-black uppercase tracking-tighter text-muted-foreground ml-1\">{cls.name}</h4>\r\n                                    <div className=\"space-y-1\">\r\n                                        {classSecs.map((cs: any) => {\r\n                                            const section = sections.find(s => s.id === cs.sectionId);\r\n                                            const isSelected = selectedIds.includes(cs.id);\r\n                                            return (\r\n                                                <div\r\n                                                    key={cs.id}\r\n                                                    onClick={() => toggleSelection(cs.id)}\r\n                                                    className={cn(\r\n                                                        \"flex items-center justify-between p-3 rounded-xl border transition-all cursor-pointer group\",\r\n                                                        isSelected\r\n                                                            ? \"bg-accent/10 border-accent/40 text-accent shadow-[0_0_15px_rgba(100,255,218,0.1)]\"\r\n                                                            : \"bg-white/5 border-white/5 text-white/60 hover:border-white/20 hover:text-white\"\r\n                                                    )}\r\n                                                >\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <div className={cn(\r\n                                                            \"w-4 h-4 rounded border flex items-center justify-center transition-all\",\r\n                                                            isSelected ? \"bg-accent border-accent\" : \"border-white/20 group-hover:border-white/40\"\r\n                                                        )}>\r\n                                                            {isSelected && <Check className=\"w-3 h-3 text-black stroke-[4]\" />}\r\n                                                        </div>\r\n                                                        <span className=\"text-xs font-bold uppercase tracking-widest\">Section {section?.name || '?'}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n\r\n                <DialogFooter className=\"border-t border-white/5 pt-4 bg-white/5 p-6 -mx-6 rounded-b-2xl\">\r\n                    <Button variant=\"ghost\" onClick={() => setOpen(false)} disabled={loading} className=\"uppercase text-[10px] font-black tracking-widest\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        onClick={handleBulkPrint}\r\n                        disabled={loading || selectedIds.length === 0}\r\n                        className=\"bg-accent text-black hover:bg-accent/80 uppercase text-[10px] font-black tracking-widest gap-2 shadow-lg shadow-accent/20\"\r\n                    >\r\n                        {loading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Printer className=\"w-4 h-4\" />}\r\n                        Print {selectedIds.length} Timetables\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { collection, query, where, getDocs, doc, getDoc, setDoc, orderBy } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Loader2, Save, Plus, Trash2, Calendar, LayoutGrid, Printer } from \"lucide-react\";\r\nimport { useMasterData } from \"@/context/MasterDataContext\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { DeclareHolidayModal } from \"@/components/admin/declare-holiday-modal\";\r\nimport { BulkPrintTimetableModal } from \"@/components/admin/bulk-print-timetable-modal\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport Link from \"next/link\";\r\n\r\n// --- TYPES ---\r\ninterface Slot {\r\n    id: number;\r\n    name: string; // \"Period 1\", \"Lunch\"\r\n    type: \"CLASS\" | \"BREAK\";\r\n    startTime: string;\r\n    endTime: string;\r\n    isLeisureAllowed: boolean;\r\n}\r\n\r\nexport default function TimetableManagePage() {\r\n    const { user } = useAuth();\r\n    const { classes: classesData, sections: sectionsData, subjects: masterSubjects, classSubjects, subjectTeachers, branding } = useMasterData();\r\n    const [activeTab, setActiveTab] = useState(\"settings\");\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Convert master data objects to arrays\r\n    const classes = Object.values(classesData).map((c: any) => ({ id: c.id, name: c.name, order: c.order || 99 })).sort((a: any, b: any) => a.order - b.order);\r\n    const sections = Object.values(sectionsData || {}).map((s: any) => ({ id: s.id, name: s.name }));\r\n\r\n    // Settings State\r\n    const [dayTemplate, setDayTemplate] = useState<Slot[]>([]);\r\n\r\n    // Builder State\r\n    const [selectedClassId, setSelectedClassId] = useState(\"\");\r\n    const [selectedSectionId, setSelectedSectionId] = useState(\"\");\r\n    const [timetable, setTimetable] = useState<any>({}); // { [day]: { [slotId]: { subjectId, teacherId } } }\r\n    const [subjects, setSubjects] = useState<any[]>([]);\r\n    const [teachers, setTeachers] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        fetchMasterData();\r\n        fetchSettings();\r\n    }, []);\r\n\r\n    const [holidays, setHolidays] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        if (!selectedClassId) {\r\n            setSubjects([]);\r\n            return;\r\n        }\r\n\r\n        const classSpecificSubjects = classSubjects[selectedClassId] || {};\r\n        const filtered = Object.values(masterSubjects || {})\r\n            .filter((s: any) => s.isActive !== false && classSpecificSubjects[s.id])\r\n            .sort((a: any, b: any) => a.name.localeCompare(b.name));\r\n\r\n        setSubjects(filtered);\r\n    }, [selectedClassId, masterSubjects, classSubjects]);\r\n\r\n    useEffect(() => {\r\n        const fetchHolidays = async () => {\r\n            const hQuery = query(collection(db, \"notices\"), where(\"type\", \"==\", \"HOLIDAY\"));\r\n            const hSnap = await getDocs(hQuery);\r\n            const holidayList = hSnap.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setHolidays(holidayList);\r\n        };\r\n        fetchHolidays();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (selectedClassId && selectedSectionId) {\r\n            fetchTimetable(selectedClassId, selectedSectionId);\r\n        }\r\n    }, [selectedClassId, selectedSectionId]);\r\n\r\n    const fetchMasterData = async () => {\r\n        try {\r\n            const tSnap = await getDocs(query(collection(db, \"teachers\"), where(\"status\", \"==\", \"ACTIVE\")));\r\n            setTeachers(tSnap.docs.map(d => ({ id: d.id, ...d.data() })));\r\n        } catch (e) { console.error(e); }\r\n    };\r\n\r\n    const fetchSettings = async () => {\r\n        try {\r\n            const docSnap = await getDoc(doc(db, \"timetable_settings\", \"global_settings\"));\r\n            if (docSnap.exists() && docSnap.data().dayTemplates?.[\"MONDAY\"]) {\r\n                setDayTemplate(docSnap.data().dayTemplates[\"MONDAY\"].slots);\r\n            } else {\r\n                setDayTemplate([\r\n                    { id: 1, name: \"Period 1\", type: \"CLASS\", startTime: \"09:00\", endTime: \"09:45\", isLeisureAllowed: true },\r\n                    { id: 2, name: \"Period 2\", type: \"CLASS\", startTime: \"09:45\", endTime: \"10:30\", isLeisureAllowed: true },\r\n                    { id: 3, name: \"Short Break\", type: \"BREAK\", startTime: \"10:30\", endTime: \"10:45\", isLeisureAllowed: false },\r\n                    { id: 4, name: \"Period 3\", type: \"CLASS\", startTime: \"10:45\", endTime: \"11:30\", isLeisureAllowed: true },\r\n                ]);\r\n            }\r\n        } catch (error) { console.error(error); }\r\n        finally { setLoading(false); }\r\n    };\r\n\r\n    const fetchTimetable = async (classId: string, sectionId: string) => {\r\n        setLoading(true);\r\n        try {\r\n            const ttRef = doc(db, \"class_timetables\", `2025-2026_${classId}_${sectionId}`);\r\n            const ttSnap = await getDoc(ttRef);\r\n            if (ttSnap.exists()) {\r\n                setTimetable(ttSnap.data().schedule || {});\r\n            } else {\r\n                setTimetable({});\r\n            }\r\n        } catch (e) { console.error(e); }\r\n        finally { setLoading(false); }\r\n    };\r\n\r\n    // --- ACTIONS ---\r\n\r\n    const saveSettings = async () => {\r\n        setLoading(true);\r\n        try {\r\n            await setDoc(doc(db, \"timetable_settings\", \"global_settings\"), {\r\n                dayTemplates: {\r\n                    MONDAY: { slots: dayTemplate },\r\n                    TUESDAY: { slots: dayTemplate },\r\n                    WEDNESDAY: { slots: dayTemplate },\r\n                    THURSDAY: { slots: dayTemplate },\r\n                    FRIDAY: { slots: dayTemplate },\r\n                    SATURDAY: { slots: dayTemplate }\r\n                },\r\n                updatedAt: new Date()\r\n            }, { merge: true });\r\n            alert(\"Global Timetable Structure Saved\");\r\n        } catch (e) { alert(\"Error saving settings\"); }\r\n        finally { setLoading(false); }\r\n    };\r\n\r\n    const updateSlot = (index: number, field: string, value: any) => {\r\n        const newSlots = [...dayTemplate];\r\n        newSlots[index] = { ...newSlots[index], [field]: value };\r\n        setDayTemplate(newSlots);\r\n    };\r\n\r\n    const addSlot = () => {\r\n        const id = dayTemplate.length + 1;\r\n        setDayTemplate([...dayTemplate, { id, name: `Period ${id}`, type: \"CLASS\", startTime: \"\", endTime: \"\", isLeisureAllowed: true }]);\r\n    };\r\n\r\n    const removeSlot = (index: number) => {\r\n        setDayTemplate(dayTemplate.filter((_, i) => i !== index));\r\n    };\r\n\r\n    // --- BUILDER ACTIONS ---\r\n    const updateTimeTable = (day: string, slotId: number, field: \"subjectId\" | \"teacherId\", value: string) => {\r\n        setTimetable((prev: any) => {\r\n            const daySchedule = prev[day] || {};\r\n            const slotData = daySchedule[slotId] || {};\r\n\r\n            let newData = { ...slotData, [field]: value };\r\n\r\n            // AUTOMATIC TEACHER ASSIGNMENT FROM MASTER DATA\r\n            if (field === \"subjectId\" && selectedClassId && selectedSectionId) {\r\n                if (value === \"leisure\") {\r\n                    newData.teacherId = \"\";\r\n                } else {\r\n                    const key = `${selectedClassId}_${selectedSectionId}`;\r\n                    const assignedTeacherId = subjectTeachers[key]?.[value];\r\n                    if (assignedTeacherId) {\r\n                        newData.teacherId = assignedTeacherId;\r\n                    } else {\r\n                        newData.teacherId = \"UNASSIGNED\"; // Special state to trigger warning\r\n                    }\r\n                }\r\n            }\r\n\r\n            return {\r\n                ...prev,\r\n                [day]: {\r\n                    ...daySchedule,\r\n                    [slotId]: newData\r\n                }\r\n            };\r\n        });\r\n    };\r\n\r\n    const publishTimetable = async () => {\r\n        if (!selectedClassId || !selectedSectionId || !user) return;\r\n        setLoading(true);\r\n        try {\r\n            const token = await user.getIdToken();\r\n            await fetch(\"/api/admin/timetable/publish\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    yearId: \"2025-2026\",\r\n                    classId: `${selectedClassId}_${selectedSectionId}`,\r\n                    schedule: timetable\r\n                })\r\n            });\r\n            alert(\"Timetable Published Successfully!\");\r\n        } catch (e) { alert(\"Publish failed\"); }\r\n        finally { setLoading(false); }\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        if (!selectedClassId || !selectedSectionId) return;\r\n\r\n        const currentClass = classes.find(c => c.id === selectedClassId);\r\n        const currentSection = sections.find(s => s.id === selectedSectionId);\r\n\r\n        const printWindow = window.open('', '_blank');\r\n        if (!printWindow) return;\r\n\r\n        const html = `\r\n            <html>\r\n                <head>\r\n                    <title>Timetable - ${currentClass?.name} ${currentSection?.name}</title>\r\n                    <style>\r\n                        body { font-family: sans-serif; padding: 20px; color: #333; }\r\n                        .header { text-align: center; margin-bottom: 30px; }\r\n                        .header h1 { margin: 0; color: #1a365d; font-size: 24px; text-transform: uppercase; }\r\n                        .header p { margin: 5px 0; color: #718096; font-size: 14px; text-transform: uppercase; font-weight: bold; }\r\n                        table { width: 100%; border-collapse: collapse; margin-top: 20px; table-layout: fixed; }\r\n                        th, td { border: 1px solid #e2e8f0; padding: 12px 8px; text-align: center; font-size: 12px; height: 60px; word-wrap: break-word; }\r\n                        th { background-color: #f8fafc; color: #4a5568; font-weight: bold; text-transform: uppercase; letter-spacing: 0.05em; font-size: 10px; height: auto; }\r\n                        .day-col { background-color: #f8fafc; font-weight: bold; width: 80px; text-transform: uppercase; }\r\n                        .period-info { font-size: 10px; color: #a0aec0; margin-bottom: 4px; }\r\n                        .subject { font-weight: bold; color: #2d3748; display: block; margin-bottom: 2px; }\r\n                        .teacher { font-size: 10px; color: #718096; line-height: 1.2; }\r\n                        .break { background-color: #f1f5f9; color: #94a3b8; font-weight: bold; font-style: italic; letter-spacing: 0.2em; }\r\n                        .leisure { color: #cbd5e0; font-style: italic; }\r\n                        @media print {\r\n                            body { padding: 0; }\r\n                            @page { margin: 1cm; orientation: landscape; }\r\n                            table { page-break-inside: avoid; }\r\n                        }\r\n                    </style>\r\n                </head>\r\n                <body>\r\n                    <div class=\"header\">\r\n                        ${branding.schoolLogo ? `<img src=\"${branding.schoolLogo}\" style=\"height: 60px; margin-bottom: 10px;\" />` : ''}\r\n                        <h1>${branding.schoolName || 'SPOORTHY CONCEPT SCHOOL'}</h1>\r\n                        <p>Academic Timetable: ${currentClass?.name} - ${currentSection?.name}</p>\r\n                    </div>\r\n                    <table>\r\n                        <thead>\r\n                            <tr>\r\n                                <th class=\"day-col\">Day</th>\r\n                                ${dayTemplate.map(slot => `\r\n                                    <th>\r\n                                        <div class=\"period-info\">${slot.startTime} - ${slot.endTime}</div>\r\n                                        <div>${slot.name}</div>\r\n                                    </th>\r\n                                `).join('')}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            ${[\"MONDAY\", \"TUESDAY\", \"WEDNESDAY\", \"THURSDAY\", \"FRIDAY\", \"SATURDAY\"].map(day => `\r\n                                <tr>\r\n                                    <td class=\"day-col\">${day.substring(0, 3)}</td>\r\n                                    ${dayTemplate.map(slot => {\r\n            if (slot.type === \"BREAK\") return `<td class=\"break\">BREAK</td>`;\r\n            const cell = timetable[day]?.[slot.id] || {};\r\n            if (!cell.subjectId) return `<td>-</td>`;\r\n            if (cell.subjectId === \"leisure\") return `<td class=\"leisure\">Leisure</td>`;\r\n\r\n            const subject = subjects.find(s => s.id === cell.subjectId);\r\n            const teacher = teachers.find(t => (t.schoolId || t.id) === cell.teacherId);\r\n\r\n            return `\r\n                                            <td>\r\n                                                <span class=\"subject\">${subject?.name || 'Unknown'}</span>\r\n                                                <span class=\"teacher\">${teacher?.name || 'Unassigned'}</span>\r\n                                            </td>\r\n                                        `;\r\n        }).join('')}\r\n                                </tr>\r\n                            `).join('')}\r\n                        </tbody>\r\n                    </table>\r\n                    <script>window.onload = () => { window.print(); window.close(); };</script>\r\n                </body>\r\n            </html>\r\n        `;\r\n\r\n        printWindow.document.write(html);\r\n        printWindow.document.close();\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"space-y-4 md:space-y-6 max-w-none p-0 animate-in fade-in pb-24\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 px-2\">\r\n                <div className=\"space-y-1\">\r\n                    <h1 className=\"text-2xl md:text-5xl font-display font-bold bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent italic leading-tight\">\r\n                        Timetable Manager\r\n                    </h1>\r\n                    <p className=\"text-muted-foreground text-[10px] md:text-sm tracking-tight uppercase font-black opacity-50\">\r\n                        Design and publish <span className=\"text-accent\">academic schedules</span>\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex shrink-0 gap-2\">\r\n                    <BulkPrintTimetableModal />\r\n                    <DeclareHolidayModal />\r\n                </div>\r\n            </div>\r\n\r\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\r\n                <div className=\"px-2\">\r\n                    <TabsList className=\"bg-white/5 border border-white/10 w-full grid grid-cols-2 p-1 h-auto md:h-12 overflow-hidden\">\r\n                        <TabsTrigger value=\"settings\" className=\"flex flex-col md:flex-row py-2.5 px-1 gap-1 md:gap-2 text-[7px] md:text-xs font-black uppercase tracking-tighter md:tracking-widest data-[state=active]:bg-accent data-[state=active]:text-black transition-all h-full text-center\">\r\n                            <LayoutGrid className=\"w-3.5 h-3.5 md:w-4 md:h-4 shrink-0\" />\r\n                            <span>Structure</span>\r\n                        </TabsTrigger>\r\n                        <TabsTrigger value=\"builder\" className=\"flex flex-col md:flex-row py-2.5 px-1 gap-1 md:gap-2 text-[7px] md:text-xs font-black uppercase tracking-tighter md:tracking-widest data-[state=active]:bg-accent data-[state=active]:text-black transition-all h-full text-center\">\r\n                            <Calendar className=\"w-3.5 h-3.5 md:w-4 md:h-4 shrink-0\" />\r\n                            <span>Builder</span>\r\n                        </TabsTrigger>\r\n                    </TabsList>\r\n                </div>\r\n\r\n                {/* --- SETTINGS TAB --- */}\r\n                <TabsContent value=\"settings\" className=\"space-y-6 px-2\">\r\n                    <Card className=\"bg-black/20 border-white/10 backdrop-blur-md overflow-hidden rounded-2xl\">\r\n                        <CardHeader className=\"border-b border-white/5 bg-white/5 py-4 px-6\">\r\n                            <CardTitle className=\"text-sm md:text-xl font-bold italic text-white\">Daily Structure Template</CardTitle>\r\n                            <CardDescription className=\"text-[10px] md:text-xs text-muted-foreground uppercase tracking-widest font-bold opacity-60\">Define periods and breaks for a standard day.</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"p-4 md:p-6\">\r\n                            <div className=\"space-y-4\">\r\n                                {dayTemplate.map((slot, idx) => (\r\n                                    <div key={idx} className=\"relative group bg-white/5 border border-white/10 p-4 rounded-xl transition-all hover:bg-white/10\">\r\n                                        <div className=\"grid grid-cols-1 md:grid-cols-12 gap-4 items-center\">\r\n                                            {/* Index and Name */}\r\n                                            <div className=\"md:col-span-4 flex items-center gap-3\">\r\n                                                <div className=\"w-8 h-8 shrink-0 rounded-full bg-accent/20 border border-accent/30 flex items-center justify-center font-black text-[10px] text-accent\">\r\n                                                    {idx + 1}\r\n                                                </div>\r\n                                                <div className=\"space-y-1 flex-1\">\r\n                                                    <label className=\"text-[8px] font-black text-muted-foreground uppercase tracking-widest\">Description</label>\r\n                                                    <Input\r\n                                                        value={slot.name}\r\n                                                        onChange={e => updateSlot(idx, 'name', e.target.value)}\r\n                                                        className=\"h-9 md:h-10 bg-black/40 border-white/10 text-xs md:text-sm font-bold\"\r\n                                                        placeholder=\"Name\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Type */}\r\n                                            <div className=\"md:col-span-2 space-y-1\">\r\n                                                <label className=\"text-[8px] font-black text-muted-foreground uppercase tracking-widest\">Type</label>\r\n                                                <Select value={slot.type} onValueChange={v => updateSlot(idx, 'type', v)}>\r\n                                                    <SelectTrigger className=\"h-9 md:h-10 bg-black/40 border-white/10 text-xs md:text-sm\"><SelectValue /></SelectTrigger>\r\n                                                    <SelectContent className=\"bg-[#0A192F] border-white/10\">\r\n                                                        <SelectItem value=\"CLASS\">Class</SelectItem>\r\n                                                        <SelectItem value=\"BREAK\">Break</SelectItem>\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                            </div>\r\n\r\n                                            {/* Times */}\r\n                                            <div className=\"md:col-span-4 grid grid-cols-2 gap-3\">\r\n                                                <div className=\"space-y-1\">\r\n                                                    <label className=\"text-[8px] font-black text-muted-foreground uppercase tracking-widest\">Start</label>\r\n                                                    <Input type=\"time\" value={slot.startTime} onChange={e => updateSlot(idx, 'startTime', e.target.value)} className=\"h-9 md:h-10 bg-black/40 border-white/10 text-xs font-mono\" />\r\n                                                </div>\r\n                                                <div className=\"space-y-1\">\r\n                                                    <label className=\"text-[8px] font-black text-muted-foreground uppercase tracking-widest\">End</label>\r\n                                                    <Input type=\"time\" value={slot.endTime} onChange={e => updateSlot(idx, 'endTime', e.target.value)} className=\"h-9 md:h-10 bg-black/40 border-white/10 text-xs font-mono\" />\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Actions */}\r\n                                            <div className=\"md:col-span-2 flex justify-end md:pt-4\">\r\n                                                <Button\r\n                                                    variant=\"ghost\"\r\n                                                    size=\"sm\"\r\n                                                    onClick={() => removeSlot(idx)}\r\n                                                    className=\"w-full md:w-auto text-red-400 hover:text-white hover:bg-red-500/20 gap-2 font-bold uppercase tracking-tighter text-[10px]\"\r\n                                                >\r\n                                                    <Trash2 className=\"w-3 h-3 md:w-4 md:h-4\" /> Remove\r\n                                                </Button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-white/5\">\r\n                                    <Button variant=\"outline\" onClick={addSlot} className=\"h-10 md:h-12 border-dashed border-white/20 hover:bg-white/5 rounded-xl font-black uppercase tracking-widest text-[10px] md:text-xs\">\r\n                                        <Plus className=\"w-4 h-4 mr-2\" /> Add Period / Break\r\n                                    </Button>\r\n                                    <Button onClick={saveSettings} className=\"h-10 md:h-12 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-black uppercase tracking-widest text-[10px] md:text-xs shadow-lg shadow-emerald-900/20\">\r\n                                        <Save className=\"w-4 h-4 mr-2\" /> Save Global Configuration\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n\r\n                {/* --- BUILDER TAB --- */}\r\n                <TabsContent value=\"builder\" className=\"space-y-6 px-2\">\r\n                    <div className=\"flex flex-col md:flex-row gap-4 bg-black/40 p-4 rounded-2xl border border-white/10 backdrop-blur-md\">\r\n                        <div className=\"grid grid-cols-2 md:flex items-center gap-3\">\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-[8px] font-black text-muted-foreground uppercase tracking-widest ml-1\">Class</label>\r\n                                <Select value={selectedClassId} onValueChange={setSelectedClassId}>\r\n                                    <SelectTrigger className=\"w-full md:w-[180px] h-10 bg-white/5 border-white/10 rounded-xl text-xs\"><SelectValue placeholder=\"Choose Class\" /></SelectTrigger>\r\n                                    <SelectContent className=\"bg-[#0A192F] border-white/10\">{classes.map(c => <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>)}</SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"text-[8px] font-black text-muted-foreground uppercase tracking-widest ml-1\">Section</label>\r\n                                <Select value={selectedSectionId} onValueChange={setSelectedSectionId}>\r\n                                    <SelectTrigger className=\"w-full md:w-[150px] h-10 bg-white/5 border-white/10 rounded-xl text-xs\"><SelectValue placeholder=\"Section\" /></SelectTrigger>\r\n                                    <SelectContent className=\"bg-[#0A192F] border-white/10\">{sections.map(s => <SelectItem key={s.id} value={s.id}>{s.name}</SelectItem>)}</SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex-1 flex flex-wrap items-end justify-end gap-2 px-2 md:px-0\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                onClick={handlePrint}\r\n                                disabled={!selectedClassId || !selectedSectionId}\r\n                                className=\"h-10 border-white/10 bg-white/5 text-white hover:bg-white/10 rounded-xl font-black uppercase tracking-widest text-[10px]\"\r\n                            >\r\n                                <Printer className=\"mr-2 h-3 w-3\" /> Print Timetable\r\n                            </Button>\r\n                            <Button onClick={publishTimetable} disabled={!selectedClassId || !selectedSectionId || loading} className=\"w-full md:w-auto h-10 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-black uppercase tracking-widest text-[10px] shadow-lg shadow-blue-900/40\">\r\n                                {loading ? <Loader2 className=\"animate-spin mr-2 w-3 h-3\" /> : <Save className=\"mr-2 h-3 w-3\" />}\r\n                                Publish Final Schedule\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {(!selectedClassId || !selectedSectionId) ? (\r\n                        <div className=\"text-center py-20 bg-black/20 border border-dashed border-white/10 rounded-2xl\">\r\n                            <div className=\"flex flex-col items-center gap-4 opacity-40\">\r\n                                <Calendar size={40} strokeWidth={1} />\r\n                                <p className=\"text-xs md:text-sm font-bold uppercase tracking-widest italic\">Please select a class and section to design the schedule.</p>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"rounded-2xl border border-white/10 bg-black/20 backdrop-blur-md overflow-hidden custom-scrollbar\">\r\n                            <div className=\"overflow-x-auto\">\r\n                                <table className=\"w-full border-collapse min-w-[480px] md:min-w-[1000px]\">\r\n                                    <thead>\r\n                                        <tr className=\"bg-white/5 italic\">\r\n                                            <th className=\"p-2 md:p-4 text-left border-b border-white/10 text-[7px] md:text-[10px] font-black uppercase tracking-widest text-muted-foreground w-14 md:w-28\">Academic Day</th>\r\n                                            {dayTemplate.map(slot => (\r\n                                                <th key={slot.id} className=\"p-2 md:p-4 text-left border-b border-white/10 min-w-[80px] md:min-w-[150px]\">\r\n                                                    <div className=\"text-[6px] md:text-[8px] font-black text-muted-foreground/50 uppercase tracking-widest mb-0.5 md:mb-1\">{slot.startTime} - {slot.endTime}</div>\r\n                                                    <div className=\"text-[8px] md:text-xs font-black text-accent uppercase tracking-tighter truncate\">{slot.name}</div>\r\n                                                </th>\r\n                                            ))}\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {[\"MONDAY\", \"TUESDAY\", \"WEDNESDAY\", \"THURSDAY\", \"FRIDAY\", \"SATURDAY\"].map((day, dIdx) => {\r\n                                            const today = new Date();\r\n                                            const currentDay = today.getDay();\r\n                                            const distance = (dIdx + 1) - currentDay;\r\n                                            const targetDate = new Date(today);\r\n                                            targetDate.setDate(today.getDate() + distance);\r\n\r\n                                            const isHoliday = holidays.some(h => {\r\n                                                const start = h.createdAt?.seconds ? new Date(h.createdAt.seconds * 1000) : new Date();\r\n                                                const end = h.expiresAt?.seconds ? new Date(h.expiresAt.seconds * 1000) : new Date();\r\n                                                start.setHours(0, 0, 0, 0); end.setHours(23, 59, 59, 999);\r\n                                                return targetDate >= start && targetDate <= end;\r\n                                            });\r\n\r\n                                            return (\r\n                                                <tr key={day} className=\"border-b border-white/5 hover:bg-[#64FFDA]/5 group transition-colors\">\r\n                                                    <td className=\"p-2 md:p-4 bg-white/5\">\r\n                                                        <div className=\"text-[10px] md:text-xs font-black text-white italic\">{day.substring(0, 3)}</div>\r\n                                                        <div className=\"text-[7px] md:text-[9px] text-muted-foreground font-mono opacity-50\">{targetDate.toLocaleDateString(undefined, { day: '2-digit', month: 'short' })}</div>\r\n                                                    </td>\r\n                                                    {isHoliday ? (\r\n                                                        <td colSpan={dayTemplate.length} className=\"p-2 md:p-4 bg-red-500/5 text-center border-l border-red-500/10\">\r\n                                                            <div className=\"flex flex-col items-center justify-center text-red-400 gap-1\">\r\n                                                                <span className=\"font-black text-[8px] md:text-sm tracking-[0.1em] md:tracking-[0.3em] uppercase italic opacity-60\">Observance: Holiday</span>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                    ) : (\r\n                                                        dayTemplate.map(slot => {\r\n                                                            const cell = timetable[day]?.[slot.id] || {};\r\n\r\n                                                            if (slot.type === \"BREAK\") {\r\n                                                                return <td key={slot.id} className=\"p-2 md:p-4 bg-white/5 text-center text-[6px] md:text-[8px] font-black text-muted-foreground/20 tracking-[0.2em] md:tracking-[0.5em] diagonal-stripe italic\">RECESS</td>\r\n                                                            }\r\n\r\n                                                            const teacher = teachers.find(t => (t.schoolId || t.id) === cell.teacherId);\r\n                                                            const isUnassigned = cell.teacherId === \"UNASSIGNED\" || (cell.subjectId && cell.subjectId !== \"leisure\" && !cell.teacherId);\r\n\r\n                                                            return (\r\n                                                                <td key={slot.id} className=\"p-1.5 md:p-3 border-l border-white/5 min-w-[80px] md:min-w-[150px]\">\r\n                                                                    <div className=\"space-y-1 md:space-y-2 p-1 md:p-2 bg-white/5 rounded-lg md:rounded-xl border border-white/5 group-hover:bg-white/10 transition-all\">\r\n                                                                        <Select value={cell.subjectId} onValueChange={v => updateTimeTable(day, slot.id, \"subjectId\", v)}>\r\n                                                                            <SelectTrigger className=\"h-6 md:h-8 text-[8px] md:text-[10px] bg-black/40 border-white/5 rounded-md md:rounded-lg focus:ring-accent/30\"><SelectValue placeholder=\"Sub\" /></SelectTrigger>\r\n                                                                            <SelectContent className=\"bg-[#0A192F] border-white/10\">\r\n                                                                                <SelectItem value=\"leisure\" className=\"text-[9px] md:text-[10px] uppercase font-bold\">Leisure</SelectItem>\r\n                                                                                {subjects.map(s => <SelectItem key={s.id} value={s.id} className=\"text-[9px] md:text-[10px] font-bold\">{s.name}</SelectItem>)}\r\n                                                                            </SelectContent>\r\n                                                                        </Select>\r\n\r\n                                                                        {cell.subjectId && cell.subjectId !== \"leisure\" && (\r\n                                                                            <div className=\"px-0.5 md:px-1\">\r\n                                                                                {isUnassigned ? (\r\n                                                                                    <div className=\"flex flex-col gap-0.5\">\r\n                                                                                        <span className=\"text-[6px] md:text-[8px] text-red-400 font-black uppercase tracking-tighter animate-pulse\">Staff Needed</span>\r\n                                                                                        <Link\r\n                                                                                            href=\"/admin/master-data/classes-sections\"\r\n                                                                                            className=\"text-[6px] md:text-[7px] text-blue-400 underline decoration-blue-400/30 hover:text-blue-300 uppercase font-black\"\r\n                                                                                        >\r\n                                                                                            Assign\r\n                                                                                        </Link>\r\n                                                                                    </div>\r\n                                                                                ) : (\r\n                                                                                    <div className=\"flex items-center justify-between\">\r\n                                                                                        <div className=\"flex flex-col min-w-0\">\r\n                                                                                            <span className=\"text-[6px] md:text-[7px] text-muted-foreground font-black uppercase tracking-widest opacity-40 leading-none mb-0.5\">Teacher</span>\r\n                                                                                            <span className=\"text-[8px] md:text-[10px] text-emerald-400/90 font-bold truncate max-w-[60px] md:max-w-[100px]\">\r\n                                                                                                {teacher?.name}\r\n                                                                                            </span>\r\n                                                                                        </div>\r\n                                                                                        <div className=\"w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-emerald-500/50 shadow-[0_0_8px_rgba(16,185,129,0.3)] shrink-0\" />\r\n                                                                                    </div>\r\n                                                                                )}\r\n                                                                            </div>\r\n                                                                        )}\r\n                                                                    </div>\r\n                                                                </td>\r\n                                                            );\r\n                                                        })\r\n                                                    )}\r\n                                                </tr>\r\n                                            );\r\n                                        })}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </TabsContent>\r\n            </Tabs>\r\n        </div>\r\n    );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '7', height: '7', x: '3', y: '3', rx: '1', key: '1g98yp' }],\n  ['rect', { width: '7', height: '7', x: '14', y: '3', rx: '1', key: '6d4xhi' }],\n  ['rect', { width: '7', height: '7', x: '14', y: '14', rx: '1', key: 'nxv5o0' }],\n  ['rect', { width: '7', height: '7', x: '3', y: '14', rx: '1', key: '1bb6yr' }],\n];\n\n/**\n * @component @name LayoutGrid\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI3IiB4PSIzIiB5PSIzIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI3IiB4PSIxNCIgeT0iMyIgcng9IjEiIC8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iNyIgeD0iMTQiIHk9IjE0IiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI3IiB4PSIzIiB5PSIxNCIgcng9IjEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/layout-grid\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LayoutGrid = createLucideIcon('layout-grid', __iconNode);\n\nexport default LayoutGrid;\n"],"names":[],"mappings":"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","ignoreList":[3]}