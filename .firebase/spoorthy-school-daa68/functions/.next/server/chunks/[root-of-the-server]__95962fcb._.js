module.exports=[18622,(e,t,a)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},93695,(e,t,a)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},23502,(e,t,a)=>{},50700,(e,t,a)=>{t.exports=e.x("firebase-admin-a14c8a5423a75469",()=>require("firebase-admin-a14c8a5423a75469"))},73051,e=>{"use strict";e.i(23502);var t=e.i(50700);if(!t.default.apps.length)try{process.env.FIREBASE_PRIVATE_KEY?(console.log("[FirebaseAdmin] Initializing with project: spoorthy-school-daa68, bucket: spoorthy-school-daa68.appspot.com"),t.default.initializeApp({credential:t.default.credential.cert({projectId:"spoorthy-school-daa68",clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:process.env.FIREBASE_PRIVATE_KEY.replace(/\\n/g,"\n")}),databaseURL:"https://spoorthy-school-daa68-default-rtdb.firebaseio.com",storageBucket:"spoorthy-school-daa68.appspot.com"})):console.warn("FIREBASE_PRIVATE_KEY missing. Admin SDK not initialized.")}catch(e){console.error("Firebase Admin Init Failed:",e)}let a=t.default.apps.length?t.default.firestore():null,s=t.default.apps.length?t.default.auth():null,r=t.default.apps.length?t.default.storage():null,n=t.default.apps.length?t.default.database():null;e.s(["adminAuth",0,s,"adminDb",0,a,"adminRtdb",0,n,"adminStorage",0,r])},27817,e=>e.a(async(t,a)=>{try{let t=await e.y("firebase-admin-a14c8a5423a75469/firestore");e.n(t),a()}catch(e){a(e)}},!0),32285,e=>e.a(async(t,a)=>{try{var s=e.i(89171),r=e.i(73051),n=e.i(27817),i=t([n]);async function o(e){try{let e,t,a,i=r.adminDb.batch(),o="2025-2026",l="subject_maths",d="subject_science",c=r.adminDb.collection("subjects").doc(l);i.set(c,{name:"Mathematics",code:"MATHS",type:"THEORY"},{merge:!0});let u=r.adminDb.collection("subjects").doc(d);i.set(u,{name:"Science",code:"SCI",type:"THEORY"},{merge:!0});let p="class_10_a",h=r.adminDb.collection("classes").doc(p);i.set(h,{name:"Class 10",section:"A",grade:10},{merge:!0});let m=await r.adminDb.collection("teachers").where("name","==","Vihaan Goud").get();if(m.empty){let a=r.adminDb.collection("teachers").doc();e=a.id;try{t=(await r.adminAuth.createUser({email:"vihaan@school.local",password:"password123",displayName:"Vihaan Goud"})).uid,await r.adminAuth.setCustomUserClaims(t,{role:"TEACHER"})}catch(e){if("auth/email-already-exists"===e.code)t=(await r.adminAuth.getUserByEmail("vihaan@school.local")).uid;else throw e}i.set(a,{name:"Vihaan Goud",email:"vihaan@school.local",schoolId:"T2026001",uid:t,status:"ACTIVE",role:"TEACHER",subjects:[l]})}else e=m.docs[0].id,t=m.docs[0].data().uid;let E=await r.adminDb.collection("teachers").where("name","==","Teja Substitute").get();if(E.empty){let e,t=r.adminDb.collection("teachers").doc();a=t.id;try{e=(await r.adminAuth.createUser({email:"teja@school.local",password:"password123",displayName:"Teja Substitute"})).uid,await r.adminAuth.setCustomUserClaims(e,{role:"TEACHER"})}catch(t){if("auth/email-already-exists"===t.code)e=(await r.adminAuth.getUserByEmail("teja@school.local")).uid;else throw t}i.set(t,{name:"Teja Substitute",email:"teja@school.local",schoolId:"T2026002",uid:e,status:"ACTIVE",role:"TEACHER",subjects:[d]})}else a=E.docs[0].id;let R=r.adminDb.collection("teaching_assignments").doc(`${o}_${p}`);i.set(R,{yearId:o,classId:p,assignments:{[l]:e,[d]:a},updatedAt:n.FieldValue.serverTimestamp()});let f={},g={},b={};["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY"].forEach(t=>{f[t]||(f[t]={}),g[t]||(g[t]={}),b[t]||(b[t]={}),f[t]["1"]={subjectId:l,teacherId:e,startTime:"09:00",endTime:"10:00"},g[t]["1"]={classId:p,subjectId:l,startTime:"09:00",endTime:"10:00"},f[t]["2"]={subjectId:d,teacherId:a,startTime:"10:00",endTime:"11:00"},b[t]["2"]={classId:p,subjectId:d,startTime:"10:00",endTime:"11:00"}});let v=r.adminDb.collection("class_timetables").doc(`${o}_${p}`);i.set(v,{yearId:o,classId:p,schedule:f,status:"PUBLISHED"});let x=r.adminDb.collection("teacher_schedules").doc(`${o}_${e}`);i.set(x,{schedule:g});let w=r.adminDb.collection("teacher_schedules").doc(`${o}_${a}`);return i.set(w,{schedule:b}),await i.commit(),s.NextResponse.json({success:!0,message:"Setup Complete for Vihaan Goud",details:{teacher:{name:"Vihaan Goud",email:"vihaan@school.local",password:"password123",id:e},substitute:{name:"Teja Substitute",id:a},class:"Class 10-A",schedule:"Vihaan has Slot 1 (9-10 AM) daily. Teja has Slot 2."}})}catch(e){return console.error(e),s.NextResponse.json({error:e.message},{status:500})}}[n]=i.then?(await i)():i,e.s(["GET",()=>o]),a()}catch(e){a(e)}},!1),79078,e=>e.a(async(t,a)=>{try{var s=e.i(47909),r=e.i(74017),n=e.i(96250),i=e.i(59756),o=e.i(61916),l=e.i(74677),d=e.i(69741),c=e.i(16795),u=e.i(87718),p=e.i(95169),h=e.i(47587),m=e.i(66012),E=e.i(70101),R=e.i(26937),f=e.i(10372),g=e.i(93695);e.i(52474);var b=e.i(220),v=e.i(32285),x=t([v]);[v]=x.then?(await x)():x;let y=new s.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/admin/demo/setup-vihaan/route",pathname:"/api/admin/demo/setup-vihaan",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/admin/demo/setup-vihaan/route.ts",nextConfigOutput:"",userland:v}),{workAsyncStorage:T,workUnitAsyncStorage:C,serverHooks:I}=y;function w(){return(0,n.patchFetch)({workAsyncStorage:T,workUnitAsyncStorage:C})}async function A(e,t,a){y.isDev&&(0,i.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let s="/api/admin/demo/setup-vihaan/route";s=s.replace(/\/index$/,"")||"/";let n=await y.prepare(e,t,{srcPage:s,multiZoneDraftMode:!1});if(!n)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:v,params:x,nextConfig:w,parsedUrl:A,isDraftMode:T,prerenderManifest:C,routerServerContext:I,isOnDemandRevalidate:_,revalidateOnlyGenerated:j,resolvedPathname:S,clientReferenceManifest:D,serverActionsManifest:N}=n,P=(0,d.normalizeAppPath)(s),H=!!(C.dynamicRoutes[P]||C.routes[S]),U=async()=>((null==I?void 0:I.render404)?await I.render404(e,t,A,!1):t.end("This page could not be found"),null);if(H&&!T){let e=!!C.routes[S],t=C.dynamicRoutes[P];if(t&&!1===t.fallback&&!e){if(w.experimental.adapterPath)return await U();throw new g.NoFallbackError}}let O=null;!H||y.isDev||T||(O=S,O="/index"===O?"/":O);let k=!0===y.isDev||!H,q=H&&!k;N&&D&&(0,l.setManifestsSingleton)({page:s,clientReferenceManifest:D,serverActionsManifest:N});let F=e.method||"GET",M=(0,o.getTracer)(),$=M.getActiveScopeSpan(),V={params:x,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!w.experimental.authInterrupts},cacheComponents:!!w.cacheComponents,supportsDynamicResponse:k,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:w.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,s,r)=>y.onRequestError(e,t,s,r,I)},sharedContext:{buildId:v}},B=new c.NodeNextRequest(e),K=new c.NodeNextResponse(t),Y=u.NextRequestAdapter.fromNodeNextRequest(B,(0,u.signalFromNodeResponse)(t));try{let n=async e=>y.handle(Y,V).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=M.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=a.get("next.route");if(r){let t=`${F} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${F} ${s}`)}),l=!!(0,i.getRequestMeta)(e,"minimalMode"),d=async i=>{var o,d;let c=async({previousCacheEntry:r})=>{try{if(!l&&_&&j&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await n(i);e.fetchMetrics=V.renderOpts.fetchMetrics;let o=V.renderOpts.pendingWaitUntil;o&&a.waitUntil&&(a.waitUntil(o),o=void 0);let d=V.renderOpts.collectedTags;if(!H)return await (0,m.sendResponse)(B,K,s,V.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,E.toNodeOutgoingHttpHeaders)(s.headers);d&&(t[f.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==V.renderOpts.collectedRevalidate&&!(V.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&V.renderOpts.collectedRevalidate,r=void 0===V.renderOpts.collectedExpire||V.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:V.renderOpts.collectedExpire;return{value:{kind:b.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:r}}}}catch(t){throw(null==r?void 0:r.isStale)&&await y.onRequestError(e,t,{routerKind:"App Router",routePath:s,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:_})},!1,I),t}},u=await y.handleResponse({req:e,nextConfig:w,cacheKey:O,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:_,revalidateOnlyGenerated:j,responseGenerator:c,waitUntil:a.waitUntil,isMinimalMode:l});if(!H)return null;if((null==u||null==(o=u.value)?void 0:o.kind)!==b.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(d=u.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",_?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),T&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,E.fromNodeOutgoingHttpHeaders)(u.value.headers);return l&&H||p.delete(f.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,R.getCacheControlHeader)(u.cacheControl)),await (0,m.sendResponse)(B,K,new Response(u.value.body,{headers:p,status:u.value.status||200})),null};$?await d($):await M.withPropagatedContext(e.headers,()=>M.trace(p.BaseServerSpan.handleRequest,{spanName:`${F} ${s}`,kind:o.SpanKind.SERVER,attributes:{"http.method":F,"http.target":e.url}},d))}catch(t){if(t instanceof g.NoFallbackError||await y.onRequestError(e,t,{routerKind:"App Router",routePath:P,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:_})},!1,I),H)throw t;return await (0,m.sendResponse)(B,K,new Response(null,{status:500})),null}}e.s(["handler",()=>A,"patchFetch",()=>w,"routeModule",()=>y,"serverHooks",()=>I,"workAsyncStorage",()=>T,"workUnitAsyncStorage",()=>C]),a()}catch(e){a(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__95962fcb._.js.map