module.exports=[92708,e=>e.a(async(a,t)=>{try{var s=e.i(89171),o=e.i(73051),i=e.i(27817),l=a([i]);async function r(e){let a=[],t=Date.now();try{if(a.push("Starting 'Ecosystem Master' Super Seed - Populating all modules..."),!o.adminDb||!o.adminRtdb||!o.adminAuth)return s.NextResponse.json({success:!1,error:"Firebase Admin not initialized"},{status:500});let e="2025-2026",l="password123",r=o.adminDb.batch();a.push("1. Rebuilding Educational Framework (13 Classes, 2 Sections each)...");let n=await o.adminRtdb.ref("master/branding").get(),d=n.exists()?n.val():null,c={v1:{id:"v1",name:"Ameerpet",distance:0},v2:{id:"v2",name:"Madhapur",distance:5},v3:{id:"v3",name:"Kukatpally",distance:8},v4:{id:"v4",name:"Jubilee Hills",distance:4},v5:{id:"v5",name:"Banjara Hills",distance:6}},m=[{id:"nursery",name:"Nursery",order:1},{id:"lkg",name:"LKG",order:2},{id:"ukg",name:"UKG",order:3},{id:"c1",name:"1st Class",order:4},{id:"c2",name:"2nd Class",order:5},{id:"c3",name:"3rd Class",order:6},{id:"c4",name:"4th Class",order:7},{id:"c5",name:"5th Class",order:8},{id:"c6",name:"6th Class",order:9},{id:"c7",name:"7th Class",order:10},{id:"c8",name:"8th Class",order:11},{id:"c9",name:"9th Class",order:12},{id:"c10",name:"10th Class",order:13}],u={};m.forEach(e=>u[e.id]=e);let h={s_a:{id:"s_a",name:"Section A"},s_b:{id:"s_b",name:"Section B"}},p={sub_tel:{id:"sub_tel",name:"Telugu",code:"TEL"},sub_eng:{id:"sub_eng",name:"English",code:"ENG"},sub_mat:{id:"sub_mat",name:"Mathematics",code:"MAT"},sub_sci:{id:"sub_sci",name:"Science",code:"SCI"},sub_soc:{id:"sub_soc",name:"Social Studies",code:"SOC"},sub_hin:{id:"sub_hin",name:"Hindi",code:"HIN"},sub_phy:{id:"sub_phy",name:"Physics",code:"PHY"},sub_com:{id:"sub_com",name:"Computer",code:"COM"}},b=[{id:"T101",name:"Anjali Devi",email:"anjali@school.local",role:"TEACHER",subjects:["sub_tel"]},{id:"T102",name:"Ramesh Kumar",email:"ramesh@school.local",role:"TEACHER",subjects:["sub_mat"]},{id:"T103",name:"Sarah Wilson",email:"sarah@school.local",role:"TEACHER",subjects:["sub_eng"]},{id:"T104",name:"Vikram Seth",email:"vikram@school.local",role:"TEACHER",subjects:["sub_sci"]},{id:"T105",name:"Kiran Goud",email:"kiran@school.local",role:"TEACHER",subjects:["sub_soc"]},{id:"T106",name:"Latha Reddy",email:"latha@school.local",role:"TEACHER",subjects:["sub_hin"]},{id:"T107",name:"Prakash Jha",email:"prakash@school.local",role:"TEACHER",subjects:["sub_phy"]},{id:"T108",name:"Sumati Rao",email:"sumati@school.local",role:"TEACHER",subjects:["sub_com"]},{id:"T109",name:"Nidhi Agrawal",email:"nidhi@school.local",role:"TEACHER",subjects:["sub_mat"]},{id:"T110",name:"Rahul Deshmukh",email:"rahul@school.local",role:"TEACHER",subjects:["sub_eng"]},{id:"T111",name:"Priya Menon",email:"priya.m@school.local",role:"TEACHER",subjects:["sub_sci"]},{id:"T112",name:"Arjun Pillai",email:"arjun@school.local",role:"TEACHER",subjects:["sub_soc"]},{id:"T113",name:"Deepak Chawla",email:"deepak@school.local",role:"TEACHER",subjects:["sub_hin"]},{id:"T114",name:"Sneha Kapoor",email:"sneha@school.local",role:"TEACHER",subjects:["sub_phy"]},{id:"T115",name:"Vikrant Patil",email:"vikrant@school.local",role:"TEACHER",subjects:["sub_com"]},{id:"T116",name:"Suman Kalyan",email:"suman@school.local",role:"TEACHER",subjects:["sub_mat"]},{id:"T117",name:"Kavya S",email:"kavya@school.local",role:"TEACHER",subjects:["sub_eng"]},{id:"T118",name:"Manish G",email:"manish@school.local",role:"TEACHER",subjects:["sub_sci"]},{id:"T119",name:"Abhishek T",email:"abhishek@school.local",role:"TEACHER",subjects:["sub_soc"]},{id:"T120",name:"Pooja V",email:"pooja@school.local",role:"TEACHER",subjects:["sub_com"]},{id:"T121",name:"Sameer K",email:"sameer@school.local",role:"TEACHER",subjects:["sub_tel"]},{id:"T122",name:"Ritu M",email:"ritu@school.local",role:"TEACHER",subjects:["sub_mat"]},{id:"T123",name:"Sanjay D",email:"sanjay@school.local",role:"TEACHER",subjects:["sub_eng"]},{id:"T124",name:"Meera B",email:"meera.b@school.local",role:"TEACHER",subjects:["sub_sci"]},{id:"T125",name:"Varun R",email:"varun@school.local",role:"TEACHER",subjects:["sub_soc"]},{id:"T126",name:"Shweta L",email:"shweta@school.local",role:"TEACHER",subjects:["sub_hin"]},{id:"T127",name:"Admin User",email:"admin@school.local",role:"SUPER_ADMIN",subjects:[]}],g={},E={},T={};m.forEach((e,a)=>{let t=e.order<=3?["sub_tel","sub_eng","sub_mat","sub_com"]:Object.keys(p),s={};t.forEach(e=>s[e]=!0),T[e.id]=s,["s_a","s_b"].forEach((s,o)=>{let i=`${e.id}_${s}`,l=(2*a+o)%(b.length-1),r=b[l];g[i]={id:i,classId:e.id,sectionId:s,active:!0,classTeacherId:r.id},E[i]={},t.forEach((e,t)=>{let s=(a+o+t)%(b.length-1);E[i][e]=b[s].id})})});let f=d||{schoolName:"Spoorthy Concept School",address:"H-No: 2-3, Vidya Nagar, Hyderabad, TS",principalSignature:"https://firebasestorage.googleapis.com/v0/b/spoorthy-school.appspot.com/o/demo%2Fsignature.png?alt=media",schoolLogo:"https://firebasestorage.googleapis.com/v0/b/spoorthy-school.appspot.com/o/demo%2Flogo.png?alt=media"};await o.adminRtdb.ref("master").update({villages:c,classes:u,sections:h,subjects:p,classSections:g,classSubjects:T,subjectTeachers:E,branding:f}),a.push("... Syncing Master Data and Assignments to Firestore Cache..."),Object.entries(u).forEach(([e,a])=>r.set(o.adminDb.collection("master_classes").doc(e),{...a,updatedAt:i.Timestamp.now()},{merge:!0})),Object.entries(c).forEach(([e,a])=>r.set(o.adminDb.collection("master_villages").doc(e),{...a,updatedAt:i.Timestamp.now()},{merge:!0})),Object.entries(p).forEach(([e,a])=>r.set(o.adminDb.collection("master_subjects").doc(e),{...a,updatedAt:i.Timestamp.now()},{merge:!0})),Object.entries(h).forEach(([e,a])=>r.set(o.adminDb.collection("master_sections").doc(e),{...a,updatedAt:i.Timestamp.now()},{merge:!0})),m.forEach(a=>{["s_a","s_b"].forEach(t=>{let s=`${a.id}_${t}`;r.set(o.adminDb.collection("teaching_assignments").doc(`${e}_${s}`),{classId:a.id,sectionId:t,yearId:e,assignments:E[s],classTeacherId:g[s].classTeacherId,updatedAt:i.Timestamp.now()},{merge:!0})})}),a.push("... Initializing High-Performance CMS Content (Hero, Facilities, Gallery)..."),await o.adminRtdb.ref("siteContent/home").set({hero:{title:"The Future of Learning.",subtitle:"Where curiosity meets innovation in a world-class campus.",videoUrl:"https://videos.pexels.com/video-files/3195394/3195394-uhd_2560_1440_25fps.mp4"},facilities:{digital_classrooms:{title:"Digital Classrooms",desc:"Interactive smart boards with immersive content.",order:1,image:"https://images.unsplash.com/photo-1577896338042-327704b77134?w=800&q=80",isPublished:!0},professional_teachers:{title:"Professional Teachers",desc:"Highly qualified faculty dedicated to student growth.",order:2,image:"https://images.unsplash.com/photo-1544531586-fde5298cdd40?w=800&q=80",isPublished:!0},spoken_english:{title:"Spoken English",desc:"Special emphasis on communication and confidence.",order:3,image:"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=800&q=80",isPublished:!0},karate_classes:{title:"Karate Classes",desc:"Self-defense and discipline for physical fitness.",order:4,image:"https://images.unsplash.com/photo-1555597673-b21d5c935865?w=800&q=80",isPublished:!0},computer_classes:{title:"Computer Classes",desc:"State-of-the-art systems for technical literacy.",order:5,image:"https://images.unsplash.com/photo-1596495578065-6e0763fa1178?w=800&q=80",isPublished:!0},dance_classes:{title:"Dance Classes",desc:"Creative expression through classical and modern dance.",order:6,image:"https://images.unsplash.com/photo-1508700929628-666bc8bd84ea?w=800&q=80",isPublished:!0},cultural_programs:{title:"Cultural Programs",desc:"Celebrating heritage through stage performances.",order:7,image:"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=800&q=80",isPublished:!0}},leadership:{chairman:{name:"Anjali Devi",title:"Chairman",photo:"https://images.unsplash.com/photo-1560250097-0b93528c311a"},principal:{name:"Anjali Devi",title:"Principal",photo:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2"}},why:["Excellence in Education","Character Building","Creative Expression","Future Ready Skillset"],gallery:["https://images.unsplash.com/photo-1560785496-3c9d27877182","https://images.unsplash.com/photo-1546410531-bb4caa6b424d","https://images.unsplash.com/photo-1509062522246-3755977927d7","https://images.unsplash.com/photo-1596496053493-27f272c72b9a"]}),r.set(o.adminDb.collection("settings").doc("branding"),f,{merge:!0}),a.push("2. Creating Faculty & Staff Accounts (27 total) with Rich Profiles...");let R=["B.Ed, M.Sc","M.A, B.Ed","Ph.D","B.Tech","M.Com","B.Sc, B.Ed"];await Promise.all(b.map(async(e,a)=>{let t;try{t=(await o.adminAuth.createUser({email:e.email,password:l,displayName:e.name})).uid,await o.adminAuth.setCustomUserClaims(t,{role:e.role})}catch(a){if("auth/email-already-exists"===a.code)t=(await o.adminAuth.getUserByEmail(e.email)).uid;else throw a}let s=25e3+1e3*Math.floor(20*Math.random()),n=Math.floor(15*Math.random())+1,d=1980+Math.floor(15*Math.random());r.set(o.adminDb.collection("teachers").doc(e.id),{name:e.name,schoolId:e.id,uid:t,email:e.email,status:"ACTIVE",role:e.role,subjects:e.subjects||[],mobile:`98${Math.floor(9e7*Math.random()+1e7)}`,address:`Flat ${101+a}, Teacher Colony, Hyderabad`,dob:`${d}-05-15`,age:2025-d,joiningDate:`${2025-n}-06-01`,qualifications:R[a%R.length],experience:`${n} Years`,salary:s,password:l,createdAt:i.Timestamp.now()},{merge:!0}),r.set(o.adminDb.collection("users").doc(t),{schoolId:e.id,role:e.role,status:"ACTIVE",displayName:e.name,email:e.email,recoveryPassword:l},{merge:!0}),r.set(o.adminDb.collection("usersBySchoolId").doc(e.id),{uid:t,role:e.role},{merge:!0})})),a.push("... Creating 4 Default Student Groups (Houses)...");let C=[{id:"group_red",name:"Red House",code:"RED",color:"#ff4d4d"},{id:"group_blue",name:"Blue House",code:"BLUE",color:"#4d79ff"},{id:"group_green",name:"Green House",code:"GREEN",color:"#00cc66"},{id:"group_yellow",name:"Yellow House",code:"YELLOW",color:"#ffcc00"}];C.forEach(e=>{r.set(o.adminDb.collection("groups").doc(e.id),{...e,createdAt:i.Timestamp.now()},{merge:!0})}),a.push("3. Mass Enrollment: 260 Students (10 per Section, 26 Rooms)...");let _=[],y=["Arun","Deepika","Vihaan","Ananya","Kabir","Meera","Rohan","Priya","Ishaan","Zoya","Aditya","Saanvi","Reyansh","Diya","Sai","Myra","Shaurya","Anvith","Kiara","Aryan","Advait","Ishani","Karthik","Sneha","Rahul","Tanvi"],A=["Kumar","Rani","Singh","Pillai","Khan","Reddy","Das","Malik","Jha","Ahmed","Varma","Sharma","Goud","Patel","Naidu","Bose","Joshi","Iyer","Nair","Mishra"];m.forEach(e=>{["s_a","s_b"].forEach(a=>{for(let t=1;t<=10;t++){let s=_.length+1,o=`S${1e3+s}`,i=y[(s+t)%y.length],l=A[(s+t)%A.length],r=`${i} ${l}`,n=c[`v${s%5+1}`],d=C[s%4];_.push({id:o,name:r,email:`${i.toLowerCase()}.${o.toLowerCase()}@school.local`,classId:e.id,className:e.name,sectionId:a,sectionName:h[a].name,villageId:n.id,villageName:n.name,transportRequired:"v1"!==n.id,groupId:d.id,groupName:d.name,groupColor:d.color})}})}),a.push("... Processing student credentials in bulk...");let v=[];for(let e=0;e<_.length;e+=50)v.push(_.slice(e,e+50));for(let e of v)await Promise.all(e.map(async e=>{let a;try{a=(await o.adminAuth.createUser({email:e.email,password:l,displayName:e.name})).uid,await o.adminAuth.setCustomUserClaims(a,{role:"STUDENT"})}catch(t){if("auth/email-already-exists"!==t.code)return;a=(await o.adminAuth.getUserByEmail(e.email)).uid}r.set(o.adminDb.collection("students").doc(e.id),{studentName:e.name,schoolId:e.id,uid:a,classId:e.classId,className:e.className,sectionId:e.sectionId,sectionName:e.sectionName,villageId:e.villageId,villageName:e.villageName,transportRequired:e.transportRequired,status:"ACTIVE",parentName:"Parent of "+e.name,parentMobile:"98765432"+e.id.substring(1),groupId:e.groupId,groupName:e.groupName,groupColor:e.groupColor,recoveryPassword:l,createdAt:i.Timestamp.now()},{merge:!0}),r.set(o.adminDb.collection("users").doc(a),{schoolId:e.id,role:"STUDENT",status:"ACTIVE",displayName:e.name,email:e.email,recoveryPassword:l},{merge:!0}),r.set(o.adminDb.collection("usersBySchoolId").doc(e.id),{uid:a,role:"STUDENT"},{merge:!0})}));a.push("4. Generating 260 Dynamic Ledgers and Analytics...");let w=[{id:"term_adm",name:"Admission Fee",dueDate:"2025-06-01",isActive:!0},{id:"term_1",name:"Term 1",dueDate:"2025-06-15",isActive:!0},{id:"term_2",name:"Term 2",dueDate:"2025-10-15",isActive:!0}];r.set(o.adminDb.collection("config").doc("fees"),{terms:w,updatedAt:i.Timestamp.now()}),_.forEach((a,t)=>{let s=w.map(e=>({id:`TERM_${e.id}`,type:"TERM",name:e.name,dueDate:e.dueDate,amount:"c10"===a.classId?15e3:1e4,paidAmount:t%5==0?"c10"===a.classId?15e3:1e4:0,status:t%5==0?"PAID":"PENDING"})),l=s.reduce((e,a)=>e+a.amount,0),n=s.reduce((e,a)=>e+a.paidAmount,0);r.set(o.adminDb.collection("student_fee_ledgers").doc(`${a.id}_${e}`),{studentId:a.id,studentName:a.name,className:a.className,academicYearId:e,totalFee:l,totalPaid:n,status:n>=l?"PAID":"PENDING",items:s,updatedAt:i.Timestamp.now()},{merge:!0})}),a.push("5. Generating Timetables for 26 Sections & 27 Teachers...");let S={};m.forEach(a=>{["s_a","s_b"].forEach(t=>{let s=`${a.id}_${t}`,l={},n=Object.keys(T[a.id]);["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].forEach((e,o)=>{l[e]={};for(let i=1;i<=8;i++){let r=n[(o+i)%n.length],d=E[s][r];d&&(l[e][`P${i}`]={subjectId:r,teacherId:d},S[d]||(S[d]={}),S[d][e]||(S[d][e]={}),S[d][e][`P${i}`]={classId:a.id,sectionId:t,subjectId:r})}}),r.set(o.adminDb.collection("class_timetables").doc(`${e}_${a.id}_${t}`),{yearId:e,classId:a.id,sectionId:t,schedule:l,status:"PUBLISHED",updatedAt:i.Timestamp.now()})})}),Object.entries(S).forEach(([a,t])=>{r.set(o.adminDb.collection("teacher_schedules").doc(`${e}_${a}`),{schedule:t,updatedAt:i.Timestamp.now()})}),a.push("6. Finalizing Ecosystem..."),r.set(o.adminDb.collection("settings").doc("branding"),f,{merge:!0}),await r.commit();let I=(Date.now()-t)/1e3;return a.push(`SUCCESS: 13 Classes, 26 Sections, 27 Staff, 260 Students, Fully Populated Timetables and Ledgers in ${I}s.`),s.NextResponse.json({success:!0,message:"Large Scale School Rebuild Complete",duration:`${I}s`,logs:a})}catch(e){return console.error("Super Seed Error:",e),s.NextResponse.json({success:!1,error:e.message,logs:a},{status:500})}}[i]=l.then?(await l)():l,e.s(["GET",()=>r,"maxDuration",0,120]),t()}catch(e){t(e)}},!1),44168,e=>e.a(async(a,t)=>{try{var s=e.i(47909),o=e.i(74017),i=e.i(96250),l=e.i(59756),r=e.i(61916),n=e.i(74677),d=e.i(69741),c=e.i(16795),m=e.i(87718),u=e.i(95169),h=e.i(47587),p=e.i(66012),b=e.i(70101),g=e.i(26937),E=e.i(10372),T=e.i(93695);e.i(52474);var f=e.i(220),R=e.i(92708),C=a([R]);[R]=C.then?(await C)():C;let A=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/admin/demo/super-seed/route",pathname:"/api/admin/demo/super-seed",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/admin/demo/super-seed/route.ts",nextConfigOutput:"",userland:R}),{workAsyncStorage:v,workUnitAsyncStorage:w,serverHooks:S}=A;function _(){return(0,i.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:w})}async function y(e,a,t){A.isDev&&(0,l.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let s="/api/admin/demo/super-seed/route";s=s.replace(/\/index$/,"")||"/";let i=await A.prepare(e,a,{srcPage:s,multiZoneDraftMode:!1});if(!i)return a.statusCode=400,a.end("Bad Request"),null==t.waitUntil||t.waitUntil.call(t,Promise.resolve()),null;let{buildId:R,params:C,nextConfig:_,parsedUrl:y,isDraftMode:v,prerenderManifest:w,routerServerContext:S,isOnDemandRevalidate:I,revalidateOnlyGenerated:D,resolvedPathname:N,clientReferenceManifest:P,serverActionsManifest:j}=i,H=(0,d.normalizeAppPath)(s),M=!!(w.dynamicRoutes[H]||w.routes[N]),x=async()=>((null==S?void 0:S.render404)?await S.render404(e,a,y,!1):a.end("This page could not be found"),null);if(M&&!v){let e=!!w.routes[N],a=w.dynamicRoutes[H];if(a&&!1===a.fallback&&!e){if(_.experimental.adapterPath)return await x();throw new T.NoFallbackError}}let k=null;!M||A.isDev||v||(k=N,k="/index"===k?"/":k);let $=!0===A.isDev||!M,U=M&&!$;j&&P&&(0,n.setManifestsSingleton)({page:s,clientReferenceManifest:P,serverActionsManifest:j});let O=e.method||"GET",q=(0,r.getTracer)(),K=q.getActiveScopeSpan(),B={params:C,prerenderManifest:w,renderOpts:{experimental:{authInterrupts:!!_.experimental.authInterrupts},cacheComponents:!!_.cacheComponents,supportsDynamicResponse:$,incrementalCache:(0,l.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:_.cacheLife,waitUntil:t.waitUntil,onClose:e=>{a.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(a,t,s,o)=>A.onRequestError(e,a,s,o,S)},sharedContext:{buildId:R}},F=new c.NodeNextRequest(e),L=new c.NodeNextResponse(a),G=m.NextRequestAdapter.fromNodeNextRequest(F,(0,m.signalFromNodeResponse)(a));try{let i=async e=>A.handle(G,B).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":a.statusCode,"next.rsc":!1});let t=q.getRootSpanAttributes();if(!t)return;if(t.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${t.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=t.get("next.route");if(o){let a=`${O} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":a}),e.updateName(a)}else e.updateName(`${O} ${s}`)}),n=!!(0,l.getRequestMeta)(e,"minimalMode"),d=async l=>{var r,d;let c=async({previousCacheEntry:o})=>{try{if(!n&&I&&D&&!o)return a.statusCode=404,a.setHeader("x-nextjs-cache","REVALIDATED"),a.end("This page could not be found"),null;let s=await i(l);e.fetchMetrics=B.renderOpts.fetchMetrics;let r=B.renderOpts.pendingWaitUntil;r&&t.waitUntil&&(t.waitUntil(r),r=void 0);let d=B.renderOpts.collectedTags;if(!M)return await (0,p.sendResponse)(F,L,s,B.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),a=(0,b.toNodeOutgoingHttpHeaders)(s.headers);d&&(a[E.NEXT_CACHE_TAGS_HEADER]=d),!a["content-type"]&&e.type&&(a["content-type"]=e.type);let t=void 0!==B.renderOpts.collectedRevalidate&&!(B.renderOpts.collectedRevalidate>=E.INFINITE_CACHE)&&B.renderOpts.collectedRevalidate,o=void 0===B.renderOpts.collectedExpire||B.renderOpts.collectedExpire>=E.INFINITE_CACHE?void 0:B.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:a},cacheControl:{revalidate:t,expire:o}}}}catch(a){throw(null==o?void 0:o.isStale)&&await A.onRequestError(e,a,{routerKind:"App Router",routePath:s,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:I})},!1,S),a}},m=await A.handleResponse({req:e,nextConfig:_,cacheKey:k,routeKind:o.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:w,isRoutePPREnabled:!1,isOnDemandRevalidate:I,revalidateOnlyGenerated:D,responseGenerator:c,waitUntil:t.waitUntil,isMinimalMode:n});if(!M)return null;if((null==m||null==(r=m.value)?void 0:r.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==m||null==(d=m.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});n||a.setHeader("x-nextjs-cache",I?"REVALIDATED":m.isMiss?"MISS":m.isStale?"STALE":"HIT"),v&&a.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,b.fromNodeOutgoingHttpHeaders)(m.value.headers);return n&&M||u.delete(E.NEXT_CACHE_TAGS_HEADER),!m.cacheControl||a.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,g.getCacheControlHeader)(m.cacheControl)),await (0,p.sendResponse)(F,L,new Response(m.value.body,{headers:u,status:m.value.status||200})),null};K?await d(K):await q.withPropagatedContext(e.headers,()=>q.trace(u.BaseServerSpan.handleRequest,{spanName:`${O} ${s}`,kind:r.SpanKind.SERVER,attributes:{"http.method":O,"http.target":e.url}},d))}catch(a){if(a instanceof T.NoFallbackError||await A.onRequestError(e,a,{routerKind:"App Router",routePath:H,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:I})},!1,S),M)throw a;return await (0,p.sendResponse)(F,L,new Response(null,{status:500})),null}}e.s(["handler",()=>y,"patchFetch",()=>_,"routeModule",()=>A,"serverHooks",()=>S,"workAsyncStorage",()=>v,"workUnitAsyncStorage",()=>w]),t()}catch(e){t(e)}},!1)];

//# sourceMappingURL=_d15e8964._.js.map