(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(91918),r=e.i(75157);let l=s.forwardRef(({className:e,variant:s="default",size:l="default",asChild:i=!1,...c},n)=>{let o=i?a.Slot:"button";return(0,t.jsx)(o,{className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===s,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===s,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===s,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===s,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===s,"text-primary underline-offset-4 hover:underline":"link"===s,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===s,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===s,"h-10 px-6 py-2":"default"===l,"h-9 px-4 text-xs":"sm"===l,"h-12 px-8 text-base":"lg"===l,"h-14 px-10 text-lg":"xl"===l,"h-10 w-10":"icon"===l},e),ref:n,...c})});l.displayName="Button",e.s(["Button",()=>l])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},51761,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(32341);e.i(36180);var r=e.i(98925),l=e.i(59141),i=e.i(72498),c=e.i(19455),n=e.i(31278),o=e.i(71689),d=e.i(40160),x=e.i(75254);let m=(0,x.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),h=(0,x.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var p=e.i(63209),b=e.i(18566);function u({params:e}){let{id:x}=(0,s.use)(e),{user:u}=(0,a.useAuth)(),f=(0,b.useRouter)(),{subjects:g}=(0,i.useMasterData)(),[j,v]=(0,s.useState)(!0),[N,y]=(0,s.useState)(null),[k,w]=(0,s.useState)(null),[S,D]=(0,s.useState)(null),[F,M]=(0,s.useState)(null);(0,s.useEffect)(()=>{u&&A()},[u,x]);let A=async()=>{try{if(!u?.uid)return;let[e,t,s]=await Promise.all([(0,r.getDocs)((0,r.query)((0,r.collection)(l.db,"students"),(0,r.where)("uid","==",u.uid))),(0,r.getDoc)((0,r.doc)(l.db,"exams",x)),(0,r.getDoc)((0,r.doc)(l.db,"settings","branding"))]);if(e.empty)return void v(!1);let a={id:e.docs[0].id,...e.docs[0].data()};if(D(a),!t.exists())return void f.push("/student/exams");y({id:t.id,...t.data()}),s.exists()&&M(s.data());let i=(0,r.doc)(l.db,"exam_results",`${x}_${a.id}`),c=await (0,r.getDoc)(i);c.exists()?w(c.data()):w(null)}catch(e){console.error(e)}finally{v(!1)}};if(j)return(0,t.jsx)("div",{className:"flex justify-center p-20 text-[#E6F1FF]",children:(0,t.jsx)(n.Loader2,{className:"animate-spin"})});if(!N)return null;let E=(()=>{if(!k?.subjects)return{total:0,max:0,percentage:0};let e=0,t=0;return Object.values(k.subjects).forEach(s=>{let a=parseFloat(s.obtained),r=parseFloat(s.maxMarks);isNaN(a)||(e+=a),isNaN(r)||(t+=r)}),{total:e,max:t,percentage:t>0?e/t*100:0}})(),z=E.percentage>=35?"PASSED":"FAILED";return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 pb-10 print:max-w-none print:p-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 print:hidden",children:[(0,t.jsx)(c.Button,{variant:"ghost",size:"icon",onClick:()=>f.push("/student/exams"),className:"text-[#8892B0] hover:text-[#E6F1FF]",children:(0,t.jsx)(o.ArrowLeft,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-[#E6F1FF]",children:"Result Report"}),(0,t.jsx)("p",{className:"text-[#8892B0] text-sm",children:"Official Statement of Marks"})]}),(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsxs)(c.Button,{onClick:()=>window.print(),variant:"outline",className:"border-[#64FFDA]/30 text-[#64FFDA] hover:bg-[#64FFDA]/10 gap-2",children:[(0,t.jsx)(d.Download,{className:"w-4 h-4"})," Print / Download PDF"]})})]}),(0,t.jsxs)("div",{className:"bg-white text-black p-8 md:p-12 rounded-lg shadow-xl print:shadow-none print:p-0 relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"text-center border-b-2 border-black/10 pb-8 mb-8 relative z-10",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 mb-4",children:[F?.schoolLogo&&(0,t.jsx)("img",{src:F.schoolLogo,alt:"School Logo",className:"h-24 object-contain"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-serif font-bold uppercase tracking-wide mb-2",children:"Spoorthy Concept School"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 font-medium tracking-widest uppercase",children:"Excellence in Education"})]})]}),(0,t.jsx)("div",{className:"mt-2 inline-block px-6 py-2 bg-black text-white text-sm font-bold uppercase tracking-widest rounded-full",children:"Statement of Marks"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-8 mb-8 text-sm relative z-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-black/50 font-bold uppercase text-[10px] tracking-widest mb-1",children:"Student Details"}),(0,t.jsx)("h3",{className:"text-xl font-bold",children:S?.studentName}),(0,t.jsxs)("p",{className:"font-mono mt-1",children:["ID: ",S?.schoolId]}),(0,t.jsxs)("p",{className:"font-medium mt-1",children:["Class: ",S?.className," - ",S?.sectionName]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-black/50 font-bold uppercase text-[10px] tracking-widest mb-1",children:"Examination"}),(0,t.jsx)("h3",{className:"text-xl font-bold",children:N.name}),(0,t.jsx)("p",{className:"mt-1",children:N.academicYear||"2025-26"}),(0,t.jsxs)("p",{className:"text-black/50 mt-1 text-xs",children:["Date: ",new Date(N.startDate).toLocaleDateString()]})]})]}),k?(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("table",{className:"w-full mb-8",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b-2 border-black",children:[(0,t.jsx)("th",{className:"py-3 text-left font-bold uppercase text-xs tracking-wider w-1/2",children:"Subject"}),(0,t.jsx)("th",{className:"py-3 text-center font-bold uppercase text-xs tracking-wider",children:"Max Marks"}),(0,t.jsx)("th",{className:"py-3 text-center font-bold uppercase text-xs tracking-wider",children:"Obtained"}),(0,t.jsx)("th",{className:"py-3 text-left pl-8 font-bold uppercase text-xs tracking-wider",children:"Remarks"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-black/10",children:Object.entries(k.subjects||{}).map(([e,s])=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-4 font-bold",children:g[e]?.name||e}),(0,t.jsx)("td",{className:"py-4 text-center font-mono text-black/60",children:s.maxMarks}),(0,t.jsx)("td",{className:"py-4 text-center font-bold text-lg",children:s.obtained}),(0,t.jsx)("td",{className:"py-4 pl-8 text-sm italic text-black/60",children:s.remarks||"-"})]},e))}),(0,t.jsx)("tfoot",{className:"border-t-2 border-black bg-black/5",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-4 pl-4 font-bold uppercase text-sm",children:"Grand Total"}),(0,t.jsx)("td",{className:"py-4 text-center font-bold",children:E.max}),(0,t.jsx)("td",{className:"py-4 text-center font-bold text-xl",children:E.total}),(0,t.jsxs)("td",{className:"py-4 pl-8 font-bold text-sm",children:[E.percentage.toFixed(1),"%"]})]})})]}),(0,t.jsxs)("div",{className:"flex justify-between items-end border-t border-black/10 pt-8 mt-12",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-black/50 font-bold uppercase text-[10px] tracking-widest mb-2",children:"Final Result"}),(0,t.jsxs)("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded border ${"PASSED"===z?"bg-green-500/10 border-green-500 text-green-700":"bg-red-500/10 border-red-500 text-red-700"}`,children:["PASSED"===z?(0,t.jsx)(m,{className:"w-5 h-5"}):(0,t.jsx)(h,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-bold tracking-widest",children:z})]})]}),(0,t.jsxs)("div",{className:"text-center flex flex-col items-center gap-2",children:[F?.principalSignature?(0,t.jsx)("img",{src:F.principalSignature,alt:"Principal Signature",className:"h-16 object-contain -mb-4"}):(0,t.jsx)("div",{className:"w-32 border-b border-black/20 h-16"}),(0,t.jsx)("div",{className:"w-32 border-b border-black/20"}),(0,t.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-black/40",children:"Principal Signature"})]})]}),(0,t.jsx)("div",{className:"mt-12 text-center text-[10px] text-black/30 font-mono",children:"Generated electronically from Spoorthy School System. Valid without signature for online verification."})]}):(0,t.jsxs)("div",{className:"text-center py-20 border border-dashed border-black/20 rounded-lg relative z-10",children:[(0,t.jsx)(p.AlertCircle,{className:"w-10 h-10 mx-auto text-black/20 mb-4"}),(0,t.jsx)("p",{className:"text-black/50 font-medium",children:"Results for this exam have not been uploaded for your profile yet."}),(0,t.jsx)("p",{className:"text-black/40 text-xs mt-2",children:"Please contact your class teacher."})]}),F?.schoolLogo&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-[0.03] pointer-events-none z-0",children:(0,t.jsx)("img",{src:F.schoolLogo,alt:"",className:"w-full max-w-lg object-contain grayscale"})})]})]})}e.s(["default",()=>u],51761)}]);