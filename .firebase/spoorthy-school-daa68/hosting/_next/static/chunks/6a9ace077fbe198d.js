(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(91918),r=e.i(75157);let i=s.forwardRef(({className:e,variant:s="default",size:i="default",asChild:n=!1,...l},d)=>{let c=n?a.Slot:"button";return(0,t.jsx)(c,{className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===s,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===s,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===s,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===s,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===s,"text-primary underline-offset-4 hover:underline":"link"===s,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===s,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===s,"h-10 px-6 py-2":"default"===i,"h-9 px-4 text-xs":"sm"===i,"h-12 px-8 text-base":"lg"===i,"h-14 px-10 text-lg":"xl"===i,"h-10 w-10":"icon"===i},e),ref:d,...l})});i.displayName="Button",e.s(["Button",()=>i])},15288,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...s}));r.displayName="Card";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("h3",{ref:r,className:(0,a.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...s}));n.displayName="CardTitle";let l=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-white/60 font-medium",e),...s}));l.displayName="CardDescription";let d=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>n])},3281,e=>{"use strict";let t=(0,e.i(75254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],3281)},27516,e=>{"use strict";let t=(0,e.i(75254).default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);e.s(["History",()=>t],27516)},4731,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(32341),r=e.i(15288),i=e.i(19455),n=e.i(87486),l=e.i(31278),d=e.i(69638),c=e.i(52754),o=e.i(27516),x=e.i(78583),m=e.i(3281);e.i(36180);var h=e.i(98925),u=e.i(59141),f=e.i(71431);function g(){let{user:e}=(0,a.useAuth)(),[g,p]=(0,s.useState)(null),[b,v]=(0,s.useState)([]),[j,N]=(0,s.useState)(!0),[y,w]=(0,s.useState)(!1),[F,C]=(0,s.useState)(null),[D,A]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&B()},[e]);let B=async()=>{if(e?.uid)try{let t=(0,h.query)((0,h.collection)(u.db,"students"),(0,h.where)("uid","==",e.uid)),s=await (0,h.getDocs)(t);if(s.empty)return void N(!1);let a={id:s.docs[0].id,...s.docs[0].data()},r=a.schoolId||a.id;C(r),A(a);let i=(0,h.doc)(u.db,"student_fee_ledgers",`${r}_2025-2026`),n=await (0,h.getDoc)(i);n.exists()&&p(n.data());try{let e=(0,h.collection)(u.db,"payments"),t=(0,h.query)(e,(0,h.where)("studentId","==",r),(0,h.orderBy)("date","desc"),(0,h.limit)(20)),s=await (0,h.getDocs)(t);v(s.docs.map(e=>({id:e.id,...e.data()})))}catch(a){console.warn("Payments fetch error (index?):",a);let e=(0,h.collection)(u.db,"payments"),t=(0,h.query)(e,(0,h.where)("studentId","==",r)),s=(await (0,h.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{let s=e.date?.seconds||0;return(t.date?.seconds||0)-s});v(s)}}catch(e){console.error("Error fetching fees:",e)}finally{N(!1)}},k=async e=>{alert("Online payment integration is currently under maintenance. Please contact the administration.")};if(j)return(0,t.jsx)("div",{className:"p-10 flex justify-center text-[#E6F1FF]",children:(0,t.jsx)(l.Loader2,{className:"animate-spin"})});let P=g?.items||[],E=P.reduce((e,t)=>e+(t.amount-(t.paidAmount||0)),0);return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-10",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[#E6F1FF]",children:"Fees & Payments"}),(0,t.jsx)(n.Badge,{variant:E<=0?"default":"destructive",className:E<=0?"bg-green-500/20 text-green-400":"",children:E<=0?"All Dues Cleared":"Payment Pending"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(r.Card,{className:"bg-[#112240] border-[#64FFDA]/10 lg:col-span-1",children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)(r.CardTitle,{className:"text-[#64FFDA] flex items-center gap-2",children:[(0,t.jsx)(c.Wallet,{className:"w-5 h-5"})," Total Payable"]})}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsxs)("div",{className:"text-4xl font-bold text-[#E6F1FF] font-mono",children:["₹ ",E.toLocaleString()]}),(0,t.jsx)("p",{className:"text-sm text-[#8892B0] mt-2 mb-6",children:"Outstanding amount for current academic year."}),E>0?(0,t.jsx)(i.Button,{onClick:()=>k(E),disabled:y,className:"w-full bg-[#3B82F6] hover:bg-[#2563EB] text-white font-bold h-12 text-lg shadow-[0_0_20px_-5px_#3B82F6]",children:y?(0,t.jsx)(l.Loader2,{className:"animate-spin mr-2"}):"Pay Fees Now"}):(0,t.jsxs)("div",{className:"flex items-center justify-center p-4 bg-green-500/10 rounded-lg text-green-400 font-medium",children:[(0,t.jsx)(d.CheckCircle,{className:"mr-2 h-5 w-5"})," No Dues Pending"]})]})]}),(0,t.jsxs)(r.Card,{className:"bg-[#112240] border-[#64FFDA]/10 lg:col-span-2 flex flex-col",children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)(r.CardTitle,{className:"text-[#E6F1FF] flex items-center gap-2",children:[(0,t.jsx)(o.History,{className:"w-5 h-5"})," Payment History"]})}),(0,t.jsx)(r.CardContent,{className:"flex-1 overflow-auto max-h-[300px] scrollbar-thin scrollbar-thumb-white/10",children:0===b.length?(0,t.jsx)("div",{className:"text-center py-10 text-[#8892B0]",children:"No payment history found."}):(0,t.jsx)("div",{className:"space-y-3",children:b.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded bg-[#0A192F]/50 border border-white/5 hover:border-[#64FFDA]/20 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-green-500/10 text-green-400",children:(0,t.jsx)(d.CheckCircle,{size:16})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-mono text-[#E6F1FF]",children:["₹",Number(e.amount).toLocaleString()]}),(0,t.jsxs)("div",{className:"text-xs text-[#8892B0] flex gap-2",children:[(0,t.jsx)("span",{children:e.date?.toDate?e.date.toDate().toLocaleDateString():"N/A"}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{className:"uppercase",children:e.method})]})]})]}),(0,t.jsxs)(i.Button,{size:"sm",variant:"outline",className:"border-[#64FFDA]/20 text-[#64FFDA] hover:bg-[#64FFDA]/10",onClick:()=>(0,f.printPaymentReceipt)({payment:e,student:D,ledger:g}),children:[(0,t.jsx)(m.Printer,{className:"w-3 h-3 mr-2"})," Receipt"]})]},s))})})]})]}),(0,t.jsxs)(r.Card,{className:"bg-[#112240] border-[#64FFDA]/10",children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)(r.CardTitle,{className:"text-[#E6F1FF] flex items-center gap-2",children:[(0,t.jsx)(x.FileText,{className:"w-5 h-5"})," Fee Breakdown"]})}),(0,t.jsx)(r.CardContent,{children:P.length?(0,t.jsx)("div",{className:"space-y-4",children:P.map((e,s)=>{let a=e.paidAmount||0,r=e.amount-a<=0;return(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between p-4 rounded-lg bg-[#0A192F]/50 border border-white/5 hover:border-white/10 transition-colors",children:[(0,t.jsxs)("div",{className:"mb-2 md:mb-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-bold text-lg text-[#E6F1FF]",children:e.name}),(0,t.jsx)(n.Badge,{variant:"outline",className:"text-xs border-white/10 text-[#8892B0] uppercase",children:e.type||"FEE"})]}),(0,t.jsxs)("div",{className:"text-sm text-[#8892B0] mt-1",children:["Due Date: ",e.dueDate||"N/A"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs text-[#8892B0] uppercase tracking-wider mb-1",children:"Status"}),(0,t.jsx)("div",{className:`font-bold text-sm ${r?"text-green-400":"text-yellow-400"}`,children:r?"PAID":"PENDING"})]}),(0,t.jsxs)("div",{className:"text-right min-w-[100px]",children:[(0,t.jsx)("div",{className:"text-xs text-[#8892B0] uppercase tracking-wider mb-1",children:"Amount"}),(0,t.jsxs)("div",{className:"font-mono text-xl text-[#E6F1FF]",children:["₹ ",e.amount.toLocaleString()]}),a>0&&!r&&(0,t.jsxs)("div",{className:"text-xs text-green-400",children:["Paid: ₹",a.toLocaleString()]})]})]})]},s)})}):(0,t.jsx)("div",{className:"text-center py-10 text-[#8892B0]",children:"No active fee structure assigned."})})]})]})}e.s(["default",()=>g])}]);