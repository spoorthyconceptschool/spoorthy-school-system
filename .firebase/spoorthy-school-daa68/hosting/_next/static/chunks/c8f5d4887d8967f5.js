(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let i=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...a}));i.displayName="Card";let r=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));r.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("h3",{ref:i,className:(0,s.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...a}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("p",{ref:i,className:(0,s.cn)("text-sm text-white/60 font-medium",e),...a}));d.displayName="CardDescription";let n=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent",a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>i,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>r,"CardTitle",()=>l])},93479,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let i=a.forwardRef(({className:e,type:a,...i},r)=>(0,t.jsx)("input",{type:a,className:(0,s.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",e),ref:r,...i}));i.displayName="Input",e.s(["Input",()=>i])},76639,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(26999),i=e.i(37727),r=e.i(75157);let l=s.Root,d=s.Trigger,n=s.Portal;s.Close;let o=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(s.Overlay,{ref:i,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));o.displayName=s.Overlay.displayName;let c=a.forwardRef(({className:e,children:a,...l},d)=>(0,t.jsxs)(n,{children:[(0,t.jsx)(o,{}),(0,t.jsxs)(s.Content,{ref:d,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...l,children:[a,(0,t.jsxs)(s.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=s.Content.displayName;let m=({className:e,...a})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});m.displayName="DialogHeader";let x=({className:e,...a})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});x.displayName="DialogFooter";let h=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(s.Title,{ref:i,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));h.displayName=s.Title.displayName;let p=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(s.Description,{ref:i,className:(0,r.cn)("text-sm text-muted-foreground",e),...a}));p.displayName=s.Description.displayName,e.s(["Dialog",()=>l,"DialogContent",()=>c,"DialogDescription",()=>p,"DialogFooter",()=>x,"DialogHeader",()=>m,"DialogTitle",()=>h,"DialogTrigger",()=>d])},3281,e=>{"use strict";let t=(0,e.i(75254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],3281)},95468,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},77572,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(81140),i=e.i(30030),r=e.i(42727),l=e.i(96626),d=e.i(48425),n=e.i(86318),o=e.i(69340),c=e.i(10772),m="Tabs",[x,h]=(0,i.createContextScope)(m,[r.createRovingFocusGroupScope]),p=(0,r.createRovingFocusGroupScope)(),[u,b]=x(m),g=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:i,onValueChange:r,defaultValue:l,orientation:x="horizontal",dir:h,activationMode:p="automatic",...b}=e,g=(0,n.useDirection)(h),[f,j]=(0,o.useControllableState)({prop:i,onChange:r,defaultProp:l??"",caller:m});return(0,t.jsx)(u,{scope:s,baseId:(0,c.useId)(),value:f,onValueChange:j,orientation:x,dir:g,activationMode:p,children:(0,t.jsx)(d.Primitive.div,{dir:g,"data-orientation":x,...b,ref:a})})});g.displayName=m;var f="TabsList",j=a.forwardRef((e,a)=>{let{__scopeTabs:s,loop:i=!0,...l}=e,n=b(f,s),o=p(s);return(0,t.jsx)(r.Root,{asChild:!0,...o,orientation:n.orientation,dir:n.dir,loop:i,children:(0,t.jsx)(d.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...l,ref:a})})});j.displayName=f;var v="TabsTrigger",w=a.forwardRef((e,a)=>{let{__scopeTabs:i,value:l,disabled:n=!1,...o}=e,c=b(v,i),m=p(i),x=C(c.baseId,l),h=k(c.baseId,l),u=l===c.value;return(0,t.jsx)(r.Item,{asChild:!0,...m,focusable:!n,active:u,children:(0,t.jsx)(d.Primitive.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":h,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:x,...o,ref:a,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(l)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(l)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;u||n||!e||c.onValueChange(l)})})})});w.displayName=v;var N="TabsContent",y=a.forwardRef((e,s)=>{let{__scopeTabs:i,value:r,forceMount:n,children:o,...c}=e,m=b(N,i),x=C(m.baseId,r),h=k(m.baseId,r),p=r===m.value,u=a.useRef(p);return a.useEffect(()=>{let e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(l.Presence,{present:n||p,children:({present:a})=>(0,t.jsx)(d.Primitive.div,{"data-state":p?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":x,hidden:!a,id:h,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:u.current?"0s":void 0},children:a&&o})})});function C(e,t){return`${e}-trigger-${t}`}function k(e,t){return`${e}-content-${t}`}y.displayName=N;var T=e.i(75157);let D=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(j,{ref:s,className:(0,T.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));D.displayName=j.displayName;let $=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(w,{ref:s,className:(0,T.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));$.displayName=w.displayName;let I=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(y,{ref:s,className:(0,T.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));I.displayName=y.displayName,e.s(["Tabs",()=>g,"TabsContent",()=>I,"TabsList",()=>D,"TabsTrigger",()=>$],77572)},97990,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(19455),i=e.i(93479),r=e.i(76639),l=e.i(77572),d=e.i(15288),n=e.i(72498),o=e.i(59141);e.i(1465);var c=e.i(34991),m=e.i(27612),x=e.i(7233),h=e.i(10980),p=e.i(95468),u=e.i(51501),b=e.i(61911),g=e.i(40160),f=e.i(3281),j=e.i(43531);e.i(36180);var v=e.i(98925),w=e.i(71431),N=e.i(75157);function y(){let{classes:e,sections:y,classSections:C,subjects:k,classSubjects:T,subjectTeachers:D,branding:$,loading:I}=(0,n.useMasterData)(),[S,z]=(0,a.useState)("classes"),[R,A]=(0,a.useState)(""),[O,P]=(0,a.useState)(1),[B,F]=(0,a.useState)(!1),[_,H]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{let e=(0,v.query)((0,v.collection)(o.db,"teachers"),(0,v.orderBy)("name")),t=await (0,v.getDocs)(e);H(t.docs.map(e=>({id:e.id,...e.data()})))}catch(e){console.error("Failed to fetch teachers",e)}})()},[]);let E=async()=>{if(!R)return;F(!0);let e=(0,c.push)((0,c.ref)(o.rtdb,"master/classes"));await (0,c.set)(e,{id:e.key,name:R,order:O}),A(""),F(!1)},L=async e=>{confirm("Delete this Class?")&&await (0,c.remove)((0,c.ref)(o.rtdb,`master/classes/${e}`))},M=async()=>{if(!R)return;F(!0);let e=(0,c.push)((0,c.ref)(o.rtdb,"master/sections"));await (0,c.set)(e,{id:e.key,name:R}),A(""),F(!1)},V=async e=>{confirm("Delete this Section?")&&await (0,c.remove)((0,c.ref)(o.rtdb,`master/sections/${e}`))},G=async(e,t,a)=>{let s=`${e}_${t}`,i=(0,c.ref)(o.rtdb,`master/classSections/${s}`);a?await (0,c.remove)(i):await (0,c.set)(i,{id:s,classId:e,sectionId:t,active:!0})},K=async(e,t)=>{if(!e)return;let a=(0,c.ref)(o.rtdb,`master/classSections/${e}/classTeacherId`);await (0,c.set)(a,t)},U=(e,t)=>!!C[`${e}_${t}`],q=()=>Object.values(C).filter(e=>e.active),[X,J]=(0,a.useState)([]),[Q,W]=(0,a.useState)(!1),Y=t=>Object.values(C).filter(e=>e.active&&t.includes(e.id)).map(t=>{let a=Object.keys(T[t.classId]||{}).filter(e=>"id"!==e&&T[t.classId][e]&&k[e]).map(e=>({name:k[e].name,teacher:_.find(a=>a.id===D[`${t.classId}_${t.sectionId}`]?.[e])?.name||"Not Assigned"}));return{className:e[t.classId]?.name||"N/A",sectionName:y[t.sectionId]?.name||"N/A",classTeacher:_.find(e=>e.id===t.classTeacherId)?.name||"N/A",subjects:a}}).sort((e,t)=>e.className.localeCompare(t.className)||e.sectionName.localeCompare(t.sectionName));return I?(0,t.jsx)("div",{className:"p-10 text-center animate-pulse",children:"Loading Academy Data..."}):(0,t.jsxs)("div",{className:"space-y-4 md:space-y-6 max-w-none p-0 animate-in fade-in",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-0 px-1",children:[(0,t.jsx)("h1",{className:"text-xl md:text-3xl font-display font-bold",children:"Academic Structure"}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(r.Dialog,{open:Q,onOpenChange:W,children:[(0,t.jsx)(r.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",className:"w-full md:w-auto gap-2 bg-emerald-500/10 border-emerald-500/20 text-emerald-400 hover:bg-emerald-500/20",children:[(0,t.jsx)(g.Download,{size:14})," Export / Print Reports"]})}),(0,t.jsxs)(r.DialogContent,{className:"bg-black/95 border-white/10 text-white max-w-xl",children:[(0,t.jsx)(r.DialogHeader,{children:(0,t.jsx)(r.DialogTitle,{children:"Select Classes for Report"})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4 max-h-[400px] overflow-y-auto pr-2",children:[(0,t.jsxs)("div",{className:"col-span-2 flex justify-between items-center px-2 py-1",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{className:"text-[10px] uppercase tracking-widest text-accent hover:underline font-bold",onClick:()=>{J(q().map(e=>e.id))},children:"Select All"}),(0,t.jsx)("button",{className:"text-[10px] uppercase tracking-widest text-white/40 hover:text-white",onClick:()=>J([]),children:"Clear All"})]}),(0,t.jsxs)("span",{className:"text-[10px] text-muted-foreground",children:[X.length," Selected"]})]}),q().sort((t,a)=>{let s=e[t.classId]?.order||0,i=e[a.classId]?.order||0;return s!==i?s-i:(y[t.sectionId]?.name||"").localeCompare(y[a.sectionId]?.name||"")}).map(a=>{let s=X.includes(a.id);return(0,t.jsxs)("div",{onClick:()=>{J(e=>s?e.filter(e=>e!==a.id):[...e,a.id])},className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${s?"bg-white/10 border-white/40":"bg-white/5 border-white/5 opacity-60 hover:opacity-100"}`,children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-bold text-sm",children:e[a.classId]?.name}),(0,t.jsxs)("div",{className:"text-[10px] text-muted-foreground",children:["Section ",y[a.sectionId]?.name]})]}),s&&(0,t.jsx)(j.Check,{size:14,className:"text-emerald-400"})]},a.id)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[(0,t.jsxs)(s.Button,{disabled:0===X.length,onClick:()=>{let e;return e=Y(X),void((0,w.exportAcademicLoad)(e),W(!1))},className:"bg-emerald-500 text-white hover:bg-emerald-600 gap-2",children:[(0,t.jsx)(g.Download,{size:16})," Excel Export ",`(${X.length})`]}),(0,t.jsxs)(s.Button,{disabled:0===X.length,onClick:()=>(e=>{let t=Y(e),a=window.open("","_blank");if(!a)return;let s=`
            <html>
                <head>
                    <title>Academic Assignments Report</title>
                    <style>
                        body { font-family: sans-serif; padding: 20px; }
                        table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
                        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
                        th { background-color: #f4f4f4; }
                        .header { display: flex; align-items: center; justify-content: center; gap: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 20px; }
                        .logo { height: 80px; width: auto; object-fit: contain; }
                        .header-text { text-align: left; }
                        h1 { margin: 0; font-size: 28px; }
                        .section-title { font-size: 20px; font-weight: bold; margin-top: 10px; border-bottom: 2px solid #333; padding-bottom: 5px; }
                        .page-container { page-break-after: always; padding-bottom: 40px; }
                        /* Don't add a page break after the last item */
                        .page-container:last-child { page-break-after: auto; }
                    </style>
                </head>
                <body>
                    ${t.map(e=>`
                        <div class="page-container">
                            <div class="header">
                                ${$?.schoolLogo?`<img src="${$.schoolLogo}" class="logo" />`:""}
                                <div class="header-text">
                                    <h1>${$?.schoolName||"Spoorthy Concept School"}</h1>
                                    <h3 style="margin: 5px 0 0 0; color: #666;">Academic Assignments: ${e.className} - ${e.sectionName}</h3>
                                </div>
                            </div>
                            <p style="text-align: right; font-size: 10px;">Generated: ${new Date().toLocaleString()}</p>
                            
                            <p><strong>Primary Class Teacher:</strong> ${e.classTeacher}</p>
                            <table>
                                <thead>
                                    <tr>
                                        <th style="width: 50%">Subject</th>
                                        <th>Assigned Teacher</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${e.subjects.length>0?e.subjects.map(e=>`<tr><td>${e.name}</td><td>${e.teacher}</td></tr>`).join(""):'<tr><td colspan="2" style="text-align:center;">No Subjects Assigned</td></tr>'}
                                </tbody>
                            </table>
                        </div>
                    `).join("")}
                    <script>window.onload = () => { window.print(); window.close(); };</script>
                </body>
            </html>
        `;a.document.write(s),a.document.close(),W(!1)})(X),className:"bg-zinc-100 text-black hover:bg-zinc-200 gap-2",children:[(0,t.jsx)(f.Printer,{size:16})," Print View ",`(${X.length})`]})]})]})]})})]}),(0,t.jsxs)(l.Tabs,{value:S,onValueChange:z,children:[(0,t.jsxs)(l.TabsList,{className:"bg-white/5 border border-white/10 w-full justify-start overflow-x-auto no-scrollbar",children:[(0,t.jsx)(l.TabsTrigger,{value:"classes",className:"flex-1 md:flex-none",children:"Classes"}),(0,t.jsx)(l.TabsTrigger,{value:"sections",children:"Sections"}),(0,t.jsx)(l.TabsTrigger,{value:"combinations",children:"Combinations"})]}),(0,t.jsxs)(l.TabsContent,{value:"classes",className:"space-y-4 mt-4",children:[(0,t.jsx)(d.Card,{className:"bg-black/20 border-white/10 p-4",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Input,{placeholder:"Class Name (e.g. Grade 1)",value:R,onChange:e=>A(e.target.value)}),(0,t.jsx)(i.Input,{type:"number",placeholder:"Order",className:"w-24",value:O,onChange:e=>P(Number(e.target.value))}),(0,t.jsxs)(s.Button,{onClick:E,disabled:B,className:"bg-white text-black hover:bg-zinc-200",children:[(0,t.jsx)(x.Plus,{size:16,className:"mr-2"})," Add"]})]})}),(0,t.jsx)("div",{className:"grid gap-2",children:Object.values(e).sort((e,t)=>e.order-t.order).map(e=>(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-3 md:gap-0 p-4 bg-white/5 border border-white/10 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between w-full md:w-auto md:gap-4",children:[(0,t.jsx)("span",{className:"font-bold text-lg",children:e.name}),(0,t.jsxs)("span",{className:"text-[10px] text-muted-foreground bg-white/5 px-2 py-0.5 rounded border border-white/10 uppercase tracking-widest",children:["Order: ",e.order]})]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[(0,t.jsxs)(r.Dialog,{children:[(0,t.jsx)(r.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",className:"gap-2 border-indigo-500/20 bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20",children:[(0,t.jsx)(h.BookOpen,{size:14})," Subjects"]})}),(0,t.jsxs)(r.DialogContent,{className:"bg-black/95 border-white/10 text-white max-w-md",children:[(0,t.jsx)(r.DialogHeader,{children:(0,t.jsxs)(r.DialogTitle,{children:["Subjects: ",e.name]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2 mt-4 max-h-[400px] overflow-y-auto pr-2",children:Object.values(k||{}).map(a=>{let s=T[e.id]?.[a.id];return(0,t.jsxs)("div",{onClick:async()=>await (0,c.set)((0,c.ref)(o.rtdb,`master/classSubjects/${e.id}/${a.id}`),!s),className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${s?"bg-indigo-500/20 border-indigo-500/50":"bg-white/5 border-white/10 opacity-50 hover:opacity-100"}`,children:[(0,t.jsx)("span",{className:"font-medium",children:a.name}),s&&(0,t.jsx)(p.CheckCircle2,{size:16,className:"text-indigo-400"})]},a.id)})})]})]}),(0,t.jsxs)(r.Dialog,{children:[(0,t.jsx)(r.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",className:"gap-2 border-emerald-500/20 bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20",children:[(0,t.jsx)(u.GraduationCap,{size:14})," Staffing"]})}),(0,t.jsxs)(r.DialogContent,{className:"bg-black/95 border-white/10 text-white max-w-2xl",children:[(0,t.jsx)(r.DialogHeader,{children:(0,t.jsxs)(r.DialogTitle,{children:["Academic Assignments: ",e.name]})}),(0,t.jsx)("div",{className:"space-y-6 mt-4 max-h-[70vh] overflow-y-auto pr-2",children:Object.values(C).filter(t=>t.classId===e.id).map(a=>{let s=Object.keys(T[e.id]||{}).filter(t=>T[e.id][t]&&k[t]);return(0,t.jsxs)("div",{className:"p-4 bg-white/5 border border-white/10 rounded-xl space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between border-b border-white/10 pb-2",children:(0,t.jsxs)("span",{className:"font-bold text-emerald-400 flex items-center gap-2",children:[(0,t.jsx)(b.Users,{size:16})," Section ",y[a.sectionId]?.name]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 py-2 border-b border-white/5",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-white",children:"Class Teacher"}),(0,t.jsxs)("select",{className:"bg-black border border-white/10 rounded px-2 py-1 text-xs w-[200px]",value:a.classTeacherId||"",onChange:e=>K(a.id,e.target.value),children:[(0,t.jsx)("option",{value:"",children:"-- No Class Teacher --"}),_.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-bold",children:"Subject Teachers"}),s.map(s=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 pl-2",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:k[s]?.name}),(0,t.jsxs)("select",{className:"bg-black/40 border border-white/10 rounded px-2 py-1 text-xs w-[200px]",value:D[`${e.id}_${a.sectionId}`]?.[s]||"",onChange:async t=>await (0,c.set)((0,c.ref)(o.rtdb,`master/subjectTeachers/${e.id}_${a.sectionId}/${s}`),t.target.value),children:[(0,t.jsx)("option",{value:"",children:"-- No Teacher --"}),_.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]},s))]})]},a.id)})})]})]}),(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>L(e.id),className:"text-red-500 hover:bg-red-500/10",children:(0,t.jsx)(m.Trash2,{size:14})})]})]},e.id))})]}),(0,t.jsxs)(l.TabsContent,{value:"sections",className:"space-y-4 mt-4",children:[(0,t.jsx)(d.Card,{className:"bg-black/20 border-white/10 p-4",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Input,{placeholder:"Section Name (e.g. A, B, Alpha)",value:R,onChange:e=>A(e.target.value)}),(0,t.jsxs)(s.Button,{onClick:M,disabled:B,className:"bg-white text-black hover:bg-zinc-200",children:[(0,t.jsx)(x.Plus,{size:16,className:"mr-2"})," Add"]})]})}),(0,t.jsx)("div",{className:"grid gap-2",children:Object.values(y).map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white/5 border border-white/10 rounded-xl",children:[(0,t.jsx)("span",{className:"font-bold text-lg",children:e.name}),(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>V(e.id),className:"text-red-500 hover:bg-red-500/10",children:(0,t.jsx)(m.Trash2,{size:14})})]},e.id))})]}),(0,t.jsx)(l.TabsContent,{value:"combinations",className:"mt-4 space-y-4",children:(0,t.jsxs)(d.Card,{className:"bg-black/20 border-white/10 p-4 md:p-6 overflow-hidden",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3 md:hidden",children:Object.values(e).sort((e,t)=>e.order-t.order).map(e=>(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 pb-2 border-b border-white/10",children:[(0,t.jsx)(u.GraduationCap,{size:16,className:"text-accent"}),(0,t.jsx)("span",{className:"font-bold text-white uppercase tracking-tighter",children:e.name})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.values(y).map(a=>{let s=U(e.id,a.id);return(0,t.jsxs)("div",{onClick:()=>G(e.id,a.id,s),className:(0,N.cn)("flex flex-col items-center justify-center p-2 rounded-xl border transition-all cursor-pointer",s?"bg-accent/20 border-accent/40 text-accent font-black":"bg-white/5 border-white/5 text-white/20"),children:[(0,t.jsx)("span",{className:"text-[10px] uppercase font-bold",children:a.name}),(0,t.jsx)("div",{className:(0,N.cn)("w-1.5 h-1.5 rounded-full mt-1.5",s?"bg-accent shadow-[0_0_8px_rgba(100,255,218,0.8)]":"bg-white/10")})]},a.id)})})]},e.id))}),(0,t.jsx)("div",{className:"hidden md:block overflow-x-auto custom-scrollbar",children:(0,t.jsxs)("table",{className:"w-full border-collapse min-w-[700px]",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-white/5 italic",children:[(0,t.jsx)("th",{className:"p-3 border border-white/10 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground w-40",children:"Class \\ Section"}),Object.values(y).map(e=>(0,t.jsx)("th",{className:"p-3 border border-white/10 text-center text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:e.name},e.id))]})}),(0,t.jsx)("tbody",{children:Object.values(e).sort((e,t)=>e.order-t.order).map(e=>(0,t.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,t.jsx)("td",{className:"p-3 border border-white/10 font-bold bg-white/5 text-white",children:e.name}),Object.values(y).map(a=>{let s=U(e.id,a.id);return(0,t.jsx)("td",{className:"p-3 border border-white/10 text-center",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("input",{type:"checkbox",checked:s,onChange:()=>G(e.id,a.id,s),className:"w-5 h-5 cursor-pointer accent-accent"})})},a.id)})]},e.id))})]})})]})})]})]})}e.s(["default",()=>y])}]);