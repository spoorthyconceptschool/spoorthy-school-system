(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let l=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("div",{ref:l,className:(0,s.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...t}));l.displayName="Card";let i=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("div",{ref:l,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let r=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("h3",{ref:l,className:(0,s.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...t}));r.displayName="CardTitle";let n=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("p",{ref:l,className:(0,s.cn)("text-sm text-white/60 font-medium",e),...t}));n.displayName="CardDescription";let o=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("div",{ref:l,className:(0,s.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("div",{ref:l,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>l,"CardContent",()=>o,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>r])},3281,e=>{"use strict";let a=(0,e.i(75254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>a],3281)},93479,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let l=t.forwardRef(({className:e,type:t,...l},i)=>(0,a.jsx)("input",{type:t,className:(0,s.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",e),ref:i,...l}));l.displayName="Input",e.s(["Input",()=>l])},10204,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let l=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)("label",{ref:l,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));l.displayName="Label",e.s(["Label",()=>l])},76639,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(26999),l=e.i(37727),i=e.i(75157);let r=s.Root,n=s.Trigger,o=s.Portal;s.Close;let d=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)(s.Overlay,{ref:l,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));d.displayName=s.Overlay.displayName;let c=t.forwardRef(({className:e,children:t,...r},n)=>(0,a.jsxs)(o,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(s.Content,{ref:n,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,a.jsxs)(s.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=s.Content.displayName;let m=({className:e,...t})=>(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let x=({className:e,...t})=>(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="DialogFooter";let h=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)(s.Title,{ref:l,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));h.displayName=s.Title.displayName;let p=t.forwardRef(({className:e,...t},l)=>(0,a.jsx)(s.Description,{ref:l,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));p.displayName=s.Description.displayName,e.s(["Dialog",()=>r,"DialogContent",()=>c,"DialogDescription",()=>p,"DialogFooter",()=>x,"DialogHeader",()=>m,"DialogTitle",()=>h,"DialogTrigger",()=>n])},98919,e=>{"use strict";let a=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>a],98919)},88699,73708,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],88699);let s=(0,a.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>s],73708)},65381,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(32341);e.i(36180);var l=e.i(98925),i=e.i(59141),r=e.i(19455),n=e.i(93479),o=e.i(15288),d=e.i(76639),c=e.i(10204),m=e.i(87486),x=e.i(61911);let h=(0,e.i(75254).default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var p=e.i(98919),u=e.i(7233),g=e.i(27612),f=e.i(88699),b=e.i(31278),N=e.i(3281),v=e.i(55436),j=e.i(37727),y=e.i(73708),w=e.i(72498);let C=[{name:"Red",value:"#ff4d4d",code:"RED"},{name:"Blue",value:"#4d79ff",code:"BLUE"},{name:"Green",value:"#00cc66",code:"GREEN"},{name:"Yellow",value:"#ffcc00",code:"YELLOW"},{name:"Purple",value:"#bf40bf",code:"PURPLE"},{name:"Orange",value:"#ff9933",code:"ORANGE"}];function S({open:e,onOpenChange:s,title:l,options:i,onSelect:o,multiSelect:c=!1,initialSelectedIds:m=[],searchPlaceholder:x="Search..."}){let[h,p]=(0,t.useState)(""),[u,g]=(0,t.useState)(m),f=i.filter(e=>e.label.toLowerCase().includes(h.toLowerCase())||e.subtext?.toLowerCase().includes(h.toLowerCase()));return(0,a.jsx)(d.Dialog,{open:e,onOpenChange:s,children:(0,a.jsxs)(d.DialogContent,{className:"bg-slate-950 border-slate-800 text-white sm:max-w-[400px] flex flex-col max-h-[80vh] p-0 gap-0",children:[(0,a.jsxs)(d.DialogHeader,{className:"p-4 border-b border-slate-800 flex flex-row items-center justify-between",children:[(0,a.jsx)(d.DialogTitle,{children:l}),c&&(0,a.jsxs)(r.Button,{size:"sm",onClick:()=>{o(u),s(!1)},className:"h-7 text-xs bg-emerald-600 hover:bg-emerald-700",children:["Done (",u.length,")"]})]}),(0,a.jsx)("div",{className:"p-2 border-b border-slate-800",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-400"}),(0,a.jsx)(n.Input,{placeholder:x,value:h,onChange:e=>p(e.target.value),className:"bg-slate-900 border-slate-800 pl-9 focus-visible:ring-slate-700",autoFocus:!0})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-2 min-h-[300px]",children:(0,a.jsxs)("div",{className:"space-y-1",children:[!c&&(0,a.jsx)("button",{onClick:()=>{o("none"),s(!1)},className:"w-full text-left px-3 py-2 rounded text-slate-400 hover:bg-slate-800 hover:text-white transition-colors text-sm",children:"No assignment (Clear)"}),0===f.length?(0,a.jsx)("div",{className:"py-8 text-center text-slate-500 text-sm",children:"No results found"}):f.map(e=>{let t=u.includes(e.id);return(0,a.jsxs)("button",{onClick:()=>{var a;return a=e.id,void(c?g(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a]):(o(a),s(!1)))},className:`w-full text-left px-3 py-2 rounded transition-colors group flex justify-between items-center ${t?"bg-emerald-500/20 text-emerald-400":"hover:bg-slate-800"}`,children:[(0,a.jsxs)("div",{className:"overflow-hidden",children:[(0,a.jsx)("div",{className:`font-medium text-sm ${t?"text-emerald-400":"text-slate-200"}`,children:e.label}),e.subtext&&(0,a.jsx)("div",{className:"text-xs text-slate-500 truncate",children:e.subtext})]}),t&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})]},e.id)})]})})]})})}function k(){let{user:e}=(0,s.useAuth)(),{branding:k}=(0,w.useMasterData)(),[D,L]=(0,t.useState)([]),[$,I]=(0,t.useState)(!0),[T,z]=(0,t.useState)([]),[B,R]=(0,t.useState)(!1),[U,A]=(0,t.useState)([]),[E,F]=(0,t.useState)(!1),[O,P]=(0,t.useState)(!1),[G,H]=(0,t.useState)(!1),[M,V]=(0,t.useState)(null),[_,W]=(0,t.useState)(null),[K,X]=(0,t.useState)(""),[Y,q]=(0,t.useState)(""),[J,Q]=(0,t.useState)(""),[Z,ee]=(0,t.useState)(""),[ea,et]=(0,t.useState)(""),[es,el]=(0,t.useState)([]),[ei,er]=(0,t.useState)(!1),[en,eo]=(0,t.useState)(!1),[ed,ec]=(0,t.useState)(null),[em,ex]=(0,t.useState)([]),[eh,ep]=(0,t.useState)(!1),[eu,eg]=(0,t.useState)([]);(0,t.useEffect)(()=>{e&&(eN(),ej(),eb())},[e]);let ef=async a=>{if(!a.target.files||!a.target.files[0])return;let t=a.target.files[0];if(t.size>2097152)return void alert("File size must be less than 2MB");if(!t.type.startsWith("image/"))return void alert("Only image files are allowed");eo(!0);try{let a=await e?.getIdToken(),s=new FormData;s.append("file",t),s.append("type","house_symbol");let l=await fetch("/api/admin/media/upload",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:s}),i=await l.json();if(!l.ok||!i.success)throw Error(i.error||"Upload failed");Q(i.url)}catch(e){console.error("Upload failed",e),alert("Failed to upload image: "+e.message)}finally{eo(!1)}},eb=async()=>{F(!0);try{let e=await (0,l.getDocs)((0,l.collection)(i.db,"teachers")),a=[];e.forEach(e=>{let t=e.data();"active"===t.status&&a.push({id:e.id,name:t.name,email:t.email})}),a.sort((e,a)=>e.name.localeCompare(a.name)),A(a)}catch(e){console.error(e)}finally{F(!1)}},eN=async()=>{I(!0);try{let e=await (0,l.getDocs)((0,l.collection)(i.db,"groups")),a=[];e.forEach(e=>a.push({id:e.id,...e.data()})),L(a)}catch(e){console.error(e)}finally{I(!1)}},ev=async e=>{ep(!0);try{let a=(0,l.query)((0,l.collection)(i.db,"students"),(0,l.where)("groupId","==",e)),t=await (0,l.getDocs)(a),s=[];t.forEach(e=>s.push({id:e.id,...e.data()})),ex(s)}catch(e){console.error(e)}finally{ep(!1)}},ej=async()=>{R(!0);try{let e=await (0,l.getDocs)((0,l.collection)(i.db,"students")),a=[];e.forEach(e=>{let t=e.data();a.push({id:e.id,name:t.studentName,class:t.className,section:t.sectionName})}),a.sort((e,a)=>e.name.localeCompare(a.name)),z(a)}catch(e){console.error(e)}finally{R(!1)}},ey=async()=>{if(K&&Y){er(!0);try{await (0,l.addDoc)((0,l.collection)(i.db,"groups"),{name:K,color:Y,symbolUrl:J||null,createdAt:new Date}),P(!1),eN(),eS()}catch(e){alert("Error creating group")}finally{er(!1)}}},ew=async()=>{if(M){er(!0);try{let e={name:K,color:Y,symbolUrl:J||null};if(Z&&"none"!==Z){let a=T.find(e=>e.id===Z);a&&(e.captainId=a.id,e.captainName=a.name)}else"none"===Z&&(e.captainId=null,e.captainName=null);if(ea&&"none"!==ea){let a=T.find(e=>e.id===ea);a&&(e.viceCaptainId=a.id,e.viceCaptainName=a.name)}else"none"===ea&&(e.viceCaptainId=null,e.viceCaptainName=null);es&&es.length>0?e.incharges=U.filter(e=>es.includes(e.id)).map(e=>({id:e.id,name:e.name})):e.incharges=[],await (0,l.updateDoc)((0,l.doc)(i.db,"groups",M.id),e),H(!1),eN(),eS()}catch(e){console.error(e),alert("Error updating group")}finally{er(!1)}}},eC=async e=>{if(confirm("Are you sure? This will remove the group but students will remain assigned to the deleted group ID until updated."))try{await (0,l.deleteDoc)((0,l.doc)(i.db,"groups",e)),eN()}catch(e){alert("Error deleting group")}},eS=()=>{X(""),q(""),Q(""),ee(""),et(""),el([]),V(null)},ek=Array.from(new Set(em.map(e=>e.className))).sort();if($)return(0,a.jsx)("div",{className:"p-10 flex justify-center",children:(0,a.jsx)(b.Loader2,{className:"animate-spin text-white"})});let eD=T.map(e=>({id:e.id,label:e.name,subtext:`${e.class}-${e.section}`})),eL=U.map(e=>({id:e.id,label:e.name,subtext:e.email}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"flex gap-2"}),(0,a.jsxs)(r.Button,{onClick:()=>P(!0),className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,a.jsx)(u.Plus,{className:"w-4 h-4 mr-2"})," New Group"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[D.map(e=>(0,a.jsxs)(o.Card,{className:"bg-slate-900/50 border-slate-800 flex flex-col hover:border-slate-700 transition-colors group",children:[(0,a.jsxs)(o.CardHeader,{className:"pb-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center shadow-lg bg-slate-800 overflow-hidden relative",style:{borderColor:e.color,borderWidth:2},children:e.symbolUrl?(0,a.jsx)("img",{src:e.symbolUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)(p.Shield,{className:"w-6 h-6 text-white mix-blend-overlay",style:{color:e.color}})}),(0,a.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-slate-800",onClick:()=>{ec(e),eg([]),ev(e.id)},title:"View Members",children:(0,a.jsx)(x.Users,{className:"w-4 h-4 text-emerald-400"})}),(0,a.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-slate-800",onClick:()=>{V(e),X(e.name),q(e.color),Q(e.symbolUrl||""),ee(e.captainId||""),et(e.viceCaptainId||""),e.incharges&&Array.isArray(e.incharges)?el(e.incharges.map(e=>e.id)):e.inchargeId?el([e.inchargeId]):el([]),H(!0)},title:"Edit Group",children:(0,a.jsx)(f.Pencil,{className:"w-4 h-4 text-blue-400"})}),(0,a.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-slate-800",onClick:()=>eC(e.id),children:(0,a.jsx)(g.Trash2,{className:"w-4 h-4 text-red-400"})})]})]}),(0,a.jsx)(o.CardTitle,{className:"text-xl mt-4 text-white",children:e.name})]}),(0,a.jsx)(o.CardContent,{className:"space-y-4 flex-1",children:(0,a.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded bg-slate-800/50 border border-slate-800",children:[(0,a.jsx)(h,{className:"w-4 h-4 text-yellow-500 shrink-0"}),(0,a.jsxs)("div",{className:"overflow-hidden",children:[(0,a.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Captain"}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-200 truncate",children:e.captainName||"Not Assigned"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded bg-slate-800/50 border border-slate-800",children:[(0,a.jsx)(h,{className:"w-4 h-4 text-slate-400 shrink-0"}),(0,a.jsxs)("div",{className:"overflow-hidden",children:[(0,a.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Vice Captain"}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-200 truncate",children:e.viceCaptainName||"Not Assigned"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 p-2 rounded bg-slate-800/50 border border-slate-800",children:[(0,a.jsx)(p.Shield,{className:"w-4 h-4 text-emerald-500 shrink-0 mt-1"}),(0,a.jsxs)("div",{className:"overflow-hidden",children:[(0,a.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Teachers Incharge"}),e.incharges&&e.incharges.length>0?(0,a.jsx)("div",{className:"text-sm font-medium text-slate-200 flex flex-col",children:e.incharges.map(e=>(0,a.jsx)("span",{className:"truncate",children:e.name},e.id))}):(0,a.jsx)("p",{className:"text-sm font-medium text-slate-200 truncate",children:e.inchargeName||"Not Assigned"})]})]})]})})]},e.id)),0===D.length&&(0,a.jsx)("div",{className:"col-span-full py-20 text-center border border-dashed border-slate-800 rounded-lg text-slate-500",children:"No groups defined. Create grouped houses or teams to get started."})]}),(0,a.jsx)(d.Dialog,{open:!!ed,onOpenChange:e=>!e&&ec(null),children:(0,a.jsxs)(d.DialogContent,{className:"bg-slate-950 border-slate-800 text-white sm:max-w-2xl max-h-[80vh] flex flex-col",children:[(0,a.jsxs)(d.DialogHeader,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[ed?.symbolUrl&&(0,a.jsx)("img",{src:ed.symbolUrl,className:"w-8 h-8 object-contain"}),(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ed?.color}}),"Members: ",ed?.name]}),(0,a.jsxs)(r.Button,{variant:"outline",size:"sm",className:"mr-8 gap-2 border-slate-700 bg-slate-900 text-slate-300 hover:bg-slate-800",onClick:()=>{let e=window.open("","_blank");if(!e||!ed)return;let a=eu.length>0?em.filter(e=>eu.includes(e.className)):em,t={},s=Array.from(new Set(a.map(e=>e.className))).sort();s.forEach(e=>{t[e]=a.filter(a=>a.className===e).sort((e,a)=>e.studentName.localeCompare(a.studentName))});let l=ed.incharges?ed.incharges.map(e=>e.name).join(", "):ed.inchargeName||"Not Assigned",i=`
            <html>
            <head>
                <title>${ed.name} - Student List</title>
                <style>
                    body { font-family: 'Segoe UI', sans-serif; padding: 20px; }
                    .header { text-align: center; border-bottom: 2px solid ${ed.color}; padding-bottom: 20px; margin-bottom: 20px; position: relative; }
                    .header-content { display: flex; align-items: center; justify-content: center; gap: 40px; }
                    .logo-container { display: flex; flex-direction: column; align-items: center; gap: 5px; }
                    .school-logo { height: 70px; width: auto; }
                    .house-logo { height: 70px; width: auto; object-fit: contain; }
                    h1 { color: #333; margin: 0; font-size: 28px; }
                    h2 { color: ${ed.color}; margin: 5px 0 0 0; font-size: 18px; text-transform: uppercase; letter-spacing: 2px; }
                    .meta { text-align: center; margin-bottom: 20px; color: #666; font-size: 14px; }
                    .leadership { display: flex; gap: 20px; justify-content: space-around; margin-bottom: 30px; padding: 15px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 4px; }
                    .role { text-align: center; }
                    .role strong { display: block; font-size: 11px; text-transform: uppercase; color: #666; margin-bottom: 4px; }
                    .role span { font-size: 14px; font-weight: 600; color: #333; }
                    
                    .class-section { margin-bottom: 40px; page-break-inside: avoid; }
                    .class-header { font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #444; border-left: 4px solid ${ed.color}; padding-left: 10px; }
                    
                    table { w-full; border-collapse: collapse; width: 100%; }
                    th, td { border: 1px solid #ddd; padding: 10px; text-align: left; font-size: 13px; }
                    th { background-color: #f8f9fa; font-weight: bold; text-transform: uppercase; font-size: 11px; color: #555; }
                    tr:nth-child(even) { background-color: #fcfcfc; }
                    
                    .total { margin-top: 20px; font-weight: bold; text-align: right; border-top: 1px solid #eee; padding-top: 10px; }
                    
                    @media print {
                        .class-section { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <div class="header-content">
                        <div class="logo-container">
                            ${k?.schoolLogo?`<img src="${k.schoolLogo}" class="school-logo" />`:""}
                        </div>
                        <div style="text-align: center;">
                            <h1 style="margin: 0;">${k?.schoolName}</h1>
                            <h2>${ed.name} House</h2>
                        </div>
                        <div class="logo-container">
                            ${ed.symbolUrl?`<img src="${ed.symbolUrl}" class="house-logo" />`:""}
                        </div>
                    </div>
                </div>
                <div class="meta">
                    Generated on ${new Date().toLocaleDateString()} &bull; ${eu.length>0?"Fitered List":"Full House List"}
                </div>
                
                <div class="leadership">
                    <div class="role">
                        <strong>Teachers Incharge</strong>
                        <span>${l}</span>
                    </div>
                    <div class="role">
                        <strong>Captain</strong>
                        <span>${ed.captainName||"Not Assigned"}</span>
                    </div>
                    <div class="role">
                        <strong>Vice Captain</strong>
                        <span>${ed.viceCaptainName||"Not Assigned"}</span>
                    </div>
                </div>

                ${s.map(e=>`
                    <div class="class-section">
                        <div class="class-header">${e}</div>
                        <table>
                            <thead>
                                <tr>
                                    <th style="width: 40px">No.</th>
                                    <th>Student Name</th>
                                    <th>Section</th>
                                    <th>School ID</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${t[e].map((e,a)=>`
                                    <tr>
                                        <td style="text-align: center">${a+1}</td>
                                        <td style="font-weight: bold">${e.studentName}</td>
                                        <td>${e.sectionName}</td>
                                        <td>${e.schoolId||"-"}</td>
                                    </tr>
                                `).join("")}
                            </tbody>
                        </table>
                    </div>
                `).join("")}

                <div class="total">Total Listed Students: ${a.length}</div>
                <script>
                    window.onload = () => { window.print(); window.close(); };
                </script>
            </body>
            </html>
        `;e.document.write(i),e.document.close()},children:[(0,a.jsx)(N.Printer,{className:"w-4 h-4"})," Print List"]})]}),(0,a.jsxs)("div",{className:"px-6 py-2 border-b border-slate-800",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[ek.map(e=>(0,a.jsx)(m.Badge,{variant:eu.includes(e)?"default":"outline",className:`cursor-pointer select-none ${eu.includes(e)?"bg-emerald-600 hover:bg-emerald-700":"text-slate-400 hover:text-white border-slate-700"}`,onClick:()=>{eg(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},children:e},e)),(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",className:"h-6 text-[10px] text-slate-500 hover:text-white px-2",onClick:()=>eg([]),children:"Clear Filter"})]}),(0,a.jsx)("div",{className:"text-[10px] text-slate-500",children:"Select specific classes to filter the print list. Leave empty to print all."})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto py-4 px-6",children:eh?(0,a.jsx)("div",{className:"flex justify-center p-8",children:(0,a.jsx)(b.Loader2,{className:"animate-spin"})}):0===em.length?(0,a.jsx)("div",{className:"text-center p-8 text-slate-500 border border-dashed border-slate-800 rounded",children:"No students assigned to this group yet."}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:(eu.length>0?em.filter(e=>eu.includes(e.className)):em).map(e=>(0,a.jsx)("div",{className:"p-3 bg-slate-900/50 border border-slate-800 rounded flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm text-slate-200",children:e.studentName}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:[e.className," - ",e.sectionName," (",e.rollNo,")"]})]})},e.id))})}),(0,a.jsxs)("div",{className:"p-4 border-t border-slate-800 text-xs text-slate-500 flex justify-between items-center",children:[(0,a.jsx)("div",{children:eu.length>0&&(0,a.jsxs)("span",{className:"text-emerald-500",children:["Filtered: ",eu.join(", ")]})}),(0,a.jsxs)("div",{children:["Total Members: ",em.length]})]})]})}),(0,a.jsx)(d.Dialog,{open:O,onOpenChange:P,children:(0,a.jsxs)(d.DialogContent,{className:"bg-slate-950 border-slate-800 text-white",children:[(0,a.jsx)(d.DialogHeader,{children:(0,a.jsx)(d.DialogTitle,{children:"Create New Group"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Group Name"}),(0,a.jsx)(n.Input,{placeholder:"e.g. Red Dragons",value:K,onChange:e=>X(e.target.value),className:"bg-slate-900 border-slate-800"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Theme Color"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[C.map(e=>(0,a.jsx)("button",{onClick:()=>q(e.value),className:`w-8 h-8 rounded-full border-2 transition-all ${Y===e.value?"border-white scale-110":"border-transparent opacity-70 hover:opacity-100"}`,style:{backgroundColor:e.value},title:e.name},e.value)),(0,a.jsx)("input",{type:"color",value:Y,onChange:e=>q(e.target.value),className:"w-8 h-8 rounded-full overflow-hidden border-0 p-0 cursor-pointer"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Group Symbol"}),(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded border border-slate-700 bg-slate-900 flex items-center justify-center overflow-hidden",children:J?(0,a.jsx)("img",{src:J,className:"w-full h-full object-cover"}):(0,a.jsx)(y.Image,{className:"w-6 h-6 text-slate-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(n.Input,{type:"file",accept:"image/*",onChange:ef,disabled:en,className:"bg-slate-900 border-slate-800 text-xs"}),en&&(0,a.jsx)("p",{className:"text-[10px] text-emerald-500 mt-1",children:"Uploading..."})]})]})]})]}),(0,a.jsxs)(d.DialogFooter,{children:[(0,a.jsx)(r.Button,{variant:"ghost",onClick:()=>P(!1),children:"Cancel"}),(0,a.jsx)(r.Button,{onClick:ey,disabled:ei||!K||!Y||en,className:"bg-emerald-600 hover:bg-emerald-700",children:ei?(0,a.jsx)(b.Loader2,{className:"animate-spin"}):"Create Group"})]})]})}),_&&(0,a.jsx)(S,{open:!!_,onOpenChange:e=>!e&&W(null),title:"captain"===_?"Select Captain":"viceCaptain"===_?"Select Vice Captain":"Select Teacher Incharges",multiSelect:"incharge"===_,initialSelectedIds:"incharge"===_?es:"captain"===_?Z?[Z]:[]:"viceCaptain"===_&&ea?[ea]:[],options:"incharge"===_?eL:eD,onSelect:e=>{"captain"===_&&ee(e),"viceCaptain"===_&&et(e),"incharge"===_&&el(e)}}),(0,a.jsx)(d.Dialog,{open:G,onOpenChange:H,children:(0,a.jsxs)(d.DialogContent,{className:"bg-slate-950 border-slate-800 text-white sm:max-w-lg",children:[(0,a.jsx)(d.DialogHeader,{children:(0,a.jsxs)(d.DialogTitle,{children:["Management: ",M?.name]})}),(0,a.jsxs)("div",{className:"space-y-6 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Group Name"}),(0,a.jsx)(n.Input,{value:K,onChange:e=>X(e.target.value),className:"bg-slate-900 border-slate-800"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Theme Color"}),(0,a.jsxs)("div",{className:"flex gap-2 items-center h-10 px-2 rounded bg-slate-900 border border-slate-800",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border border-white/20",style:{backgroundColor:Y}}),(0,a.jsx)("input",{type:"color",value:Y,onChange:e=>q(e.target.value),className:"w-full bg-transparent border-0 opacity-0 absolute inset-0 cursor-pointer"}),(0,a.jsx)("span",{className:"text-xs font-mono text-slate-400 ml-auto",children:Y})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Group Symbol"}),(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded border border-slate-700 bg-slate-900 flex items-center justify-center overflow-hidden",children:J?(0,a.jsx)("img",{src:J,className:"w-full h-full object-cover"}):(0,a.jsx)(y.Image,{className:"w-6 h-6 text-slate-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(n.Input,{type:"file",accept:"image/*",onChange:ef,disabled:en,className:"bg-slate-900 border-slate-800 text-xs"}),en&&(0,a.jsx)("p",{className:"text-[10px] text-emerald-500 mt-1",children:"Uploading..."})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 pt-4 border-t border-slate-800",children:[(0,a.jsx)("h4",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Leadership"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.Label,{className:"flex items-center gap-2",children:[(0,a.jsx)(h,{className:"w-3 h-3 text-yellow-500"})," Captain"]}),(0,a.jsxs)(r.Button,{variant:"outline",className:"w-full justify-between bg-slate-900 border-slate-800 hover:bg-slate-800 hover:text-white",onClick:()=>W("captain"),children:[(0,a.jsx)("span",{className:Z&&"none"!==Z?"text-slate-200":"text-slate-400",children:Z&&"none"!==Z?T.find(e=>e.id===Z)?.name||"Unknown Student":"Select Captain"}),(0,a.jsx)(v.Search,{className:"h-4 w-4 opacity-50"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.Label,{className:"flex items-center gap-2",children:[(0,a.jsx)(h,{className:"w-3 h-3 text-slate-400"})," Vice Captain"]}),(0,a.jsxs)(r.Button,{variant:"outline",className:"w-full justify-between bg-slate-900 border-slate-800 hover:bg-slate-800 hover:text-white",onClick:()=>W("viceCaptain"),children:[(0,a.jsx)("span",{className:ea&&"none"!==ea?"text-slate-200":"text-slate-400",children:ea&&"none"!==ea?T.find(e=>e.id===ea)?.name||"Unknown Student":"Select Vice Captain"}),(0,a.jsx)(v.Search,{className:"h-4 w-4 opacity-50"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.Label,{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Shield,{className:"w-3 h-3 text-emerald-500"})," Teachers Incharge"]}),(0,a.jsxs)(r.Button,{variant:"outline",className:"w-full justify-between bg-slate-900 border-slate-800 hover:bg-slate-800 hover:text-white min-h-[44px] h-auto py-2",onClick:()=>W("incharge"),children:[(0,a.jsx)("span",{className:`text-left ${es&&es.length>0?"text-slate-200":"text-slate-400"}`,children:es&&es.length>0?`${es.length} Selected`:"Select Teachers Incharge"}),(0,a.jsx)(v.Search,{className:"h-4 w-4 opacity-50 ml-2"})]}),es.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:es.map(e=>{let t=U.find(a=>a.id===e);return t?(0,a.jsxs)(m.Badge,{variant:"outline",className:"text-xs border-slate-700 bg-slate-800/50",children:[t.name,(0,a.jsx)("button",{onClick:a=>{a.stopPropagation(),el(a=>a.filter(a=>a!==e))},className:"ml-2 hover:text-red-400",children:(0,a.jsx)(j.X,{className:"w-3 h-3"})})]},e):null})})]})]})]}),(0,a.jsxs)(d.DialogFooter,{children:[(0,a.jsx)(r.Button,{variant:"ghost",onClick:()=>H(!1),children:"Cancel"}),(0,a.jsx)(r.Button,{onClick:ew,disabled:ei,className:"bg-blue-600 hover:bg-blue-700",children:ei?(0,a.jsx)(b.Loader2,{className:"animate-spin"}):"Save Changes"})]})]})})]})}function D(){return(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold text-white",children:"Student Groups"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage houses, teams, and student leadership roles."})]}),(0,a.jsx)(k,{})]})}e.s(["default",()=>D],65381)}]);