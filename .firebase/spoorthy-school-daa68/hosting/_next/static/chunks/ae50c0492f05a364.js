(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(91918),r=e.i(75157);let l=a.forwardRef(({className:e,variant:a="default",size:l="default",asChild:i=!1,...n},d)=>{let o=i?s.Slot:"button";return(0,t.jsx)(o,{className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===a,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===a,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===a,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===a,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===a,"text-primary underline-offset-4 hover:underline":"link"===a,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===a,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===a,"h-10 px-6 py-2":"default"===l,"h-9 px-4 text-xs":"sm"===l,"h-12 px-8 text-base":"lg"===l,"h-14 px-10 text-lg":"xl"===l,"h-10 w-10":"icon"===l},e),ref:d,...n})});l.displayName="Button",e.s(["Button",()=>l])},15288,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...a}));r.displayName="Card";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,s.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...a}));i.displayName="CardTitle";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-white/60 font-medium",e),...a}));n.displayName="CardDescription";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>l,"CardTitle",()=>i])},10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("label",{ref:r,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...a}));r.displayName="Label",e.s(["Label",()=>r])},27516,e=>{"use strict";let t=(0,e.i(75254).default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);e.s(["History",()=>t],27516)},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));r.displayName="Textarea",e.s(["Textarea",()=>r])},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},97764,e=>{"use strict";function t(e){if(!e)return"";let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return e;let a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${a}/${s}/${r}`}e.s(["formatDateToDDMMYYYY",()=>t])},69749,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(32341),r=e.i(19455),l=e.i(15288),i=e.i(10204),n=e.i(67489),d=e.i(24687),o=e.i(87486),c=e.i(31278),u=e.i(87316),x=e.i(27516),h=e.i(14764),m=e.i(59141);e.i(36180);var f=e.i(98925),p=e.i(97764),g=e.i(75157);let b=a.forwardRef(({className:e,...s},r)=>{let l=a.useRef(null);a.useImperativeHandle(r,()=>l.current);let i=e=>{e.stopPropagation();try{l.current?.showPicker()}catch(e){l.current?.focus()}};return(0,t.jsx)("div",{className:(0,g.cn)("flex h-12 w-full items-center rounded-full border border-white/10 bg-[#282828] px-1 transition-all focus-within:ring-2 focus-within:ring-accent focus-within:ring-offset-2 ring-offset-background hover:bg-[#333] cursor-pointer",e),onClick:i,children:(0,t.jsx)("input",{type:"date",ref:l,className:"flex-1 w-full bg-transparent border-0 px-4 text-sm text-white placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden cursor-pointer h-full",onClick:i,...s})})});function v(){let{user:e}=(0,s.useAuth)(),[g,v]=(0,a.useState)(null),[j,y]=(0,a.useState)([]),[N,w]=(0,a.useState)(!0),[D,C]=(0,a.useState)(!1),[S,k]=(0,a.useState)(""),[T,R]=(0,a.useState)(""),[Y,L]=(0,a.useState)({fromDate:"",toDate:"",type:"PERSONAL",reason:""});(0,a.useEffect)(()=>{let t=((e=0)=>{let t=new Date;t.setDate(t.getDate()+e);let a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`})(+(new Date().getHours()>=7));k(t),L(e=>({...e,fromDate:t,toDate:t})),e&&(M(),P())},[e]);let M=async()=>{let t=e?.email?.split("@")[0].toUpperCase();if(!t)return;let a=await (0,f.getDoc)((0,f.doc)(m.db,"students",t));a.exists()&&v(a.data())},P=async()=>{w(!0),R("");try{let t=await e?.getIdToken(),a=await fetch("/api/student/leaves",{headers:{Authorization:`Bearer ${t}`}}),s=await a.json();s.success?y(s.data):R(s.error||"Failed to load leave history")}catch(e){console.error(e),R("Failed to connect to server")}finally{w(!1)}},A=async t=>{if(t.preventDefault(),!Y.reason)return alert("Please provide a reason");if(!g)return alert("Profile loading, please wait...");C(!0);try{let t=await e?.getIdToken(),a=await fetch("/api/student/leaves",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({...Y,studentName:g.studentName||g.name,classId:g.classId,sectionId:g.sectionId})}),s=await a.json();s.success?(alert("Leave application submitted successfully!"),L({...Y,reason:""}),P()):alert(s.error)}catch(e){alert(e.message)}finally{C(!1)}};return(0,t.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto p-4 md:p-6 animate-in fade-in",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-display font-bold",children:"Leave Management"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Apply for leave by selecting dates."})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(l.Card,{className:"md:col-span-1 bg-black/20 border-white/10 h-fit sticky top-24",children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Send,{className:"w-5 h-5 text-blue-400"})," Apply Leave"]})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"From Date"}),(0,t.jsx)(b,{min:S,value:Y.fromDate,onChange:e=>L({...Y,fromDate:e.target.value}),className:"bg-black/40 border-white/10"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"To Date"}),(0,t.jsx)(b,{min:Y.fromDate||S,value:Y.toDate,onChange:e=>L({...Y,toDate:e.target.value}),className:"bg-black/40 border-white/10"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Leave Type"}),(0,t.jsxs)(n.Select,{value:Y.type,onValueChange:e=>L({...Y,type:e}),children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-black/40 border-white/10",children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"SICK",children:"Sick Leave"}),(0,t.jsx)(n.SelectItem,{value:"PERSONAL",children:"Personal"}),(0,t.jsx)(n.SelectItem,{value:"EMERGENCY",children:"Emergency"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Reason"}),(0,t.jsx)(d.Textarea,{placeholder:"Brief explanation...",value:Y.reason,onChange:e=>L({...Y,reason:e.target.value}),className:"bg-black/40 border-white/10 min-h-[100px]"})]}),(0,t.jsx)(r.Button,{disabled:D,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:D?(0,t.jsx)(c.Loader2,{className:"animate-spin mr-2"}):"Submit Request"})]})})]}),(0,t.jsxs)(l.Card,{className:"md:col-span-2 bg-black/20 border-white/10",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(x.History,{className:"w-5 h-5 text-emerald-400"})," My Leave History"]}),(0,t.jsx)(l.CardDescription,{children:"View the status of your past and pending applications."})]}),(0,t.jsx)(l.CardContent,{className:"p-0",children:N?(0,t.jsx)("div",{className:"p-10 flex justify-center",children:(0,t.jsx)(c.Loader2,{className:"animate-spin"})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-white/5 text-[10px] text-muted-foreground uppercase font-medium",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4",children:"Dates"}),(0,t.jsx)("th",{className:"p-4",children:"Type"}),(0,t.jsx)("th",{className:"p-4",children:"Reason"}),(0,t.jsx)("th",{className:"p-4 text-right",children:"Status"})]})}),(0,t.jsxs)("tbody",{className:"divide-y divide-white/5",children:[j.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,t.jsx)("td",{className:"p-4 text-xs font-medium",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Calendar,{className:"w-3 h-3 text-muted-foreground"}),e.fromDate===e.toDate?(0,p.formatDateToDDMMYYYY)(e.fromDate):`${(0,p.formatDateToDDMMYYYY)(e.fromDate)} - ${(0,p.formatDateToDDMMYYYY)(e.toDate)}`]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)(o.Badge,{variant:"outline",className:"text-[10px]",children:e.type})}),(0,t.jsx)("td",{className:"p-4 text-xs text-muted-foreground",title:e.reason,children:(0,t.jsx)("p",{className:"line-clamp-2 max-w-[200px]",children:e.reason})}),(0,t.jsxs)("td",{className:"p-4 text-right",children:["PENDING"===e.status&&(0,t.jsx)(o.Badge,{className:"bg-yellow-500/20 text-yellow-500 border-yellow-500/10",children:"Pending"}),"APPROVED"===e.status&&(0,t.jsx)(o.Badge,{className:"bg-emerald-500/20 text-emerald-500 border-emerald-500/10",children:"Approved"}),"REJECTED"===e.status&&(0,t.jsx)(o.Badge,{className:"bg-red-500/20 text-red-500 border-red-500/10",children:"Rejected"})]})]},e.id)),T?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"p-12 text-center text-red-400 italic text-sm",children:T})}):0===j.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"p-12 text-center text-muted-foreground italic text-sm",children:"No leave history found."})}):null]})]})})})]})]})]})}b.displayName="DatePickerInput",e.s(["default",()=>v],69749)}]);