(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(91918),l=e.i(75157);let r=t.forwardRef(({className:e,variant:t="default",size:r="default",asChild:d=!1,...i},c)=>{let n=d?a.Slot:"button";return(0,s.jsx)(n,{className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 tracking-wide",{"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:scale-105 active:scale-95 transition-transform":"default"===t,"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm":"destructive"===t,"border border-white/20 bg-transparent hover:bg-white/10 hover:text-accent-foreground":"outline"===t,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===t,"hover:bg-white/10 hover:text-accent font-normal":"ghost"===t,"text-primary underline-offset-4 hover:underline":"link"===t,"bg-gradient-to-r from-accent to-accent/80 text-black font-bold hover:brightness-110 border-0 shadow-lg hover:shadow-accent/20":"gradient"===t,"bg-accent text-black font-bold hover:bg-accent/90 hover:scale-105 active:scale-95 transition-transform shadow-lg":"spotify"===t,"h-10 px-6 py-2":"default"===r,"h-9 px-4 text-xs":"sm"===r,"h-12 px-8 text-base":"lg"===r,"h-14 px-10 text-lg":"xl"===r,"h-10 w-10":"icon"===r},e),ref:c,...i})});r.displayName="Button",e.s(["Button",()=>r])},15288,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(75157);let l=t.forwardRef(({className:e,...t},l)=>(0,s.jsx)("div",{ref:l,className:(0,a.cn)("rounded-2xl border border-[#64FFDA]/10 bg-[#112240]/40 backdrop-blur-lg text-white shadow-xl transition-all duration-300 hover:bg-[#112240]/60 hover:border-[#64FFDA]/30 hover:shadow-[0_0_20px_-5px_rgba(100,255,218,0.1)] group",e),...t}));l.displayName="Card";let r=t.forwardRef(({className:e,...t},l)=>(0,s.jsx)("div",{ref:l,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));r.displayName="CardHeader";let d=t.forwardRef(({className:e,...t},l)=>(0,s.jsx)("h3",{ref:l,className:(0,a.cn)("font-bold text-xl tracking-tight text-white group-hover:text-accent transition-colors",e),...t}));d.displayName="CardTitle";let i=t.forwardRef(({className:e,...t},l)=>(0,s.jsx)("p",{ref:l,className:(0,a.cn)("text-sm text-white/60 font-medium",e),...t}));i.displayName="CardDescription";let c=t.forwardRef(({className:e,...t},l)=>(0,s.jsx)("div",{ref:l,className:(0,a.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",t.forwardRef(({className:e,...t},l)=>(0,s.jsx)("div",{ref:l,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>l,"CardContent",()=>c,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>d])},7233,e=>{"use strict";let s=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},78583,e=>{"use strict";let s=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>s],78583)},51501,e=>{"use strict";let s=(0,e.i(75254).default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);e.s(["GraduationCap",()=>s],51501)},2747,e=>{"use strict";var s=e.i(43476),t=e.i(75157);function a({className:e,...a}){return(0,s.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted/20",e),...a})}e.s(["Skeleton",()=>a])},97756,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(32341),l=e.i(15288),r=e.i(19455),d=e.i(87486),i=e.i(7233),c=e.i(3116),n=e.i(78894),o=e.i(78583),h=e.i(63059),x=e.i(51501),m=e.i(22016);e.i(36180);var u=e.i(98925),p=e.i(59141),g=e.i(72498),b=e.i(2747);function f(){let{user:f}=(0,a.useAuth)(),[j,N]=(0,t.useState)(null),[v,w]=(0,t.useState)([]),[y,C]=(0,t.useState)([]),[k,S]=(0,t.useState)([]),[T,I]=(0,t.useState)([]),[B,A]=(0,t.useState)([]),[D,U]=(0,t.useState)([]),[R,E]=(0,t.useState)(null),[L,M]=(0,t.useState)(!0),{classSections:H,classes:F,sections:P,classSubjects:$,subjects:O,homeworkSubjects:V}=(0,g.useMasterData)();(0,t.useEffect)(()=>{f&&z()},[f]);let z=async()=>{try{let e=await f?.getIdToken(),s=new Date,t=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;if(!f?.uid)return;let[a,l,r]=await Promise.all([fetch("/api/timetable/my-schedule",{headers:{Authorization:`Bearer ${e}`}}).then(e=>e.json()),(0,u.getDocs)((0,u.query)((0,u.collection)(p.db,"teachers"),(0,u.where)("uid","==",f.uid),(0,u.limit)(1))),(0,u.getDocs)((0,u.query)((0,u.collection)(p.db,"leave_requests"),(0,u.where)("teacherId","==",f.uid),(0,u.orderBy)("createdAt","desc"),(0,u.limit)(2))).catch(e=>({docs:[]}))]);if(!l.empty){let e=l.docs[0].data();E({id:l.docs[0].id,...e})}if(a.success){N(a.data);let e=new Date().toLocaleDateString("en-US",{weekday:"long"}).toUpperCase(),s=a.data.weeklySchedule?.[e]||{},l=a.data.substitutions||[],r=[];for(let e=1;e<=8;e++){let a=l.find(s=>s.date===t&&s.slotId===e&&"ORIGINAL"===s.role),d=l.find(s=>s.date===t&&s.slotId===e&&"SUBSTITUTE"===s.role);d?r.push({id:e,type:"SUBSTITUTION",classId:d.classId,note:"Sub Assigned"}):a?r.push({id:e,type:"LEAVE",classId:"object"==typeof s[e]?s[e].classId:s[e]}):s[e]&&r.push({id:e,type:"REGULAR",classId:"object"==typeof s[e]?s[e].classId:s[e],subjectId:"object"==typeof s[e]?s[e].subjectId:null})}w(r),S(l.filter(e=>e.date===t&&"SUBSTITUTE"===e.role)),U(l.filter(e=>"SUBSTITUTE"===e.role&&e.date>t).sort((e,s)=>e.date.localeCompare(s.date)))}r.docs&&I(r.docs.map(e=>({id:e.id,...e.data()})));let d=(0,u.query)((0,u.collection)(p.db,"notices"),(0,u.where)("type","==","HOLIDAY"),(0,u.limit)(3)),i=await (0,u.getDocs)(d).catch(e=>({docs:[]}));i.docs&&A(i.docs.map(e=>({id:e.id,...e.data()}))),C([])}catch(e){console.error(e)}finally{M(!1)}},_=async(s,t,a)=>{try{let{ref:l,set:r}=await e.A(25919),{rtdb:d}=await e.A(76207),i=l(d,`master/homeworkSubjects/${s}/${t}`);await r(i,!a)}catch(e){console.error("Failed to toggle homework subject",e)}},q=(()=>{if(!R)return[];let e=R.schoolId||R.id;return Object.values(H).filter(s=>s.active&&s.classTeacherId===e)})();return(0,s.jsxs)("div",{className:"p-4 md:p-6 space-y-6 animate-in fade-in max-w-7xl mx-auto pb-16",children:[(0,s.jsx)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-display text-3xl md:text-5xl font-bold tracking-tight",children:"Teacher Dashboard"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1 text-sm md:text-lg italic uppercase tracking-widest opacity-70",children:R?.name?`Welcome back, ${R.name.split(" ")[0]}`:"Classroom Control"})]})}),q.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-1.5 h-6 md:w-2 md:h-8 bg-amber-500 rounded-full"}),(0,s.jsx)("h2",{className:"text-lg md:text-2xl font-display font-black text-white uppercase tracking-wider",children:"Class Teacher Desk"}),(0,s.jsx)(d.Badge,{variant:"outline",className:"border-amber-500/30 text-amber-500 bg-amber-500/10 uppercase text-[9px] md:text-[10px] tracking-widest px-2 md:px-3 py-1",children:"Action Required"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:q.map(e=>{let t=F[e.classId]?.name||e.classId,a=P[e.sectionId]?.name||e.sectionId,r=e.id,i=Object.keys($[e.classId]||{}).filter(s=>$[e.classId][s]&&O[s]);return(0,s.jsxs)(l.Card,{className:"bg-black/40 border-amber-500/20 backdrop-blur-md overflow-hidden animate-in slide-in-from-top duration-500",children:[(0,s.jsxs)("div",{className:"bg-amber-500/5 border-b border-amber-500/10 p-3 md:p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-base md:text-lg font-bold flex items-center gap-2 text-white",children:[(0,s.jsx)(x.GraduationCap,{className:"w-4 h-4 md:w-5 md:h-5 text-amber-500"}),t," - ",a]}),(0,s.jsx)("p",{className:"text-[10px] md:text-xs text-amber-500/60 font-medium tracking-tight",children:"Daily homework control"})]}),(0,s.jsx)(d.Badge,{className:"bg-amber-500 text-black font-black uppercase text-[8px] md:text-[9px] tracking-widest shrink-0",children:"Class Teacher"})]}),(0,s.jsx)(l.CardContent,{className:"p-3 md:p-4 space-y-4",children:(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:i.length>0?i.map(e=>{let t=V[r]?.[e];return(0,s.jsxs)("div",{onClick:()=>_(r,e,t),className:`flex items-center justify-between p-2 rounded-xl border cursor-pointer transition-all group ${t?"bg-[#10B981]/10 border-[#10B981]/30":"bg-white/5 border-white/10 opacity-60 hover:opacity-100"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:`p-1.5 rounded-lg ${t?"bg-[#10B981]/20 text-[#10B981]":"bg-white/5 text-white/20"}`,children:(0,s.jsx)(o.FileText,{className:"w-3 h-3"})}),(0,s.jsx)("span",{className:"font-bold text-xs text-white/90",children:O[e]?.name})]}),t&&(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#10B981] animate-pulse shadow-[0_0_8px_#10B981]"})]},e)}):(0,s.jsx)("div",{className:"col-span-full py-4 text-center text-white/20 text-[10px] uppercase font-bold border border-dashed border-white/10 rounded-xl",children:"No subjects assigned to this class"})})})})]},e.id)})})]}),(k.length>0||D.length>0)&&(0,s.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 p-4 rounded-xl flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.AlertTriangle,{className:"text-blue-400 w-5 h-5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-blue-400",children:k.length>0?"Substitution Assigned for Today":"Upcoming Substitution Assigned"}),(0,s.jsx)("p",{className:"text-sm text-blue-400/80",children:k.length>0?`You have ${k.length} substitution class(es) assigned today.`:`You have ${D.length} coverage assignment(s) coming up this week.`})]})]}),(0,s.jsx)(r.Button,{size:"sm",variant:"outline",className:"border-blue-500/30 text-blue-400 hover:bg-blue-400/10",asChild:!0,children:(0,s.jsx)(m.default,{href:"/teacher/timetable",children:"View My Schedule"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(l.Card,{className:"bg-black/20 border-white/10 h-fit",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Clock,{className:"w-5 h-5 text-emerald-500"})," Today's Schedule"]}),(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",className:"text-muted-foreground",asChild:!0,children:(0,s.jsxs)(m.default,{href:"/teacher/timetable",children:["Full Timetable ",(0,s.jsx)(h.ChevronRight,{className:"w-4 h-4"})]})})]}),(0,s.jsx)(l.CardContent,{children:L?(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsx)(b.Skeleton,{className:"h-24 w-full rounded-lg"}),(0,s.jsx)(b.Skeleton,{className:"h-24 w-full rounded-lg"}),(0,s.jsx)(b.Skeleton,{className:"h-24 w-full rounded-lg"}),(0,s.jsx)(b.Skeleton,{className:"h-24 w-full rounded-lg"})]}):0===v.length?(0,s.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:"No classes scheduled for today."}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:v.map(e=>(0,s.jsxs)("div",{className:`p-4 rounded-lg flex items-center justify-between
                                                ${"SUBSTITUTION"===e.type?"bg-yellow-500/10 border border-yellow-500/20":"LEAVE"===e.type?"bg-red-500/5 border border-red-500/10 opacity-50":"bg-white/5 border border-white/10"}
                                            `,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.Badge,{variant:"outline",className:"h-8 w-8 flex items-center justify-center rounded-full bg-white/5 border-white/10",children:e.id}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-bold text-lg",children:["Class ",e.classId]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"SUBSTITUTION"===e.type?"Substitution":O[e.subjectId]?.name||e.subjectId||"Regular Class"})]})]}),"SUBSTITUTION"===e.type&&(0,s.jsx)(d.Badge,{className:"bg-yellow-500 text-black",children:"SUB"}),"LEAVE"===e.type&&(0,s.jsx)(d.Badge,{variant:"destructive",className:"scale-75",children:"LEAVE"})]},e.id))})})]}),D.length>0&&(0,s.jsxs)(l.Card,{className:"bg-blue-600/5 border-blue-500/20",children:[(0,s.jsxs)(l.CardHeader,{className:"py-4",children:[(0,s.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2 text-blue-400",children:[(0,s.jsx)(n.AlertTriangle,{className:"w-5 h-5"})," Upcoming Coverage"]}),(0,s.jsx)(l.CardDescription,{className:"text-blue-300/60",children:"Coverage assignments for the coming days."})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[D.slice(0,3).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-500/5 rounded-lg border border-blue-500/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"bg-blue-500/20 px-2 py-1 rounded text-[10px] font-bold text-blue-400 uppercase",children:new Date(e.date).toLocaleDateString([],{weekday:"short",day:"numeric",month:"short"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-bold text-sm text-white/90",children:["Class ",e.classId]}),(0,s.jsxs)("div",{className:"text-[10px] text-muted-foreground",children:["Period ",e.slotId," â€¢ Covering for ",e.originalTeacherId]})]})]}),(0,s.jsx)(d.Badge,{variant:"outline",className:"text-[10px] border-blue-500/30 text-blue-400",children:"ASSIGNED"})]},t)),D.length>3&&(0,s.jsxs)("p",{className:"text-[10px] text-center text-muted-foreground italic",children:["And ",D.length-3," more assigned classes..."]})]})})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)(r.Button,{className:"h-24 flex flex-col gap-2 bg-emerald-600 hover:bg-emerald-700",asChild:!0,children:(0,s.jsxs)(m.default,{href:"/teacher/homework",children:[(0,s.jsx)(i.Plus,{className:"w-6 h-6"}),(0,s.jsx)("span",{children:"Post Homework"})]})}),(0,s.jsx)(r.Button,{className:"h-24 flex flex-col gap-2 bg-blue-600 hover:bg-blue-700",asChild:!0,children:(0,s.jsxs)(m.default,{href:"/teacher/notices",children:[(0,s.jsx)(o.FileText,{className:"w-6 h-6"}),(0,s.jsx)("span",{children:"Send Notice"})]})}),(0,s.jsx)(r.Button,{className:"h-24 flex flex-col gap-2 bg-purple-600 hover:bg-purple-700 col-span-2",asChild:!0,children:(0,s.jsxs)(m.default,{href:"/teacher/exams",children:[(0,s.jsx)(o.FileText,{className:"w-6 h-6"}),(0,s.jsx)("span",{children:"Examinations & Results"})]})})]}),(0,s.jsxs)(l.Card,{className:"bg-black/20 border-white/10",children:[(0,s.jsxs)(l.CardHeader,{className:"py-4 flex flex-row items-center justify-between",children:[(0,s.jsx)(l.CardTitle,{className:"text-base",children:"Student Absences"}),(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,s.jsx)(m.default,{href:"/teacher/leaves",children:(0,s.jsx)(h.ChevronRight,{className:"w-4 h-4"})})})]}),(0,s.jsxs)(l.CardContent,{className:"py-2",children:[(0,s.jsx)("p",{className:"text-[10px] text-muted-foreground mb-2",children:"Recent/Pending leaves in your class."}),(0,s.jsx)(r.Button,{variant:"outline",className:"w-full text-xs h-8 border-white/5",asChild:!0,children:(0,s.jsx)(m.default,{href:"/teacher/leaves",children:"View Student Leaves"})})]})]}),(0,s.jsxs)(l.Card,{className:"bg-black/20 border-white/10",children:[(0,s.jsx)(l.CardHeader,{className:"py-4",children:(0,s.jsx)(l.CardTitle,{className:"text-base line-clamp-1",children:"My Leave Status"})}),(0,s.jsxs)(l.CardContent,{className:"py-2 space-y-3",children:[0===T.length?(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"No recent requests."}):T.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-medium text-xs",children:e.fromDate}),(0,s.jsx)("span",{className:"text-[10px] text-muted-foreground",children:e.type})]}),(0,s.jsx)(d.Badge,{variant:"APPROVED"===e.status?"default":"REJECTED"===e.status?"destructive":"secondary",className:"text-[10px]",children:e.status})]},e.id)),(0,s.jsx)(r.Button,{variant:"outline",className:"w-full text-xs mt-2",asChild:!0,children:(0,s.jsx)(m.default,{href:"/teacher/leaves",children:"Request Leave"})})]})]}),(0,s.jsxs)(l.Card,{className:"bg-emerald-900/10 border-emerald-500/20",children:[(0,s.jsx)(l.CardHeader,{className:"py-4",children:(0,s.jsx)(l.CardTitle,{className:"text-base text-emerald-500",children:"Upcoming Holidays"})}),(0,s.jsxs)(l.CardContent,{className:"py-2",children:[(0,s.jsx)("div",{className:"space-y-2",children:L?(0,s.jsx)(b.Skeleton,{className:"h-4 w-full"}):0===B.length?(0,s.jsx)("p",{className:"text-xs text-muted-foreground whitespace-normal",children:"No holidays scheduled soon."}):B.slice(0,2).map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"truncate mr-2",children:e.title||e.name}),(0,s.jsx)("span",{className:"text-muted-foreground whitespace-nowrap",children:e.date?.seconds?new Date(1e3*e.date.seconds).toLocaleDateString([],{month:"short",day:"numeric"}):e.createdAt?.seconds?new Date(1e3*e.createdAt.seconds).toLocaleDateString([],{month:"short",day:"numeric"}):"TBD"})]},t))}),(0,s.jsx)(r.Button,{variant:"link",className:"text-xs text-emerald-500 px-0 mt-2 block",asChild:!0,children:(0,s.jsx)(m.default,{href:"/teacher/holidays",children:"View Calendar"})})]})]})]})]})]})}e.s(["default",()=>f])},25919,e=>{e.v(s=>Promise.all(["static/chunks/bf5f39ca48db475d.js"].map(s=>e.l(s))).then(()=>s(3560)))},76207,e=>{e.v(e=>Promise.resolve().then(()=>e(59141)))}]);