(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},75254,e=>{"use strict";var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:o="",children:l,iconNode:c,...u},d)=>(0,t.createElement)("svg",{ref:d,...i,width:r,height:r,stroke:e,strokeWidth:n?24*Number(a)/Number(r):a,className:s("lucide",o),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(l)?l:[l]])),n=(e,i)=>{let n=(0,t.forwardRef)(({className:n,...o},l)=>(0,t.createElement)(a,{ref:l,iconNode:i,className:s(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...o}));return n.displayName=r(e),n};e.s(["default",()=>n],75254)},18566,(e,t,r)=>{t.exports=e.r(76562)},32341,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(51718);var s=e.i(18357),i=e.i(59141),a=e.i(18566);let n=(0,r.createContext)({});function o({children:e}){let[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),d=(0,a.useRouter)();(0,r.useEffect)(()=>{let e=(0,s.onAuthStateChanged)(i.auth,e=>{e?l(e):l(null),u(!1)});return()=>e()},[]);let h=async(e,t)=>{await (0,s.signInWithEmailAndPassword)(i.auth,e,t)},f=async()=>{await (0,s.signOut)(i.auth),d.push("/login")};return(0,t.jsx)(n.Provider,{value:{user:o,loading:c,signIn:h,signOut:f},children:e})}e.s(["AuthProvider",()=>o,"useAuth",0,()=>(0,r.useContext)(n)])},72498,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(1465);var s=e.i(34991);e.i(36180);var i=e.i(98925),a=e.i(59141);let n={villages:{},classes:{},sections:{},subjects:{},classSections:{},classSubjects:{},subjectTeachers:{},homeworkSubjects:{},roles:{},branding:{schoolName:"Spoorthy Concept School",address:"",schoolLogo:"",principalSignature:""},academicYears:{},selectedYear:"2025-2026",setSelectedYear:()=>{},loading:!0},o=(0,r.createContext)(n);function l(){return(0,r.useContext)(o)}function c(e){let{villages:t}=l();return t[e]?.name||"Unknown Village"}function u(e){let{classes:t}=l();return t[e]?.name||e}function d(e){let{subjects:t}=l();return t[e]?.name||e}e.s(["MasterDataProvider",0,({children:e})=>{let[l,c]=(0,r.useState)({...n}),[u,d]=(0,r.useState)("2025-2026");return(0,r.useEffect)(()=>{let e=(0,s.ref)(a.rtdb,"master"),t=e=>{let t=e.val()||{},r={loading:!1,branding:t.branding||n.branding};["villages","classes","sections","subjects","classSections","classSubjects","subjectTeachers","homeworkSubjects","roles"].forEach(e=>{let s={...t[e]||{}};Object.keys(s).forEach(e=>{"object"==typeof s[e]&&null!==s[e]&&(s[e].id=e)}),r[e]=s}),c(e=>({...e,...r}))};return(0,s.onValue)(e,t),()=>(0,s.off)(e,"value",t)},[]),(0,r.useEffect)(()=>{let e=(0,i.onSnapshot)((0,i.doc)(a.db,"config","academic_years"),e=>{if(e.exists()){let t=e.data(),r={};t.currentYear&&(r[t.currentYear]={id:t.currentYear,name:t.currentYear,active:!0,startDate:t.currentYearStartDate,endDate:null},localStorage.getItem("spoorthy_academic_year")||d(t.currentYear)),Array.isArray(t.upcoming)&&t.upcoming.forEach(e=>{let t="string"==typeof e?e:e.year;r[t]={id:t,name:t,active:!1,startDate:"object"==typeof e?e.startDate:null,endDate:null}}),Array.isArray(t.history)&&t.history.forEach(e=>{r[e.year]={id:e.year,name:e.year,active:!1,startDate:e.startDate,endDate:e.archivedAt}}),0===Object.keys(r).length&&(r["2025-2026"]={id:"2025-2026",name:"2025-2026",active:!0,startDate:"",endDate:""}),c(e=>({...e,academicYears:r}))}});return()=>e()},[]),(0,t.jsx)(o.Provider,{value:{...l,selectedYear:u,setSelectedYear:e=>{d(e),localStorage.setItem("spoorthy_academic_year",e)}},children:e})},"useClassName",()=>u,"useMasterData",()=>l,"useSubjectName",()=>d,"useVillageName",()=>c])},80691,e=>{"use strict";let t;var r=e.i(71645);let s=e=>{let t,r=new Set,s=(e,s)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=s?s:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,a={setState:s,getState:i,getInitialState:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e))},n=t=e(s,i,a);return a},i=e=>{let t=e?s(e):s,i=e=>(function(e,t=e=>e){let s=r.default.useSyncExternalStore(e.subscribe,r.default.useCallback(()=>t(e.getState()),[e,t]),r.default.useCallback(()=>t(e.getInitialState()),[e,t]));return r.default.useDebugValue(s),s})(t,e);return Object.assign(i,t),i},a=(t=e=>({toasts:[],history:[],addToast:t=>{let r=Math.random().toString(36).substring(2,9),s={...t,id:r,timestamp:Date.now()};e(e=>({toasts:[...e.toasts,s],history:[s,...e.history].slice(0,50)})),t.duration!==1/0&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==r)}))},t.duration||5e3)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),dismissToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearHistory:()=>e({history:[]}),removeFromHistory:t=>e(e=>({history:e.history.filter(e=>e.id!==t)}))}))?i(t):i;e.s(["toast",0,e=>a.getState().addToast(e),"useToastStore",0,a],80691)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},52571,e=>{"use strict";let t=(0,e.i(75254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>t],52571)},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),s=e.i(31178),i=e.i(47414),a=e.i(74008),n=e.i(21476),o=e.i(72846),l=r,c=e.i(37806);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class d extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,r=(0,o.isHTMLElement)(e)&&e.offsetWidth||0,s=(0,o.isHTMLElement)(e)&&e.offsetHeight||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left,i.bottom=s-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:s,anchorX:i,anchorY:a,root:n,pop:o}){let h=(0,l.useId)(),f=(0,l.useRef)(null),p=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=(0,l.useContext)(c.MotionConfigContext),g=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,s=e.map(e=>{let s=u(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():u(e[t],null)}}}}(...e),e)}(f,e.props?.ref??e?.ref);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:l,right:c,bottom:u}=p.current;if(s||!1===o||!f.current||!e||!t)return;let d="left"===i?`left: ${l}`:`right: ${c}`,g="bottom"===a?`bottom: ${u}`:`top: ${r}`;f.current.dataset.motionPopId=h;let y=document.createElement("style");m&&(y.nonce=m);let x=n??document.head;return x.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            ${g}px !important;
          }
        `),()=>{x.contains(y)&&x.removeChild(y)}},[s]),(0,t.jsx)(d,{isPresent:s,childRef:f,sizeRef:p,pop:o,children:!1===o?e:l.cloneElement(e,{ref:g})})}let f=({children:e,initial:s,isPresent:a,onExitComplete:o,custom:l,presenceAffectsLayout:c,mode:u,anchorX:d,anchorY:f,root:m})=>{let g=(0,i.useConstant)(p),y=(0,r.useId)(),x=!0,b=(0,r.useMemo)(()=>(x=!1,{id:y,initial:s,isPresent:a,custom:l,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;o&&o()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[a,g,o]);return c&&x&&(b={...b}),(0,r.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[a]),r.useEffect(()=>{a||g.size||!o||o()},[a]),e=(0,t.jsx)(h,{pop:"popLayout"===u,isPresent:a,anchorX:d,anchorY:f,root:m,children:e}),(0,t.jsx)(n.PresenceContext.Provider,{value:b,children:e})};function p(){return new Map}var m=e.i(64978);let g=e=>e.key||"";function y(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let x=({children:e,custom:n,initial:o=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:u="sync",propagate:d=!1,anchorX:h="left",anchorY:p="top",root:x})=>{let[b,w]=(0,m.usePresence)(d),v=(0,r.useMemo)(()=>y(e),[e]),j=d&&!b?[]:v.map(g),C=(0,r.useRef)(!0),S=(0,r.useRef)(v),k=(0,i.useConstant)(()=>new Map),E=(0,r.useRef)(new Set),[A,D]=(0,r.useState)(v),[N,T]=(0,r.useState)(v);(0,a.useIsomorphicLayoutEffect)(()=>{C.current=!1,S.current=v;for(let e=0;e<N.length;e++){let t=g(N[e]);j.includes(t)?(k.delete(t),E.current.delete(t)):!0!==k.get(t)&&k.set(t,!1)}},[N,j.length,j.join("-")]);let _=[];if(v!==A){let e=[...v];for(let t=0;t<N.length;t++){let r=N[t],s=g(r);j.includes(s)||(e.splice(t,0,r),_.push(r))}return"wait"===u&&_.length&&(e=_),T(y(e)),D(v),null}let{forceRender:M}=(0,r.useContext)(s.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:N.map(e=>{let r=g(e),s=(!d||!!b)&&(v===N||j.includes(r));return(0,t.jsx)(f,{isPresent:s,initial:(!C.current||!!o)&&void 0,custom:n,presenceAffectsLayout:c,mode:u,root:x,onExitComplete:s?void 0:()=>{if(E.current.has(r)||(E.current.add(r),!k.has(r)))return;k.set(r,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(M?.(),T(S.current),d&&w?.(),l&&l())},anchorX:h,anchorY:p,children:e},r)})})};e.s(["AnimatePresence",()=>x],88653)},77855,e=>{"use strict";var t=e.i(43476),r=e.i(88653),s=e.i(46932),i=e.i(80691),a=e.i(37727),n=e.i(69638),o=e.i(63209),l=e.i(52571),c=e.i(78894),u=e.i(75157);let d={success:(0,t.jsx)(n.CheckCircle,{className:"w-5 h-5 text-emerald-500"}),error:(0,t.jsx)(o.AlertCircle,{className:"w-5 h-5 text-red-500"}),info:(0,t.jsx)(l.Info,{className:"w-5 h-5 text-blue-500"}),warning:(0,t.jsx)(c.AlertTriangle,{className:"w-5 h-5 text-amber-500"})},h={success:"bg-zinc-950/90 border-emerald-500/50 shadow-[0_0_30px_-10px_rgba(16,185,129,0.3)]",error:"bg-zinc-950/90 border-red-500/50 shadow-[0_0_30px_-10px_rgba(239,68,68,0.3)]",info:"bg-zinc-950/90 border-blue-500/50 shadow-[0_0_30px_-10px_rgba(59,130,246,0.3)]",warning:"bg-zinc-950/90 border-amber-500/50 shadow-[0_0_30px_-10px_rgba(245,158,11,0.3)]"};function f(){let{toasts:e,removeToast:n}=(0,i.useToastStore)();return(0,t.jsx)("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 w-full max-w-sm pointer-events-none p-4 sm:p-0",children:(0,t.jsx)(r.AnimatePresence,{mode:"popLayout",children:e.map(e=>(0,t.jsxs)(s.motion.div,{layout:!0,initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.2}},className:(0,u.cn)("pointer-events-auto relative flex w-full items-start gap-4 overflow-hidden rounded-xl border p-4 shadow-xl pr-10 backdrop-blur-md transition-all",e.type?h[e.type]:"bg-zinc-950/90 border-white/10 text-white"),children:[e.type&&(0,t.jsx)("div",{className:"shrink-0 mt-0.5",children:d[e.type]}),(0,t.jsxs)("div",{className:"flex-1 grid gap-1",children:[e.title&&(0,t.jsx)("div",{className:(0,u.cn)("text-sm font-bold leading-tight","error"===e.type?"text-red-200":"text-white"),children:e.title}),e.description&&(0,t.jsx)("div",{className:"text-xs text-zinc-400 leading-relaxed font-medium",children:e.description})]}),(0,t.jsx)("button",{onClick:()=>n(e.id),className:"absolute right-3 top-3 rounded-full p-1 text-zinc-500 hover:bg-white/10 hover:text-white transition-colors",children:(0,t.jsx)(a.X,{className:"w-4 h-4"})})]},e.id))})})}e.s(["Toaster",()=>f])},22589,e=>{"use strict";var t=e.i(71645);e.i(36180);var r=e.i(98925),s=e.i(59141),i=e.i(80691);function a(){let e=(0,t.useRef)(!0);return(0,t.useEffect)(()=>{let t,a=t=>{if(e.current){e.current=!1,t.docs.forEach(e=>{let t=e.data(),r=t.date?.seconds?new Date(1e3*t.date.seconds):null;if(r){let e=new Date;e.setHours(0,0,0,0);let s=(r.getTime()-e.getTime())/864e5;s>=0&&s<=2&&(0,i.toast)({title:r.getTime()===e.getTime()?"Today is a Holiday!":"Upcoming Holiday",description:`${t.title} on ${r.toLocaleDateString()}`,type:"info",duration:8e3})}});return}t.docChanges().forEach(e=>{if("added"===e.type){let t=e.doc.data(),r=t.date?.seconds?new Date(1e3*t.date.seconds):null;r&&(0,i.toast)({title:"ðŸŽ‰ Holiday Declared!",description:`${t.title} on ${r.toLocaleDateString()}`,type:"info",duration:1e4})}})},n=(0,r.query)((0,r.collection)(s.db,"notices"),(0,r.where)("type","==","HOLIDAY"),(0,r.orderBy)("date","desc"),(0,r.limit)(10));return t=(0,r.onSnapshot)(n,a,t=>{if(t.message.includes("index")){console.warn("[NotificationManager] Index missing, falling back to unordered query.");let t=(0,r.query)((0,r.collection)(s.db,"notices"),(0,r.where)("type","==","HOLIDAY"),(0,r.limit)(20));(0,r.onSnapshot)(t,t=>{e.current?a({docs:[...t.docs].sort((e,t)=>{let r=e.data().date?.seconds||0;return(t.data().date?.seconds||0)-r}),docChanges:()=>[]}):a(t)})}else console.error("Notice notification error:",t)}),()=>t?.()},[]),null}e.s(["NotificationManager",()=>a])}]);