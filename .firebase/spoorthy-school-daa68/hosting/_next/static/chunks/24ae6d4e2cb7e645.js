(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99682,e=>{"use strict";var a=e.i(71645);function s(e){let s=a.useRef({value:e,previous:e});return a.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},93479,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,type:s,...r},l)=>(0,a.jsx)("input",{type:s,className:(0,t.cn)("flex h-12 w-full rounded-full border border-white/10 bg-[#282828] px-4 py-3 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all shadow-inner hover:bg-[#333]",e),ref:l,...r}));r.displayName="Input",e.s(["Input",()=>r])},10204,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("label",{ref:r,className:(0,t.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));r.displayName="Label",e.s(["Label",()=>r])},76639,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(26999),r=e.i(37727),l=e.i(75157);let i=t.Root,o=t.Trigger,d=t.Portal;t.Close;let n=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)(t.Overlay,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));n.displayName=t.Overlay.displayName;let c=s.forwardRef(({className:e,children:s,...i},o)=>(0,a.jsxs)(d,{children:[(0,a.jsx)(n,{}),(0,a.jsxs)(t.Content,{ref:o,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...i,children:[s,(0,a.jsxs)(t.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(r.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=t.Content.displayName;let m=({className:e,...s})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});m.displayName="DialogHeader";let u=({className:e,...s})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});u.displayName="DialogFooter";let p=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)(t.Title,{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));p.displayName=t.Title.displayName;let x=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)(t.Description,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));x.displayName=t.Description.displayName,e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>x,"DialogFooter",()=>u,"DialogHeader",()=>m,"DialogTitle",()=>p,"DialogTrigger",()=>o])},84774,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,t.cn)("w-full caption-bottom text-sm",e),...s})}));r.displayName="Table";let l=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("thead",{ref:r,className:(0,t.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,t.cn)("[&_tr:last-child]:border-0",e),...s}));i.displayName="TableBody",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,t.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let o=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tr",{ref:r,className:(0,t.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));o.displayName="TableRow";let d=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("th",{ref:r,className:(0,t.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));d.displayName="TableHead";let n=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("td",{ref:r,className:(0,t.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));n.displayName="TableCell",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("caption",{ref:r,className:(0,t.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>i,"TableCell",()=>n,"TableHead",()=>d,"TableHeader",()=>l,"TableRow",()=>o])},69049,41071,e=>{"use strict";var a=e.i(43476),s=e.i(84774),t=e.i(75157),r=e.i(19455);let l=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>l],41071);var i=e.i(55146);function o({data:e,columns:o,isLoading:d,onRowClick:n,actions:c}){return d?(0,a.jsx)("div",{className:"w-full h-48 flex items-center justify-center bg-white/5 rounded-xl animate-pulse",children:(0,a.jsx)("div",{className:"h-4 w-4 bg-accent/50 rounded-full animate-ping"})}):(0,a.jsxs)("div",{className:"w-full space-y-3",children:[(0,a.jsx)("div",{className:"overflow-x-auto rounded-xl md:rounded-2xl border border-white/10 bg-black/20 backdrop-blur-md custom-scrollbar",children:(0,a.jsxs)(s.Table,{className:"w-full",children:[(0,a.jsx)(s.TableHeader,{className:"bg-white/5",children:(0,a.jsxs)(s.TableRow,{className:"border-white/10 hover:bg-transparent",children:[o.map(e=>(0,a.jsx)(s.TableHead,{className:(0,t.cn)("text-muted-foreground font-black uppercase text-[7px] md:text-[10px] tracking-widest h-8 md:h-12 whitespace-nowrap px-2 md:px-6 italic",e.headerClassName),children:e.header},e.key)),c&&(0,a.jsx)(s.TableHead,{className:"w-[30px] md:w-[50px] whitespace-nowrap px-2 md:px-6"})]})}),(0,a.jsx)(s.TableBody,{children:0===e.length?(0,a.jsx)(s.TableRow,{children:(0,a.jsx)(s.TableCell,{colSpan:o.length+ +!!c,className:"h-24 md:h-32 text-center text-muted-foreground border-white/10 whitespace-nowrap text-[10px] md:text-sm italic",children:"No results found."})}):e.map((e,d)=>(0,a.jsxs)(s.TableRow,{className:(0,t.cn)("border-white/5 transition-all duration-300 hover:bg-[#64FFDA]/5 group cursor-default",n&&"cursor-pointer"),onClick:()=>n?.(e),children:[o.map(r=>(0,a.jsx)(s.TableCell,{className:(0,t.cn)("py-2 md:py-4 px-2 md:px-6 font-medium whitespace-nowrap text-[10px] md:text-sm",r.cellClassName),children:(0,a.jsx)("div",{className:"flex flex-col",children:r.render?r.render(e,d):(0,a.jsx)("span",{className:"text-white group-hover:text-accent transition-colors",children:e[r.key]})})},`${e.id}-${r.key}`)),c&&(0,a.jsx)(s.TableCell,{className:"px-2 md:px-6",children:(0,a.jsxs)(i.DropdownMenu,{children:[(0,a.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{variant:"ghost",className:"h-7 w-7 md:h-8 md:w-8 p-0 hover:bg-white/10 text-muted-foreground hover:text-white",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,a.jsx)(l,{className:"h-3 w-3 md:h-4 md:w-4"})]})}),(0,a.jsxs)(i.DropdownMenuContent,{align:"end",className:"bg-[#0A192F] border-white/10 backdrop-blur-xl rounded-xl",children:[(0,a.jsx)(i.DropdownMenuLabel,{className:"text-[10px] uppercase font-black tracking-widest text-muted-foreground/60 p-3 italic",children:"Operations"}),(0,a.jsx)(i.DropdownMenuSeparator,{className:"bg-white/5"}),(0,a.jsx)("div",{className:"p-1",children:c(e)})]})]})})]},e.id||d))})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 md:py-4 px-3 md:px-6 bg-white/5 border border-white/10 rounded-xl md:rounded-2xl",children:[(0,a.jsxs)("div",{className:"text-[8px] md:text-xs font-black uppercase tracking-widest text-muted-foreground italic",children:["Scope: ",(0,a.jsxs)("span",{className:"text-white ml-1",children:[e.length," items"]})]}),(0,a.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Prev"}),(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",disabled:!0,className:"h-6 md:h-8 px-2 md:px-4 text-[8px] md:text-[10px] font-black uppercase tracking-widest border border-white/10 opacity-50",children:"Next"})]})]})]})}e.s(["DataTable",()=>o],69049)},88511,e=>{"use strict";let a=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],88511)},99375,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(81140),r=e.i(20783),l=e.i(30030),i=e.i(69340),o=e.i(99682),d=e.i(35804),n=e.i(48425),c="Switch",[m,u]=(0,l.createContextScope)(c),[p,x]=m(c),h=s.forwardRef((e,l)=>{let{__scopeSwitch:o,name:d,checked:m,defaultChecked:u,required:x,disabled:h,value:f="on",onCheckedChange:b,form:y,...N}=e,[j,v]=s.useState(null),k=(0,r.useComposedRefs)(l,e=>v(e)),C=s.useRef(!1),T=!j||y||!!j.closest("form"),[R,S]=(0,i.useControllableState)({prop:m,defaultProp:u??!1,onChange:b,caller:c});return(0,a.jsxs)(p,{scope:o,checked:R,disabled:h,children:[(0,a.jsx)(n.Primitive.button,{type:"button",role:"switch","aria-checked":R,"aria-required":x,"data-state":w(R),"data-disabled":h?"":void 0,disabled:h,value:f,...N,ref:k,onClick:(0,t.composeEventHandlers)(e.onClick,e=>{S(e=>!e),T&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),T&&(0,a.jsx)(g,{control:j,bubbles:!C.current,name:d,value:f,checked:R,required:x,disabled:h,form:y,style:{transform:"translateX(-100%)"}})]})});h.displayName=c;var f="SwitchThumb",b=s.forwardRef((e,s)=>{let{__scopeSwitch:t,...r}=e,l=x(f,t);return(0,a.jsx)(n.Primitive.span,{"data-state":w(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:s})});b.displayName=f;var g=s.forwardRef(({__scopeSwitch:e,control:t,checked:l,bubbles:i=!0,...n},c)=>{let m=s.useRef(null),u=(0,r.useComposedRefs)(m,c),p=(0,o.usePrevious)(l),x=(0,d.useSize)(t);return s.useEffect(()=>{let e=m.current;if(!e)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==l&&a){let s=new Event("click",{bubbles:i});a.call(e,l),e.dispatchEvent(s)}},[p,l,i]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...n,tabIndex:-1,ref:u,style:{...n.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function w(e){return e?"checked":"unchecked"}g.displayName="SwitchBubbleInput";var y=e.i(75157);let N=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(h,{className:(0,y.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:(0,a.jsx)(b,{className:(0,y.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));N.displayName=h.displayName,e.s(["Switch",()=>N],99375)},69455,e=>{"use strict";var a=e.i(43476),s=e.i(71645);e.i(36180);var t=e.i(98925),r=e.i(59141),l=e.i(19455),i=e.i(93479),o=e.i(10204),d=e.i(99375),n=e.i(76639),c=e.i(31278),m=e.i(7233),u=e.i(88511),p=e.i(27612),x=e.i(69049);function h(){let[e,h]=(0,s.useState)([]),[f,b]=(0,s.useState)(!0),[g,w]=(0,s.useState)(!1),[y,N]=(0,s.useState)(null),[j,v]=(0,s.useState)({name:"",code:"",hasLogin:!1,basicSalary:0,isActive:!0}),[k,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{T()},[]);let T=async()=>{try{let e=(0,t.query)((0,t.collection)(r.db,"master_staff_roles"),(0,t.orderBy)("name")),a=(await (0,t.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}));h(a)}catch(e){console.error("Error fetching roles:",e)}finally{b(!1)}},R=async e=>{e.preventDefault(),C(!0);try{if(!j.name||!j.code)throw Error("Name and Code are required.");if(!j.hasLogin&&(void 0===j.basicSalary||j.basicSalary<0))throw Error("Basic Salary is required for non-login roles.");let e={name:j.name,code:j.code.toUpperCase(),hasLogin:j.hasLogin||!1,basicSalary:j.hasLogin?0:Number(j.basicSalary),isActive:void 0===j.isActive||j.isActive,updatedAt:t.Timestamp.now()};y?(await (0,t.updateDoc)((0,t.doc)(r.db,"master_staff_roles",y.id),e),alert("Role updated successfully!")):(await (0,t.addDoc)((0,t.collection)(r.db,"master_staff_roles"),{...e,createdAt:t.Timestamp.now()}),alert("Role created successfully!")),w(!1),N(null),v({name:"",code:"",hasLogin:!1,basicSalary:0,isActive:!0}),T()}catch(e){alert(e.message)}finally{C(!1)}},S=async e=>{if(confirm("Are you sure? This role cannot be deleted if assigned to staff."))try{await (0,t.deleteDoc)((0,t.doc)(r.db,"master_staff_roles",e)),T(),alert("Role deleted.")}catch(e){console.error(e),alert("Failed to delete.")}},D=[{key:"name",header:"Role Name",render:e=>(0,a.jsx)("span",{className:"font-bold",children:e.name})},{key:"code",header:"Code",render:e=>(0,a.jsx)("span",{className:"font-mono text-xs bg-white/5 px-2 py-1 rounded",children:e.code})},{key:"hasLogin",header:"Access Type",render:e=>e.hasLogin?(0,a.jsx)("span",{className:"text-emerald-400 text-xs px-2 py-1 bg-emerald-400/10 rounded-full border border-emerald-400/20",children:"Login Access"}):(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:"No Login"})},{key:"basicSalary",header:"Base Salary",render:e=>e.hasLogin?"-":`₹${e.basicSalary?.toLocaleString()}`},{key:"isActive",header:"Status",render:e=>e.isActive?(0,a.jsx)("span",{className:"text-green-500",children:"Active"}):(0,a.jsx)("span",{className:"text-red-500",children:"Inactive"})}];return(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 sm:gap-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold",children:"Staff Roles"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage job titles, permissions, and base salaries."})]}),(0,a.jsxs)(l.Button,{onClick:()=>{N(null),v({name:"",code:"",hasLogin:!1,basicSalary:0,isActive:!0}),w(!0)},className:"w-full sm:w-auto bg-white text-black hover:bg-zinc-200",children:[(0,a.jsx)(m.Plus,{className:"w-4 h-4 mr-2"})," Add Role"]})]}),(0,a.jsx)(n.Dialog,{open:g,onOpenChange:w,children:(0,a.jsxs)(n.DialogContent,{className:"bg-black/95 border-white/10 text-white",children:[(0,a.jsx)(n.DialogHeader,{children:(0,a.jsx)(n.DialogTitle,{children:y?"Edit Role":"Create New Role"})}),(0,a.jsxs)("form",{onSubmit:R,className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(o.Label,{children:["Role Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.Input,{placeholder:"e.g. Driver",value:j.name,onChange:e=>v({...j,name:e.target.value}),className:"bg-white/5 border-white/10",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(o.Label,{children:["Role Code ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.Input,{placeholder:"e.g. DRV",value:j.code,onChange:e=>v({...j,code:e.target.value.toUpperCase()}),className:"bg-white/5 border-white/10 font-mono uppercase",maxLength:4,required:!0})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(o.Label,{children:"Login Access"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable for Teachers/Admins only."})]}),(0,a.jsx)(d.Switch,{checked:j.hasLogin,onCheckedChange:e=>v({...j,hasLogin:e,basicSalary:e?0:j.basicSalary})})]}),!j.hasLogin&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(o.Label,{children:["Basic Salary (₹) ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.Input,{type:"number",min:"0",value:j.basicSalary,onChange:e=>v({...j,basicSalary:Number(e.target.value)}),className:"bg-white/5 border-white/10",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Switch,{checked:j.isActive,onCheckedChange:e=>v({...j,isActive:e})}),(0,a.jsx)(o.Label,{children:"Active"})]}),(0,a.jsx)(n.DialogFooter,{children:(0,a.jsx)(l.Button,{type:"submit",disabled:k,className:"bg-white text-black hover:bg-zinc-200",children:k?(0,a.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}):y?"Save Changes":"Create Role"})})]})]})}),(0,a.jsx)(x.DataTable,{columns:D,data:e,isLoading:f,actions:e=>(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:a=>{a.stopPropagation(),N(e),v(e),w(!0)},children:(0,a.jsx)(u.Edit,{className:"w-4 h-4 text-muted-foreground hover:text-white"})}),(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:a=>{a.stopPropagation(),S(e.id)},className:"hover:bg-red-500/10",children:(0,a.jsx)(p.Trash2,{className:"w-4 h-4 text-muted-foreground hover:text-red-500"})})]})})]})}e.s(["default",()=>h])}]);